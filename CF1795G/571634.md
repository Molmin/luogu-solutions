### [CF1795G](https://codeforces.com/contest/1795/problem/G)

如果将每个点 $i$ 的权值视为 $deg_i-a_i$，发现删点的过程和拓扑排序非常相似。

因为题目保证有解，所以我们可以先跑一边拓扑排序求出一种方案，并建出一张有向图，如果删除 $i$ 点时 $j$ 点还未删除并且在原图中 $i,j$ 之间有边，连一条从 $i$ 点到 $j$ 点边。

假设在有向图中 $x$ 能到达 $y$，那么就说明在所有方案中 $x$ 都在 $y$ 的前面被删掉，反之如果 $x$ 不能到达 $y$，就说明 $y$ 也可以在 $x$ 点的前面被删掉，$(x,y)$ 是好的。

所以用总对数 $\frac{n(n-1)}{2}$ 减去有向图中联通的点对数就是答案。

求有向图中一个点能被哪些点到，可以用 $\verb!std::bitset!$，时间复杂度是 $O(\frac{n^2}{64})$，时间可以接受，但是空间承受不了，可以将所有点分段处理。

[提交记录](https://codeforces.com/contest/1795/submission/194326309)。