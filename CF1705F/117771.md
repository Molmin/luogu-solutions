一个显然的高斯消元暴力：

随便整 $n$ 个答案串，解异或方程组即可。

询问次数 $n$，复杂度 $O(\frac{n^3}{w})$ 或者 $O(n^3)$。

询问次数稍微有点多，如果要通过得做到 $\frac{2}{3}n$ 级别的询问次数。

我们考虑怎么用最少的次数确定三个问题的答案。

如果最开始询问一次全 `T` 的串再询问这三个位置是 `F`，其余是 `T` 的答案串，就可以确定这三个当中对的个数。

设当前三个位置是 $p,p+1,p+2$，这三个中对的个数是 $x$。

$x=0$ 或者 $x=3$ 的情况显然；接着考虑怎么确定 $x=1$ 时哪个为 `T`。

如果已知 $x$，那么询问 `TFT` 和 `FTT` 各一次就可以确定这三个位置的具体情况。

我们可以最开始询问一次 `FTFTFTFT....FT` 这样的串，考虑到 $p,p+1,p+2$ 时执行如下操作：

* 将 `FTFTFTFT....FT` 的第 $p,p+1$ 位取反询问一次。

* 根据得出的 $x$ 确定这三位的具体情况。

举例（$x=1$ 时）：

```
TFT : r1
FTT : r2
```

如果第 $p$ 位是 `T` ，那么 $r2-r1=-1$；如果第 $p+1$ 位是 `T` ，那么 $r2-r1=1$；如果第 $p+2$ 位是 `T` ，那么 $r2-r1=0$。

类比上述情况，可在 $669$ 次之内求出所有的答案。