找到一到比较水的黑题。

更好的题面：

在直角坐标系上有 $n$ 座塔。

要求把这些塔分成两组，使得同组内的两座塔的曼哈顿距离的最大值最小，并求出在此前提下求出有多少种分组方案，对 $10^9+7$ 取模。

$n\le5000$。

看到最大值最小，想到二分答案，假设我们二分了一个答案 $x$，考虑如何判定。

将所有距离小于等于 $x$ 的点连边不行，那么我们将所有距离大于 $x$ 的点连边，显然这些点不能同时处于一组，即这张图必须是二分图。

判断二分图用染色法即可。那么我们就找到了第一问的答案。

发现在最后建出的这张图上（也就是 $x$ 等于第一问的答案）不同连通块之间互不干扰，每个连通块又有 $2$ 种方案（把两组的塔互换即可），假设最后有 $k$ 个连通块，那么答案就是 $2^k$。

时间复杂度 $O(n^2\log W)$，其中 $W=2\times5000=10000$ 为两个塔的最大距离。~~在 CF 神机的加持下稳过。~~