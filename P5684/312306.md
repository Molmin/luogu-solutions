## 题目描述
[题目传送门](https://www.luogu.com.cn/problem/P5684)

## 思路简述

前置芝士：对于一个序列，分别有 $m_1$ 个 $x_1$，$m_2$ 个 $x_2$……$m_n$ 个 $x_n$，则它的不同的排列个数有 $\prod_{i=1}^nC_{\sum_{j=i}^nm_j}^{m_i}$ 个。

对于这题，我们先假设相同字符是相同的。(相同字符之间不存在先后顺序）

则可以求出所有能构成字符串个数 $res1$（结合前置芝士）。

**正难则反**，我们可以求出能构成回文串的个数 $res2$。

接下来是如何求解 $res2$:

1. $n$ 为奇数且出现个数为奇数的字符不止一个或 $n$ 为偶数且并不是全部字符出现个数为偶数时，$res2=0$。
2. 如果不满足上面情况，则说明一定存在回文串。根据回文串的对称性，我们可以通过确定字符串的前半部分的状态，以此确定后半部分。而确定前半部分状态不存在任何限制，使用前置芝士即可求出 $res2$。

则在相同字符相同前提下的答案为 $res1-res2$。

最后记得给相同字符全排列，最终答案为 $(res1-res2)\times \prod(\texttt{字母a...c出现个数})!$。

时间复杂度 $O(n)$。

## 丑陋の代码
仅供参考。

[click_here](https://www.luogu.com.cn/paste/irqziaq1)