题目大意：你要构造一个长度为 $n$ 的 `01` 串，它的价值由 $m$ 条规则组成，每条规则如下：
+ 若在区间 $[l_i,r_i]$ 中有 `1`，则会获得 $a_i$ 的价值（注意：$a_i$ 可能为负数）。

求可能的最大价值。

数据范围：$n\leq 10^5$。

按 $r_i$ 排序，对于每个 $r_i$ 分别计算到 $l_i$ 的贡献。

这道题的思路是 **先设计出 $O(N^2)$ 的状态再优化**，优化就比较套路了。

具体来说，可以设 $f(i,j)$ 表示到第 $i$ 个字符并且上一个选的字符是 $j$（$j=i$ 表示选了第 $i$ 个字符）的最大价值。

转移如下：

$$
\begin{cases}
f(i,i)=\max_{j<i}f(i-1,j)\\
f(i,j)=f(i-1,j)+\sum_{r_k=i,l_k\leq j}a_k
\end{cases}
$$

这个东西用线段树搞一下就行了。

**[代码](https://atcoder.jp/contests/dp/submissions/33892793)**