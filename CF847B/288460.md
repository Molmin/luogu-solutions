题意：

把一个数组分成若干个新的单调增的数组，每次选的元素若比新数组最后一个元素大则加入新数组。

$n\leq 10^6$。

---

对于每一次的组成新数组，新数组中后一个元素都是前一个元素之后第一个比它大的元素。

如果对于每一个新的数组只考虑最后的一个数的大小的话，最后会形成一个单调递减的序列，每次取出一个新的元素，若有数比他小，则可以与已有的新数组连接上。（笔者语言表述的不好，若难以理解可以直接看代码）。

如果有多个数组的尾数比该元素小，则接在其中尾数最大的一个数组后面。这个过程可以用二分查找来实现。


----

核心代码：

```cpp
vector<int> v[Maxn];
int main()
{
    scanf("%d",&n);
    for(int i=1;i<=n;i++)
    {
        scanf("%d",&x);
        p=lower_bound(a,a+n+1,x)-a-1;
        a[p]=x;v[p].push_back(x);//合并，更新尾数 
    }
    for(int i=n;i>=0&&v[i].size();i--,puts(""))
    for(int j=0;j<v[i].size();j++)printf("%d ",v[i][j]);
}
```