[题目](https://www.luogu.org/problemnew/show/P1022)

嗯......感觉这道题不难，但是好坑......

------------

**【分析】**
-------------
正常人做这种数学题时，我们一般先进行移项。

将含未知数的移到左边，不含未知数的移到等式右边。

接着，两边分别化简，然后左边的除到右边，得到答案。

这题的思路也大概如此。

因此，我们在输入等号前，输入的常数应化为其相反数，系数不变；输入等号后，输入的系数应化为其相反数，常数不变(移项会变号)。

那如何判断是常数还是系数呢?实质上，系数的后面一定跟有未知数。只要判断下一个字符是不是字母就可以确定是哪一个了。

有人可能会问，如果这个是常数，那不就相当于将下一项的正负('+'或'-')也给输入了吗?

所以我们这里可以优雅地处理一下(论如何优雅地处理代(zhuang)码(bi)2333)：

如果下一项是字母，就再次输入字符，保证其与不是字母的具有一致性。

然后，再将正负性输出，作为下一次的输入。

这样，这个程序的主体就差不多解决完了，剩下的细节修改一下就行了。

------------
**【代码】**
-------------
本蒟蒻就奉上代码了:
```cpp
#include<cstdio>
#include<cctype>
using namespace std;
float x=0,y=0;
char b=0;
int read(int k){//k为上一项传下来的正负号,在这里当作符号使用 
	float ans=0;//储存数值 
	char c=getchar();
	while(!isalpha(c)&&!isdigit(c)) {
		if(c=='-') k=-k;//如果得到'-',则将k变号 
		c=getchar();
	}
	while(isdigit(c)) {//数值输入 
		ans=ans*10+c-'0';
		c=getchar();
	}
	if(isalpha(c)) {//如果是常数 
		x+=k*ans;//等式左边系数不变号 
		ans=0;
		if(!isalpha(b)) b=c;//若还未储存变量名称，则储存一下 
		c=getchar();//保持与常数一致 
	}
	y+=(-k)*ans;//等式左边常数变号 
	return (c=='-')?(-1):((c=='+')?1:0);
	//如果下一项是正数，则返回 1 ,负数则返回 -1 ,否则(=或结束)返回 0 
}//仅为等式左边的输入 
int uread(int k) { return read(-k); }
//等式右边的输入全移到左边，相当于全部的前面加一个'-' 
int main(){
	int a=read(1);//第一项默认为正数(负数的话可以在read()中得到修改) 
	while(a) { a=read(a); }//将这一项的正负用以读入这一项 
	a=uread(1);
	while(a) { a=uread(a); }
	printf("%c=%.3f",b,y/x);
	return 0;
}
```

最后安利一下 [本蒟蒻的博客](https://www.luogu.org/blog/JustinRochester/#)