我们首先需要观察出一个性质，就是当图中的连通块的点数均为偶数时，一定能选出一个边集使得所有点的度数均为基数。而如果问题是静态的，最小化最大的一条边则让我们想到如 Kruskal 一样从小到大加边，能加就加，一直到所有连通块的点数均为偶数为止。这么做是因为加入一条边不会使点数为奇数的联通块增多，而我们只关心最大的那条边多大。

然后这个东西看上去就不太能支持动态加任意边权的边，因为这会影响到大量边权的边。正难则反，我们可以发现，每条边出现在边集内的时间一定是一个区间，于是不妨利用线段树分治从后往前加边，先将所有边按边权排序，然后再从后往前处理，先将挂在当前节点的 tag 插入，然后再在全局维护一个指针能加边就加边直到在当前节点状态下不再有点数为奇数的连通块或该指针已遍历完所有的边，同时将这些加进去的边在其对应的时间区间打上 tag，并在每个节点处理完时撤销加入的这些边。这样我们可以发现每条边都只被遍历一次并插入线段树一次，时空复杂度十分正确。

[Code](https://codeforces.com/contest/603/submission/211118417)