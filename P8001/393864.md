题意应该比较清楚了，在此就不多说了。

当字符串 $S$ 相邻两个数相同的对数最大时，很容易可以看出 $S$ 的连通块个数最少。

取出字符时，可以考虑先确定好第一个要取的数（$0$ 或 $1$），然后把读入的字符串以这个数开头的字符**全部取出**，当没有字符可取时，就切换当前取的数。

就拿样例来举个例子。

样例输入：

```
3
0011
0110
1100
```

首先考虑先取 $0$，把所有开头为 $0$ 的字符全部取出后，得到

```
11
110
1100
```

取完后再切换成取 $1$，得到

```
                       //这里有个空行，因为这一行已经全部被取出来了
0
00
```

最后切换成取 $0$，就可以把所有字符取出来了。

然后记录一下取出的串 $S$，它为 $000111111000$，然后直接求答案即可。

需要注意的是，在求解时需要同时考虑先取 $0$ 或先取 $1$，然后这两个求得的结果取 $\max$。

感觉数据造的有点水，这复杂度卡的很悬，但还是过了。