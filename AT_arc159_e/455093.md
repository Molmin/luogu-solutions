本题核心在于如何证明一个区间 $[l,r]$ 内的点在二叉搜索树（结点按照中序遍历编号）上构成的斯坦纳树，其包含的所有结点要么编号在区间内，要么位于区间最左端一点到最右端一点的路径上。其他题解并没有给出详细的相关证明。其余内容其他题解已经很详尽了，在此不在提及。

**引理**：二叉搜索树两个结点的 LCA 的编号介于这两个结点的编号之间。

证明：我们可以将这棵树看成一个自叶子向根不断合并的过程，那么这两个结点应该在它们的 LCA 处被合并。那么两个结点的 LCA 应该满足这两个结点的编号一个比其小，一个比其大，或者两个结点呈现祖孙关系，因为它们应该在 LCA 处被合并。证毕。

此时，我们考虑结点 $v<l$，另一侧同理。假设结点 $v$ 位于 $[l,r]$ 某两个点 $x\rightarrow y$ 的路径上，但是不位于 $l\rightarrow r$ 的路径上。由于树可以看作合并的过程，所以 $lca(l,r)$ 一定是 $lca(x,y)$ 的祖先或两个结点相同。因此，在 $l\rightarrow r$ 路径上一定存在一个 $v'$ 与 $v$ 深度相同，且 $v'\le v$。由于 $v'\not = v$，所以根据**引理**，存在 $l,r$ 中一点和 $x,y$ 中一点，它们的 LCA 位于 $[v’,v]$。而 $[v’,v]$ 位于 $[l,r]$ 之外，与**引理**矛盾，证毕。