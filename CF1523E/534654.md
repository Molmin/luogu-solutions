### Solve

设 $f_i$ 表示点亮 $i$ 盏灯然后立即结束的概率，那么期望答案应该等于 $\sum_{i\in [1,n]}i\cdot f_i$。

定义 $g_i=\sum_{j\in [i,n]}f_j$，那么答案也可以表示为 $\sum_{i\in [1,n]}g_i$。

$g_i$ 只是我们强行定义的，我们需要为 $g_i$ 寻找一个形象化的解释。容易想到 $g_i$ 表示可以点亮 $i-1$ 盏灯还没有结束的概率。

有

$$
g_i=\dfrac{\dbinom{n-(i-1)-(i-2)(k-2)+2-1}{i-1}}{\dbinom{n}{i-1}}=\dfrac{\dbinom{n-(k-1)(i-2)}{i-1}}{\dbinom{n}{i-1}}
$$

即先放出来在 $i-1$ 个，再在 $i-1$ 个的空隙中插入不放的，每个空至少插入 $k-1$ 个，两边的空可以不放。经典的插板法。