~~只有我发现这题和150E几乎是一样的然后抄了个板子改改改就过了吗。~~

首先考虑一个判定问题。

平均值 $\ge mid$。

那么就是存在 $\sum_{l \leq |path| \leq r} x \in path \geq mid \times |path|$。

所以我们把每条路径的权值减掉 $mid$，然后问题等价于找一条大于 0 的路径，这个显然可以长链剖分+线段树。

于是就和 150E 一模一样了，就是把 中位数 改成 平均值，int 改成 double（（