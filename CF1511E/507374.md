很明显，我们不能直接计算出每种情况。

对一段长度为 $len$ 的连续可放置骨牌的格子，如果它的所有规定方案能放置的骨牌数量和为 $f_len$，那么它对答案的贡献就是 $f_{len
}\times 2 ^{tot - len}$
（$tot$ 表示总的可放置骨牌的格子个数）。

问题就是如何计算 $f_{len}$。

容易想到，横着的和竖着的是互不影响的，所以我们可以分开计算，我们以横着的为例。

考虑使用动态规划，定义 $f_i$ 表示长度为 $i$ 的连续可放置骨牌的格子，它的所有规定方案能放置的骨牌数量之和。


考虑最后两个格子如何规定进行转移：$f_i = f_{i - 1} + 2 \times f_{i - 2}  + 2^{i - 2}$。

实现代码时要注意的几个细节：

- 不能直接开二维数组，会 MLE，要开 vector。

- 要正着计算一遍，反着计算一遍。

- 要模 $998244353$ 还要开 long long。

这就是这篇题解的所有内容，希望能帮助到大家！！！