# SP5464 CT-Counting Triangle
题目大意：有一个大小为 $(x+1)(y+1)$ 的二维网格，试计算其中等腰直角三角形的个数。

注意，以下讨论内容均不妨设 $x>y$

引理：一个正方形中有 $4$ 个等腰直角三角形。证明很简单，消去每一个顶点，剩下的 $3$ 个点就能自动组成一个等腰直角三角形。而且容易发现这些等腰直角三角形不重不漏。（对于给定的一个等腰直角三角形，有且仅有一个正方形能框住它）

那么原题就相当于求这个二维网格中有多少个正方形。

先考虑正向的：只需要枚举长度。则有正向正方形的个数有：

$\sum _{i=1}^{y}(x-i+1)(y-i+1)$

其中 $i$ 是在枚举正方形的长度，而后面的部分是在计算以 $i$ 为边长的正方形有多少个，累加求和即可。

接下来考虑斜向的正方形。容易发现，一个斜向的正方形也有且仅有一个正方形能够框住它。那么我们枚举能框住它的正方形即可。能够框住它的正方形内部形成一个弦图，我们看里面能有多少个弦图。设外面的小直角三角形的直角边长为 $i$ 与 $j$ ，（若框住它的正方形边长为 $len$ ，由假设得到 $i,j>0$ ， $i,j<len$ ，且 $i+j=len$ 。思考一下可以发现，这是有序的）那么数对 $(i,j)$ 显然有 $len-1$ 个。那么还是先算边长：

$\sum _{i=1}^{y}(x-i+1)(y-i+1)(i-1)$

总结一下，将 $2$ 个求和合并一下，以及最开始写的引理我们得到本题的答案：

$4\times \sum _{i=1}^{y}(x-i+1)(y-i+1)i$