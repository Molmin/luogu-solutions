考试时没做出来……凑不到如下讲的 $t_i$……

这题其实就是说，你有 $m\le 110$ 个节点，你要造出 $x$ 个环，第 $i$ 个环的大小为 $t_i(\sum_{i=1}^xt_i=m)$，问你如何选择 $t_i$ 使得他们能断定出唯一的一个 $N$：

$$\begin{aligned}N\equiv b_1 \pmod {t_1}\\N\equiv b_2 \pmod {t_2}\\\cdots\cdots\;\;\;\;\;\;\;\;\;\;\;\\N\equiv b_m \pmod {t_m}\\\end{aligned}$$

于是这不就是一个扩展中国剩余定理的板子吗？于是只要断定了 $t_i$，一切就都没问题了。所以我把 $t_i$ 放到最后讲，先讲如何转化后输出询问。

我们以第一个环为例。因为连边是 $i\rightarrow a_i$，所以这意味着我们如果要造成（比如下图）的环，![](https://cdn.luogu.com.cn/upload/image_hosting/61z8jnit.png)
就要 $a$ 数组 $=\{2, 3, 4, 5, 1\}$。于是我们有了想法，就是刚好错开一位连边。然后要求 $N \bmod t_i$，就是环上的一个点 $x$ 的 $(b_x-a_x)\bmod t_i$。于是输出就简单了。

最后来说说凑 $t_i$ 的问题。其实就是 $\sum t_i \le 110$ 且 $\operatorname{lcm}\{ t_i\} \ge 10^9$ 的问题。先把质数表打出来，发现 $2$ 到 $23$ 和为 $100$，但积不够。我们从最简单的情况开始考虑，即增加 $2$ 和 $3$，就可以最大化答案。于是我们先尝试把 $2$ 变成 $8$，发现 $3$ 变不动了，不行；**于是再把 $2$ 变成 $4$，$3$ 刚好变成 $9$，够了 $10^9$ 且和也只是 $108$。** 上面标黑的地方就是我考场没想到的地方。

代码：[38230669](https://atcoder.jp/contests/abc286/submissions/38230669)