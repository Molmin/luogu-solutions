### 2.CF1638B Odd Swap Sort

#### 2.1 题目描述（[传送门](https://www.luogu.com.cn/problem/CF1638B)）

##### 2.1.1 题目大意

给定一个数列 $a_1,a_2,...,a_n$ 。

你可以执行若干次如下的操作：

- 选择一个整数 $i\ (\ 1\leq i< n\ )$ ，如果 $a_i+a_{i+1}$ 为奇数，交换 $a_i$ 和 $a_{i+1}$ 。

问是否可以将该数列排序成非递减数列。

##### 2.1.2 输入格式

第一行一个整数 $t\ (\ 1\leq t\leq 10^5\ )$ ，表示测试组数。

每组第一行一个整数 $n\ (\ 1\leq n\leq 10^5)$ ，表示数列的长度。

每组第二行 $n$ 个整数 $a_1,a_2,...,a_n\ (\ 1\leq a_i\leq 10^9\ )$ ，表示给定的数列。

可以保证 $t$ 组测试的 $n$ 的和不超过 $2·10^5$ 。

##### 2.1.3 输出格式

共 $t$ 行。

对于每组测试，如果你可以将该数列排序成非递减数列，输出 ``Yes`` ；否则，输出 ``No`` 。

##### 2.1.4 样例

###### 输入 #1

```cpp
4
4
1 6 31 14
2
4 2
5
2 9 6 7 10
3
6 6 6
```

###### 输出 #1

```cpp
Yes
No
No
Yes
```

##### 2.1.5 样例解释

- 第一组测试，可以交换 $31$ 和 $14$ （ $31+14=45$ 是奇数）然后得到非递减数列 $[1,6,14,31]$ 。
- 第二组测试，我们想要得到非递减数列就一定要交换 $4$ 和 $2$ ，但这是不可能的，因为 $4+2=6$ 是偶数。
- 第三组测试，没有方法可以使其排序成非递减数列。
- 第四组测试，该数列已经是非递减数列了。

#### 2.2 解题思路

冒泡排序！我们回顾冒泡排序，如果想将一个数放到它该放的位置上，则它需要和它后面所有比它小的数字交换。所以本题我们要考虑的就是：是否有数字存在后面有 **比它小** 的数字且 **奇偶性** 和它相同。

我们可以 $O(n^2)$ 暴力的去判断这个事情，不过看了眼数据范围，还是算了。

我们考虑从后往前考虑，一个数一定会和它前面所有比它大的数字交换。所以我们只需要从后向前枚举，记录枚举过的数列中最小的奇数和偶数。

如果当前枚举到奇数且记录的奇数比它小，则说明该奇数后面存在一个 **比它小** 的 **奇数** 。

同理，如果当前枚举到偶数且记录的偶数比它小，则说明该偶数后面存在一个 **比它小** 的 **偶数** 。

上述两种情况都是无法将原数列排序成非递减数列的。其它情况即可以。

#### 2.3 解题代码

```cpp
#include <iostream>
#include <algorithm>
using namespace std;
int T,n;
int a[100010];
int main()
{
    scanf("%d",&T);
    while(T--)
    {
        scanf("%d",&n);
        for(int i=1;i<=n;i++)scanf("%d",&a[i]);
        int odd=2147483647,even=2147483646;//初始的奇偶数一定比所有数都大（大于1e9）
        bool flag=true;
        for(int i=n;i>=1;i--)
        {
            if(a[i]%2)
            {
                if(odd<a[i]){flag=false;break;}
                odd=a[i];
            }
            else
            {
                if(even<a[i]){flag=false;break;}
                even=a[i];
            }
        }
        if(flag)printf("YES\n");
        else printf("NO\n");
    }
    return 0;
}
```

#### 2.4 解题心得

千万别想复杂。此题考场上首先想将原数列排序然后记录下标，发现做不了。又想二分答案，写完发现不满足答案单调。在实现算法前一定要考虑算法是否正确，否则实现也是白实现。

此题考场接近一小时，为 D 题没时间做造成不小的影响。