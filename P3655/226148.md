我来系统的讲解一下差分。

1. What is 差分？

	- 随便给一组数，就  **1,2,3,6,5** ,设这组数据为$A_i$。
   - 那么他的差分数组$C_i$就是 **-1,-1,-1,-3,1**,你可能发现了$C_{i} = A_{i-1} - A_{i} $ ($ A_1$为0)
2. 有什么用?  ----------可以维护$O(1)$区间修改,$O(N)$区间查询.
   
   - 首先我们举个例子 ~~(遇到不会的问题就找规律)~~,比如,把第 1  个数到 第3 个加1.
   - 手算一波 
   
  	| $A_i$ | $C_i$ | $\Delta C_i$ |
	| -----------: | -----------: | -----------: |
	| 2 | -2 | -1 |
	| 3 | -1 | 0 |
	| 4 | -1 | 0 |
	| 6 | -2 | +1 |
	| 5 | 1 |  0 |
        
  	-  聪明的 OIer 已经发现了$C_{1} -1,C_{3+1}+1$.
   - 难道规律就是$C_ {l } - num,C_{r+1} + num$?( l 为操作的左边界，r 为右边界)
   - 不急，再来找个规律从$A_2$到$A_3$加1（真理需要打表来证明）
   
   | $A_i$ | $C_i$ | $\Delta C_i$ |
	| -----------: | -----------: | -----------: |
	| 2 | -2 | -1 |
	| 4 | -2 | 0 |
	| 5 | -1 | 0 |
	| 6 | -1 | +1 |
	| 5 | 1 |  0 |
   
   - 诶，真的是 $C_ {l } - num,C_{r+1} + num$。
   
   - 什么，要证明，算了，别看蒟蒻写的了
   	
    $C_i = A_{i-1} - A_i$
    ，在一个序列中，执行每个操作时，我分成4种情况。
		
      1. $  A_{i-1} $和$ A_i $都没变，自然$C_{i}$也不会变。
      2. $  A_{i-1} $和$ A_i $同时加，$C_i$也不变。
      3. $  A_{i-1} + \Delta A'$ ， $ A_i $不变。
      	所以$C_i = A_{i-1}-A_i+ \Delta A'$
      4. $  A_{i} + \Delta A'$ ， $ A_{i-1} $不变。所以$C_i = A_{i-1} - (A_i + \Delta A') = A_{i-1}-A_i-\Delta A'$
      5. 当处于第三种情况时，一定位于 r+1 的位置，第四种情况位于 l 的位置
      - 单点查询就是$C_i - A_{i-1}$（移项）
      - 区间查询就是单点一直加
3. 扯正题，跟本题有关系吗？
	当然
    题目里有$A_{i-1} - A_i$，这是关键。
    
    - 首先我们预处理出魅力值的和$Sum$，so easy
    - 其次，我们对每一次修改，撤销上一次的痕迹，也就是让$Sum - C_{l}- C_{r+1}$
    - 同另一篇题解说的
    
    当$r==n$的时候,是不需要变化$r+1$位置的唱功与魅力值的.
    - 然后按照我刚才讲的维护。
    - 每一次输出 sum 就好了。
    
 代码没有，我的偶像 kkk 和 ltt 就是这样的。