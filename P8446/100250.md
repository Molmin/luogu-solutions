UPD: 晚上脑子抽了打错字了，感谢铃酱纠错
### 简要题意
给定一个长度为 $n$ 的序列，求一个区间使得极差减长度最大。
### 分析题目
设区间 $[i,j]$ 的端点之差减长度为 $A_{i,j}$，极差减长度为 $B_{i,j}$，则 $A_{i,j} \le B_{i,j}$。

假设我们现在访问到一个区间 $[l,r]$，最小值的位置在 $a$，最大值在 $b$。  
显然如果我们把 $s$ 和 $t$ 作为左右端点，那么区间长度变小，极差不变，答案 $B_{l,r} \le B_{\min\{a,b\},\max\{a,b\}}=A_{\min\{a,b\},\max\{a,b\}}$ 更优。

因此作为答案的子区间一定满足极值在端点处取到。

同理，如果作为答案的子区间是 $[l,r](A_{l,r}=B_{l,r})$，那么它显然也是所有子区间里面，$A_{l,r}$ 最大的。

证明考虑反证法，假设此时 $[s,t]$ 更优（$B_{s,t}>B_{l,r}$）但 $A_{l,r}>A_{s,t}$，则 $A_{s,t} = B_{s,t}$，推出矛盾。

这样只要找到最小的 $A_{i,j}$ 就可以 $\Theta(n^2)$ 解决问题了。

稍微随手优化一下就线性了。
### 算法流程
考虑找每一个区间最大的 $A_{i,j}(i\le j)$。以下令 $l=j-i+1$。

$$\because A_{i,j}=|a_i-a_j|-l=\max\{a_i-a_j-l,a_j-a_i-l\}$$

$$\therefore ans=\max_{1 \le i \le j \le n}\{\max\{a_i-a_j-l,a_j-a_i-l\}\} $$

$$\therefore ans=\max\{\max_{1 \le i \le j \le n}\{a_i-a_j-l\},\max_{1 \le i \le j \le n}\{a_j-a_i-l\}\}$$

对于 $\max_{1 \le i \le j \le n}\{a_j-a_i-l\}$ 我们可以令 $b_k=a_k-k$，这样 $a_j-a_i-l=a_j-a_i-j+i-1=b_j-b_i-1$。

另一项同理。

随便扫两次就出来了喵。
### 代码
超，原来我没有提交这道题啊，又嘴巴验题可太刑了，大家不要学。
### 后话
看到题目背景的改编自真实案例吗？

可惜我还是没有像秘封组一样的同伴。