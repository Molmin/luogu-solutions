今天借这道题给大家介绍一下一种编程方法：**面向储存的源码级轻量预处理编程**
其实这道题很简单，~~数论什么的，我数学差，不会~~。我用的**面向储存的源码级轻量预处理编程**。这样的话时间非常短，只有80ms，并且内存只用了**788KB**，我看过提交记录，是最少的。以下是对它的定义  

>面向储存的源码级轻量预处理编程是一种在算法竞赛(competitive programming)中常用技巧(skill)，它是一种基于预处理的思想尔演变出来的编程方法。要采用这种方法，首先可以把整个程序分为两部分：1.生成器(genernater) 2.结果程序(result)。我们通常使用生成器把一定的结果预处理出来，然后再把它结合到结果程序里面，这样可以很快的针对算法竞赛中的各种数据而采用最合适的策略。并且这种方法对使用者思维水平要求较低。但是它的缺点就是当生成器的运行时间过长或者结果过于繁杂会导致这种方法不适应。     ------沃·镃基德·百科

~~说白了就是打表~~

**面向储存的源码级轻量预处理编程**预处理出从1到kn的质数个数，类似于前缀和的样子。这样子呢，就可以把这道题做成分块的题，直接判断l和r在哪个区间内然后求出1-r的质数个数再减去1-l的质数个数就是答案。
以下是生成器代码:
```cpp
#include <cstdio>
#include <iostream>
#include <fstream>
using namespace std;
int read(){
	int f = 1,x = 0;
	static char c = getchar();
	while(c<'0'||c>'9'){if(c=='-')f = -1;c = getchar();}
	while(c>='0'&&c<='9')x = (x<<1)+(x<<3)+c-'0';
	return f*x;
}
bool judge(int x){
	if(x==1)return false;
	for(int i = 2;i*i<=x;i++){
		if(x%i==0)return false;
	}
	return true;
}
const int block_length = 125;
int main(){
	ofstream out("data");//C++自带的流输出，不懂得可以查一下，推荐使用必应而不是百度
	int cnt = 0;
	int tot = 0;
	for(int i = 1;i<=1000000;i++){
		if(judge(i)){
			cnt++;
		}
		tot++;
		if(tot == block_length){
			out<<cnt<<',';
			tot = 0;
			printf("%.2lf\n",(double)i/(double)1000000);//输出处理进度 
		}
	}
	out.close();
	return 0;
}
```
然后我们可以做出一个预处理结果~~打表~~  把这个结果和**结果程序**有机结合在一起，于是我们就成功的使用**面向储存的源码级轻量预处理编程**  
以下是AC代码：
```cpp
#pragma GCC optimize("Ofast")
#include <fstream>
#include <stdlib.h>
#include <algorithm>
#include <cstdio>//打表程序
using namespace std;
inline int read(){
    char ch = getchar();
    int f = 1 ,x = 0;
    while(ch > '9' || ch < '0'){if(ch == '-')f = -1; ch = getchar();}
    while(ch >= '0' && ch <= '9'){x = (x << 1) + (x << 3) + ch - '0';ch = getchar();}
    return x * f;
}
int table[10000]= {168,303,430,550,669,783,900,1007,1117,1229,1335,1438,1547,1652,1754,1862,1960,2064,2158,2262,2360,2464,2564,2668,2762,2860,2961,3055,3153,3245,3340,3432,3538,3638,3732,3824,3923,4017,4107,4203,4291,4392,4494,4579,4675,4761,4851,4946,5035,5133,5222,5319,5408,5500,5590,5683,5782,5873,5963,6057,6145,6232,6320,6413,6493,6591,6675,6774,6854,6935,7033,7128,7218,7301,7393,7484,7567,7662,7746,7837,7925,8017,8106,8190,8277,8362,8450,8543,8619,8713,8802,8887,8984,9070,9157,9252,9336,9418,9505,9592,9673,9766,9853,9933,10024,10106,10198,10274,10365,10453,10536,10620,10701,10789,10871,10964,11045,11135,11214,11301,11389,11475,11563,11651,11734,11818,11901,11987,12076,12159,12244,12327,12414,12496,12576,12665,12761,12841,12926,13010,13097,13184,13266,13343,13422,13507,13591,13674,13757,13848,13933,14023,14111,14188,14272,14357,14433,14521,14598,14683,14768,14852,14933,15016,15093,15173,15254,15337,15410,15497,15584,15665,15754,15833,15916,15991,16086,16159,16248,16342,16413,16492,16583,16662,16745,16836,16915,17002,17082,17170,17245,17326,17415,17499,17573,17658,17734,17821,17907,17984,18061,18148,18226,18304,18381,18464,18547,18634,18719,18807,18891,18977,19046,19127,19213,19287,19363,19443,19527,19618,19696,19776,19857,19937,20020,20104,20180,20260,20349,20437,20521,20599,20675,20746,20833,20906,20982,21055,21142,21221,21301,21392,21468,21545,21633,21713,21797,21876,21964,22044,22115,22203,22281,22362,22438,22525,22597,22675,22761,22837,22914,22987,23066,23150,23230,23308,23395,23489,23564,23642,23726,23804,23887,23958,24038,24121,24204,24278,24359,24432,24519,24604,24681,24753,24843,24920,24991,25062,25139,25224,25308,25385,25463,25531,25616,25691,25773,25846,25919,25997,26082,26165,26237,26321,26409,26489,26571,26644,26720,26800,26879,26948,27034,27120,27196,27273,27357,27441,27522,27608,27687,27767,27848,27919,28006,28091,28164,28250,28323,28404,28484,28566,28638,28719,28796,28873,28957,29037,29114,29182,29266,29343,29420,29500,29580,29656,29736,29818,29895,29977,30051,30132,30214,30290,30377,30456,30523,30603,30686,30757,30825,30904,30980,31064,31141,31218,31303,31382,31454,31522,31592,31668,31749,31822,31904,31989,32069,32140,32217,32300,32372,32448,32522,32603,32681,32761,32839,32908,32983,33067,33148,33227,33313,33400,33475,33547,33622,33697,33779,33860,33930,34001,34077,34152,34222,34305,34372,34453,34532,34614,34687,34768,34842,34911,35001,35081,35148,35230,35315,35390,35465,35538,35615,35698,35779,35853,35924,36002,36073,36162,36238,36317,36401,36481,36566,36648,36721,36791,36866,36941,37020,37092,37177,37265,37347,37415,37483,37556,37626,37706,37798,37874,37937,38009,38083,38165,38238,38315,38390,38458,38535,38604,38678,38755,38840,38914,38983,39066,39151,39223,39310,39388,39461,39539,39619,39705,39780,39849,39934,40005,40082,40160,40242,40317,40382,40445,40527,40605,40688,40766,40844,40920,40987,41069,41149,41236,41304,41385,41457,41538,41617,41691,41758,41834,41910,41993,42069,42140,42216,42291,42363,42445,42515,42592,42673,42739,42824,42907,42983,43061,43134,43217,43296,43365,43442,43521,43605,43677,43747,43825,43905,43973,44052,44126,44198,44269,44356,44423,44501,44572,44645,44722,44800,44881,44949,45018,45091,45167,45244,45322,45401,45476,45547,45627,45704,45765,45853,45921,45995,46072,46158,46219,46302,46369,46446,46524,46596,46668,46739,46819,46904,46976,47061,47133,47203,47280,47358,47435,47511,47588,47661,47740,47813,47891,47963,48044,48123,48210,48283,48351,48422,48489,48569,48646,48724,48801,48880,48953,49025,49098,49174,49247,49330,49406,49479,49553,49625,49703,49781,49861,49934,50005,50081,50160,50231,50306,50391,50472,50539,50612,50689,50759,50833,50908,50986,51055,51125,51195,51266,51341,51408,51489,51566,51636,51718,51796,51869,51943,52002,52074,52151,52222,52290,52360,52446,52521,52595,52674,52747,52831,52892,52966,53051,53120,53198,53271,53342,53412,53491,53564,53647,53717,53791,53868,53945,54022,54095,54169,54235,54309,54384,54460,54536,54613,54686,54761,54835,54898,54980,55063,55138,55216,55282,55360,55432,55506,55580,55662,55736,55815,55875,55954,56031,56104,56180,56257,56330,56409,56471,56543,56618,56689,56770,56841,56928,56996,57078,57152,57229,57306,57384,57460,57532,57605,57671,57754,57823,57888,57955,58029,58107,58184,58257,58343,58418,58487,58563,58638,58714,58789,58858,58934,59005,59080,59154,59233,59302,59380,59450,59531,59598,59672,59745,59812,59876,59943,60019,60090,60166,60238,60306,60391,60464,60535,60618,60688,60754,60822,60901,60978,61055,61135,61203,61282,61354,61436,61514,61582,61659,61733,61810,61885,61955,62031,62103,62170,62240,62316,62397,62468,62538,62620,62688,62763,62838,62915,62985,63058,63138,63206,63284,63355,63437,63508,63581,63660,63737,63809,63880,63951,64036,64102,64172,64241,64319,64398,64466,64536,64605,64683,64761,64833,64902,64974,65052,65121,65196,65271,65333,65416,65491,65563,65647,65725,65796,65877,65955,66024,66093,66161,66237,66316,66398,66466,66533,66606,66677,66741,66821,66890,66960,67029,67112,67180,67258,67328,67397,67474,67549,67617,67687,67764,67838,67904,67975,68048,68126,68202,68271,68342,68419,68493,68576,68636,68716,68796,68864,68942,69022,69095,69174,69232,69308,69373,69448,69528,69603,69670,69748,69823,69903,69972,70044,70117,70186,70263,70339,70410,70487,70555,70623,70703,70772,70844,70918,70998,71062,71137,71213,71274,71348,71421,71491,71554,71635,71705,71785,71865,71944,72026,72088,72169,72240,72294,72367,72437,72509,72588,72663,72734,72806,72878,72950,73031,73107,73187,73261,73324,73394,73474,73543,73612,73688,73756,73837,73905,73976,74047,74119,74187,74261,74340,74412,74488,74561,74627,74699,74765,74832,74907,74983,75053,75131,75196,75269,75345,75403,75472,75549,75618,75686,75774,75845,75919,75993,76063,76136,76202,76277,76350,76426,76504,76578,76641,76726,76796,76862,76922,77002,77067,77134,77209,77279,77349,77419,77495,77571,77634,77705,77777,77848,77927,77992,78060,78138,78207,78276,78359,78433,78498,};
const int block_length = 1000;
bool judge(int x){
    if(x==1)return false;
    for(int i = 2;i*i<=x;i++){
        if(x%i==0)return false;
    }
    return true;
}
int cal(int a,int b){
    int ba = a/block_length;int bb = b/block_length;
    if(bb-ba<=1){//ab在同一块内,上暴力
        int cnt = 0;
        for(int i = a;i<=b;i++){
            if(judge(i))cnt++;
        }
        return cnt;
    }else{//ab不在同一块内，分块+打表
        int sum1 = 0;
        int sum2 = 0;
        for(int i = ba*block_length+1;i<=a-1;i++){if(judge(i)){sum1++;}}

        if(a>=block_length)sum1+=table[ba-1];
        for(int i = bb*block_length+1;i<=b;i++)if(judge(i))sum2++;
        sum2+=table[bb-1];
        return sum2-sum1;
    }
}
int main(void){
//    freopen("a.txt","r",stdin);
//    freopen("b.txt","w",stdout);
    int n,m;
    n = read(),m = read();
    int l,r;
    while(n--){
        l = read(),r = read();
        if(l>m||l<1||r<1||r>m||l>=m){
            printf("Crossing the line\n");
            continue;
        }else{
            printf("%d\n",cal(l,r));
        }
    }
    return 0;
}

```
注意，两份代码中的block_legth表示的是每一块的长度，必须保持一致(虽然数据比较水，不一致也可以过好几个点)
之前为了跑快点块大小开150被卡了，现在换成1000又可以过了
![结果](https://cdn.luogu.com.cn/upload/pic/41305.png)