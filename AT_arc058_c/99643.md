[题目链接][1]
一道状态压缩好题

首先，我们观察数据，可以发现$X,Y,Z$非常小，我们可以考虑状压，或者暴力枚举

我们先可以往暴力枚举枚举上想一想，我们可以枚举断点$x,y,z,w$的位置，然后预处理背包跑出$f[i]$表示有$i$个元素的数列能够有多少种方式拼出$i$的容量

然而这显然是不正确的，因为你在枚举到一种情况的$x,y,z,w$的位置时，**你在$x,y,z,w$之外的位置上的元素都是可以随便选择的**，然而这肯定会算重

我们没法这么做了，就可以去考虑一下状压

仍然没什么头绪，因为你还要考虑$x,y,z,w$的位置，这就很麻烦。

我们有一个关键的变形，首先我们由于会算重，所以就可以转换为**总方案数减去不带俳句子串的方案数**

怎样保证每个状态之间不重并且小巧地表示状态？我们又需要一个变形，**我们从考虑断点之间可以拼出对应的值转换为记下选出的所有元素可以拼出的所有值的集合**，状态$st$表示为当它从右往左数第$i$位是$1$时，表示**当前选数方案的后缀和集合**中可以找到$i$

如果在当前状态中可以找到$z,y+z,x+y+z$，那么这个状态已经包含了一个俳句，他以后转移出来的状态都一定会含有俳句，然而我们想要求的是**所有不会含有俳句的方案数**，所以这个拥有了俳句的状态就不能用于转移，为了方便，我们就把该状态$st$的$f[st]$记为$0$

我们记下数组$f[i][st]$表示在第$i$位上状态为$st$的方案数，剩下的转移是显然的
  [1]: https://www.luogu.com.cn/problem/AT1975