一开始的确是用最小生成树搞的，只不过想法有点错误没想出来

直到交上去RE了才发现QAQ

其实这个题离线就很好做。倒序，然后把删边看成加边 

先把所有不会被拆除的边kruskal一下（不一定要求出最小生成树，森林也行，毕竟后面还会有加边

然后倒序看询问，如果为1就输出，如果为2就先判断一下当前图中(x,y)的简单路径情况

若xy不联通，直接连接

若xy联通，且xy路径上的最长边小于要加的边，则不处理

否则就将最大边删掉，然后link要加的边即可
维护边权则是套路方法

不过学到一个新套路QAQ

将所有边的x,y按小的再前面

然后x第一关键字，y第二关键字sort一下
第i条边的编号为i+n，找的时候在边里二分一下就找到了QAQ 

我的[代码](http://www.cnblogs.com/refun/p/8685633.html)能过加强版的数据