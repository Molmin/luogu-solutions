可以向上，向下，向右走。

明显是一道DP题。

设状态 $dp[i][j]$ 为走到第i列第j个的和

然后要枚举k。

转移方程为 $ dp[i][j]=dp[i-1][k]+a[j$ 到 $k] $ 。

显然分  $j<=k,j>k$ 两种情况。

$a[j$ 到 $k]$ 用前缀和变为 $num[i][k]-num[i][j-1]$

$j<=k$ 时 。

$ dp[i][j]=dp[i-1][k]+num[i][k]-num[i][j-1] $ 。

同理 $j>k$ 时 。

$ dp[i][j]=dp[i-1][k]+num[i][j]-num[i][k-1] $ 。

然后会发现时间复杂度为 $O(mn^2)$。

只能过 $70%$ 。

考场上我就止步于此了。

实际上还是很好优化的。

第 $i-1$ 列中选择的 $k$ 是到 $j$ 往下的一段或者到 $j$ 往上的一段，提前记录下最大的 $dp[i-1][k]-num[i][k-1]$ ，上下各扫一次即可。

$O(nm)$ 稳过。