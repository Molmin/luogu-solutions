JV 写的题解好简略。虽然应该已经足够学会做这个题了，但是我还是想补篇稍微详细一点的，主要讲一下具体的问题形式转化过程。

首先我们注意到题目中的 $60\degree$ 坐标系和三个方向上的限制，因此我们会发现它本质是一个三角网。而将其中横纵坐标均为偶数的点抠掉后得到的是一个六边形网，这一点从样例解释给出的图中就能够直观地获取（图源样例解释）：

![](https://cdn.luogu.com.cn/upload/image_hosting/a3lp43vq.png)

看到这种六边形网的形式和选点的不相邻规则，~~如果你身经百战见得多了~~就能够想到 [P8114](https://www.luogu.com.cn/problem/P8114)。我们会发现它们是本质相同的，都是 [LOJ6677](https://loj.ac/p/6677) 的一种等价表述。接下来我们来说明一下它们之间的等价关系。

两道原题之间的等价关系在 [P8114 题解区](https://www.luogu.com.cn/problem/solution/P8114)和 [P8114 出题人题解](https://bzy-nya.github.io/CNOI/2021ER_Solution.html)中已经有解释了，我们这里只讲一下此题和 P8114 之间的等价关系（因为这个等价关系更加直观显然）。

我们考虑此题中点相邻与 P8114 中边相邻的等价转化，容易发现我们可以作出一个以题目中点为顶点的小六边形的外接大六边形，如图，其中图 1 为样例，图 2 为 $a,b,c$ 分别为 $2,3,4$ 的情况（Geogebra 钛垃圾辣！！！）：

![](https://cdn.luogu.com.cn/upload/image_hosting/hknrd5eb.png)

![](https://cdn.luogu.com.cn/upload/image_hosting/ah51uvf0.png)

则由图易看出此题中点相邻和大六边形网中边相邻显然是等价的。

我们设转化到 P8114 的形式后对应的边长（具体含义见 P8114 原题）为 $a',b',c'$，考虑如何刻画 $a,b,c$ 与 $a',b',c'$ 的关系。

我们发现 $-2a+1$ 到 $2a+1$ 中奇数有 $2a$ 个，而每个坐标为奇数的行（$x=2k+1$，共 $2a$ 个）上 $y$ 坐标最大（小）的点可以对应大六边形网边界上的一条边，如下图所示，红圈对应奇数行上的点，红线为边界上的边，其中 $b'=3,c'=1$：

![](https://cdn.luogu.com.cn/upload/image_hosting/x3wbj6hp.png)

由此对应我们能够得到 $b'+c'=2a$，由对称性得到另两条式子，联立解得 $a'=b+c-a,b'=c+a-b,c'=a+b-c$。

由于问题可以转化为 $a' \times b' \times c'$ 立方堆叠的三视图，故所求点数最大值即为 $a'b'+b'c'+c'a'$，方案数利用原题结论即可求出。

JV 也提到以上有一种情况我们无法解决，即 $a',b',c'$ 中有非正数的情况。由对称性不妨设 $a+b \le c$。这时点数最大值为 $4ab$，方案数为 $1$，证明的大致思路 JV 题解里也说明了，具体证明是简单的，不做赘述。