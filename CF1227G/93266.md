[题目传送门](https://www.luogu.com.cn/problem/CF1227G)

题意等价于构造一个 $n+1$ 行 $n$ 列的 $01$ 矩阵，使得每一行的内容都不同，且第 $i$ 列有 $a_i$ 个 $1$。

内容不同显然要考虑阶梯状排列，由于每一列至少会有一个 $0$，可以考虑摆放 $0$ 的位置。比较经典的一种：

```
10XXX
X10XX
XX10X
XXX10
XXXX1
0XXXX
```

这样相当于第 $i$ 个数填数就从第 $i$ 行开始填，如果下面填满了就回到第 $1$ 行循环填，设答案矩阵为 $b$，能够保证 $b_{i,i}=1,b_{i,i+1}=0$。

考虑列置换后并不影响答案的正确性，把 $a$ 先从大到小排序处理，然后按照上面的构造就行了。

证明：

考虑反证，假设有 $i,j(i<j)$ 两行内容相同，那么必然有 $b_{i,i+1}=b_{j,i+1}$。

假设对于 $i+1<x \le j$，存在 $b_{i,x}=1$，则有 $b_{j,x}=1$，且 $b_{i,i+1}\ldots b_{i,x-1}=b_{j,i+1} \ldots b_{j,x-1}=0$，但 $b_x \le b_i$，所以第 $x$ 列不可能在 $i,j$ 两行都放置 $1$，矛盾。

因此对于任意 $i+1<x \le j$，不存在 $b_{j,x}=1$，但这显然与 $b_{j,j}=1$ 矛盾，因此假设不成立，原构造合法。
