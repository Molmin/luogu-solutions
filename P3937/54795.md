第一眼只会$O(t*\lceil n/32\rceil)$bitset优化模拟，然后上一届dalao一眼切掉了......

直接上生成函数。

构造多项式$(a_0 * x^0+a_1 * x^1+...+a_n * x^{n-1})$，其中$x^i$项的系数$a_i\pmod 2$表示第$i$盏灯的亮灭情况。

那么每次操作，即将原多项式乘上$(1+x^{-1})$。共$t$次操作，
即乘上$(1+x^{-1})^t$。由二项式定理即可快速得出每一项的系数，
最后加上每一项对$x^k$的系数的贡献即可。

答案即为：$\sum_{i=0}^t a[(i+k)\%n]* \dbinom{t}{i}\pmod 2$

期望时间复杂度$O(t)$。(注意我的编号是从0开始的，别搞混了)。