$emm...$都讲的好乱阿。。。

首先，我们破环为链。

其次，有一个比较显然的策略，假设我们强制选择$i$号战士，那么和$i$号战士有公共点且最靠右的线段最优，而且题目中保证了没有包含，所以随着左端点的增加，右端点单调非严格递增，因此我们可以$two-point$求得每一个区间下一个最优区间的编号。

考虑到$n$很大，直接跳不行，而~~显然~~$next$最优区间具有结合律，所以考虑倍增，$f[i][j]$表示从第$i$个区间，向下跳$2^j$个$next$最优区间后的区间，注意考虑自己的贡献。