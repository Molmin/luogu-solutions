$~~~~$ 对于所有点 $(x,y)$ ，将其坐标变换到 $(x+y,x-y)$ 后，原先两点之间的**曼哈顿距离**等于转换后对应点之间的**切比雪夫距离**。

$~~~~$ 下面给出证明：

$~~~~$ 设：点 $A_1(x_1,y_1),A_2(x_2,y_2)$

$~~~~$ 则 $A_1A_2$ 的曼哈顿距离为：$|x_1-x_2|+|y_1-y_2|$ 。

$~~~~$ 由于绝对值的本质是取正数，即正、负数之间较大一个，因此上式也可以写成：
$$\max\{x_1-x_2+y_1-y_2 \ \ ,\ \  x_1-x_2-y_1+y_2 \ \ ,\ \  x_2-x_1+y_1-y_2 \ \ ,\ \ x_2-x_1+y_2-y_1\}$$

$$=\max\{|(x_1+y_1)-(x_2+y_2)|\ \ ,\ \ |(x_1-y_1)-(x_2-y_2)|\}$$
$~~~~$ 而任意两点之间的切比雪夫距离即横纵坐标差的最大值，故上式表示的即为 $A_1'(x_1+y_1,x_1-y_1)$与 $A_2'(x_2+y_2,x_2-y_2)$ 之间的距离。

$~~~~$ 这样转换的好处是把距离某个点曼哈顿距离相等的点构成的斜着的正方形变为了正着的正方形~~（改斜归正）~~ ，那么转换后每个点不能与之颜色相同的点就会正向围在旁边。

$~~~~$ 此时可得一个构造方案：将整个坐标系分成若干个 $d\times d$ 的正方形，同一个正方形内的点的颜色相同。显然在这样划分时，每一个小点和与之不能染成相同颜色的点在两个不同的大正方形内，因此该题相当于转化为对大正方形染色。而此时的染色方案仅要求每个大正方形的颜色与周围八个方向的不同，可以简单构造出来如下图的方案：

![](https://cdn.luogu.com.cn/upload/image_hosting/wytsjg2l.png)