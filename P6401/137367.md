首先我们要保存每个字母需要点击数字按钮的次数，即：

```cpp
int times[]={1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,4,1,2,3,1,2,3,4};
```

然后保存字母对应应该按哪一个按钮（假如手机是正常的）：

```cpp
int letter[]={2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,7,8,8,8,9,9,9,9};
```

现在最棘手的问题就是如何处理键盘错误的问题。我们不妨先按题意输入十个数，然后一一对应原来的按钮和现在需要按的按钮（即用$a$数组保存输入，$b$数组的每一个元素$b_i$保存$i$在$a$数组中的下标）。

例如：（下表中的第$i$个数是$i$按钮原来应该按的按键，换句话说，$a_i$按钮现在应该按$i$）

|$3$|$7$|$8$|$1$|$2$|$4$|$6$|$9$|$5$|
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |

那么，我们只需要寻找每一个$i(i∈[0,10))$在$a$数组中的下标，并存入$b$数组即可，即：

|$4$|$5$|$1$|$6$|$9$|$7$|$2$|$3$|$8$|
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |

其实，$b$数组的含义就是：原来应该按$i$号按键的，现在应该按$b_i$号。

当然，还有重复问题，用一个$char$类型的$temp$保存前一个并判断是否相同即可解决。

梳理完之后，我们得到代码：


```cpp
#include<cstdio>
int id,a[10],b[10],letter[]={2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,7,8,8,8,9,9,9,9},times[]={1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,4,1,2,3,1,2,3,4};//数组定义
char s[101],temp;//s存储字符串
int find(int x)//自定义find函数
{
    for(int j=1;j<9;j++)if(a[j]==x)return j;
    return 9;
}
int main()
{
    for(int i=1;i<10;i++)scanf("%d",&a[i]);//输入
    for(int i=1;i<10;i++)b[i]=find(i);//b数组赋值
    getchar();//吞噬换行符，否则s接收的是换行符
    gets(s);//整行读入
    for(int i=0;s[i];i++)//[0,|s|)循环
    {
        id=letter[s[i]-'a'];//为了让代码不过于复杂而设置的变量
        if(b[id]==temp)putchar('#');//如果与前面的字符相同则输出一个#
        for(int j=0;j<times[s[i]-'a'];j++)putchar(b[id]+'0');//输出对应数字（用putchar(数字+'0')会更快）对应次数
        temp=b[id];//temp重新赋值
    }
}
```