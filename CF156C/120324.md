把 `a~z` 看成 $1$ 到 $26$ 的整数。可以手玩一下，发现性质：对于**源序列**和**目标序列**合法的操作，一定存在一种操作方案。感性理解类似于“传递”。[特殊情况的例子。](https://www.luogu.com.cn/paste/mu7jsau2)

于是，问题转化为：有 $t$ 个 $1$，要求分配给 $n$ 个数，使得每个数在 $[1,26]$ 之间。

假如没有 $26$ 的上限，则显然可以插板。

直接计数我不会，考虑容斥。先算出没有上限的，再减去**至少有 $1$ 个数**大于 $26$ 的，再加上**至少有 $2$ 个数**大于 $26$ 的……以此类推，最终 $\forall k$ **恰有 $k$ 个数大于** $26$ 的方案都会被减去。

至少有 $i$ 个数，先在 $n$ 个数中选出 $i$ 个大于 $26$ 的，再“分配”出 $26i$ 个 $1$ 给这些数，剩下的数插板。答案即为

$$\sum_{i=0}^n(-1)^{i+1}\binom{n}{i}\binom{t-26i-1}{n-1}$$

可以 $O(n)$ 计算。

[代码。](https://www.luogu.com.cn/paste/kg846g5h)