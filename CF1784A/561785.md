### 题目链接
[luogu](https://www.luogu.com.cn/problem/CF1784A)

[codeforces div1](https://codeforc.es/contest/1784/problem/A)

[codeforces div2](https://codeforc.es/contest/1786/problem/C)

### 题目大意

你正在玩一个游戏。

现在有 $n$ 个怪物，第 $i$ 个怪物的血量为 $a_i$。

你要杀死它们。你有两种方法来攻击。
1. 选取任何一个怪物并将其血量减少 $1$。这种攻击方法可以无限次使用。
2. 所有未被“杀死”的怪物的血量都减少 $1$，如果任何怪物被这种攻击方法“杀死”，你可以立即重复一次。**注意，这种攻击每局只能使用一次。**

要“杀死”一个怪物，你需要让它的血量小于或等于 $0$。被“杀死”的怪物立即退出游戏。

问“杀死”所有怪物所需第一种攻击方法的最少次数。

多组数据，$1\le \sum n \le 2 \times 10^5$。

### 思路

既然需要最小化使用方法一的次数，就需要让只能使用一次的方法二所造成的伤害最大。

> 声明：以下的序列 $a$ 均是经过升序排序的。

> 证明：
>
> 先说为什么要求尽可能延续方法二以获得最大伤害。
>
> 将其转化成另一个问题：一个长度为 $n$ 的序列 $b$，满足：
>
> + $b_i \le a_i$；（攻击不超过血量）
>
> + $0 \le b_i - b_{i-1} \le 1(2 \le i \le n)$。（**要使方法二连续攻击。其实还可以 $b_i=0$，但是在这之后的 $b$ 都等于 $0$，肯定不优。**）
>
> 求 $\sum_{i=1}^{n}{b_i}$ 的最大值。这个值就是最大的伤害。答案可以通过 $\sum_{i=1}^{n}{a_i}-\sum_{i=1}^{n}{b_i}$ 求出。
>

> ……这里需要感性理解一下，直接证明可能不清楚……

那么求解时有以下两种情况：

1. $a_i-a_{i-1}>1$。则将 $a_i$ 更新成 $a_{i-1}+1$，让方法二延续下去；

2. $a_{i-1}-a_i \le 1$。此时 $a_i$ 可以满足延续方法二，跳过。

所以先对原血量序列排序，再在序列最前面加一个 $0$，如果相邻元素之差大于 $1$，则更新答案和序列元素。

时间复杂度 $O(n\log{n})$。

#### code
```cpp
#include<bits/stdc++.h>
using namespace std;
#define ll long long
int n,a[200010];
void solve(){
	cin>>n;ll ans=0;
	for(int i=1;i<=n;++i)cin>>a[i];
	sort(a+1,a+1+n);
	for(int i=1;i<=n;++i)if(a[i]-a[i-1]>1)ans+=a[i]-a[i-1]-1,a[i]=a[i-1]+1;
	cout<<ans<<'\n';
	return;
}
int main(){
	int t=1;cin>>t;
	while(t--)solve();
	return 0;
}
```