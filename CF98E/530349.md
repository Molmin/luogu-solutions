纳什均衡入门题

### 思路：

首先，我们想到两个人不一定要询问对方自己没有的卡牌，如果全部都询问自己没有的卡，那如果对方发现询问的卡自己没有，就表明询问的卡就是答案，必败无疑。

所以两个人可以欺骗对方，以使对方猜错。

当前状态可以分类讨论：

1. 先手不欺骗，后手相信，则有 $\frac{1}{m+1}$ 的概率先手问的是答案，后手必胜，期望为 $0$，又有 $\frac{m}{m+1}$ 的概率先手没问中答案，进入下一状态，先后手互换,所以期望为 $\frac{m}{m+1}(1-f(m-1,n))$，总期望为 $\frac{m}{m+1}(1-f(m-1,n))$。   $\ \ \ (p_1)$

2. 先手不欺骗，后手不相信，则有 $\frac{1}{m+1}$ 的概率先手问的是答案，让先手知道答案，而后手不信，导致先手必胜，期望为 $\frac{1}{m+1}$。又有 $\frac{m}{m+1}$ 的概率没问中答案，进入下一状态，期望为 $\frac{m}{m+1}(1-f(m-1,n))$，总期望为 $\frac{m}{m+1}(1-f(m-1,n))+\frac{1}{m+1}$。    $\ \ \ (p_2)$

3. 先手欺骗，后手相信，显然期望为 $1$。    $\ \ \ (p_3)$

4. 先手欺骗，后手不相信，先手一张牌被后手知晓，相当于弃牌，进入下一状态，期望为 $1-f(m,n-1)$。    $\ \ \ (p_4)$


设 $p$ 为先手不欺骗的概率

根据纳什均衡，先后手达到均衡条件：

$pp_1+(1-p)p_2=pp_3+(1-p)p_4$

代入就是：

$\dfrac{m}{m+1}(1-f(m-1,n))p+1-p=(\dfrac{m}{m+1}(1-f(m-1,n))+\dfrac{1}{m+1})p+(1-p)(1-f(m,n-1))$

解得：

$p=\dfrac{f(m,n-1)}{f(m,n-1)+\frac{1}{m+1}}$

状态转移：

$f(n,m)=\dfrac{pp_1+(1-p)p_2+pp_3+(1-p)p_4}{2}=pp_1+(1-p)p_2$

边界条件： 
$f(i,0)=1$ 和 $f(0,i)=\dfrac{1}{i+1}$

代码十分短：
```cpp
#include <bits/stdc++.h>
using namespace std;

#define db double

double f[1005][1005];

double DP (int n, int m) {
  if (f[n][m]) return f[n][m];
  if (n == 0) return f[n][m] = (1.0 / ((db)m + 1.0));
  if (m == 0) return f[n][m] = 1.0;
  double w1 = m * 1.0 / ((db)m + 1.0) * (1.0 - DP (m - 1, n)), w2 = 1;
  double w3 = w1 + 1.0 / ((db)m + 1.0), w4 = 1.0 - DP (m, n - 1);
  double p = DP (m, n - 1) / (DP (m, n - 1) + 1.0 / ((db)m + 1.0));
  return f[n][m] = p * w1 + (1.0 - p) * w2;
} 

int main () {
  int n, m; cin >> n >> m;
  double x = DP (n, m);
  printf ("%.11lf %.11lf", x, 1.0 - x);
}
```
