[题目传送门](/problem/CF143A)

## Part.1 题目

有 $2\times 2$ 的 $4$ 个格子，给出两两的和，求这 $4$ 个格子里的数。如果没有整数解，或者有相同的数，或者解里有数不在 $1$ 到 $9$ 之内的话，都输出`-1`。

## Part.2 思路

这题我之前做过。我想分享一下我自己的 $O(1)$ 的算法。

先假设这 $4$ 个数分别是 $a,b,c,d$ ，然后先把六个方程写出来：

$a+b=r_1\space(1)$  
$c+d=r_2\space(2)$  
$a+c=c_1\space(3)$  
$b+d=c_2\space(4)$  
$a+d=d_1\space(5)$  
$b+c=d_2\space(6)$

我们把 $(1)$ 和 $(2)$ 加起来，$(3)$ 和 $(4)$ 加起来，$(5)$ 和 $(6)$ 加起来，发现左边都等于 $a+b+c+d$，右边分别是 $r_1+r_2$，$c_1+c_2$，$d_1+d_2$，所以这三个数得相等，如果不等的话，就无解了。

然后我们拿 $(1)$ 减去 $(3)$，得到 $b-c=r_1-c_1$。然后又有 $b+c=d_2$，所以 $b$ 和 $c$ 可以直接解出来了。这里注意判断 $r_1-c_1$ 和 $d_2$ 的奇偶性得要相等，如果不等的话就无整数解。

有了 $b$ 和 $c$，剩下的 $a$ 和 $d$ 就不难求出来了。

这时，我们需要检验一下 $(4)$ 和 $(5)$ 是否也都成立。

这是成立的。这就是第一步的作用。第一步我们检验了 $r_1+r_2=c_1+c_2=d_1+d_2$，所以当 $a+b=r_1$，$c+d=r_2$，$a+c=c_1$，$b+c=d_2$ 都成立的时候，$b+d=a+b+c+d-(a+c)=r_1+r_2-c_1=c_1+c_2-c_1=c_2$ 。同样，$a+d=a+b+c+d-(b+c)=r_1+r_2-d_2=d_1+d_2-d_2=d_1$。

最后注意判断解是否符合条件，即：
* 两两不等
* 在 $1$ 到 $9$ 之间

注意输出格式。

## Part.3 代码

```cpp
#include<iostream>
using namespace std;
/*
d1 c1 c2 d2
r1  a  b
r2  c  d
*/
int main(){
	int r1,r2,c1,c2,d1,d2,a,b,c,d;
	cin>>r1>>r2>>c1>>c2>>d1>>d2;
	bool possible=1;
	if(r1+r2!=c1+c2||r1+r2!=d1+d2||c1+c2!=d1+d2)possible=0;//都是a+b+c+d 
	int b_minus_c=r1-c1;//b-c=(a+b)-(a+c)=r1-c1
	if((b_minus_c+d2)&1)possible=0;//判断奇偶性
	b=(d2+b_minus_c)>>1;
	c=d2-b;//求解b、c
	a=r1-b;
	d=r2-c;
	if(a==b||a==c||a==d||b==c||b==d||c==d)possible=0;
	if(a<=0||b<=0||c<=0||d<=0)possible=0;
	if(a>9||b>9||c>9||d>9)possible=0;//最后的一堆判断
	if(possible)cout<<a<<" "<<b<<endl<<c<<" "<<d;//这一步错了你就前功尽弃了
	else cout<<-1;
}
```