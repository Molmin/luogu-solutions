真的是神仙构造题。                
            
建议去看command_block的题解，讲的很清楚。             

大概想到了要把题转化成一堆环然后杀，但是没有想出来什么很有效的方法最后就被这道题干爆了。                

首先我们不难发现 $c_i$ 的意思就是说要把当前位置 $i$ 的数给移到 $c_i$ 去，转为图就是 $i$ 到 $c_i$ 有一条连边，并且每个点一个入度一个出度，自然而然就构成了很多个环。                     

我们考虑三种情况：            

- 环个数为偶数

- 环个数为奇数且大于 $1$             

- 只有一个环                  

定义黑点为翻面的点，白点为未翻面的点。

对于第一种情况，我们考虑两两环之间处理，首先先交换一下两个环上的任意两个点变成一个环，接着两个黑点一直暴力和它的后继节点交换直到碰到另外的黑点为止，最后两个黑点交换一次就好了，在环大小次内完成。              

对于第二种情况，我们把单出来的环和一个自环进行一次多余匹配，可以证明最大次数为 $n + 1$ 。                

对于第三种情况，由于大小为 $3$ 的环可以单独处理，我们可以先交换一下任意两个在环上紧贴在一起的节点，变成两个环后再用上述的方法一直交换成只有 $3$ 个点的环，最后特殊处理。             

综上，我们可以在 $n + 1$ 次内完成构造。