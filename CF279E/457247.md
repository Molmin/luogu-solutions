# CF279E 1900 贪心

## 题意

给定一个长度不超过 $10^6$ 的二进制数 $n$，求至少要用几个 $2^k$ 或 $−$ $2^k$ $(k≤0)$ 加起来值和 $n$ 相等。

## 思路

**结论：**

如果是一个 $0$ 后面接很多个 $1$，那么答案 $+1$；（情况一）

如果是很多个 $0$ 后面接很多个 $1$，那么答案 $+2$。（情况二）

特别的，如果是一个单独的 $1$，那么答案 $+1$，并忽略这个 $1$。



**感性证明：**

情况一：$110111$ 是 $1000000-10000-1$

情况二：$1100111$ 是 $10000000-100000+10000-1$

实际上是因为隔了一个 $0$ 时可以借上一次的 $1$。



可以特判一下开头的两个数，两个数之后的 $1$ 都可以忽略了。


时间复杂度：$O(n)$


## 代码

```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
const int MAXN=1e6+10;
char a[MAXN];
int n,ans;
bool tflag,flag;
signed main()
{
	scanf("%s",(a+1));
	n=strlen(a+1);
	if(a[1]==a[2]&&a[1]=='1') //特判开头的数
	{
		ans=2;
		flag=1;
	}
	else  ans=1;
	for(int i=1;i<=n;i++)
	{
		if(!tflag&&a[i]=='1')  continue; 
        //因为特判了开头，所以之后连着的1都可以忽略
		tflag=1;
		if(a[i-1]=='0'&&a[i-2]=='0')  flag=0;
		if(a[i]=='1'&&a[i-1]=='0')
		{
			if(a[i+1]!='1')
			{
				ans++;
				i++;
			}
			else //与上一个连着的一串1隔了一个0
			{
				if(a[i-1]=='0'&&a[i-2]=='1'&&flag)  ans++;
				else
				{
					flag=1;
					ans+=2;
				}
			}
		}
	}
	printf("%lld",ans);
	return 0;
}
```
