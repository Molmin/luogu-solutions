根据均值不等式，显然点排得越均匀越优。

这句话包含两个关键点，第一个是若要在输入的每两个相邻传送机之间插入若干个新的传输机，那么这些安插的传输机需要尽量均匀；第二个是从整体上看，整个轴上所有传输机需要尽量均匀。

若不考虑位置需为整数的限制，对于每一段，假设长度为 $l_i$，设安插了 $x$ 个后的花费为 $f_i(x)$，那么：

$$
f_i(x)=\left(\frac{l_i}{x+1}\right)^2(x+1)=\frac{l_i^2}{x+1}
$$

因为整体上也要尽量均匀，那么我们不妨设 $\frac{l_i}{x_i+1}=k$，得到 $x=\frac{l_i-k}{k}$。

考虑 $f_i(x)$ 的一阶导：

$$
f_i'(x)=\frac{-l_i^2}{(x+1)^2}
$$

由 $x$ 与 $l$ 在最优时的关系我们可以得到 $f'_i(\frac{l_i-k}{k})=-k^2$，是定值。

现在加上了位置为整数的限制，那么相应的求导就变为了差分，含义为 $f_i(x)-f_i(x-1)$，即传送机从 $x$ 个减少一个后总花费的增加量，设其为 $-d$。我们二分这个 $d$，求出每一段的相应的 $x_i$，即给每一段都增加 $x_i$，设和为 $S$。二分找到最大的 $d$ 使得 $S\leqslant m$。

由于上面得到用解出的 $x$ 代回 $f'_i(x)$ 后是定值，从而给每一段都按插 $x_i$ 个能够使整体均匀，达到最优。

位置为整数，那么 $x$ 不能由上面的过程直接解出来。考虑 $f_i(x)$ 的二阶导：

$$
f''_i(x)=\frac{2l^2}{(x+1)^3}
$$

肉眼观察可得在 $x>0$ 时 $f''_i(x)>0$，所以 $f_i(x)$ 下凸。斜率已知，那么二分去求即可。

由于位置为整数，所以不能保证这么下来是最优解。那么求出 $d$ 之后先按 $d+1$ 算，因加一个就会减少 $d$，从而直接把需要额外加的传送机个数算上去即可。