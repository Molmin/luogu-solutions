## $\tt{Solution}$

考虑 dp。

设 $dp_{i,j}$ 表示填充了前 $i$ 位中的 `?` 且 $j$ 为前 $i$ 位中 `(` 的数量减去 `)` 的数量的值的合法方案数。则答案为 $dp_{n,0}$，递推起点为 $dp_{0,0} = 1$。

状态转移我们分为 $3$ 种：

1. $s_i$ 为 `(`，$dp_{i + 1,j + 1} \gets dp_{i,j} + dp_{i + 1,j + 1}$；

2. $s_i$ 为 `)`，此时需要判断一下 $j$ 是否为 $0$，如果为 $0$，那么此处不能转移，不然 $dp_{i + 1,j - 1} \gets dp_{i,j} + dp_{i + 1,j - 1}$；

3. $s_i$ 为 `？`，有将其变为 `(` 或 `)` 两种方法，所以需要把上面两种转移一起做一遍。

[Link](https://atcoder.jp/contests/abc312/submissions/44149163)