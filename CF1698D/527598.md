## 题意

这是一道交互题。

给你一个 $n$ ，有一个长度为 $n$ 的数列（ $n$  是奇数）。这个数列中，除了一个数，其他的数都两两交换了。你可以通过 `? l r` 的格式询问，来获取 $l$ 和 $r$ 中的所有数。最多只能询问 $15$ 次。以 `! ans` 的形式输出答案。

## 思路

因为只能两两交换，每个数只能交换一次，那么在同一个区间内，每个数有两种交换方法：

- 和区间外的数交换。如果答案不在区间内，一旦交换奇数个数，剩下奇数个数就无法在本区间内交换完成。

- 和区间内的数交换。同样也只能交换偶数个数，原因同上。

综上，一旦一个区间里出现了奇数个外区间的数，那答案一定在这个区间里。

考虑到只能查询 $15$ （ $\log 10^4 \le 15$ ）次，我们考虑使用二分。我们可以二分区间的左右端点，将它一分为二。若答案在当前区间内，则将当前区间一分为二继续二分，否则二分另一半区间。时间复杂度 $O(n \log n)$ 。

## 代码

```cpp
#include<iostream>
using namespace std;
bool check(int l,int mid){
    int ans=0;
    cout<<"? "<<l<<' '<<mid<<endl;
    for(int i=l;i<=mid;i++){
        int x;
        cin>>x;
        if(x<l||x>mid) ans++;
        //统计多少个数不在区间里
    }
    return ((mid-l+1-ans)&1);
    //如果在区间里的数是奇数，则说明答案在区间里
}
int main(){
    int t;
    cin>>t;
    while(t--){
        int n;
        cin>>n;
        int l=1,r=n;
        while(l<r){
            int mid=(l+r)>>1;
            if(check(l,mid)) r=mid;
            else l=mid+1;
        }
        cout<<"! "<<l<<endl;
    }
}
```