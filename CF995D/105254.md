upd:

感觉之前写的解释太假，于是就改了下 \kk

改完后可能写得有点太简洁X

主要思路其实就是考虑从终局状态逆推；而社论中的归纳总感觉有些奇怪（即我之前写的），于是就没采用那个思路 \fad

&nbsp;

（以下是原内容（前言）：）

做虚拟赛时前面几题没啥思路，就来看最后一题（div.2）

看懂题意时没什么想法，然而瞄了一眼数据发现答案都是数列的平均值；于是就试着写了一份交上去，居然过了，也没 fst \fad

结论的推导还是有一定难度的；然而这个结论实在过于优美，加上样例给得也挺足，感觉作为题目被瞎蒙出来的概率挺大...

## 解析

我们需要证明答案期望为 $\frac {\sum\limits_{x=0}^{2^n}f(x)} {2^n}$（也就是 $\{c_n\}$ 的平均值）

考虑从终局状态开始归纳：

### Part1

如果仅有一个位置未被确定，不妨设为 $i$，**此时**的答案显然为当前串 $x$（仅有 $i$ 位未确定）$i$ 位为 $0$ 与 $i$ 位为 $1$ 的平均值

（两位玩家的机会是等概率的，且一定是一个人想使该位为 $0$，一个人想使该位为 $1$）

### Part2

如果结论在 $k$ 时成立，我们考虑证明结论在 $k+1$ 时仍成立（有 $k+1$ 个位置未被确定）

设想使值最大的玩家为 $\texttt{A}$，想使值最小的玩家为 $\texttt{B}$；我们先假设该轮由 $\texttt{A}$ 决策，并考虑他的决策

此时应有 $2^{k+1}$ 个可能的最终的 $\texttt{01}$ 串状态；如果我们将第 $i$ 位的值确定，就相当于与将 $2^{k+1}$ 个状态划成两半，从中选择一半成为接下来的可能状态

首先此时 $\texttt{A}$ 应当会使接下来状态的**期望**值尽量大（原因可能有点玄学；算是约定成俗？）。由于我们已经证明结论在 $k$ 时成立，因此 $\texttt{A}$ 应当会选择所有划分中（所有可选择的位置 $i$ 中）的两个集合中平均值最大的那个集合，并相应地确定某个位置的值。不妨设 $\texttt{A}$ 将第 $i$ 位确定为了 $t$

接着我们考虑该轮由 $\texttt{B}$ 决策时 $\texttt{B}$ 会做出的决策。显然 $\texttt{B}$ 和 $\texttt{A}$ 恰好相反；他是要找到平均值最小的那个集合，并做出相应的操作。考虑我们**划分的过程**，不难发现这其实就是将第 $i$ 位确定为 $1-t$

而 $k+1$ 轮的答案就是 $\texttt{A}$ 操作得到的期望与 $\texttt{B}$ 操作得到的期望的平均（玩家的机会是等概率的）；由于 $\texttt{A}, \texttt{B}$ 选择的都是同一个位置，即划分出的两个状态集合没有交，因此 $k+1$ 轮的答案仍是这 $2^{k+1}$ 个状态的平均值（即结论仍成立）

## CODE

感觉其实没什么必要放 \kk