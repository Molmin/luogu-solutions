## Preface

赛后参考了@[ZJ_yiran](https://www.luogu.com.cn/user/371898) 的解法，个人认为甚是巧妙，但是我不会证，所以只留做法（即 Analysis1），证明留白。

## Analysis1

已知，如果有一种数的个数是奇数个，则答案为 `NO`。

否则答案为 `YES`。让**每个数组**中第 $2i$ 与 $2i+1$ 个数放在不同的集合中，让**每种数**的第 $2i$ 与 $2i+1$ 个放在不同集合中。构造答案即可。

构造答案只需建一张 以每个位置为点 的图即可，最后让图上相邻的点染不同颜色。

[Codeforces Status](https://codeforces.com/contest/1634/submission/145550137)

## Analysis

以 **数** 与 **数组** 分别作为点，以数与数组的关系作为边（即：一种数 $x$ 在某数组 $i$ 中出现了 $k$ 次，则在 数的点 $x$ 与 数组的点 $i$ 之间连 $k$ 条边）。

如果有**任何一个**数出现了奇数次，则答案为 `NO`，很好理解，因为两边的可重集合不可能相等了。

否则每个作为数的点的度为**偶数**，每个作为数组的点的度也为**偶数**。现在图是无向的。接下来我们要将无向图变为有向图。

由于每个点的度都是偶数，所以一定能做到让有向图中每个点的**入度** $=$ **出度**，就成了一个**有向欧拉回路**。让每条由 数组 指向 数 的边的**终点的数**放入左边集合，每条由 数 指向 数组 的边的**起点的数**放入右边集合。DFS 构造答案即可。

写代码时注意，因为每条边都只会**经过一次**，所以走一条边之间把这条边**弹掉**，用 $vis$ 数组标记会 TLE。

[Codeforces Status](https://codeforces.com/contest/1634/submission/145655627)