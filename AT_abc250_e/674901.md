尺取法。

假设目前选择了 $a$ 数组中前 $i$ 个数，那么可以通过尺取得到满足条件的区间 $[L_i,R_i]$，满足在 $1$ 到这个这个区间的任意一个位置中 $a_1\sim a_i$ 和 $b_1\sim b_j$，$j\in [L_i,R_i]$ 里面的数相等。

然后对于每一个 $a_i$ 直接进行判断即可。

时间复杂度 $O(n)$。