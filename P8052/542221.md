$$
\text{Solution}
$$

一道十分有趣的交互题。

我们知道，“真心话”操作返回的是 $x,y,z$ 中 Percy **第二喜欢的人**，所以该操作不可能返回 Percy **最喜欢的人**与**最不喜欢的人**。

既然如此，我们便可以维护一个队列 $q$，初始时存入 $1 \sim n$ 每个人，接着不断取出队首的 $3$ 个元素进行”真心话操作，得出其中第二喜欢的人，并将剩余的人重新放回队列中。这样循环 $n-2$ 次之后，队列中便只剩下了 Percy 最喜欢与最不喜欢的人了。对这两人进行一次“大冒险”操作，就得到了 Percy 最喜欢的人。先将其输出。

在得到了 Percy 最喜欢的人之后，我们将除去此人之外的所有人存入 $a$ 数组，并将 $a$ 数组排序并输出即可。

那么问题来了，如何对 $a$ 数组排序？注意到“真心话”操作返回的是 Percy 第二喜欢的人，也就相当于返回 **在除去第一喜欢的人之外的两人中，Percy 最喜欢的人**。利用这一机制，我们便可将其写成 `cmp` 函数，不断地将待比较的两数与 Percy 最喜欢的人进行“真心话”操作，从而确定这两个数的排名。具体实现如下：

```cpp
bool cmp(int x,int y){
    cout<<1<<' '<<best<<' '<<x<<' '<<y<<' ';
    //best、x、y分别表示Percy最喜欢的人与待比较的两数
    fflush(stdout);
    
    k=read(); //k接收“真心话”操作的返回值
    return k==x?1:0;
}
```

注意：

- 每次输出后要勤加 `fflush(stdout)` ！！！

- 每次操作前，不要忘记输出操作种类！！！

---

$$
\text{Code}
$$

- [代码](https://www.luogu.com.cn/paste/1zgbt9o8)。

- [测评记录](https://www.luogu.com.cn/record/list?pid=P8052&user=542221&page=1)。

完结撒花~