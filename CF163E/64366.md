夜中不能寐，起坐写题解qwq
  
首先看到这是字符串题，还是字符串匹配。于是想到AC自动机。。。然而我觉得它会TLE（？），于是考虑后缀数组。。  

做法：  
1.把所有字符串，包括模板串和查询串，连在一起，中间用奇怪字符隔开（套路qwq）  
2.对于每个模板串，在后缀数组上二分lcp找到可以匹配它的后缀所在的区间（也是套路qwq）  
3.维护一个树状数组，按顺序枚举每一个操作。对于‘+’，把相应模板串对应的可匹配区间加1；对于‘-’，把相应模板串对应的可匹配区间减1；对于‘？’，枚举相应查询串在后缀数组中对应的每一个位置，把它们在树状数组中的值加起来，这就是该询问的答案  
4.没了QwQ  

时间复杂度：O(nlogn)，非常正确qwq