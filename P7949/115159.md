并不记得格雷码是啥了www 于是有了一个奇怪的神必做法，阳间做法在最后面。

首先 $2|k$ 显然是无解的，奇偶分析即可。

不妨设 $S=\{ x|x\in [0,2^n-1],popcount(x)=k\}$，
设 $a_i \oplus a_{i-1}=x_i$，则原题等价于构造一组 $x_i\in S$，使得 $x_i$ 的异或前缀和即 $a_i$ 互不相同，异或前缀和互不相同又等价于子序列异或和均不为 $0$。

观察样例，写出其对应的 $x$：$1110,1101,1110,1011,1110,1101,1110,0111,1110,1101,1110,1011,1110,1101,1110$ 发现它有一个很神奇的规律，模 $2$ 余 $1$、模 $4$ 余 $2$、模 $8$ 余 $4$ 的位置填的都是相同的数，也可以理解为将每次将奇数位填上同一个数，再递归填偶数位。这种填法有一个很神奇的性质，首先对于长度为 $2^n-1$ 的序列它只出现了 $n$ 个不相同的数，更重要的是它不存在一个子序列满足其中每个数都出现偶数次，这个手玩一下可以发现是正确的，证明后面尝试给出。有了这个性质，我们可以求出 $S$ 的一组线性基，而线性基大小刚好是 $n$，可以将这 $n$ 个数按这种方式填入得到序列 $x$，因为线性基任意非空子集异或和均非 $0$，所以 $x$ 不存在异或和为 $0$ 的子序列，求异或前缀和即可得到 $a$。

证明：设序列长度为 $2^n-1$，考虑长度为 $l$ 的子序列，若 $l>=2^{n-1}$，则该子序列必定包含 $2^{n-1}$ 位置的数，由序列的生成方法知道这个数只出现了一次，所以该子序列满足我们要的性质。若 $l<2^{n-1}$ 且不包含位置 $2^{n-1}$，因为原序列 $[1,2^{n-1}-1]$ 和 $[2^{n-1}+1,2^n-1]$ 的部分同样满足该生成方法，于是归纳可得证。

然后这题撞题ARC138了www，这里也简要给一个AT和大部分题解的做法：求出长度为 $2^n$ 的格雷码（相邻两数二进制表示只有一位不同），也即此题 $k=1$ 时的情况，然后将取 $S$ 的一个线性基设为 $b_0,b_1...b_{n-1}$，则 $a_i=b_{t_1}\oplus b_{t_2}...$，其中 $t$ 为格雷码第 $i$ 项二进制表示下为一的所有位置。正确性显然，相邻两项异或值为 $b$ 的某一项，线性基任意子集异或和互不相同。

有没有神仙能指出两个做法是否本质相同啊/se/se