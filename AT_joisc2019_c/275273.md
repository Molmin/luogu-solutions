考虑贪心。发现第 $i$ 个人获得的愉悦度越接近 $\frac{\sum\limits_{j=1}^L v_{i,j}}{n}$ 越好，因为给其他人的空间就越多。因此先预处理出每个人将将整个馕划分为 $n$ 段愉悦值相同部分的端点 $d_{i,1},d_{i,2},...,d_{i,n-1}$。

构造第 $j$ 段时考虑每次取最小的 $d_{i,j}$ 作为断点并把这一段分给第 $i$ 个人。因为上一个断点 $\le d_{i,j-1}$（每次取最小），所以很神奇地满足了条件。

[code](https://loj.ac/s/1720115)