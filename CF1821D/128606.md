首先操作次数可以拆分为两部分：
1. 最远向右走到哪里。
2. 涂了多少连续段。

对于这种问题，类似 [P2107](https://www.luogu.com.cn/problem/P2107) 的套路，我们先确定最远走了多少，然后贪心最小化第二部分的代价。

贪心部分显然，尽可能保留长的连续段。

从左到右枚举每个连续段。遇到新的一段时，若当前总长度加上这段仍不够，我们直接把这段加入，然后考虑下一段。

否则，我们先在这段上走一部分让总长度够，然后考虑用剩下的部分替换一些段。

有结论是，这种情况下，被替换的段长度只能为 $1$。

考虑如果我们要替换掉一个 $x$ 长度的连续段，那就要往右多走 $x$ 步，然后可以少涂一段，减少的操作次数为 $2-x$。因此，$x\neq 1$ 的情况下一定不优。

因此，记录当前选了几段，以及有多少段长度为 $1$，每次暴力替换即可。

这样无需考虑新加入一个整段时，对之前段选法的影响。因为如果替换掉的长度只有 $1$，那么会在上一部分暴力处理完。否则就是多走至少 $x$ 步来节约两步，此后的决策一定是不优的。

[code](https://codeforces.com/contest/1821/submission/202864688)。