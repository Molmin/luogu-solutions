本文提供一种写法十分简洁的线性做法。（然而本蒟蒻赛时写了一个线段树上二分还没调出来

首先，我们可以枚举最后一个选的线段是哪一条，考虑前面选了哪些线段，不难发现，选一个前面的线段的代价为 $2$，这就意味着，选掉前面的所有长度 $\ge 2$ 的线段一定不劣，那么预处理出前面线段 $\ge 2$ 的线段的数量和长度，以及长度为 $1$ 的线段的数量，便可以直接计算最后一条线段为当前线段的最小代价了。具体实现可以看[代码](https://codeforces.com/contest/1821/submission/203025332)。