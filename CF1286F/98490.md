暴力过题。

答案有个显然的上界 $n$，每次都用操作一即可。

那么我们需要找到一些集合 $|S|$ 满足用 $|S|-1$ 次操作二就把它全部变成 $0$。

然后观察一下，如果把用一次操作二看成是一个连边，每次连边相当于是一个连通块乘上 $-1$，然后两个加起来。

找一下符号的性质，可以发现只有全是 $+$ 和全是 $-$ 是不合法的。

那么枚举一个非空真子集，作为减去的然后判断即可，这部分复杂度 $O(3^n)$。

然后合并，这部分是一个简单的子集合并 dp，复杂度 $O(3^n)$。

但是这样还过不去，上面两个过程一个过程需要跑 6s，时限 9s，比较有机会。

瞎剪枝一下，判断部分找到解就退出，并且记录所有合法解的集合，然后在后面 dp 枚举子集的时候，如果合法解的数量少于子集个数就枚举合法解。

这样合法解的数量是多还是少都可以有很明显的优化，总复杂度还是 $O(3^n)$，但是只用 7s 不到就过了。

[code](https://codeforces.com/contest/1286/submission/205526187)。