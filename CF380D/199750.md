一道有趣的组合题。

我们先考虑什么样的入座方式是合法的。

结论：一个入座方式是合法的，当且仅当任意时刻已经入座的人都是一个连通块。

证明很显然，假设有两个连通块，那么它们最终会相遇，在相遇的地方，一定有不合法的一个位置。

然后我们就可以做了。

我们先考虑第一个人的位置，如果已经确定了，那么我们就找到她的位置，如果没有确定，我们就枚举起点。

先对已经确定顺序的人排序。

模拟连通块的扩展，我们考虑记录当前连通块的左端点为l，右端点为r。

我们考虑下一个已经确定的人的入座位置在pos，如果$l\le pos \le r$，那么就不合法，返回0。

否则如果$pos<l$ （$pos>r$同理，不再讨论）

假设上一个入座的与这个人之间有x个人要入座，如果$x<l-pos-1$（即不够l到pos的座位），那么就不合法，返回0，否则考虑这x个人一部分可以坐左边，一部分可以坐右边，那么入座方法就有$C^{x}_{l-pos-1}$种，再扩展连通块，继续递推即可。

最后统计所有情况答案求和即可。

