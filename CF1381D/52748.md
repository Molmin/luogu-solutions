## CF1381D

设 $len = dis(a, b)$。

有解的必要条件为：

 - 存在一个特殊点，具有三条与其相连的长度大于等于 $len$ 的不交链。

至于为什么不充分，是因为可能存在这条蛇被卡在两个叶子而动弹不得的情况。

所以需要首先判断是否存在特殊点，任取一个，以该点为根，使得$a,b$ 轮流向叶子移动，当 $a, b$ 其中一个是另一个的祖先时即可判断合法。

若移动 $n$ 次以上依然不合法，即为无解。

读完上述流程你想问为什么可以任选一个特殊点。

这是因为特殊点之间是彼此可达的，其中一个无解其他的也都会无解。
