考虑使用二分优化选数过程。

记 $x\le mid$ 为 0，$x>mid$ 为 1.

最终得到的数列形如

$$\color{blue}01010\color{red}11\color{blue}0101$$

考虑找到最靠中间的“一对” 0 或者 1.

它们的即是最后在顶上方的那个数字。

考虑证明一下：

我们选择中位数的时候，无非四种情况：

- `0 0 0`
- `0 0 1`
- `0 1 1`
- `1 1 1`

而这四种情况中，出现次数最多的数码一定被选出来。

那么考虑相邻的“一对” 0 或者 1，相当于投票，我给你投一票，你也给我投一票，咱们俩手牵着手就上去了。

但是有多对相同的数的时候，边上的数有时候被强行合并上去，不能再接着帮忙投票。

所以最靠近中间的位置最佳也就不难证。

本篇题解主要是把二分之后检验的过程说明白一点，代码和外面的二分参见其他已有题解即可。