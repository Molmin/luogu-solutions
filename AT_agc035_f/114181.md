
**简要题意：**  
 有一个 $n \times m\space (1 \le n,m \le 5 \times 10^5)$ 的棋盘，对于每一行和每一列选择当前行和列的一个格子，并将从这个行或列的起始点到这个格子全部             	  $+1$，得到的棋盘本质不同的有多少种。

**Solution**:  
随便操作一下，容易发现很容易就将染出重复颜色棋盘来。重复的原因在于一行一列交在了一起并且不再向下延申，而此时这种染色    	  情况对应了两种染色的方案，所以我们规定当且仅当行染到这里才是合法的，明显地，这样规定之后不会对答案产生干扰。这样对重复的东西规   	  定之后，不难想到使用容斥（二项式反演）来统计方案，我们设 $f(i)$ 表示规定 $i$ 个位置不合法，其余随便填。那么 $f(i)$ 方便表示出来。
$$
f(i) = i! {n \choose i} {m \choose i} (m + 1)^{n - i}(n + 1)^{m - i}
$$
 具体意义是，我们先随便选将要产生不合法的行和列，然后利用 $i!$ 对行和列进行配对，这样对于选取的行和列而言，其结果已经固定，再对剩下 	  的行和列进行选取。有了这一个那么 $g(i)$ 就会是恰好 $i$ 个位置不合法，答案将会是 $g(0)$ 。其满足 $f(i) = \sum_{j = i}^n {j \choose i}g(j)$ ，所以 $g(0)$ 可由反演得	  出 $g(0) = \sum_{i = 0}^n (-1)^i{n \choose 0} f(i)$。

**Summary**: 个人认为此题中规定**合法**方案很有价值，这是对于重复方案的一个很经典的处理。