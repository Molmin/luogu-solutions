*UPD ON 5/2: fix typo*

本质上是一个组合题。

定义$f(n,k)$表示**前$n$位得分差为$k$的方案数**。对它 DP 可以过第一个 Subtask。

要过第二个，我们就要注意到，$f(n, k) = f(n, -k)$。这样，我们可以**算出不变的方案数，用$k^n$减去它，除以$2$即可**。

也即，

$$ans=\frac{k^n-f(n,0)}2$$
问题就变为求出$f(n,0)$的值。而**对于每一题，它可以在旋转后多得$1$分，少得$1$分，或者分数不变。**

注意到**我们不关心实际上的答案是多少，只在乎分数的变化。** 同时，一个测试点可能对总分造成影响，当且仅当它和下一个点正确答案不同，我们记这样的点有$m$个。

对于所有$0 \le i \le \lfloor\frac{m}2\rfloor$，我们认为，加分的题有$C^i_m$种，减分的题有$C_{m-i}^i$种，剩下的题只要对分数没有影响就可以随便填，有$(k-2)^{m-2i}$种。

因此，我们有

$$f(n,0)=\sum_{i=0}^{\lfloor\frac{m}2\rfloor}C^i_mC_{m-i}^i(k-2)^{m-2i}$$
代回上面的式子，我们就得到答案为

$$ans=\frac{k^n-f(n,0)}2=\frac{k^n-\sum_{i=0}^{\lfloor\frac{m}2\rfloor}C^i_mC_{m-i}^i(k-2)^{m-2i}}2$$

计算即可。[Code](https://codeforces.com/contest/1262/submission/65728386)。