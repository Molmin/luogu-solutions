# CF1415A Prison Break

签到题，求所有人逃走的最短时间即每个人走最优路线到 $(r,c)$ 的最短时间。答案取决于离 $(r,c)$ 最远的那个人逃走的时间，也就是离 $(r,c)$ 最远的人和 $(r,c)$ 的曼哈顿距离(横纵坐标差之和)。

如(x,y) 和 (r,c) 的曼哈顿距离可以表示为：

$$
dist = |x - r| + |y - c|
$$

最远的人只有四种情况，即监狱的四角，可以证明：

首先，一个点向任意方向移动一格，它和 $(r,c)$ 的曼哈顿距离非增即减，因为平移会导致它的横坐标或纵坐标变化 $1$。

不妨设最远的人 $(x,y)$ 不再角上，那么它至少可以朝三个方向移动，三个方向有两个方向一定相反 (由于横纵坐标在这里等价，所以这里按横坐标变化推导)，分别得到 $(x + 1,y)$ $(x - 1,y)$。由于没有比 $(x,y)$ 更远的点，所以：

$$
\begin{cases} 
|x - 1 - r| + |y - c| < |x - r| + |y - c|
\\
|x + 1 - r| + |y - c| < |x - r| + |y - c|
\end{cases}
$$

整理得：

$$
\begin{cases} 
|x - 1 - r| < |x - r|
\\
|x + 1 - r| < |x - r|
\end{cases}
\\
\because |x - 1 - r| < |x - r|, x - 1 - r < x - r\\
\therefore x - r > 0\\
\because |x - r| > |x + 1 - r|, x - r < x + 1 - r\\
\therefore x - r < 0\\
$$

$x - r > 0$ 和 $x - r < 0$ 矛盾，所以假设不成立，所以最远的点一定在四角上。

四角坐标分别是 $(1,1)$，$(n,1)$，$(1,m)$，$(n,m)$。

由于 $1 <= r$，$1 <= c$，$n >= r$，$m >= c$，已经确定，所以不用讨论正负。

四角到 $(r,c)$ 曼哈顿距离分别是：

$$
\begin{cases} 
r - 1 + c - 1\\
n - r + c - 1\\
r - 1 + m - c\\
n - r + m - c
\end{cases}
$$

答案就等于它们的最大值，由于横纵坐标差相互独立，所以答案便是最大横坐标差和最大纵坐标差之和，即：

```cpp
ans = max(n - r, r - 1) + max(m - c, c - 1);
```

## 代码

```cpp
int n, m, r, c, t, ans;
int main() {
  t = RD();//读入优化, 函数省略了
  for (register int T(1); T <= t; ++T) {
    n = RD();
    m = RD();
    r = RD();
    c = RD();
    ans = max(n - r, r - 1) + max(m - c, c - 1);
    printf("%d\n", ans);
  }
  return 0;
}
```