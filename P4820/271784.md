题目传送>>[P4820](https://www.luogu.com.cn/problem/P4820)  
### 题意简述：  
- 如图，在“理想状态”（不计地球自转和重力系数的变化，书质量均匀、质地坚硬）下，$N$ 本长度为 $M$ 相同的书堆在水平桌面上，书在桌面一端尽可能地向外延伸（如果某本书以上的所有书的重心的竖直射影不在这本书上，或者正好落在在这本书的边界上，那么这堆书是不稳定的，会因为重力而垮下来），求这些书可伸出桌缘的最远距离 $L$。  
![](https://cdn.luogu.com.cn/upload/pic/30575.png)  
- $N \le 10^{18}$，$L<10^6$。  

### 题目分析：  
要使这些书能尽可能的伸出桌缘最远，我们可以先对每次上面一本书的重心恰好落在下面一本书的边界上的情况进行计算，虽然此时这些书会倒塌，但是最后要使目的达成，我们只需在此基础上减去一个非常非常小的值即可使这些书能堆叠且伸出桌缘最远。  
我们从上往下推:  
假定每本书长度为 $1$，  
当 $n=1$ 时，$L= \frac{1}{2}$；  
当 $n=2$ 时，$L= \frac{1}{2}+ \frac{1}{4}$；  
当 $n=3$ 时，$L= \frac{1}{2}+ \frac{1}{4}+ \frac{1}{6}$；  
......  
当 $n=N$ 时，$L= \frac{1}{2}+ \frac{1}{4}+ \frac{1}{6}+......+ \frac{1}{2n}$；  
我们可以发现本题答案就是 $\sum_{i=1}^{N}\frac{1}{2i}$。  
**但是**，请注意一下本题数据范围：$N \le 10^{18}$，$L<10^6$，如果直接这样算的话是绝对不能 AC 的，那么我们就来考虑数学。  
上面我们推得公式：$L= \frac{1}{2}+ \frac{1}{4}+ \frac{1}{6}+......+ \frac{1}{2n}$，而数学中有调和级数 $H(x)$（由所有正整数的倒数依次形成的级数），例：$\frac{1}{1}+\frac{1}{2}+\frac{1}{3}+\frac{1}{4}+\frac{1}{5}+\frac{1}{6}+\frac{1}{7}+\frac{1}{8}+\frac{1}{9}+\frac{1}{10}+......$  
我们可以发现本题答案即：$\frac{H(x)}{2}$。而由于调和级数 $H(x)$ 是发散的，所以调和级数 $H(x)$ 并无求和公式，但是当 $n$ 很大时有一个渐进表达式：$\sum_{i=1}^{n}\frac{1}{k}= \ln(n)+\gamma$，其中 $\gamma$ 为欧拉常数，近似值为: $0.57721 56649 01532 86060 65120 90082 40243 10421 59335$。  
所以我们对于 $N$，小值借助 $\sum_{i=1}^{N}\frac{1}{2i}$，大值借助 $\frac{H(x)}{2}$ 即可。  
**额外注意：long long 与最终需减去一个非常非常小的值。**  
### Code:  
```cpp
#include <iostream>
#include <cmath>
using namespace std;
typedef long long ll;   //类型定义long long为ll，避免频繁使用时累手
#define endl '\n'   //宏定义endl换行
ll n, m;   //定义书本数，书的长度
double l = 0.0;   //定义书可伸出桌缘的最远距离
int main()
{
	ios::sync_with_stdio(0);   //关同步流加速cin输入和cout输出
	cin >> n >> m;
	if (n < 1e8)   //小值借助累加求和
	{
		for (ll i = 1; i <= n; i++)
		{
			l += 1.0 / (2 * i);
		}
		cout << (ll)(m * l  - (1e-6)) << endl;   //注意减去一个非常非常小的值与换行
	}
	else   //大值借助调和级数
	{
		cout << (ll)(m * (log(n) + 0.5772156649) / 2 - (1e-6)) << endl;   //注意减去一个非常非常小的值与换行
	}
	return 0;   //结束整个程序
}
```
### 结果（未吸氧）：  
![Jieguo](https://cdn.luogu.com.cn/upload/image_hosting/gm0csfyr.png)  
企鹅的题解到此结束，祝各位 OIers 进步 ++~