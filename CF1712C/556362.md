一个比较有意思的思维题。

首先，容易想到，因为 $a_{i}>0$，所以说若 $i$ 被赋为 $0$，那么 $[1,i]$ 就会被赋为 $0$。

那么，我们可以记录一个数组 $r$，$r_i$ 表示 $a_i$ 最后一次出现的位置。然后记 $R$ 表示我们需要清空 $[1,R]$。

然后找到最右边的使序列拥有降序的位置 $i$，那么此时需要覆盖的区间是 $[1,r_i]$，但是这步之后还没有结束，因为容易发现，$\max\limits_{j=1}^{r_i}r_j\ge r_i$，也就是说，此时我们需要清空的区间转化为 $[1,\max\limits_{j=1}^{r_i}r_j]$。

注意到此时区间继续加长，那么可以 $R$ 就会一直往右跳，知道 $R=n$（此时不能往右跳）或 $\max\limits_{i=1}^Rr_i=R$（此时在原地跳）就结束。

那么我们就只需要模拟这个往右跳的过程即可，注意到所有的对于最大值的信息左端点都是 $1$，所以可以使用前缀 $\max$。

时间复杂度 $O(\sum n)$，注意 $r$ 需要动态清空。