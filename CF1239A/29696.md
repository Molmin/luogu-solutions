[更好的阅读体验](https://llf0703.com/p/cf-1248.html#civanthefoolandtheprobabilitytheory)

先考虑只有一行的情况，令斐波那契数列的第 $m$ 项为 $f_m$ ，那么方案数为 $f_m\times 2$ （黑白可以交换）。

如果第一行中不存在同种颜色相邻的情况，有 $2$ 种方案：这时确定了第一列就确定了整个图，所以答案为 $2f_n$ 。

如果第一行存在同种颜色相邻的情况，有 $f_m\times 2-2$ 种方案：这时整张图就确定了，答案为 $2f_m-2$ 。

总的答案即为 $2f_n+2f_m-2$ 。