没人写题解？那我试着写一篇。

我们把保证无论农民的牌如何，地主一定能春天的地主初始手牌称为**春天牌**，第六、第七组数据要求输出的答案就是春天牌的数量

这题表面上是个数数题（还故意写对998244353取模），但根据直觉分析，春天牌的数量**应该不多**（通过写代码计算可以验证数量在 $10^4$ 到 $10^5$ 之间，这里不写出具体数值），我们对于每一组数据，**枚举它属于多少种春天牌**即可。现在的问题是如何**找出所有的春天牌**。

春天牌一定属于下列**两种情况之一**（或者下列两种情况都满足）：

1. 包含**大小王**两张牌**至少一张**，并且包含除**大小王之外**的**每种数码**的牌**至少一张**；

2. 去掉若干组**炸弹和火箭**后，剩下的牌可以**一次打出**。

上面这句话的正确性非常显然，如果**不满足第二种情况**，意味着地主需要打出**至少两次**非炸弹火箭牌，所以**第一次**打出非炸弹火箭牌时，由于地主手里还有牌，所以打出的牌可能被农民炸掉，所以农民**不能存在**炸弹和火箭，即需要**满足第一种情况**。

下面分两种情况考虑：

## 第一种情况

先枚举第一种春天牌中的王牌是**只有一张小王**，**只有一张大王**，还是**大小王都有**。

由于第一种春天牌除大小王之外每种数码的牌至少一张，所以到目前为止我们已经有**14张或15张**牌已经确定，我们可以用**DFS**确定剩下的**5张或6张牌**，确定之后再**套一个DFS**判断确定的牌是否**属于**第一种春天牌。

我们需要判断我们第一层DFS搜索出来的20张牌是否**属于**第一种春天牌，可以看出，这一种情况能保证农民必然**没有炸弹和火箭**，所以我们可以枚举地主**可以打出的手牌**，判断这一手牌有没有可能被农民**接的上**，如果**不可能**，把这一手牌打出，并**递归搜索**剩下的可以打出的手牌。

按照我的枚举手牌的顺序，我先枚举**顺子**，先枚举顺子的**开头数码**，然后从小到大枚举顺子的**结尾数码**，如果地主**存在**数码为枚举的结尾数码的牌**至少一张**，说明枚举的结尾数码可以**继续增大**，但是注意只有结尾数码和开头数码的**差值大于4**时这手牌**才能打出**，而且结尾数码**不能超过A**，判断这一手牌有没有可能被农民**接的上**时，按**类似**的方法枚举顺子即可。

同理枚举**连对**，先枚举连对的**开头数码**，然后从小到大枚举连对的**结尾数码**，如果地主**存在**数码为枚举的结尾数码的牌**至少两张**，说明枚举的结尾数码可以**继续增大**，但是注意只有结尾数码和开头数码的**差值大于2**时这手牌**才能打出**，而且结尾数码**不能超过A**，判断这一手牌有没有可能被农民**接的上**时，按**类似**的方法枚举连对即可。

我们把**三张牌**视为**只含一组**三张牌的**三顺**，并相应地把**三带一**和**三带二**视为**飞机**，那么我们可以类似地枚举**三顺**和**飞机**，先枚举三顺或飞机的三顺部分的**开头数码**，然后从小到大枚举三顺或飞机的三顺部分的**结尾数码**，如果地主存在数码为枚举的结尾数码的牌**至少三张**，说明枚举的结尾数码可以**继续增大**，如果枚举的是**飞机**，则还要**再套一层DFS**枚举飞机的**单牌部分**或**对子部分**，注意到结尾数码和开头数码的**差值没有要求**，但是结尾数码在**不等于开头数码**时**不能超过A**，由于农民牌的**总数量很多**，所以在判断农民是否存在比**枚举的飞机**要大的**飞机**，只要枚举农民是否存在比枚举的飞机**三顺**部分要大的**三顺**。（顺带一提，NOIP2015提高组的斗地主是没有飞机的）

接着枚举**炸弹**和**四带二**，先枚举**四张相同**的牌，如果要枚举**四带二**，则再枚举**剩下两张**牌，注意到当地主打出**炸弹**和**四带二**的时候，农民**一定要不起**。

最后只剩下**单牌**和**对子**、**火箭**没有枚举，枚举**单牌**和**对子**，在判断农民时候能**接的上**即可，不需要额外枚举**火箭**，因为当你拥有组成火箭的**大王和小王**时，你可以把它们**分开走**，农民**一定要不起**。

第一种情况的统计是**最花时间的**，我的代码在O2条件下要跑**2.78s**,但足以**通过此题**。

## 第二种情况

先枚举**一次打出的手牌**。（枚举的方法与**第一种情况**有点像）

按照我的枚举**一次打出的手牌**的顺序，先枚举**对子**，不必枚举**单牌**和**火箭**，因为**炸弹**有**4张**，它和**火箭**都是**偶数张**，一次打出的手牌肯定**不是单牌和火箭**。

然后同样把**三张牌**视为**三顺**，枚举**三顺**和**飞机**，枚举三顺或飞机的三顺部分的**开头数码**和**结尾数码**，如果枚举的是**飞机**，再用DFS枚举飞机的**单牌部分**或**对子部分**，注意结尾数码在**不等于开头数码**时**不能超过A**。

接着枚举**顺子**和**连对**，枚举**开头数码**和**结尾数码**即可，但注意枚举**顺子**时结尾数码和开头数码的**差值**必须**大于4**，枚举**连对**时结尾数码和开头数码的**差值**必须**大于2**。

最后枚举**炸弹**和**四带二**，先枚举**四张相同**的牌，如果要枚举**四带二**，则再枚举**剩下两张**牌。

枚举完**一次打出的手牌**之后，就是向其中添加**炸弹和火箭**，将**一次打出的手牌**变为**第二种春天牌**。

一开始**现在的手牌**是**一次打出的手牌**，如果**现在的手牌**中没有王，则将**现在的手牌**加上**两个王**，接着**从2开始**，按照**数码从大到小**的顺序判断**现在的手牌**中是否存在**相应数码**，否则加上**四个**数码为**相应数码**的牌，直到**现在的手牌**有**20张为止**，那么**现在的手牌**就是**第二种春天牌**。

很明显这种方法是对的，因为否则最后产生的包含20张的**现在的手牌**必须先走完所有的**炸弹**再走**一次打出的手牌**，并且打出**炸弹**有可能被农民打出的**炸弹**或**火箭**接的上。

第二种情况的计数**几乎不花时间**，我的代码在O2条件下只要**5ms**。

注意到得到的**第二种春天牌**会有重复，也会有一些属于**第一种春天牌**，把两种春天牌**去重**即可。

---------------------------------------

计算每个数据属于多少种春天牌也要**花大量时间**，**但不会太长**，对于第10个点我的代码在O2条件下大约需要**1.44s**。

呃……好像写太多了……差不多就写这些吧。代码太丑这次就不附了。