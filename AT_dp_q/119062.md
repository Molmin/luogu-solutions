看完题目可以发现这是个“最大价值子序列”。

可以像求 LIS 一样做。

设 $f[i]$ 表示以 $i$ 为结尾的最大价值。

那么 $f[i]=\max\{f[j]\}+v[i]\ \ ( j<i,a[j]<a[i])$

朴素做法是 $\mathcal{O(n^2)}$ 的。

这实际上是维护个二维偏序，也就是正序对。

所以可以用 BIT 维护。

这里的 $h$ 数组，良心出题人已经帮忙离散化了，可以直接做。

时间复杂度 $\mathcal{O(n\log n)}$。




