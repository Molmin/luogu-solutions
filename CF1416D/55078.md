重构树。

看到删边操作马上倒过来变成加边。但发现我们不好处理出每个联通块包含哪些点。

于是我们就可以考虑把他放到重构树上。具体地，每次 merge 都新建一个点 $p$，将 $f_{u}$ 与 $f_{v}$ 均设为 $p$，并在重构树上将 $p$ 的儿子设为 $u$ 和 $v$。

那么一次操作在重构树上就是一个子树操作。随便整棵线段树维护维护就行。

提交记录：https://codeforces.com/contest/1416/submission/94040207

C++11 有个 feature 就是你在结构体里头开一个很大的数组会 CTLE。解决方案是加一个空构造函数。