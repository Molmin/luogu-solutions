注意到我们可以询问的信息只有区间和，一个自然的想法就是利用前缀和的思想，以区间求差得到某个单点的值。

此处为了方便，将 $l$ 至 $r$ 的区间和记为 $s_{l,r}$，将第 $i$ 项的值记为 $a_i$。

则很明显的，有 $s_{l,r} - s_{l+1,r} = a_l$。

以原题样例为例：

1. 询问 $s_{1,6}$，得到 $30$。

1. 询问 $s_{2,6}$，得到 $29$。此时可以推出 $a_1 = 30 - 29 = 1$。

1. 询问 $s_{3,6}$，得到 $25$。此时可以推出 $a_2 = 29 - 25 = 4$。

1. 询问 $s_{4,6}$，得到 $21$。此时可以推出 $a_3 = 25 - 21 = 4$。

1. 询问 $s_{5,6}$，得到 $15$。此时可以推出 $a_4 = 21 - 15 = 6$。

1. 询问 $s_{6,6}$……

等一下，题目规定询问必须满足 $l < r$，但 $s_{6,6}$ 根本就没满足啊？

首先理清楚，我们已经用 $n-1$ 次询问求出了 $a_1$ 到 $a_{n-2}$ 里的所有数的数值，只剩下了 $a_{n-1}$ 和 $a_n$。

此处有一个技巧：可以询问 $s_{1,n-1}$，则 $a_n = s_{1,n} - s_{1,n-1}$，而 $s_{1,n}$ 和 $s_{1,n-1}$ 都被询问过了，所以可以直接计算 $a_n$，而根据刚才的过程，$s_{n-1,n}$ 已经被询问过了，因此可以直接算出 $a_{n-1} = s_{n-1,n} - a_n$。

至此，我们用了正好 $n$ 次询问求出了数列 $a$ 的每一项的值，直接输出即可。

注意事项：

- 输出询问操作前要输出一个问号，输出整体答案前要输出一个感叹号。

- 这是一道交互题，请按照正常交互操作进行询问和给出答案。

解决了这些问题，代码便很好写了。

```cpp
#include <iostream>
using namespace std;
int a[1001];
int lst,nw;//这里进行了一点优化，用lst存储上一次输入的结果，用nw存储本次输入的结果
int n;
int _1n;//存储1到n的区间和，最后要用
int main(){
	cin>>n;
	cout<<"? "<<1<<" "<<n<<endl;
	cin>>lst;
	_1n=lst;
	for(int i=2;i<n;i++){//正常操作求出前n-2项
		cout<<"? "<<i<<" "<<n<<endl;
		cin>>nw;
		a[i-1]=lst-nw;
		lst=nw;
	}
	cout<<"? "<<1<<" "<<n-1<<endl;
	cin>>nw;
	a[n]=_1n-nw;//求出最后一项
	a[n-1]=lst-a[n];//根据刚才的操作，易知存储最后两项和的变量是lst变量，根据这个求出倒数第二项
	cout<<"! ";
	for(int i=1;i<n;i++) cout<<a[i]<<" ";
	cout<<a[n]<<endl;
	return 0;
}
```
