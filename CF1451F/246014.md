## CF1451F 【Nullify The Matrix】

### 题意

+ $n\times m$ 的棋盘，每个点有非负权值 $a$；
+ Ashish 和 Jeel 轮流操作，Ashish 先手；
+ 每次选两个坐标，$(x_1,y_1),(x_2,y_2)$，需保证 $x_1\le x_2,y_1\le y_2,a_{x_1,y_1}>0$，把 $a_{x_1,y_1}$ 减去一个正整数（保证它还是非负整数），选一条 $(x_1,y_1)$ 到 $(x_2,y_2)$ 最短路径（包括 $(x_2,y_2)$，不包括 $(x_1,y_1)$，为同一点则不操作），路径上每一点可以改为任意非负整数（可以不改）；
+ 不能操作者输；
+ $n,m\le100,a\le10^6$。

### 做法

定义第 $x$ 个斜列表示所有横纵坐标和为 $x$ 的点集，点集内所有点异或和记为 $sum_x$。

$SG$ 函数等于 $0$ 当且仅当所有 $sum_x$ 均等于 $0$。

证明：
1. 最终状态即全零时 $SG$ 函数等于 $0$；
2. $SG$ 函数等于 $0$ 时操作一次后，$SG$ 函数一定不为 $0$，因为 $sum_{x_1+y_1}$ 一定会改变；
3. $SG$ 函数不为 $0$ 时，一定能找到一种操作使操作后 $SG$ 函数等于 $0$，对于最小的 $x$ 使 $sum_x\neq0$，设 $sum_x$ 在二进制下最高位为 第 $d$ 位，一定存在 $a_{i,j}$ 使 $i+j=x$ 且 $a_{i,j}$ 的二进制第 $d$ 位为 $1$，这时候让 $a_{i,j}$ 异或 $sum_x$，$a_{i,j}$ 一定变小，且 $sum_x$ 此时变为 $0$，而通过改变路径上的点也很容易使后面的 $sum$ 均变为 $0$，至此，便构造出一种使 $SG$ 函数等于 $0$ 的方案。