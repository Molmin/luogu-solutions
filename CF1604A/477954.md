# CF1604A Era 题解
### 1.题目大意：
一个合法序列的定义：序列中第 $i$ 项不能大于 $i$ 。  
给定一个序列，长度为 $n$ ，现在可以在序列的任意位置插入一个数，问至少经过多少次上述操作让这个序列变为合法序列。  
### 2.思路：
**使用贪心证明：**  
1. 对于序列中第 $i$ 个数，当原本它大于 $i$ ，则只需要通过在第 $i$ 项和第 $i-1$ 项之间插入数，使得它的下标与原数相等。  
2. 对于每个插入的数，因为题目并没有限制其大小，所以我们可以~~为所欲为~~让它变得足够小，让我不用因为它不合法而额外加入新的数。我们不放假设他是无限小。  

**现在问题转化为：** 有一个序列，序列中的第 $i$ 个数带来的价值是 $\max(0,a_i-i)$ 。求出所有数带来的价值之和。时间复杂度 $O(n)$

### 3.AC代码  
```cpp
#include<iostream>
#include<cstdio>
#include<algorithm>
using namespace std;
int t,n,a[1000001],ans,now;//ans是价值之和，now是当先模拟到的下标
int main()
{
	scanf("%d",&t);
	for(int j=1;j<=t;j++)
	{
		ans=0; //初始化
		now=0;
		scanf("%d",&n);
		for(int i=1;i<=n;i++)
		{
			scanf("%d",&a[i]); //输入
		}
		for(int i=1;i<=n;i++)
		{
			now++; //下标增加
			if(now<a[i]) //如果价值大于0
			{
				ans+=a[i]-now; //价值总和增加
				now=a[i]; //下标跳到a[i]
			}
		}
		printf("%d\n",ans);
	}
}
```
### 4.end
