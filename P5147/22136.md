关于期望dp，题目中已经给了式子了:

$f[n]=\begin{cases}0&n=1\\1+\frac{1}{n}\sum\limits_{i=1}^nf[i]&n>1\end{cases}$

带着$\sum$的递归式通常可以用以下方法处理:

消去$\sum$前的系数得到$nf[n]=n+\sum\limits_{i=1}^nf[i]$

然后对$n-1$写下类似的式子$(n-1)f[n-1]=n-1+\sum\limits_{i=1}^{n-1}f[i]$

用上面的式子减去下面的式子，整理得$f[n]=f[n-1]+\frac{1}{n-1}(n>2)$

注意只有$n-1>1$的时候才可以这样做，当$n=2$时我们单独计算得到$f[2]=2$

容易看出$f[n]=\begin{cases}0&n=1\\H_n+1&n>1\end{cases}$

对于$H_n$的计算可以使用欧拉常数，但是我们毕竟是$OIer$，所以

# 分段打表! #
打表程序，每1e7个打一个表
```cpp
#include<iostream>
#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>
using namespace std;
int main()
{
//	freopen("tmp.cpp","w",stdout);
	double s=0;
	for(long long i=1;i<=2147483647;i++)
	{
		if(i%10000000==0)printf("%.8lf,",s);
		s+=1.0/i;
	}
}
```
最终代码
```cpp
#include<iostream>
#include<cstdio>
#include<cstring>
using namespace std;
const double H[100000]={0,16.69531127,17.38845847,17.79392359,18.08160566,18.30474922,18.48707078,18.64122146,18.77475285,18.89253589,18.99789640,19.09320658,19.18021796,19.26026067,19.33436864,19.40336151,19.46790003,19.52852466,19.58568307,19.63975029,19.69104359,19.73983375,19.78635377,19.83080553,19.87336514,19.91418714,19.95340785,19.99114818,20.02751582,20.06260714,20.09650870,20.12929852,20.16104722,20.19181888,20.22167184,20.25065938,20.27883025,20.30622923,20.33289747,20.35887296,20.38419077,20.40888338,20.43298093,20.45651143,20.47950095,20.50197380,20.52395271,20.54545892,20.56651233,20.58713161,20.60733432,20.62713695,20.64655503,20.66560323,20.68429536,20.70264450,20.72066301,20.73836258,20.75575433,20.77284876,20.78965588,20.80618518,20.82244570,20.83844604,20.85419440,20.86969859,20.88496606,20.90000393,20.91481902,20.92941782,20.94380656,20.95799119,20.97197743,20.98577076,20.99937641,21.01279943,21.02604466,21.03911674,21.05202014,21.06475917,21.07733795,21.08976047,21.10203056,21.11415192,21.12612811,21.13796257,21.14965861,21.16121943,21.17264813,21.18394769,21.19512099,21.20617082,21.21709989,21.22791081,21.23860610,21.24918821,21.25965951,21.27002229,21.28027879,21.29043117,21.30048150,21.31043183,21.32028413,21.33004030,21.33970221,21.34927167,21.35875041,21.36814015,21.37744254,21.38665920,21.39579168,21.40484152,21.41381019,21.42269913,21.43150976,21.44024344,21.44890151,21.45748525,21.46599594,21.47443481,21.48280306,21.49110186,21.49933236,21.50749567,21.51559288,21.52362505,21.53159322,21.53949840,21.54734158,21.55512372,21.56284577,21.57050864,21.57811324,21.58566044,21.59315112,21.60058609,21.60796620,21.61529224,21.62256500,21.62978525,21.63695374,21.64407121,21.65113837,21.65815595,21.66512462,21.67204506,21.67891794,21.68574390,21.69252359,21.69925762,21.70594661,21.71259115,21.71919184,21.72574924,21.73226392,21.73873643,21.74516732,21.75155712,21.75790635,21.76421552,21.77048513,21.77671568,21.78290765,21.78906152,21.79517774,21.80125679,21.80729910,21.81330513,21.81927530,21.82521003,21.83110975,21.83697487,21.84280579,21.84860291,21.85436662,21.86009729,21.86579531,21.87146105,21.87709487,21.88269712,21.88826817,21.89380835,21.89931800,21.90479747,21.91024707,21.91566714,21.92105799,21.92641993,21.93175328,21.93705833,21.94233539,21.94758474,21.95280669,21.95800150,21.96316947,21.96831087,21.97342598,21.97851504,21.98357835,21.98861614,21.99362868,21.99861622,22.00357901,22.00851729,22.01343131,22.01832130,22.02318748,22.02803011,22.03284940,22.03764557,22.04241885,22.04716945,22.05189759,22.05660348,22.06128733};
int main()
{
	int n;
	scanf("%d",&n);if(n==1){puts("0.00000");return 0;}//特判
	--n;int q=n/10000000,r=n%10000000;
	double s=H[q];q*=10000000;
	for(long long i=q?0:1;i<=r;i++)s+=1.0/(q+i);
	printf("%.5lf",1+s);
}
```
这种题考场上要是出出来了...那就制裁出题人好了...