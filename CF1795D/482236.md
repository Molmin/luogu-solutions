### 问题转化

有 $n$（记为 $6k$）个点，分为 $2k$ 个三点组，每一个三点组形成一个环且不同环互相没有连边。对每个三点组染色时，共有 $2$ 种情况：
1. $1$ 红 $2$ 蓝或 $2$ 红 $1$ 蓝，此时共有 $2$ 条边计入总分，这 $2$ 条边可以通过调整红、蓝的位置来改变；
2. $3$ 红或 $3$ 蓝，不会有边计入总分。

输入格式中说明了 $w_i \ge 1$，因此第 $1$ 种情况永远更优。

### 取值条件

在这一部分中，将忽略 $1$ 红 $2$ 蓝和 $2$ 红 $1$ 蓝的区别。

显然，对于一个三点组，最优解是权值最大的 $2$ 条边计入总分，此时取两边的公共结点与另外两点颜色不同。

对于不同的边权 $(a_1,a_2,a_3)$（不妨 $a_1\le a_2\le a_3$），权值最大的 $2$ 条边有不同的情况：
1. $a_1<a_2\le a_3$，此时只有 $1$ 种情况，即取 $a_2$ 和 $a_3$。
2. $a_1=a_2<a_3$，取 $a_3$ 以及 $a_1$ 和 $a_2$ 中任意一个，有 $2$ 种情况。
3. $a_1=a_2=a_3$，任意取 $2$ 条边，共有 $3$ 种情况。

### 红蓝分配

可以只考虑红色结点的数量，共有 $3k$ 个，且对于每一个三点组，有 $1$ 或 $2$ 个红色结点。

记第 $m$ 个三点组有 $x_m$ 个红色结点，则

$$x_1+x_2+\cdots+x_{2k}=3k$$

即

$$(x_1-1)+(x_2-1)+\cdots+(x_{2k}-1)=k$$

注意到 $x_m-1$ 为 $0$ 或 $1$，则解的数量即为 $2k\choose k$。

### 计算杂项

主要涉及的难点为组合数的计算。

因为快速幂较为方便 ~~不会扩欧~~，此处使用快速幂计算：

```cpp
int fastpow(int a,int b) {
    int ans=1;
    while (b) {
        if (b&1) ans=ans*a%mod;
        a=a*a%mod;
        b>>=1;
    }
    return ans;
}
```

对于组合数，这里采用这样的做法：

$$\begin{aligned}{2k\choose k}&=\frac{(2k)!}{(k!)^2}\\&\equiv F_{2k}\times(F_k)^{-2}\\&\equiv F_{2k}\times(F_k)^{\texttt{mod }-\,1}\times(F_k)^{-2}\\&\equiv F_{2k}\times(F_k)^{\texttt{mod }-\,3}\pmod{\texttt{mod}}\end{aligned}$$

其中 $F_t$ 表示 $t!$，$\texttt{mod}$ 即 $998244353$。

可以简单地计算出本题的时间复杂度为 $O(n)$，代码实现的难度不大，不贴代码。