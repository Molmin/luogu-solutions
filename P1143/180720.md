$\color {white} \text{洛谷后台文章编号 151902}$

蒟蒻又来了。。。

新手都能看得懂的题解
## 背景知识
这里介绍3种转换方法。
### r进制转10进制
~~应该最简单了。。。~~

**前置知识：位值原理**

假设有一个 $r$进制数 $(a_na_{n-1}a_{n-2}...a_0)_r$（$a_1,a_2...$是此数的每一位），那么它对应的10进制数 $(n)_{10}=a_n*r^n+a_{n-1}*r^{n-1}+...+a_1*r+a_0$。
### 10进制转r进制

r进制转10进制用的是乘法，那么10进制转r进制就用除法。

例如：十进制的 $23$ 转二进制，则过程如下：

![](https://cdn.luogu.com.cn/upload/pic/72926.png)

就是短除法然后倒取余数。不仅是2进制，任意进制都可以。
### 2进制与4进制、8进制、16进制互换
其实不仅是$2,4,8,16$进制，$r$进制和 $r^k(k\text{是正整数})$ 进制均可互换。

由于 $4=2^2,8=2^3,16=2^4=4^2$ ，所以2进制的每两位对应4进制的一位，每三位对应8进制的一位，以此类推。

所以，只要熟记以下表格，我们甚至可以心算很多 $2$ 与 $4,8,16$进制的互换。

```
2进制转4进制
2进制 4进制
00    0
01    1
10    2
11    3
```

```
2进制转8进制
2进制 8进制
000    0
001    1
010    2
011    3
100    4
101    5
110    6
111    7
```

```
2进制转16进制
2进制 16进制
0000    0
0001    1
0010    2
0011    3
0100    4
0101    5
0110    6
0111    7
1000    8
1001    9
1010    A
1011    B
1100    C
1101    D
1110    E
1111    F
```
例如：$(00000111110011010001)_2$ 转 $16$ 进制：

（1）截位：$(0000|0111|1100|1101|0001)_2$

（2）查表（~~打表~~）：
$=(07CD1)_{16}$

## 代码实现
有了上面的知识，其实就很好做了。

本题采用先将 $n$ 进制转换为 $10$ 进制，在将 $10$ 进制转为 $m$ 进制的方法。当然也可以直接转。

这里想着重说一下转换过程中数据的存储。

首先，读入时必须用字符串 $string$ 。

然后将 $string$ 转为 $int$ ，在此过程中实现$n$ 进制转换为 $10$ 进制。注意十六进制中字母的转换。例如： $(AB)_{16}=(171)_{10}$。

然后采用一个数组记录除下来的余数，最后反转输出即可。本题中可以利用栈来存储，直接 $push$ 进去然后 $pop$ 即可。

上代码：
```
#include <iostream>//输入输出流
#include <string>//字符串
#include <stack>//栈
//个人认为还是不用万能头好，用了万能头就需要很注意变量名的使用，避免重名。
using namespace std;
string num;//这里用不限长的字符串，比字符数组好
//n转10进制（位值原理）
int convert(string num,int r)
{
	int n=0,s=1;
	int len=num.length();
	for(int i=len-1;i>=0;i--)
	{
    //16进制特判
		if(num[i]<='F'&&num[i]>='A')
		{
			n+=(num[i]-'A'+10)*s;
			s*=r;
		}
        //普通处理
		else
		{
			n+=(num[i]-'0')*s;
			s*=r;
		}
	}
	return n;
}
//输出函数
void output(stack<int> s)
{
	while(!s.empty() )
	{
		if(s.top() <10)
			cout<<s.top() ;
		else if(s.top() >=10)
		   cout<<(char)(s.top() +'A'-10);//注意其中16进制的处理
		s.pop() ;
	}
	cout<<endl;
}
//10转m进制（短除法）
void work(int n,int r)
{
	stack<int> s;
	while(n>0)
	{
		s.push(n%r);
		n/=r;
	}
	output(s);
}
int main()
{
	int oldr,newr;
	cin>>oldr;
	cin>>num;
	cin>>newr;//input
	int n=convert(num,oldr);//转为10进制
	int lenn=num.length();
	work(n,newr);//转为m进制并输出
	return 0;
}
```