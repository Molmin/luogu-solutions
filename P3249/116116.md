暴力做法是这样的：

先把坐标移到第一象限。

首先定位出每个矿区。在定位完之后，选择矿区内一个点作为质量的核心。可以选择一条逆时针走的边的中点（坐标先乘 2），这样统计答案时的边界可以稍微化简一些。

具体定位多边形的方法就是给每个点相连的边都按极角排序，走到一个点就在极角序中走下一个极角。

统计答案时，对于走逆时针的边，加上扫过的质量，走逆时针的减去即可。所以现在相当于给定很多个质点，要对每条边预处理一个扫过的质量。

对极角扫描线，用平衡树维护当前极角下每条边的相对顺序，遇到质点就后缀加就行了。

一些细节：几乎所有过程都不需要实数，只有给环形极角排序时需要 atan2。判断两条边谁前谁后，只需要数谁在对方外面的点多就行了。给第一象限的点极角排序可以只用叉积比较顺序。

总复杂度单 log，询问线性。于是就有了暴力的 6K+ [做法](https://loj.ac/s/1601511)。