
### 安利博客$\Longrightarrow\Longrightarrow\Longrightarrow$[更好的阅读体验](https://www.cnblogs.com/y2823774827y/p/10275101.html)

简化题目：重构树使得其直径最大/最小
## 做法
已知两棵树，怎么连边才能使直径最大/最小

直径最大：两棵树找直径端点相连
直径最小：两棵树找直径中点相连

转化问题，我们要求的其实是：$Down_i$为子树直径，$Up_i$为除i子树外直径(删掉$i$~$fa$后上方的直径)

子树直径当然好求，儿子直径,次直径，$Down_i$是递归后返回从下传到上面

那$Up_i$显然这部分我们是要在递归到$i$之前完成的，也就是从上到下做完$Up_i$

考虑做$Up_v$，$u$上面的部分就从$Up_u$转移过来了，剩下的就考虑$u$的非$v$子树直径与 **给** $v$子树链和$u$上面组成的最长链(开个数组$line$记录)

[完整代码及两组良心数据](https://www.cnblogs.com/y2823774827y/p/10275101.html)
