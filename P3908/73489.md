本来是为了练习复杂位运算找到此题的，不过似乎与位运算没有太大关系。

### 我们可以发现$2n$和$2n-1$两个整数的二进制表示只有最后一位不同，根据“相同为0，不同为1的原则”，可以得到$(2n)xor(2n-1)=1,n∈Z$的结论。

### 又因为$1$ $ xor $ $1=0$，那么$(4n-3)xor(4n-2)xor(4n-1)xor(4n)=1$ $xor$ $1=0$。 我们可以得到结论：只要是4的倍数，答案都是0！！！

### 如果不是4的倍数应该怎么办呢？这个我想了半天，最后发现只要找到小于N的4的倍数然后顺势下推就好了，这有点类似于分段打表，对分段打表不熟的同学可以去做[P1662 数7](https://www.luogu.org/problemnew/show/P1662)。

### 至此本题已经完美解决，代码如下：
```
#include <bits/stdc++.h>
using namespace std;

long long ans,N;

int main()
{
	scanf("%lld",&N);
	ans=N>>2<<2;
    //找到最近的4的倍数
	for (long long i=(N>>2<<2)+1; i<=N; i++)
		ans^=i;//最多只有下推3次
	printf("%lld",ans);
	return 0;
}
```

## 提醒：记得全开long long不然会有各种问题出现。