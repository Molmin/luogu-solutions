## 解题思路

**两个人都用最优策略时，第一个人将 $K_i$ 选择地很大时显然会让第二个人更难赢。**

**首先考虑环的情况**

在 $K_i$ 很大的情况下，我们可以在环中选择一个点，而后在环中不停**转圈**走到另一个点。由于起点自由选择，所以环中每个点都可以到达。因而环中的每个点都是必胜点。

**其次考虑一个点不在环中**

如果这个点可以通过环中的某个点达到，就同环中的情况类似，只是最后几步**走出**这个环，所以这个点也是必胜点。如果这个点通向一个环，显然没有任何用处，它并不是必胜点。

**结论**

环中的点和被环连接的点都是必胜点，其余点都是必败点。

## 如何实现

**类似于拓扑排序。** 环中的每个点入度都不可能变为 $0$ ，同理环所连接的点入度也不可能为 $0$  。

## 代码示例

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,a[200010],du[200010],ans=0;
queue<int> q;
int main(){
	cin>>n;
	for(int i=1;i<=n;i++) cin>>a[i],du[a[i]]++;
	for(int i=1;i<=n;i++) if(du[i]==0) q.push(i);
	while(!q.empty()){//算出不在环中且不被环连接的点的数量
		int o=q.front();
		q.pop();
		ans++;
		du[a[o]]--;
		if(du[a[o]]==0) q.push(a[o]);
	}
	cout<<n-ans<<endl;//求的是必胜点的数量
	return 0;
}
```
~~不知道讲的清不清楚~~