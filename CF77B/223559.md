### 解题思路：

几何概型的概率题。

注：本题解没有配图，建议没有学过计算几何（选修一）的自己画图理解，~~或者去学一下计算几何然后把图刻到脑子里~~。

根据一元二次方程的求根公式，方程有根的充要条件是：$0\le b^2-4ac$，带到这题里就是 $0\le p-4q$，也就是要求 $4q\le p$，此时两者的区间范围为 $[-4b,4b]$ 和 $[0,a]$。

将 $[-4b.4b]$ 投影到 $y$ 轴上，$[0,a]$ 投影到 $x$ 轴上，每一次随机选点就是随机一个点 $(x_0,y_0)$，其中 $x_0\in [0,a]$，$y_0\in [-4b,4b]$，条件就变成了这个选出的点在直线 $x-y=0$ 上或者下方（或许这边不用那么严格地讨论，反正对答案没有影响）。再次转化问题，就是求出 $(0,b)$、$(0,-b)$、$(a,b)$ 和 $(a,-b)$ 这四个点围成的矩形在 $x-y=0$ 下方的面积。

对应到坐标轴上，总可能性的面积是 $8ab$，然后有一半，也就是 $[-4b,0]$ 那一半一定可行，主要讨论上面的那一部分。

这里有：当 $a \le 4b$ 时，围成一个三角形，面积为 $\dfrac{a^2}{2}$。

反之，则构成一个梯形，上底为 $a-4b$，下底为 $a$，高为 $4b$，有面积为 $\dfrac{(2a-4b)4b}{2}=4b(a-2b)$。

但是这一种算法比较繁，直接用总面积 $8ab$ 减去左上角的 $\dfrac{16b^2}{2}=8b^2$，立刻就有了结果。

对于前者，化简结果为：$\dfrac{8ab+a^2}{16ab}$。

对于后者，化简结果为：$\dfrac{ab-b^2}{ab}$。

如果后一种减去的方法，直接得到的是 $1-\dfrac{b}{a}$，和上面那个是等价的。

---
~~要不是没带草稿纸，谁会在题解里推公式啊。~~

---
### 代码：

```cpp
#include<cstdio>
using namespace std;
int T;
double ans,a,b;
double calc(double a,double b){
	if(b==0)return 1;
	if(a==0)return 0.5;
	if(a<4*b)return ((8*a*b)+(a*a))/(16*a*b);
	return 1-b/a;
}
int main(){
	scanf("%d",&T);
	while(T--){
		scanf("%lf%lf",&a,&b);
		printf("%.8lf\n",calc(a,b));
	}
	return 0;
}
```
