比较简单的一道蓝题。

上手之后根本没有考虑数论，直接上 dp 。

显然，非第一个的数一共有四种状态：

- 属于前缀

	如果这个数属于前缀，那么它的上一个数也一定是前缀
- 既属于前缀也属于后缀

	如果这个数既属于前缀也属于后缀，那么它的上一个数可以是前缀，也可以既是前缀也是后缀。
- 不属于前缀也不属于后缀

	如果这个数不属于前缀也不属于后缀，那么它的上一个数可以是前缀，也可以不是前缀也不是后缀
- 属于后缀

	如果这个数是后缀，那么它的上一个数可能是所有状态，

写成代码就是：

```cpp
dp[i][1] = dp[i-1][1] - a[i]; // 前缀
dp[i][2] = max4(dp[i-1][1], dp[i-1][2], dp[i-1][3], dp[i-1][4]) - a[i]; // 后缀
dp[i][3] = max(dp[i-1][1], dp[i-1][3]) + a[i]; // 属于前缀也属于后缀
dp[i][4] = max(dp[i-1][1], dp[i-1][4]) + a[i]; // 不属于前缀或后缀
```

由上可得，$dp_{i,3}$ 和 $dp_{i,4}$ 的值和作用是完全一样的，删掉一个也可以 AC 这题。

tip : 因为排版问题交了几次，这次应该可以了。