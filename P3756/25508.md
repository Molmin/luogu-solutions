### 全文所说的相连都是四联通，就是一个块与其上下左右四个块联通
首先我们看一下不合法的方式
![NUL](https://cdn.luogu.com.cn/upload/pic/5093.png)

说白了就是以蓝边为中的两个方块(下文都简称为两个方块)除彼此外，不能再分别与别的块相连

就是如果不合法的话我们至少要做到以下一条

#### #1.把与左边块相连的块都给消掉

#### #2.——右边块————————

#### #3.把这两个方块至少破坏一个

就相当于一个三选一决策问题

然后我们再观察一下蓝边的分布

![NULL](https://cdn.luogu.com.cn/upload/pic/5092.png)

我们又可以发现如下性质

#### I.  中间的两个方块不会影响其他的

这样#3就相当于破坏两个中权值最小的那一个

#### II. 两个方块所连的方块分别属于黑白染色的两色
---

这样我们就可以用最小割模型来解决这道题

三个决策我们给串联起来
其中#3放在最中间,就是两个点+中间一条流量为两个点最小值边
#1与#2我们根据黑白染色的情况放在左右边，先与S或者T连一条流量为自身花费的边，再与#3左或右端点连一条流量为无穷的边

(上面表述均忽略边方向)


对于不完整的两个方块我们就不用管


然后用Dinic来处理

因为长得很像二分图，感觉可以做到O(n^1.5)差不多的复杂度

至少提交时时限没有压力


