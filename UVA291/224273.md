# The House Of Santa Claus

这道题适合是新手做深搜的一道模板题

先来介绍一下深搜的过程：
深度优先搜索的过程类似于树的先序遍历，首先从例子中体会深度优先搜索。例如图 1 是一个无向图，采用深度优先算法遍历这个图的过程为：

![https://cdn.luogu.com.cn/upload/image_hosting/ly9c8sxs.png?x-oss-process=image/resize,m_lfit,h_170,w_225](https://cdn.luogu.com.cn/upload/image_hosting/ly9c8sxs.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

首先任意找一个未被遍历过的顶点，例如从 `V1` 开始，由于 `V1` 率先访问过了，所以，需要标记 `V1` 的状态为访问过；

然后遍历 `V1` 的邻接点，例如访问 `V2`，并做标记，然后访问 `V2` 的邻接点，例如 `V4` （ 做标记 ），然后 `V8`，然后 `V5`；

当继续遍历 `V5` 的邻接点时，根据之前做的标记显示，所有邻接点都被访问过了。此时，从 `V5` 回退到 `V8`，看 `V8` 是否有未被访问过的邻接点，如果没有，继续回退到 `V4`，`V2`，`V1`；

通过查看 `V1`，找到一个未被访问过的顶点 `V3`，继续遍历，然后访问 `V3`  邻接点 `V6`，然后 `V7`；

由于 `V7` 没有未被访问的邻接点，所有回退到 `V6`，继续回退至 `V3`，最后到达 `V1`，发现没有未被访问的；

最后一步需要判断是否所有顶点都被访问，如果还有没被访问的，以未被访问的顶点为第一个顶点，继续依照上边的方式进行遍历。

下面上代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,vis[10][10],a[10];
void dfs(int s,int x){
	if(x==9)
	{
		for(int i=1;i<=8;i++)cout<<a[i];
		cout<<s<<endl;
		return;
	}
	a[x]=s;
	for(int i=1;i<=5;i++)
		if(vis[s][i]){
			vis[s][i]=0;
			vis[i][s]=0;
			dfs(i,x+1);i
			vis[s][i]=1;
			vis[i][s]=1;
		}
}
int main(){
	vis[1][2]=vis[2][1]=1;
	vis[1][3]=vis[3][1]=1;
	vis[1][5]=vis[5][1]=1;
	vis[2][3]=vis[3][2]=1;
	vis[2][5]=vis[5][2]=1;
	vis[3][4]=vis[4][3]=1;
	vis[3][5]=vis[5][3]=1;
	vis[4][5]=vis[5][4]=1;
	dfs(1,1);
	return 0;
}
```
但其实，这道题可以直接打表。

```cpp
#include<bits/stdc++.h>
using namespace std;
int main() {
	puts("123153452");
	puts("123154352");
	puts("123451352");
	puts("123453152");
	puts("123513452");
	puts("123543152");
	puts("125134532");
	puts("125135432");
	puts("125315432");
	puts("125345132");
	puts("125431532");
	puts("125435132");
	puts("132153452");
	puts("132154352");
	puts("132534512");
	puts("132543512");
	puts("134512352");
	puts("134512532");
	puts("134521532");
	puts("134523512");
	puts("134532152");
	puts("134532512");
	puts("135123452");
	puts("135125432");
	puts("135215432");
	puts("135234512");
	puts("135432152");
	puts("135432512");
	puts("152134532");
	puts("152135432");
	puts("152345312");
	puts("152354312");
	puts("153123452");
	puts("153125432");
	puts("153213452");
	puts("153254312");
	puts("153452132");
	puts("153452312");
	puts("154312352");
	puts("154312532");
	puts("154321352");
	puts("154325312");
	puts("154352132");
	puts("154352312");
}
```