主要补充一下对结论的证明。

对于一个只含有一种颜色的连通块一定是会将其一同删去，否则此次操作没有意义。所以将所有同色连通块缩成一个点。

简化问题，先考虑一条只有黑白两色的链。我们有两种选择：
1. 先删去颜色最多的一种，然后删去另一种颜色。
2. 从两头依次一层一层地删。

对于链，两种选择的答案都是 $\lfloor \frac{len}{2} \rfloor + 1$。

考虑扩展一下，现在考虑一棵只有黑白两色的树。

对于第一种方案，其答案为黑白两种个数较小者 $+1$。

对于第二种方案，其答案为直径的点数除以 $2$ 下取整 $+1$。
对于直径是偶数，选择任意一种颜色都能在答案次数内删完。
对于直径是奇数的，只能选择直径端点的颜色删除。对于其它与直径等长的链，其位于直径外的部分，一定与一端等长，所以其端点颜色和直径一样。

显然第二种情况优于第一种情况。

接下来考虑加入灰色点。

我们将所有与同一个灰色点连边的黑白点分别缩成两个点，且将缩成的两点连边。

我们断言答案为新图的直径的点数除以 $2$ 下取整 $+1$。

首先我们能够构造一种方案使得原图与新图等价，即轮到删除与此灰点相连的黑点时，我们可以将黑点全部删掉，但保留灰点，这样就保证了之后白点依然连通，所以与新图等价。新图只有黑白两色，所以答案能取到方案二的答案。

接下来我们证明答案的下界为此答案。

显然树的答案不会比链更优。对于链，灰色点对答案没有任何影响。所以等价与证明只含黑白两色的链的答案下界。

考虑归纳，设 $L$ 为链的长度。对于 $L$ 值为 $1$ 和 $2$ 时，显然成立。

考虑现在删去了若干点，分成了 $k$ 个联通块，第 $i$ 个连通块大小为 $L_i$。


答案为：
$$
1 + \sum_{i = 1}^{k} (\lfloor \frac{L_i}{2} \rfloor + 1)
= 1 + \sum_{i = 1}^{k} \lceil \frac{L_i + 1}{2} \rceil
\geq 1 + \lceil \frac{\sum_{i = 1}^{k} (L_i + 1)}{2} \rceil
\geq 1 + \lceil \frac{L - 1}{2} \rceil
= 1 + \lfloor \frac{L}{2} \rfloor
$$

所以 $1 + \lfloor \frac{L}{2} \rfloor$ 是答案的下界得证。