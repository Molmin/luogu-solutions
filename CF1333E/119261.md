由简入繁。

如果我们找到一个大小为$k$
的正方形满足条件，那么对于任何$>k$的正方形都可以构造出来。方法很简单，我们先在外围随便填一些数，最后把棋子引入大小为$k$的子矩形即可。

手盘样例发现$N\le2$时无解（总共也就那么多种情况

手盘$2\times 3$的矩形，可以比较容易找到一个解。

例如：

| $4$ | $6$ |
| :----------: | :----------: |
| $1$ | $3$ |
| $5$ | $2$ |

现在我们要将它扩大为$3\times 3$，延续上面的思想。

| $4+3$ | $6+3$ | $2$ |
| :----------: | :----------: | :----------: |
| $1+3$ | $3+3$ | $3$ |
| $5+3$ | $2+3$ | $1$ |


将它旋转$180^\texttt{。}$也是可以的。

| $1$ | $5$ | $8$ |
| :----------: | :----------: | :----------: |
| $3$ | $6$ | $4$ |
| $2$ | $9$ | $7$ |

用$3\times 3$的正方形可以构造出所有情况。

| $1+tot$ | $5+tot$ | $8+tot$ | $7$ | $8$ |  $\cdots$ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| $3+tot$ | $6+tot$ | $4+tot$ | $6$ | $9$ | $\cdots$  |
| $2+tot$ | $9+tot$ | $7+tot$ | $5$ | $10$ | $\cdots$  |
| $1$ | $2$ | $3$ | $4$ | $11$ | $\cdots$  |
| $16$ | $15$ | $14$ | $13$ | $12$ |$\cdots$   |
| $\cdots$ | $\cdots$  |$\cdots$   |  $\cdots$ | $\cdots$  | $\cdots$  |


这样我们由简入繁解决了问题


```cpp
#include<bits/stdc++.h>
#define rep(i,a,b) for(int i=a;i<=b;i++)
#define pre(i,a,b) for(int i=a;i>=b;i--)
#define N 505
using namespace std;
const int bas[3][3]={1,5,8,3,6,4,2,9,7};
int ans[N][N];
int main(){
	int n;scanf("%d",&n);int idx=0;
	if(n<=2){puts("-1");return 0;}
	rep(k,4,n){
		if(k&1){
			rep(i,1,k)ans[k][i]=++idx;
			pre(i,k-1,1)ans[i][k]=++idx;
		}
		else{
			rep(i,1,k)ans[i][k]=++idx;
			pre(i,k-1,1)ans[k][i]=++idx;
		}
	}
	rep(i,1,3)rep(j,1,3)ans[i][j]=bas[i-1][j-1]+idx;
	rep(i,1,n){rep(j,1,n)printf("%d ",ans[i][j]);putchar('\n');}
	return 0;
}
```