##  UVA13095 Tobby and Query （托比和查询） 题解

#### [题目传送门](https://www.luogu.com.cn/problem/UVA13095)

### 题目大意

共有多组数据，每组数据给定一个长度为 $n$ 的序列 $a$。

每组数据进行 $q$ 次询问，每次询问给定两个整数 $l,r$，对于每次询问，输出 $a_l$ 到 $a_r$ 共有几个不同的数字。

### 样例解释

#### 样例 \#1 解释

共有两组数据。

第一组数据中序列 $a$ 为 $0,2,3,3,7,5,2$，有三次询问，第一次询问 $l=1,r=1$，不同的数字为 `0`，共有 $1$ 个不同的数字；第二次询问 $l=2,r=4$，不同的数字为 `2 3`，共有 $2$ 个不同的数字；第三次询问 $l=2,r=7$，不同的数字为 `2 3 5 7`，共有 $4$ 个不同的数字。

第二组数据中序列 $a$ 为 $7,7,7,7,7$，有二次询问，第一次询问 $l=4,r=5$，不同的数字为 `7`，共有 $1$ 个不同的数字；第二次询问 $l=1,r=5$，不同的数字为 `7`，共有 $1$ 个不同的数字。

### 思路

我们可以定义一个二维数组 $sum$（很像前缀和，就用前缀和数组名了），存储 $a_1$ 到 $a_i$ 中 $0$ 到 $9$ 出现的次数，这里拿样例的第一组数据来举例，$sum$ 数组就是这样的：

| 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| 1 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 1 | 1 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 1 | 2 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 1 | 2 | 0 | 0 | 0 | 1 | 0 | 0 |
| 1 | 0 | 1 | 2 | 0 | 1 | 0 | 1 | 0 | 0 |
| 1 | 0 | 2 | 2 | 0 | 1 | 0 | 1 | 0 | 0 |


我们定义 $j$ 为 $0 \sim 9$ 的一个数字，这样每次询问，那么我们只需要输出 $sum_{r,j} - sum_{l-1,j}$ 就可以了。

时间复杂度 $O(n+q)$，最大 $1.1×10^5$。

顺带一提，暴力枚举最不利情况时间复杂度 $O(n+q×n)$，最大约等于 $10^9$，直接 $TLE$。

### 代码+注释

```cpp
#include <bits/stdc++.h>
using namespace std;
int n, m, q, a, sum[1000005][10];
int main(){
	ios::sync_with_stdio(false);// 关闭读写同步
	cin.tie(0);
	cout.tie(0);
	while (cin >> n){
		for (int i = 1; i <= n; i++){
			cin >> a;
			for (int j = 0; j <= 9; j++){// 这层 for 循环是用来生成 sum 数组的
				if (j == a){
					sum[i][j] = sum[i - 1][j] + 1;
				} else {
					sum[i][j] = sum[i - 1][j];
				}
			}
		}
		int l, r, gs = 0;
		cin >> q;
		while (q--){
			cin >> l >> r;
			for (int i = 0; i <= 9; i++){
				if (sum[r][i] - sum[l - 1][i] > 0){// 如果等于0，说明 a[l] 到 a[r] 中 i 没有出现过。
					gs++;
				}
			}
			cout << gs << "\n";// 输出并换行
			gs = 0;// 重置 gs 变量
		}
	}
	return 0;
}
```

### 最后
本题题解到此结束，希望大家能看懂、有思路。