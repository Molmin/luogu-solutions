### 1.一个环
首先考虑一个环的情况，假设有$n$个点，那么对于任意的起点$s$和终点$t$,有且仅有两条路径,长度之和为环长$len$。那么期望的距离就是$len/2$，所以一个环的情况答案是$n^2\times len / 2$
### 2.考虑每条边的计算次数
还是考虑一个环的情况，这次我们计算每条边经过的次数。对于任意的起点$s$和终点$t$，有且仅有两条路径，其中一条**一定经过这条边**，另一条一定**不经过**。所以这一条边的计算次数为$n^2/2$，除以2是因为有两条路径。
### 3.考虑基环树的情况
假设我们现在已经找到了一个环，那么我们先来计算环上的每一条边需要计算多少次。假设任意取一条环上的边$e$，对于任意的起点$s$和终点$t$，我们要从$s$走到$t$，先来思考什么情况下只会有1条路径，只有当$s$和$t$位于同一颗子树的时候(这里的同一颗子树指的是，$s$和$t$都不在环上，并且从$s$到$t$不会经过环)，环上的这条边e**必然不会被经过**，对于其他情况下的$s$和$t$(不在同一颗子树)，那么**必然要经过环**，那么**必然有且仅有两条路径**，其中一条**一定经过$e$**，另一条**一定不经过$e$**，而且我们还会发现，$\color{red}\textbf{环上的每条边所需要的计算次数是一样的}$
，所以环上的所有边需要计算的次数为$n^2-v_1^2-v_2^2-v_3^2...$这里的$v_i^2$指的是第$i$颗子树有多少个节点(不包括环上的点)。
### 4.计算非环上的边
剩下的就比较简单了，非环上的边计算次数，只需要算一下两边各有多少个节点，乘起来就可以了。最后别忘了答案加起来除以$n^2$。
