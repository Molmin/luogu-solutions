本题解中我将连号定义为：一个字符串中相同字符的子串，且子串相邻位置不再存在这个相同字符的子串。

~~赛时其他题真不会，这题开始的一个做法交上去结果假了，$30$ 分。~~

后来猜想这题跟连号个数有关联，于是可以想到：

- 两个连号经过一次操作可以满足要求，只需要将他们组成的字符串插入第一个连号的末尾即可；
- 一个连号经过一次操作即可满足要求，原因显然。

于是答案就是连号个数一半，向上取整即可。

对于修改，只需要对这个修改的位置前后判断一下连号个数就行，时间复杂度 $O(1)$。

初始判断的时间复杂度是线性的，所以整体时间复杂度 $O(|S|+q)$。

[~~码风丑，大佬轻喷。~~](https://www.luogu.com.cn/paste/j1pfyisg)