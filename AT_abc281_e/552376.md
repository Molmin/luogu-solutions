这题有很多种解法。

第一种，看到求前 $k$ 大值之和，不管三七二十一直接上主席树。不会可以见 [P3834 【模板】可持久化线段树 2](https://www.luogu.com.cn/problem/P3834)。维护两个 tag：子树内有多少个数，子树内所有数字之和，查询的时候直接线段树上二分即可。这种做法的好处是不用动脑子，并且在赛时可以直接复制模板。

第二种，观察到区间长度一定，那么主席树其实是比较多余的。其实只用维护一棵线段树，就是当前区间的权值线段树。同样的，权值线段树上维护两个 tag：子树内有多少个数，子树内所有数字之和。考虑从 $[l,r]$ 转移到 $[l+1,r+1]$，实际上只用在权值线段树上把 $a_l$ 删去，加上 $a_r$ 即可。查询的时候同样在这棵线段树上二分即可。

除此之外好像还有别的解法，也许还可以维护第 $k$ 大数从而避免使用线段树（？这里就先介绍线段树的两种解法。