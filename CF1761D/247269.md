感觉这题比同场的 E 难了好多，可能是我数学比较菜吧。  


------------
题意：  

给你 $n,k(0 \le k < n \le 10^6)$，问有多少对 $(a,b)$ 满足 $0 \le a,b < 2^n$ 且在二进制下的加法的时候，产生了 $k$ 次进位。  


------------
题解：  
我们设 $dp_{i,j,0/1}$ 为前 $i$ 位 进了 $j$ 位，$1$ 表示该位进了位，$0$ 表示该位没有进位。  
这样可以推出式子，但是复杂度为 $O(nk)$，显然不行，考虑优化。  
从这个 dp 我们可以发现，当且仅当当前位置的进位状态和前一位进位状态相同是，有 $3$ 种情况，反之则只有 $1$ 种情况。  
具体的：  
1. 如果当前位置和前一位都不进位，那么当前的 $a,b$ 的二进制位数对可以为 $(0,0)$，$(0,1)$， $(1,0)$。  
2. 如果当前位置和前一位都要进位，那么当前的 $a,b$ 的二进制位数对可以为 $(1,1)$，$(0,1)$， $(1,0)$。   
3. 如果前一位不进位，当前位进位，那么当前的 $a,b$ 的二进制位数对只能为 $(1,1)$。  
4. 如果前一位进位，当前位不进位，那么当前的 $a,b$ 的二进制位数对只能为 $(0,0)$。    

知道了这个之后我们将进位的状态列出来，设一个 $f$ 数组，如果 $f_i = 0$ 则说明第 $i$ 位没有进位，反之如果 $f_i = 1$ 则说明第 $i$ 位进位了。  
根据我们的结论 如果 $f_i = f_{i-1}$，那么就要乘个 $3$，其实问题就变成数连续段了。  
我们不妨设有 $n+1$ 位，另 $f_0 =0$，那么就天然的规定了，$f$ 的形式为若干个 $0$，然后接着若干个 $1$，这里的若干可以只为一个。  
我们设有 $x$ 个位置满足 $f_i \ne f_{i-1}$ ,那么就有 $x+1$ 个 $01$ 串，其中 $0$ 串有 $\lceil \frac{x + 1}{2} \rceil$ 个， $1$ 串有 $x+1-\lceil \frac{x + 1}{2} \rceil$ 个。  
回到本题，我们有 $k$ 个 $1$ 要填，那么相对应的，我们要填 $n+1-k$ 个 $0$。  
那么问题就变成把 x 个数，分为连续的 y 段的方案，就是 $\binom{x-1}{y-1}$。  
接下来就可以一口气写完全部啦  
$\sum\limits_{i = 0}^{n} 3^{n-i} \times \binom{(n+1-k)-1}{((i+1)-(i+1)/2)-1} \times \binom{k-1}{(i+1)/2-1}$  
题外话：  
好像有另外一种算的方法，过程就不写了，丢个结论在这里：  
$\sum\limits_{i = 1}^{n} 3^{k-i} \times 3^{n-k-i}\times \binom{k-1}{i-1	} \times \binom{n-k}{i} \ \ \ \ \ \  (n-k-i\ge0)$   
$\sum\limits_{i = 1}^{n} 3^{k-i} \times 3^{n-k-i+1}\times \binom{k-1}{i-1	} \times \binom{n-k}{i-1} \ \ \ \ \ \  (n-k-i+1\ge0)$   
第一个式子的代码：  
https://codeforces.com/contest/1761/submission/182127636  
第二个式子的代码：  
https://codeforces.com/contest/1761/submission/182087368