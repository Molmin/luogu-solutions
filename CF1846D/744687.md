数学题。

### 分析

考虑把这 $n$ 个三角形看成若干个不重叠的梯形和三角形。

我们进一步优化，把三角形看成上底长为 $0$ 的梯形。

我们首先求每个梯形的高。

对于第 $i$ 个梯形，它原本的高是 $h$，但是由于上面的三角形的影响，它的高不能超过 $y_{i+1}-y_i$，所以它的高为 $\min(h,y_{i+1}-y_i)$。再根据相似，我们可以知道它的上底为 $d \times(1-\dfrac{\min(h,y_{i+1}-y_i)}{h})$。于是我们就可以求出每个梯形的面积，最终全加起来就可以。

要注意特判第 $n$ 个梯形，它的上面没有三角形，它的高就不会受到影响，就是原本的高 $h$。

### 代码

```c++
const int N=2e5+5;
int y[N];
void solve(){
	int n=read(),d=read(),h=read();
	long double ans=0.5*d*h,a;
	int c;
	for(int i=1;i<=n;i++) y[i]=read();
	for(int i=1;i<n;i++){
		c=min(h,y[i+1]-y[i]);
		a=d*(1.0-c*1.0/h);
		ans=ans+0.5*(d+a)*c;
	}
	printf("%.10Lf\n",ans);
}
```