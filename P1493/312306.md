## 题目描述
[题目传送门](https://www.luogu.com.cn/problem/P1493)

## 微薄の福利

事实证明本题除 $C3$ 外的所有数据均小于 $2000$。

## 思路简述

+ 套路的，先将梨子以 $B_i$ 为第一关键字， $A_i$ 为第二关键字排序。具体地，按照 $B_i$ **升序**排序，当 $B_i$ 相同时，按照 $A_i$ **降序**排序。看到 $n$ 的数据范围不太大，于是考虑枚举具体的最大最小值进行求解。
+ 问题就转化成了求 $\max_{i=1}^n\max_{j=i}^n\sum_{k=i}^n[A_k-\frac{(B_k-B_i)\times C_2-C_3}{C_1}\le A_j\le A_k]$。注意此时第 $i$ 个梨子一定要满足 $A_i-\frac{(B_k-B_i)\times C_2-C_3}{C_1}\le A_j\le A_i$。
+ $O(n^2\log n)$ 的做法已经烂大街了。那有没有针对此题的超水数据，更优，更好写的做法呢？
+ 不妨设如果此时选择第 $j$ 个梨子的 $A_j$ 为 $A_0$ ，那么可以选择的梨子个数为 $f_j$。
+ 那么对于第 $i+1$ 到第 $n$ 个梨子 $k$，将 $f_{[A_k-\frac{(B_k-B_i)\times C_2-C_3}{C_1}]\texttt{到}A_k}$ 全部加上1。
+ 对于第 $i$ 个梨子要特殊判断，因为
>第 $i$ 个梨子一定要满足 $A_i-\frac{(B_k-B_i)\times C_2-C_3}{C_1}\le A_j\le A_i$。
+ 所以若此时枚举到的 $A_0$ 不满足上述条件，那么就直接 pass，否则统计答案。
+ 如果值域扩展到很大，使用 map 或离散化即可解决。时间复杂度 $O(n^2\log n)$。

## 丑陋の代码
[click here](https://www.luogu.com.cn/paste/1h1h669m)