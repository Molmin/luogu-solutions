# 前言
代码没有优化，可能偏长……
# Solution
## 1、总体上

首先我们发现：不管是或还是异或，$b_i$ 不同时互不影响，也就是说实际上最后答案第 $n$ 位是啥，仅由 $b_i=n$ 的前面加了什么符号。

同时发现，不管许多个相等的 $b_i$ 前面是什么符号，只要最后一个前面是或，最后答案里这一位必然为 $1$。

但异或就不一定了。

感性理解成：或符号放在最后一个 $b_i$ 之前，对答案有确定的积极贡献，异或没有。

以贪心算法就**初步**知道了结论（不是结果）：

**尽可能的把 $y$ 个或符号分配给较大的 $b_i$ 使用。**

## 2、具体说
因为是异或运算，答案与每个 $b_i$ 的出现次数的奇偶性有关。

### 1、奇数次
我们发现哪怕每个前面都塞异或，结果答案的这一位也是 $1$。

所以尽可能的把异或~~浪费~~用在这里。

### 2、偶数次

此时每个前面都加异或便没用了，需要结尾加或符号补救。

大的先加，小的后加，没了就不加。

**见代码。**
## 3、其他逝项


第一个数前面是不能加符号的，所以我们假定加的是异或。但是程序算完之后可能正好给第一个数前面加的是或，这样确实会影响答案了。

所以我们可以将这个或和算出来的结果中的最后一个异或交换。

如果异或用完了，就在结尾改用或符号。

避免输出前导 $0$ 的方式见代码。


# AC code
```cpp
#include<bits/stdc++.h>
using namespace std;
long long s,t,n,x,y,v[66666],i,j,b[28888],a[66666],o[66666],q,r,xx,yy,ans[28888];
int main()
{
    cin>>s>>t;
    for(i=1;i<=t;i++)
    {
        memset(v,0,sizeof(v));
        int p=0;
        cin>>n>>xx>>yy;x=xx+1;y=yy;
        for(j=1;j<=n;j++)
        {
            cin>>b[j];
            v[b[j]]++;//类似桶排序
        }
        for(j=65535;j>=0;j--)
        {
            if(p==0&&v[j]==0) continue;//避免输出前导0
            if(p!=0&&v[j]==0)
            {
                cout<<0;
                continue;
            }
            if(v[j]%2)
            {
                cout<<1;p=1;
                o[j]=min(x,v[j]);a[j]=v[j]-o[j];//min函数避免用完了异或符号
                x-=o[j];y-=a[j];continue;
            }
            if(y>0)
            {
                cout<<1;p=1;
                o[j]=min(v[j]-1,x);a[j]=v[j]-o[j];
                x-=o[j];y-=a[j];
            }
            else
            {
                if(p!=0) cout<<0;
                o[j]=min(v[j],x);
                x-=o[j];
            }
        }
        if(!p) cout<<0;
        cout<<"\n";
        for(j=n;j>=1;j--)
        {
            if(a[b[j]])
            {
                ans[j]=1;a[b[j]]--;
            }
            else
            {
                ans[j]=0;o[b[j]]--;
            }
        }
        if(ans[1])
        {
            for(j=n;j>=2;j--)
            {
                if(!ans[j])
                {ans[j]=1;break;}
            }
        }
        for(j=2;j<=n;j++)
        {
            if(ans[j]) cout<<"|";
            else cout<<"^";
        }
        cout<<"\n";
    }
    return 0;
}
```
# The End