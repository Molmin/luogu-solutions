后缀数组练手好题。


$sa_i$ 表示的是后缀排序后第 $i$ 小的后缀编号，因此 $n-sa_i$ 就是这个后缀的长度。（下标从 $1$ 开始的话就是 $n-sa_i-1$）。

$height_i$ 表示的是最长第 $i$ 个后缀和第 $i-1$ 个后缀的最长公共前缀的长度。

有了这两个定义之后，我们发现，我们对该字符串进行后缀排序后，第一个子串肯定全部都可以选，那么第二个子串能选的部分其实就是它的长度减去它与第一个子串的最长公共前缀的长度。可能有点绕，画个图理解一下会好很多。

所以实际上代码就这么多：

```cpp
	ans+=n-sa[1]+1;//第一个子串全部都可以选
		
	for(int i=2;i<=n;i++)
	{
		ans+=n-sa[i]+1/*当前子串的长度*/-height[i]/*与前面那个子串的最长公共前缀*/;
	}
       
```

具体求 $sa_i$ 和 $height_i$ 的部分就是后缀数组基本操作了。