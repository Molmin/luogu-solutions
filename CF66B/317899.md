按照题面模拟即可。我们可以枚举 Petya 要在哪个地方浇水，然后内部再计算可以交到多少个格子。最后比较即可。

下面主要讲代码：

```cpp
int maxv=0; //这是比较的结果，默认初值为 0
for(int i=1;i<=n;++i){ //i 是我们枚举到的位置
	int tot=1; //tot 是这个位置可以灌到多少格子
	int j=i-1; //j 是模拟水流的变量，首先我们要让水往左流
	while(j>=1&&a[j]<=a[j+1]){ //当还能往左边流时
		++tot;
		--j; //再往左一格
	}
	j=i+1; //然后我们模拟水向右流
	while(j<=n&&a[j]<=a[j-1]){ //当还能向右边流时
		++tot;
		++j; //与上面类似，再往右一格
	}
	maxv=max(maxv,tot); //进行比较
}
cout<<maxv<<endl;
```

时间复杂度，玩循环 $n$，内循环 $n$。复杂度为 $\text{O}(n^2)$，可以通过。