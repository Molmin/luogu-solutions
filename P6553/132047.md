乍一眼还以为要线段树，后来发现其实很简单。
题目要求的是：
1. 1 的个数。
1. 整个字符串每个数位的总和。
1. 整个字符串每个数位的乘积。

然后我们发现字符串组成的数字只有 $1$ $4$ $5$ 3种，所以解决三个问题只需要分别统计出 $1$ $4$ $5$ 三个数的个数。

对于问题一，直接输出即可；对于问题二，把3个数字分别以数值乘以出现次数相加求和即可；对于问题3，由于每次计算成绩消耗时间过大，我们可以考虑**预处理**每个数的 $k$ 次方，然后直接带入得解。

继续……

先统计原串个数字个数，每次修改的时候可以顺带把数字个数统计出来，按上述方法计算输出即可。

下面是代码（应该都能看懂吧）：
```cpp
#include<bits/stdc++.h>
using namespace std;
char s[1000011],a[1000011];
int n,m,l,r,h[11],mod=99824353,q4[1000011],q5[1000011];
int main()
{
	scanf("%s",s+1);
	n=strlen(s+1);
	scanf("%d",&m);
	for(int i=1;i<=n;i++) h[s[i]-48]++;
	q4[0]=q5[0]=1;
	for(int i=1;i<=1000000;i++) q4[i]=(q4[i-1]*4)%mod,q5[i]=(q5[i-1]*5)%mod;
	while(m--)
	{
		scanf("%d%d%s",&l,&r,a);
		for(int i=l;i<=r;i++) h[s[i]-48]--,h[a[i-l]-48]++,s[i]=a[i-l];
		printf("%d %d %lld\n",h[1],h[1]+h[4]*4+h[5]*5,(long long)(q4[h[4]])*(q5[h[5]])%mod);
	}
	return 0;
}
```
