考虑dp，设 $f_{i,0/1}$ 表示考虑到第 $i$ 个位置，该位置是/否有盖子的最大值。

考虑初始化， $f_{0,0}=0$，剩下的全部设成 $- \infty$ 即可。

考虑如何转移。

- $s_i=1\ \ \ \ f_{i,0}=f_{i-1,0}+a_{i-1}\ \ \ \ f_{i,1}=\max(f_{i-1,0},f_{i-1,1})+a_i$
- $s_i=0\ \ \ \ f_{i,0}=\max(f_{i-1,0},f_{i-1,1})$

当 $s_i=1$ 的时候，更新 $f_{i,0}$ 时我们需要将盖子移到 $i-1$ ，两个盖子叠在一块显然是不优的，所以我们只需用 $f_{i-1,0}$ 来更新即可。

当 $s_i=0$ 的时候，由于只考虑前 $i$ 个，我们无法使 $i$ 这个位置变成有盖子的状态，故不更新，保留初始的 $-\infty$（不合法）。

最后输出 $\max(f_{n,0},f_{n,1})$ 即可。

[代码](https://codeforces.com/contest/1743/submission/180100820)