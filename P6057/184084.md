由于题目给出白边不会有自环

所以所有同色的三元环都应该是由**黑边**构成的
## 思路大致分为3步：数，删，补
### Step1. 数一个n个节点的无向完全图中的三元环个数
我们这里以$n=5$为例

如图，对于$1$号节点，我们可以在$2$ ~ $5$号中任选两个组成一个三元环（图中选取了$2,3$和$2,4$与$1$组成三角形）

![](https://cdn.luogu.com.cn/upload/image_hosting/kwt8b0u7.png)

那么$1$号节点可以组成多少个三角形呢？

喜闻乐见的小学数学，$4$选$2$组合，共有$3+2+1=6$种

之后的节点操作也与$1$号类似，唯一的不同点是只能在之后的节点中找，不能往前找，因为这样会找重复（如2只能在$3,4,5$中选$2$个来组合，而不能再找1）

那么这样我们就得出，$5$个点的无向完全图共有三角形数目为：

$1+2+3+$

$1+2+$

$1$

$=10$

### 那么我们推广到n个点的情况，即：
# $\sum\limits_{i=1}^{n-2} (n-1-i)\times i$
------------
### Step2.将有白边组成的三角形从总数中删去（原因见第一行）
如图，对于每一条白边（图中以$34$为例），它自己占了$2$个点，那就只剩下$(n-2)$个点与它组成三角形，所以每条白边都会组成$(n-2)$个三角形

![](https://cdn.luogu.com.cn/upload/image_hosting/nebuk04r.png)

因为总共有m条白边，所以我们将总数减去$m\times(n-2)$，剩下的就全是黑三角形了

------------
### Step3.将Step2中多减的三角形加回来

嗯？！！为什么会有这一步呢？

我们再次考虑一下Step2

如图，如果有$2$条白边**交于一点**，那么它们所夹的那个三角形就会被减了$2$次（图中$23$,$34$为白边，那么三角形$234$就被减了$2$次）

![](https://cdn.luogu.com.cn/upload/image_hosting/ryccez73.png)

### 结论：若有两条白边交于一点，则会多减一个三角形（即需要加回一个三角形）

Step3具体操作见代码：

```cpp
long long a[100010];//a[i]记录有多少条白边连在节点i上 
	
for(i=1; i<=m; i++) {
	scanf("%d%d",&u,&v);
	ans+=a[u]+a[v];//a[u]+a[v]即为当前与这条交于一点的白边数 
	a[u]++;//u,v节点都多连了一条白边 
	a[v]++;
}
```
------------
~~本人月赛时的码的弱鸡~~ac代码，应该已经很好懂了吧：
```cpp
# include <iostream>
# include <cstdio>
# define ll long long
using namespace std;
ll a[100010];
int main() {
	
	ll n,m,i,u,v,ans=0;//记得开long long 

	scanf("%lld%lld",&n,&m);

	for(i=1; i<=n-2; i++) ans+=(n-1-i)*i;//Step1 

	ans-=(n-2)*m;//Step2 

	for(i=1; i<=m; i++) {//Step3 
		scanf("%lld%lld",&u,&v);
		ans+=a[u]+a[v];
		a[u]++;
		a[v]++;
	}

	printf("%lld",ans);
	//时间复杂度O(n+m)
	return 0;
}
```
# THANKS FOR READING!

最后不要忘了

# 武汉加油！中国加油！