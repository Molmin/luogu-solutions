因为n很小，考虑直接暴力。

思路大概是让一个正方体不动，暴力枚举其它三个正方体的形态。

每个正方体有24种形态，就是24^3.最后加个循环每个面，循环涂四个中的哪个颜色答案最小。

所以大概的时间复杂度是24^3x6x4=24^4=331776.

数据在100组以下都差不多。

先写个数组，记录每种姿态对应的6个面。

```cpp
int pos[25][7]={
	{0,0,0,0,0,0,0},
	{0,1,2,3,4,5,6},{0,1,3,5,2,4,6},{0,1,4,2,5,3,6},{0,1,5,4,3,2,6},
	{0,2,1,4,3,6,5},{0,2,3,1,6,4,5},{0,2,4,6,1,3,5},{0,2,6,3,4,1,5},
	{0,3,1,2,5,6,4},{0,3,2,6,1,5,4},{0,3,5,1,6,2,4},{0,3,6,5,2,1,4},
	{0,4,1,5,2,6,3},{0,4,2,1,6,5,3},{0,4,5,6,1,2,3},{0,4,6,2,5,1,3},
	{0,5,1,3,4,6,2},{0,5,3,6,1,4,2},{0,5,4,1,6,3,2},{0,5,6,4,3,1,2},
	{0,6,2,4,3,5,1},{0,6,3,2,5,4,1},{0,6,4,5,2,3,1},{0,6,5,3,4,2,1};
};
```
~~拿橡皮~~手模了10分钟，写打表的速度应该差不多吧。

然后就是直接暴力枚举，具体看注释。

AC代码
```cpp
#include<bits/stdc++.h>
#define MAXN 30
using namespace std;
const int inf=1e9;
map<string,int> book;
int n,tot,A[5][7],ans;
char str[30];
int pos[25][7]={
	{0,0,0,0,0,0,0},
	{0,1,2,3,4,5,6},{0,1,3,5,2,4,6},{0,1,4,2,5,3,6},{0,1,5,4,3,2,6},
	{0,2,1,4,3,6,5},{0,2,3,1,6,4,5},{0,2,4,6,1,3,5},{0,2,6,3,4,1,5},
	{0,3,1,2,5,6,4},{0,3,2,6,1,5,4},{0,3,5,1,6,2,4},{0,3,6,5,2,1,4},
	{0,4,1,5,2,6,3},{0,4,2,1,6,5,3},{0,4,5,6,1,2,3},{0,4,6,2,5,1,3},
	{0,5,1,3,4,6,2},{0,5,3,6,1,4,2},{0,5,4,1,6,3,2},{0,5,6,4,3,1,2},
	{0,6,2,4,3,5,1},{0,6,3,2,5,4,1},{0,6,4,5,2,3,1},{0,6,5,3,4,2,1}
};
int now[5];	//记录每个正方体是哪种姿态 

inline int solve()
{
	int res=0,tmp,min1,min2;
	for(int i=1;i<=6;++i)	//6个面 
	{
		min1=inf;
		for(int j=1;j<=n;++j)	//以哪个正方体为标准 
		{
			tmp=A[j][pos[now[j]][i]]; min2=0;
			for(int k=1;k<=n;++k)	//枚举所有正方体 
				if(A[k][pos[now[k]][i]]!=tmp) min2++;
			min1=min(min1,min2);
		}
		res+=min1;
	}
	return res;
}

int main(void)
{
	//freopen("in.txt","r",stdin);
	while(scanf("%d",&n)&&n)
	{
		tot=0; book.clear(); ans=inf;
		for(int i=1;i<=n;++i)
		  for(int j=1;j<=6;++j)
		  {
		  	scanf("%s",str+1);
		  	if(book[str+1]) A[i][j]=book[str+1];
			else
			{
				A[i][j]=++tot;
				book[str+1]=tot;	//用map来哈希字符串
			}
		  }
		if(n==1)
		{
			puts("0");
			continue;
		} 
		else if(n==2)
		{
			now[1]=1;
			for(int i=1;i<=24;++i)
			{
				now[2]=i;
				ans=min(ans,solve());
			}
			printf("%d\n",ans);
		}
		else if(n==3)
		{
			now[1]=1;
			for(int i=1;i<=24;++i)
			{
				now[2]=i;
				for(int j=1;j<=24;++j)
				{
					now[3]=j;
					ans=min(ans,solve());
				}
			}
			printf("%d\n",ans);
		}
		else if(n==4)
		{
			now[1]=1;
			for(int i=1;i<=24;++i)
			{
				now[2]=i;
				for(int j=1;j<=24;++j)
				{
					now[3]=j;
					for(int k=1;k<=24;++k)
					{
						now[4]=k;
						ans=min(ans,solve());
					}
				}
			}
			printf("%d\n",ans);
		}
	}
	return 0;
}
```