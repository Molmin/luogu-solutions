降智题。

一开始看这题的时候 woc 这什么鬼题，为什么要对 $500000$ 组的每对判二分图，我不会快速判啊。。。

后来才发现，每条边都是固定的在一对组里，那我们只需要对这些边分分类，然后对这些暴力判就行了。

那如何暴力判？

首先我们需要把边端点是同组的用并查集并起来，然后将这些边按照端点属于哪个组分类，对于每类边，把它加进去，然后判是否为二分图。

如何快速判呢？

首先普通遍历肯定是不行了，得换一种方法。

说白了，其实这是要求支持动态加边，判断其是否为二分图。

这个其实可以用并查集维护，具体方法是讲一个点分成奇点和偶点两个点，每次连边奇点向偶点，偶点向奇点连两条边，最后判断奇点和偶点是否在一个连通块即可。

但由于我们要同时判断多次，所以我们还要带一个撤销操作，所以需要使用可撤销并查集，合并不能使用路径压缩，要使用按秩合并。

~~你会发现，说了这么多，不如说一句可撤销并查集板子题。~~

时间复杂度：$O(n+m\log n+m\log m+k)$