来个官方题解做法。

首先假设如果判定的是密度 $>D$ 怎么做。考虑如果有一个导出子图的密度 $>D$，那么考虑这个导出子图的补集（同时取边的补集和点的补集）一定满足密度 $<D$，而这个补集其实就是先选一个非空点集 $S$，再选所有至少一个端点在 $S$ 的边。

考虑如果不存在这样的点集 $S$，也就是对于每个点集 $S$，对应的边集（至少一个端点在点集里的边）大小都满足 $\ge D\cdot |S|$。看起来很 Hall 定理，那我们构造一张二分图进行多重匹配。一条原图上的边就是一个左部点，连向的两个右部点是在原图上连接的点，此时的完美匹配应该是一个边集满足左部点每个被选 $1$ 次，右部点每个被选 $D$ 次。因此只需要源点向左部点连流量 $1$ 的边，右部点向汇点连流量 $D$ 的边跑网络流就行，复杂度是 $O((ND)^{1.5})$。

上面的过程也就是说，如果不存在完美匹配，那么一定存在密度 $>D$ 的点集。否则不存在 $>D$ 的点集，但是可能有密度 $=D$ 的点集。考虑根据刚才求出的完美匹配给图定向，使得每个点的出度恰好为 $D$。给出引理：

> 存在密度 $=D$ 的真导出子图当且仅当新定向的图不止一个强连通分量。

- 如果存在多个强连通分量，找到没有出边的强连通分量，此时这个强连通分量内部的所有边一定指向内部，所以它的密度恰好是 $D$。

- 如果存在一个真导出子图密度 $=D$，假设点集是 $S$，那么从 $S$ 出发的边一定指向内部。如果该导出子图不连通，选择一个连通的导出子图。此时一定形成了一个强连通分量，且没有出边，所以原图一定存在多个强连通分量。

因此先跑一遍 dinic 再跑一遍 tarjan 即可。复杂度是 $O((ND)^{1.5})$。