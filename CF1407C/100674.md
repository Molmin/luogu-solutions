# CF1407C Chocolate Bunny

[题目链接](https://codeforces.com/contest/1407/problem/C)

记 $q(i, j)$ 表示通过一次询问求出的 $p_i\bmod p_j$ 的值。

---

考虑两个数 $x, y$，不妨设 $x < y$，那么：$x\bmod y = x$，$y \bmod x < x$。

也就是说，通过 $(x, y)$, $(y, x)$ 这样两次询问，我们可以获得的信息是：

- 两个数的大小关系。
- 较小的那个数的值。

我们依次扫描整个序列。维护一个变量 $i$ 表示当前**前缀最大值**所在的位置。初始时 $i = 1$。设当前扫描到的位置为 $i'$。通过两次询问 $q(i', i)$ 和 $q(i, i')$：

- 如果 $q(i', i) > q(i, i')$，说明 $p_{i'} < p_{i}$，且 $p_{i'} = q(i', i)$。
- 如果 $q(i', i) < q(i, i')$，说明 $p_{i'} > p_{i}$，且 $p_{i} = q(i, i')$。记下 $p_{i}$ 的值。然后令 $i\gets i'$。

全部扫描完成后，最终的 $i$，就是 $n$ 所在的位置。且其他位置的值都已经确定。

共需要 $2n - 2$ 次询问。

[参考代码-在CF查看](https://codeforces.com/contest/1407/submission/106331175)



