考虑每条边，因为是静态的，所以可以预处理出 $f_{i,j}, g_{i,j}$ 表示从第 $i$ 条边，往后跳 $2^j$ 条边，跳到边的编号和目前的时间（如果不存在就当作跳到第 $0$ 条边）。直接倍增处理即可。

询问就是找到从 $u$ 开始的出边，能跳尽量跳。

注意一些细节。

[code](https://atcoder.jp/contests/abc212/submissions/41493057)