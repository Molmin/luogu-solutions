通过如下构造可发现最大集合的大小大于等于 $n-3$：

如果 $n$ 是奇数，则将 $n\gets n-1$

注意到这个时候阶乘可以两两抵消，因而剩下的东西就是 $2,4,...,n$

如果 $n/2$ 是奇数，把 $2!$ 扔了

然后剩下的东西变成了 $1,2,...,n/2$，把 $\frac{n}{2}!$ 扔了即可

因而我们只需要判断最大集合是否大于 $n-3$ 即可，也就是最多扔两个

注意到取到 $n-3$ 的情况 $n$ 肯定是奇数，设 $p$ 是 $1-n$ 中最大的质数，那么扔掉的两个中较大者肯定大于 $p$，这样的组合不会太多。

时间复杂度大概是 $\sum\limits_{i \le n}\sum\limits_{p\in prime, p\times p \le i}1$