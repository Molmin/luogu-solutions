[题目传送门](https://www.luogu.com.cn/problem/AT2386)

AGC 的思维题我真是一道都不会做啊……

感觉其他题解或多或少有点小问题 qwq，于是自己来写一篇。

题意比较清楚，直接观察一下性质，发现序列顺序无所谓，因此首先排序。

排序后，可以发现符合题意的序列必须满足 $a_n-a_1 \le 1$。

这是显然的，因为每个人能看到其他所有人的颜色，所以两两之间最多差 $1$。

于是分类讨论，分别讨论 $a_1=a_n$ 和 $a_1+1=a_n$ 的情况。

下记 $a_1$ 在序列中出现的次数为 $s$。

若 $a_1=a_n$，则说明所有人看到的颜色数相同。那么只有两种可能：

1、所有人的颜色都唯一，这种情况显然 $a_1=a_n=n-1$。

2、所有人颜色都不唯一，即每个人都能看到所有颜色，这种情况下一共有 $a_1$ 种颜色，每种颜色至少出现两次，因此有 $2a_1 \le n$。

可以证明没有其他可能，因为如果一个人颜色唯一，另一个人颜色不唯一，那么他们两个人看到的颜色数肯定不同。

若 $a_1+1=a_n$，那么可以知道有 $s$ 个人的颜色唯一，$n-s$ 个人的颜色不唯一。（这 $s$ 个人看到的颜色数比其他人少 $1$）

那么所有颜色唯一的人看到的颜色数量必然 $\ge s$，因为他们都能看到 $s-1$ 种唯一颜色，和所有不唯一的颜色，两者之和必然 $\ge s$，所以有 $a_1 \ge s$。

同时，这种情况下颜色不唯一的人能看到所有颜色，因此颜色种数一共有 $a_n$ 种。于是不唯一的颜色数有 $a_n-s$ 种。有 $n-s$ 个人的颜色不唯一，而不唯一的颜色至少要出现两次，因此有 $2(a_n-s) \le n-s$，移项可得 $n+s \ge 2a_n$。

这两个条件必须同时满足才符合题意。

这样就做完了，直接判断即可。