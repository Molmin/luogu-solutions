用dp的思路，如果用`dp[i][k]`表示第`i`个人活到第`k`轮的概率是多少，`win[i][j]`表示第`i`个人打败第`j`个人的概率为多少，就可以推出式子：

```
对于每一个i的对手j，dp[i][k] += win[i][j]*dp[i][k-1]*dp[j][k-1] 
```

理解很简单，如果`i`打败了`j`活到第`k`轮，则`i`和`j`都活到了第`k-1`轮，并且`i`赢了`j`

然后就是要找到`i`的在第`k`轮的直接对手

我们发现，如果从`0`开始编号，`i`在第一轮的直接对手是`i^1`，在第二轮的直接对手是`i^2`和`i^3`，就可以大胆推测：`i`在第三轮的直接对手是`i^4` `i^5` `i^6` `i^7`

列一下表，发现果然这样，第`i`个人在第`k`轮的直接对手是`i`异或$2^{k-1}$到$2^k-1$

放核心代码段

```cpp
for(int k=1; k<=n; ++k)
{
	for(int i=0; i<tn; ++i)
	{
		for(int j=1<<(k-1); j<1<<k; ++j)
		{
			dp[i][k] += win[i][i^j]*dp[i][k-1]*dp[i^j][k-1];
		}
	}
}
```