看到这道题，首先就被那个公式搞懵了，感谢同机房的RSJ大佬的点醒，一语惊醒梦中人，我瞬间顿悟：

**如果两个点有边连起来，分数就是这两个点的点权+边权；**

**如果两个点没有边连起来，分数就是这两个点的点权+点两边的边权/2（因为桃子和阿狸都想要分数，所以平分）**

于是，我们就可以画个图来理解一下这道题的样例：

![](https://t1.picb.cc/uploads/2020/01/13/k89GO6.png)

桃子取了1号点和3号点，所得分数为6+(-1)+(1+6+3+5)/2=5，阿狸取了2号点和4号点，所得分数为4+(-2)+(1+6+3+5)/2=2，两者相差3。

作为一道**博弈论**的题，我找了几组数据的规律后，不难得出一个神奇的做法：**把边权转化成点权，然后贪心取大的值，就是两个人的分数。**下面给出证明：

![](https://t1.picb.cc/uploads/2020/01/13/k895gM.png)

因为这道题要求的是桃子的得分和阿狸的的分之差，所以我们设得分之差为ans，而A，B分别被谁染色，有四种情况：

1.桃子染色A,阿狸染色B,由题意,ans=a-b,而如果把c平分到a,b中, ans=(a+c/2)-(b+c/2)=a-b,相等。

2.桃子染色B,阿狸染色A,同上c可以忽略,ans=b-a,而如果把C平分到a,b中, ans=(b+c/2)-(a+c/2)=b-a,相等。

3.桃子染色A,B,由题意,c全部给桃子,ans=a+b+c,而如果把c平分到a,b中,ans=(b+c/2)+(a+c/2)=a+b+c,相等。

4.阿狸染色A,B,由题意，c全部给阿狸,ans=-(a+b+c)=-a-b-c,而如果把c平分到a,b中,ans=-[(b+c/2)+(a+c/2)]=-a-b-c,相等。

但是，如果把边权平分会涉及到一个令人头疼的精度问题，所以，把点权*2平分，最后把答案/2，无伤大雅。

上代码：
```cpp
#include <bits/stdc++.h>
#define maxn 1000010
using namespace std;
int n,m,x,y,z,f[maxn],ansh,ansl;
int main(){
	scanf("%d%d",&n,&m);
	for (int i=1;i<=n;i++){
		scanf("%d",&f[i]);
		f[i]<<=1;
	}
	for (int i=1;i<=m;i++){
		scanf("%d%d%d",&x,&y,&z);
		f[x]+=z;f[y]+=z;
	}
	sort(f+1,f+n+1);
	for (int i=1;i<=n;i+=2) ansh+=f[i];
	for (int i=2;i<=n;i+=2) ansl+=f[i];
	printf("%d",(ansl-ansh)/2);
	return 0;
}
```

谨以此篇题解纪念AC的第一道洛谷黑题（~~最水黑题~~）

