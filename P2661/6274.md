首先，注意到如果1告诉2,2告诉1,2轮游戏就结束了，这样说明什么？我们需要找到一个“循环节”，比如1告诉2,2告诉3,3告诉4,4告诉1，这就是一个周期为4的循环节。

这道题只要想清楚的话还是很好做的，只不过想清楚大概需要1个小时。

然而，想清楚后，我们知道是需要找循环节，可是一定要注意，这道题有可能出现两个循环节！

比如7个人，1,2,3，4形成循环；5,6，7形成循环，那么答案是多少？毫无疑问，3.

所以要找全所有循环节。

下面是我的方法，自认为是不用指针，不用位运算（都不会）中的高明方法了。

思路就是从一个以前没搜索过的人出发，向后（他的消息者）走，我们知道如果这个人在循环中，走n+1次必须会有循环。下面就是搜索了，代码如下：

```cpp

#include<iostream>  
#include<cstdio>  
using namespace std;          
  
int n,T[200010],r[200010],v[200010]={0};  
int main()//find the smallest for  
{     
    int i,j,ans=2000010,x;  
    cin>>n;  
    for(i=1;i<=n;i++) cin>>T[i];  
    for(j=1;j<=n;j++)  
    {  
        x=j;  
        for(i=1;i<=n+1;i++)  
        {  

            r[i]=x;  
            if(v[x]<j&&v[x]!=0)   
            {  
                   x=-1;  
                break;  
            }              
            v[x]=j;
            x=T[x];  
        }  
        if(x==-1) continue;  
        for(i=n;i>=1;i--)  
        {  
            if(r[i]==r[n+1])   
            {  
                if(n-i<ans) ans=n-i;  
                break;  
            }  
        }  
    }  
    cout<<ans+1;  
    return 0;  
}  

```