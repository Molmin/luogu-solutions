一个树状数组求逆序对的~~裸体~~裸题

我们发现如果每次要对整个数列求一遍逆序对，时间复杂度承受不了。。

于是……我们来看原序列：

惊奇的发现，原序列和更新后的数列的有三种情况：

1. 对于$ a_i$,原序列中$ \le a_i$的，发现因为从小到大排序原来的逆序对全部没有了，放在预处理里。。

2.对于$ \le a_i$的,原序列中$ >a_i$的，发现原来的逆序对还在。

3.对于 $ \ge a_i $和 $ \ge a_i $的，因为现在这个序列是单调的，所以原来的逆序对还在。

于是我们用树状数组来求一遍 $ \le a_i $ 的逆序对和整个序列的逆序对即可