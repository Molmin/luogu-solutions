首先发现最终手动打开的电脑一定组成了很多连续段，且各个连续段间有一个自动打开的电脑。

对于一个长 $x$ 的连续段，打开的方式有 $2^{x-1}$ 种（从中间往两边推进）。各个连续段之间互不影响，只是内部的步数是段内自己钦定的。所以假设一共有 $k$ 段，每段为 $x_1,x_2,\dots,x_k$，答案即为
$$
\prod_{i=1}^{k} \binom{\sum_{j=1}^{i} x_j}{x_i}2^{x_i}
$$
对这个求和可以 DP。设 $f(i,j)$ 表示前 $i$ 台电脑，分了 $j$ 段（留下 $j-1$ 个自动打开的位置）。
$$
f(i,1)=2^{i-1}
$$
$$
f(i,j)=\sum_{k\le i-2}f(k,j-1)\times \binom{i-j+1}{i-k-1}\times 2^{i-k-1}
$$
https://codeforces.com/contest/1515/submission/114950103

