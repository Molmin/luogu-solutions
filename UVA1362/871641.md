### Preface

反复强调一件事：多组数据。（本人因为这个卡了3发提交）

### 题意：

虽然题面很丑，但是可以概括为给你一个欧拉序，求满足这个欧拉序的树的数量。

### 思路:

以下是几个性质:

- 如果一棵树有一个合法 $\texttt{dfs}$ 序，那么这个 $\texttt{dfs}$ 序头尾必定是相同的。

- 一个树被分成若干个子树，答案为子树答案之积。

有了这两个性质，定义状态 $f_{i,j}$ 为欧拉序 $i \sim j$ 段的答案，进行区间 $\texttt{DP}$ 即可。

状态转移方程:

$f_{i,j} + \sum_{k=i+2}^{j} f_{i+1,k-1}\times f_{k,j} \to f_{i.j}$

边界：

如果满足 $s_i \neq s_j$，这样的欧拉序构不成树，$0 \to f_{i,j}$。

### [Code](https://www.luogu.com.cn/paste/xjm6quaa)