在我们学习动态规划之前，拿到这道题，大部分人首先的思路是贪心，即每次选择体积最大的装入箱中。

但是，贪心存在这样一个问题：局部最优解不一定是全局最优解。例如：

##### 箱子体积为4，物品有3件，体积分别为3，2，2
如果我们每一次选择体积最大的，只能选择体积为3的那一件，这样最后剩余体积为1。然而正确答案却是选择两件体积为2的，剩余体积为0。

因此，我们来看一看如何用**动态规划**解决此题：

因为每个物体，都有装与不装两种选择，所以我们得到状态转移方程：

### f[j]=max(f[j],f[j-w[i]]+w[i]);
f[j] 为：当总容量为 j 时，不放第 i 件物品，所能装的最大体积。

f[j-w[i]]+w[i] 为：当总容量为 j 时，放了第 i 件物品后，所能装的最大体积。（即 j减去第 i 件物品体积 的容量能装的最大体积+第 i 件物品的体积。w[i] 为第 i 件物品体积）

下面贴上代码
```cpp
#include<iostream>
#include<cstdio>
using namespace std;
int f[20005],w[35];
int main()
{
    int v,n;
    cin>>v>>n;
    for(int i=1;i<=n;i++)cin>>w[i];
    for(int i=1;i<=n;i++)
        for(int j=v;j>=w[i];j--)
            f[j]=max(f[j],f[j-w[i]]+w[i]);
    cout<<v-f[v];
    return 0;
}
```

ok～看完了本题正解，下面我再来讲一下本题的~~乱搞做法~~：

上面提到，如果用贪心来解这道题，因为局部最优解不一定是全局最优解，所以最终得不到正确结果。但是，我们发现大部分情况下，能得到全局最优解的物品选择方案与贪心的物品选择方案差别并不是很大，并且，由于这道题物品数量n<=30，数据范围比较小，因此我们可以这样做：

在每次选择下一件要装入的物品的时候，有一定的概率放弃当前最优解（体积最大的），而选择次优解（体积大于大部分的其他物品，但小于最大物品的），同时将放弃的物品重新放回未选择的物品中，下一次依然有几率被选择（这里很关键：把这一次放弃的物品放回未选择的物品中，这样可以使体积越大的物品最终被选择的概率越高）。这样我们可以获得一个与贪心选择的方案差不多的方案。这样运行一遍得到的方案不一定是最优方案，因此我们重复运行多次，很有可能某一次就能得到最优方案，只需要使用每一次得到的结果去更新答案就好啦。

```cpp
#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
using namespace std;
int n,v,a[40];
int f()
{
    int vv=v;
    int st[40],top=0;
    int q[40],head=1;
    memcpy(q,a,sizeof(a));
    while(head<=n&&vv>0)
        {
            while(head<=n&&((rand()%9==0)||vv-q[head]<0))//如果箱子剩余体积放不开，就一定要舍弃该物品，如果放得开，就有概率舍弃。
                if(vv-q[head]>=0)st[top++]=q[head++];//将舍弃的物品暂存到栈里，待这次选择完毕后再放回未选择的物品中
                else head++;//如果是因为空间不足而舍弃的物品不再放回
            if(head<=n)vv-=q[head++];
            while(top)q[--head]=st[--top];//将暂存在栈里的物品放回未选择物品中
        }
    return vv;
}
int main()
{
    cin>>v>>n;
    for(int i=1;i<=n;i++)
        cin>>a[i];
    sort(a+1,a+n+1,greater<int>());
    int ans=v;
    for(int i=1;i<=100;i++)
        ans=min(ans,f());//多次运行，更新答案
    cout<<ans;
    return 0;
}
```

rand()%9==0 这句为真的概率为1/9，即放弃当前最优解的概率为1/9。（这里1/9的概率是我人为设定的，差不多就可以）

怎么样？~~操作骚不骚~~？皮这一下很开心～