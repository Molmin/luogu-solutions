更好的阅读体验，以及代码，请见 <https://www.cnblogs.com/2020gyk080/p/16878561.html>。

纪念一下人生中第一道数据分治题。

## Subtask 1&2

这一部分具有的特殊性质是颜色段连续，那我们可以判断当前与前一个的颜色数是否为 1，若是则颜色相同，否则让颜色 +1。


## Subtask 3&4

这一部分由于颜色数不多，我们可以记录当前位置已经出现的颜色数量以及每种颜色最后出现的位置，根据这个直接分类讨论当前位置的颜色。

## Subtask 5

首先特判掉每个位置颜色都不同的情况。

然后我们考虑双指针，维护两个指针 $i,j$，让它们不断向中间移动的同时保证 $[i,j]$ 的颜色数等于 $j-i$，最后找到的两个指针的位置就是颜色相同的地方。

## Subtask 6&7

考虑二分，判断 $[mid,i-1]$ 的颜色数是否等于 $[mid,i]$ 的颜色数，如果相同则说明 $[mid,i-1]$ 中有与 $i$ 颜色相同的点，暴力数出来即可。