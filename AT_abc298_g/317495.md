~~/bx /bx /bx ?~~

### 题意

给定一个 $N \times M$ 的矩阵，对于每一个部分，你可以挑选相邻的行或列并将其切成两半。求切 $T$ 刀，所有部分内元素和的极差的最小值。

$n,m \le 6,s_{i,j} \le 10^{16}$。

### 分析

既然 $n,m$ 极小，那么可以考虑一些比较极端的做法，比如暴力 dp 。考虑到值域很大，但实际上最小值和最大值仅有 $\mathcal O((nm)^2)$ 中取值，我们不妨枚举最小值，再最小化最大值。

我们设 $f_{i,j,x,y,t}$ 表示矩形 $((i,j),(x,y))$ 切 $t$ 刀，每一部分都大于等于 $B$ 的前提下，所有部分最大值的最小值。转移枚举切哪里，左右切几刀。

$B$ 共 $(nm)^2$ 种有用的取值，状态数 $\mathcal O((nm)^2T)$，转移 $\mathcal O((n+m)T)$，那么总复杂度 $\mathcal O((n+m)(nm)^4T^2)$，但是发现略微剪枝后合转移和状态数都很少，所以可过。

### Code

提交记录：<https://atcoder.jp/contests/abc298/submissions/43495954>