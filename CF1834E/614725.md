数学神题。提供一个较为好写的做法。

首先考虑估计答案范围。容易发现，设前 $n+1$ 个素数是 $p_1,p_2,\cdots p_{n+1}$，则这 $n+1$ 个素数中必有至少一个不出现。把第 $300001$ 个素数塞进线性筛板子跑一下发现是 $4256233$。这样答案的值域就被确定了，设为 $T$。

我们先考虑固定左端点。发现一个关键性质：每次加入一个数求 $\text{lcm}$ 时，如果答案变化，则最小公倍数至少乘 $2$。那么，固定左端点时本质不同的最小公倍数其实只有 $\log T$ 级别。


知道了这个就好办了。可以从右往左枚举左端点，具体做法是：用一个容器 $S$ 维护上一轮的 $\text{lcm}$ 集合。那么枚举 $S$ 中的值，由于我们可以把当前左端点的元素 $a_i$ 与上一轮的区间拼接，故把 $a_i$ 和 $S$ 中的数取 $\text{lcm}$ 后放回去就得到了新的值，加入答案集合，同时更新集合 $S$。

但是这个去重工作不好处理。考虑什么容器可以高效维护集合并随时去重？显然是 $\text{set}$。这样就完成了这道题，总时间复杂度 $O(n\log^2 T)$。[代码](https://codeforces.com/contest/1834/submission/210316985)。