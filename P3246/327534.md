提交记录里一堆线段树，表示迷惑。

其实莫队吧…也不怎么会。

莫队可以把这个问题变成对于区间[l,r]，以r为右端点，求答案。而且由于莫队的复杂度，必需做到$O(1)$

本来想存一个每个点左右比它小的第一个数，结果发现，貌似成了一个递归的子问题，偏离了初衷

然后教练讲过一种巧妙的做法：有区间$[1,r]$的答案，向左扩展一位。

先找出$[1,r+1]$中最小的数$k$，$k$左边作为左端点所以对答案有贡献的是$k$。

计算$[k+1,r]$，可以一（慢）眼（慢）瞪（计）出（算），$[k+1,r]$中比$k$都大。预处理以$i$为右端点的区间的答案和$s[i]$。

由于$k$及$k$左侧的贡献都会是$k$左边的数，所以在$s[k+1]$和$s[r]$是可以相减的,做一做减法就好了。

$RMQ$是$O(1)$的。

PS：除100会WA，不知道为什么…

[评测记录](https://www.luogu.com.cn/record/33695123)