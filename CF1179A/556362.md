容易想到先预处理出所有的答案。

对于前 $n-1$ 次操作，可以直接暴力模拟；

这时，我们发现，所有数都至少比较过 $1$ 次，那么最大值一定放在队首，对于 $n$ 及其以后的操作，队首会依次弹出后面的 $n-1$ 个元素，那么此时就以 $n-1$ 形成了一个周期。也就是说，对于 $m>n-1$，我们得到的答案就是 $m\mod(n-1)+n-1$，如果 $m\mod(n-1)=0$，那么再加上一个 $n-1$。