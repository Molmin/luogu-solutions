[in Luogu](https://www.luogu.com.cn/problem/P7266)

~~首先这题输入就给了我们一个下马威~~。

那到底怎么输入呢？

我们可以把图片分成上下两半来输入。

这样就好处理多了。

接下来我们也是分成上下两半来进行 DP。

我们定义 $dp_{i,j,0/1}$ 为走到了第 $i$ 行 $j$ 列有没有交换。

那么现在就很简单了。

我们考虑这个点可以哪里来。

由于这个图是蜂窝状的，我们的左边是 $i - 1,j$ 上面是 $i - 1,j - 1$。

然后从这两个点转移即可。

下面是 DP 式。

$$dp_{i,j,0} = \max(dp_{i - 1,j,0},dp_{i - 1,j - 1,1}) + a_{i,j}$$

$$dp_{i,j,1} = \max(\max(dp_{i - 1,j,1},dp_{i - 1,j - 1,1}) + a_{i,j},\max(dp_{i - 1,j,0},dp_{i - 1,j - 1,0}) + maxx_i)$$

然后就没了。

自己写去吧，上面讲的很清楚了。