首先，若一个节点左子树有 $x$ 种染色方案，右子树有 $y$ 种，那整棵子树的染色方案数即为：

$$xy+x+y+1=(x+1)(y+1)$$

即选完根节点后，左右子树都选，只选左子树，只选右子树，左右子树都不选的方案数之和

先预处理出满二叉树的方案数

由于二叉树顺序是不固定的，我们可以将其二进制拆分

先从最后一层取出一个节点，依次枚举剩下的节点二进制第 $i$ 位

若第 $i$ 位为 $1$，就相当于新增一个高为 $i$ 的满二叉树，计算即可