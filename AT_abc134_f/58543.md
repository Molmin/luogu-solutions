首先可以先把题目转化成小球放小盒子里面

根据曾经打模拟赛的经验，我们不妨逐位逐位的来看小盒 $i$ 和小球 $i$ 怎么摆，如果摆不了，先留着，以后再摆

为了表述，不妨把小球放入小盒认为一种**匹配**

那么就可以设计 $dp_{i,j,k}$ 表示前 $i$ 个 小球 放前 $i$ 个 小盒 ，有 $j$ 个 小球 和 $j$ 个 小盒 还没匹配，**已经被处理的** 奇怪度为 $k$ 有多少情况

什么叫已经被处理？和未匹配的小球小盒差不多，但也有不同，看下去就懂了

如果我把 小球 $i$ 和 小盒 $i$ 先轮空（也就是 $i$ 小球小盒 不和前 $i$ 个小球小盒匹配），看影响，首先这些没摆的小球小盒一定只能和 $i$ 以后的小盒小球匹配，那么显然，那些未摆的小球小盒与 $i$ 只能和 $i$ 以后的小球小盒匹配，肯定有 $1$ 点差距，我们把它处理了，就有 $ j\times 2 +2$ 的奇怪度被处理了

![](https://cdn.luogu.com.cn/upload/image_hosting/tjkapgmj.png)

可以看到未摆的和 $i$ 与 $i$ 以后的小球小盒一定有差距 $1$ ，强行把前面的小盒小球都加一，这样我们就处理了一部分奇怪度

$dp_{i,j,k} \to dp_{i+1,j+1,k+(j \times 2+2)}$

还有转移，①小球 $i$ 和小盒 $i$ 匹配，②小球 $i$ 和未匹配的 $j$ 个小盒匹配，③小盒 $i$ 和 未匹配的 $j$ 个小球 匹配，有 $2j+1$ 种情况
 
同上道理

$(2j+1)dp_{i,j,k} \to dp_{i+1,j,k+(j \times 2)}$

还有转移，$i$ 小盒小球同时都有匹配

$j \times j \times dp_{i,j,k} \to dp_{i+1,j-1,k+(j\times 2-2)}$

但其实，最终答案上，一三情况数量是一样的（因为一个导致了 $j+1$ 一个导致了 $j-1$）

所以把 $dp$ 式子写成下面也能过：

* $dp_{i,j,k} \to dp_{i+1,j+1,k+(j \times 2)}$

* $(2j+1)dp_{i,j,k} \to dp_{i+1,j,k+(j \times 2)}$

* $j \times j \times dp_{i,j,k} \to dp_{i+1,j-1,k+(j\times 2)}$

```cpp

ll dp[55][55][2555],n,k;
void add(ll &x,ll y)
{
	x=(x+y)%p;
}
int main()
{
	in(n),in(k);
	dp[0][0][0]=1;
	for(int s=0;s<=n;s++)
	{
		for(int v=0;v<=n;v++)
		{
			for(int z=0;z<=k;z++)
			{
				add(dp[s+1][v+1][z+2*v+2],dp[s][v][z]);
				add(dp[s+1][v][z+2*v],dp[s][v][z]*(2*v+1));
				if(v)add(dp[s+1][v-1][z+2*v-2],dp[s][v][z]*v*v);
			}
		}
	}
	cout<<dp[n][0][k]<<endl;
}

```