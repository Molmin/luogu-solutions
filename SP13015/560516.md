可以分块写，每个块维护当前块的值和素数个数。

区间推平的话打一下值的标记，素数标记判一下推平的是否是素数即可。散块如果有标记就暴力下传标记，然后暴力修改即可。

求和的话整块取标记，散块暴力。

时间复杂度和空间复杂度都是 $O(\sqrt n)$。

