感觉其他题解的文字说明都好抽象啊，本篇题解会稍微说的详细一点。

首先有解/无解是容易判断的，考虑将所有指定点按照 ```dfn``` 序排序，若相邻两者权值之差和两者间距离之差奇偶性不同，则说明无解。

接下来提供两个做法。

### Sol1

每次选出当前已经赋值的所有点中权值 $w$ 最小的点 $u$，将其相邻无赋值点 $v$ 赋为 $w_u+1$。

以下为做法正确性证明。

设 $w_u<w_v$，且有解，那么 $u\to v$ 路径上点的权值有两种情况。

- $dis(u, v) = w_v-w_u$，此时路径上点的权值是单增序列，显然使用上述做法可以构造。

- $dis(u,c)=w_v-w_u+2x$，前面提到过奇偶性的问题，由于二者奇偶性相同，所以可以表示成此处的形式。此时路径上的点权可以是一个先增后减的序列，显然上述做法可以构造。

时间复杂度 $O(n\log n)$。

### Sol2

树形dp，设 $[l_u,r_u]$ 表示 $u$ 这个点以及其子树内所有点均合法时， $w_u$ 的取值范围。显然有 $[l_u, r_u]=\bigcap_{v \in son_u}[l_v-1,r_v+1]$，注意 $i \in [l_u,r_u]$ 并不是全部合法的，需要去除奇偶性不同的情况。而后从根节点开始向下构造答案即可。

时间复杂度 $O(n)$。