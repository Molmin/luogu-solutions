# 思路

我们先扫一遍整个数组 $x$，如果 $x_i$ 和 $x_{n-i+1}$ 都不等于 $2$ 的情况，直接 $\verb!continue!$，开始下一次判断，否则我们就需要分情况讨论。

- 如果 $x_i = 2$ 且 $x_{n-i+1} ≠ 2$

说明 $x_i$ 需要做出改变，那么我们只需要看看 $x_{n-i+1}$ 的值是几就行了。

如果 $x_{n-i+1} = 0$，我们就把 $x_i$ 替换成 $0$，并且统计代价的变量 $s = s + a$。

否则把 $x_i$ 替换成 $1$，并且 $s = s + b$。



- 如果 $x_{n-i+1} = 2$ 且 $x_i ≠ 2$

说明 $x_{n-i+1}$ 需要做出改变，那么我们只需要看看 $x_i$ 的值是几就行了。

如果 $x_i = 0$，我们就把 $x_{n-i+1}$ 替换成 $0$，并且 $s = s + a$。

否则把 $x_{n-i+1}$ 替换成 $1$，并且 $s = s + b$。

- 如果 $x_i = 2$ 且 $x_{n-i+1} = 2$

这样的情况比上两种稍微复杂一点，我们只需要看看 $a$ 和 $b$ 那个比较小就行了。

如果 $a<b$

说明把 $x_i$ 替换成 $0$ 的代价比较小，那么 $x_i = 0$ 且 $s = s + a$。

否则把 $x_i$ 替换成 $1$ 的代价比较小，那么 $x_i = 1$ 且 $s = s + b$。

注意我们只需要改变 $x_i$ 的值就好了，不需要改变 $x_{n-i+1}$ 的值。

最后判断一下全部改变完后的数组是否回文即可。

# 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
	//定义
	 
	int n,a,b,x[10001],i,s;
	
	//输入 
	cin>>n>>a>>b;
	
	//变量赋值
	 
	s = 0;
	
	//循环输入
	 
	for(i=1;i<=n;i++)
		cin>>x[i];
		
	//开始把 2 消掉 
	for(i=1;i<=n;i++)
	{
		if(x[i]==x[n-i+1]&&x[i]!=2)//如果 x[i] 和 x[n-i+1] 都不为 2  
			continue;//开始下一次的判断 
		else if(x[i]==2&&x[n-i+1]!=2)//如果 x[i] = 2 且 x[n-i+1] != 2 
		{
			if(x[n-i+1]==0)//做出把 x[i] 替换成 0 或 1 的决定。  
				s += a,x[i] = 0;
			else
				s += b,x[i] = 1;
			//记得代价变量 s 要根据 x[n-i+1] 的值做决定。 
		}
		else if(x[n-i+1]==2&&x[i]!=2)//如果 x[n-i+1] = 2 且 x[i] != 2 
		{
			if(x[i]==0)//做出把 x[n-i+1] 替换成 0 或 1 的决定。  
				s += a,x[n-i+1] = 0;
			else
				s += b,x[n-i+1] = 1;
			//记得 s 要根据 x[i] 的值做决定。
		}
		else if(x[i]==2&&x[n-i+1]==2)//如果 x[n-i+1] = 2 且 x[i] = 2 
		{
			if(a>b)//判断把 x[i] 替换成几比较合适 
				x[i] = 1,s += b;
			else
				x[i] = 0,s += a;
		}
	}
	
	//操作完毕后判断数组是否会文
	 
	for(i=1;i<=n/2+1;i++)
	{
		if(x[i]==x[n-i+1])
			;// x[i] = x[n-i+1]，继续下一次比较 
		else
			return printf("-1\n"),0;//否则不回文，输出 -1，程序结束。 
	}
	printf("%d\n",s);//回文，输出代价变量 s。 
	return 0; 
}
```

