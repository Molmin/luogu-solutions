- **题意**：

Polycarp 有一个字符串 $s$，初始时令 $t=s$。每次选择一个 $s$ 中至少出现一次的字符，然后把 $s$ 中的所有这个字符删去，然后令 $t=t+s$。这里的 $+$ 表示将两个字符串拼接。

$T$ 组数据，每次给定按上述步骤生成的字符串 $t$，请你求出一组合法的 $s$ 以及删除的顺序。

$\sum \left\vert t\right\vert \leq 5\cdot10^5,T\leq 10^4$。

- **做法**：

考虑 $t$ 中最后一个位置的字符肯定是最后删去的，倒数第二个字符（也就是从后往前第一个不同于最后一个位置）的字符肯定是倒数第二个删的......以此类推，我们就可以把删字符的顺序确定下来。

接下来，我们对每个字符开一个桶 $cnt$ 记录它的出现次数，那么这个字符串有解的一个必要条件显然是：对于第 $i$ 个删去的字符，该字符在全串中的出现次数 $cnt_i$ 必为 $i$ 的倍数。如果不满足直接判为无解即可。

然后我们算出字符串 $s$ 的长度 $Cnt$，显然 $Cnt$ 即为所有 $\frac{cnt_i}{i}$ 求和。按照题目模拟一下，如果出现问题直接判断无解。

最后如果不是无解，直接输出即可，时间复杂度为 $O(\sum\left\vert t\right\vert)$。

- [代码](https://www.luogu.com.cn/paste/wlh00mp6)