[传送门](https://www.luogu.com.cn/problem/AT_abc303_d)     
一眼 dp 题。             
我们设 $dp_{i,j}$ 为第 $i$ 位时，大小写状态为 $j$ 时，打出这些字符所需要的最小时间。这里如果 $j=1$ 为大写，$j=0$ 为小写。    
我们扫一遍这个字符串，设这一次扫到了第 $i$ 位。    
## $s_i$ 为小写     
### $i>1$   
我们可以发现，有 $3$ 种方法打出这个字符：     
- 上一个字符的状态是大写，用 $y$ 毫秒按下 `shift` 和 `a`。     
- 上一个字符的状态是大写，用 $x+z$ 毫秒按下 `CapsLock` 和 `a`。    
- 上一个字符的状态是小写，用 $x$ 毫秒按下 `a`。 

注意这里对于第二三种操作，最后的大小写状态为小写，第一种操作最后的状态为大写。       
所以我们可以写出以下状态转移方程：    
$dp_{i,0}=\min(dp_{i-1,0}+x,dp_{i-1,1}+z+x)$    
$dp_{i,1}=dp_{i-1,1}+y$    
### $i=1$   
特殊情况，这里明显 $dp_{1,0}=x,dp_{1,1}=z+y$。   

## $s_i$ 为大写   
这里的推导过程与上面的大致相同，就不写了。
### $i>1$      
这里的转移方程为：    
$dp_{i,1}=\min(dp_{i-1,1}+x,dp_{i-1,0}+z+x)$    
$dp_{1,0}=dp_{i-1,0}+y$     
### $i=1$   
这里 $dp_{i,1}=z+x,dp_{i,0}=y$。       


我们发现，我们每次操作之后可以改变大小写状态，我们可以通过改变大小写状态来获得更小的时间。所以我们每次转移后都要再进行如下的转移：     
$dp_{i,0}=\min(dp_{i,0},dp_{i,1}+z)$    
$dp_{i,1}=\min(dp_{i,1},dp_{i,0}+z)$     
答案最后为 $\min(dp_{n,0},dp_{n,1})$。    
[CODE](https://www.luogu.com.cn/paste/lfy006yj)