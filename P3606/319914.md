提供一份比较容易看懂的题解。

首先，我们可以给每个任务各一头牛，然后把剩下的 $n-k$ 头牛贪心地分配给每个任务。具体贪心策略就是，对于某个任务 $i$，目前已经分配了共 $c_i$ 头牛，那么再分配一头牛可以使总时间减少 $\frac{a_i}{c_i + 1} - \frac{a_i}{c_i}$。于是每次加牛使得收益最大就可以了。

但是牛的数量有 $10^{12}$，这样一头一头枚举会超时，于是考虑用二分，二分一下**加牛时收益的最小值的最大值**。

怎样判断一个收益可不可行？对于每个任务，计算最多加多少头牛，使得收益大于等于该值即可，也就是解不等式 $\frac{a_i}{c_i + 1} - \frac{a_i}{c_i} \geq x$，也即 $a_i \geq x \times c[i] \times (c[i] + 1)$，展开后得到 $c[i] ^ 2 + c[i] - \frac{a[i]}{x} \leq 0$，那么它的两个根为 $x_{1,2} = \frac{-1\pm \sqrt{1+\frac{4 \times a[i]}{x}}}{2}$，必然一正一负，所以这个不等式的解集就是 $0 < x < \frac{-1+  \sqrt{1+\frac{4 \times a[i]}{x}}}{2}$。

于是我们就得到了加牛时收益的最小值的最大值，最后一个步骤是统计答案。在统计出每个任务所要花的时间之后，因为我们二分出来的值可能会有一点点误差，所以要统计出来一共使用了多少头牛。注意到我们二分的时候保证我们使用的牛只多不少，因此把多余的贡献要减掉。

代码可以参考一下别的题解。