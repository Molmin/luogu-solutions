首先，这题的做题策略能确定下来：先判有无解，若有解则构造 $\sum\limits^{\frac{n}{2}}_{i=1}p_i=a$ ，这样在有解的条件下一定是能保证 $\sum\limits^{n}_{i=\frac{n}{2}+1}p_i \le b$ 的，原因显然。

考虑无解的情况：

- 总和加起来都不够 $a$ 和 $b$ 分配的（即 $\sum\limits^{n}_{i=1}p_i<a+b$ 。由于 $p$ 是排列，因此 $\sum\limits^{n}_{i=1}p_i=\sum\limits^{n}_{i=1}i=\dfrac{n(n+1)}{2}$  )
- 给 $b$ 分的最少了还不够 $a$ 用（即 $\dfrac{n(n+1)}{2}-\dfrac{\frac{n}{2} \times (\frac{n}{2}+1)}{2} = \dfrac{3n^2+2n}{8} < a$ ）

- 给 $a$ 分的最少了还不够 $b$ 用（即 $\dfrac{3n^2+2n}{8} < b$ ）

显然，当这些情况排出后，剩下的一定有解。

考虑构造 $\sum\limits^{\frac{n}{2}}_{i=1}p_i=a$  。

以 $n=6$ 为例，先弄出一个单调上升的排列：

 $$[1,2,3,4,5,6]$$ 
 
接着把 $2,3,4,5,6$ 向前挪一格， $1$ 挪到最后面：

 $$[2,3,4,5,6,1]$$ 
 
容易发现此时前半部分总和增加了 $\dfrac{n}{2}$ 。

证明也十分简单：原排列 $p_{i+1}=p_i+1$ ，向左挪一位就是 $p'_i=p_i+1$ ，一位上加一， $\dfrac{n}{2}$ 位自然加 $\dfrac{n}{2}$ 。

于是，构造的方法就出来了：先用 $\dfrac{a-\sum\limits^{\frac{n}{2}}_{i=1}i}{\frac{n}{2}}$ 判断要移动几次。等移完之后再从前 $\dfrac{n}{2}$ 项中找一项和第 $\dfrac{n}{2}+1$ 项交换使得 $\sum\limits^{\frac{n}{2}}_{i=1}p_i=a$  ，这部分你可以算但也可以暴力找（毕竟查一遍也查完了）。

于是这题就解出来了。

代码不放，需要者私我。