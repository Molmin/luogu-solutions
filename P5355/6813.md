~~久违的Ynoi一血~~

其实就是P3674+P5313那个套路。

前三问不说了，请去看P3674的题解。

考虑第四问。

还是莫队，然后数据分治一下。

设阈值为$S$。

对于$x>S$的部分，可能的解的对数只有$\frac{10^5}{x}$种，是个能接受的枚举范围，莫队的时候直接枚举找解即可。

对于$x\leqslant S$的部分，根据套路，我们对每个$x$进行一次莫队，用```bitset```存所有出现过的$val$值和$\frac{val}{x}$值。查询的时候```and```一下即可。

然后手动二分一下$S$的值即可。