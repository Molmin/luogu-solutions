我们将一个序列转为一棵树(链)

然后就是树的点分治，每次求出重心后，求出重心到每个点路径上的数的线性基，对于每个询问，只需要暴力合并两个线性基即可。

因为是一条链，所以重心直接取当前链中点即可

时间复杂度大概$O(30nlogn+900q)$

不给代码啦