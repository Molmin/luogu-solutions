差分约束。

若干条限制。

$1\leq dis_v -dis_u \leq 2$

考虑找出在 $1$ ~ $n$ 所有路径上的点。

$dis_v -2 \leq dis_u$。

$dis_u +1 \leq dis_v$。

差分约束即可。