即选出一个 01 串（$0$ 代表做梦），满足：

* 相邻的 $0$ 之间的 $1$ 的数量 $> t$
* 每段的 $1$ 总和满足限制

不妨按段 $DP$。

维护一个 $f_i$ 表示之前最后一个 $0$ 的位置距离当前第一个位置的距离，前面满足条件的方案数。把 $ > t + 1$ 的方案记录在 $f_{t  +1}$ 上，因为转移的限制相同。

转移时，只需考虑新段最后一个 $0$ 的位置，再枚举前面的 $f$，之后中间的方案数对应的是在连续的一段选 $0$，并且 $0$ 的个数 $\le q-x$ 的一个方案数，乘起来。

考虑预处理出连续的一段选 $0$ 的方案数，可以再设一个 DP，$g_{i,j}$ 表示长度为 $i$，满足限制的情况下选了 $j$ 个 $0$ 的方案数，最后一个位置的 $0$ 为 $i$。这个可以直接 $O(q^3)$ 枚举上一个 $0$，DP 出来。

然后整个 DP 大概可以用 $O(ntq)$ 算出来。

可以通过此题。

