lnoi t2 这么简单的么。。

手玩一下发现满足条件的排列就 $<3,2,1>,<2,1,3>,<1,3,2>$。你考虑在整个序列上数很麻烦，于是去想一边递推一边匹配。

定义 $dp_{cur,i,j,t,a,b,c}$，cur 是当前位置，可以滚动掉，剩下的表示匹配了 $i$ 个 $<1>$，$j$ 个 $<2>$，$t$ 个 $<3>$，$a$ 个 $<3,2>$，$b$ 个 $<2,1>$，$c$ 个 $<1,3>$，转移的时候把和每一种匹配的情况都去转移一遍，匹配完的东西不需要记录。

匹配过程中是没有标号的，所以我们要在结束后给答案乘以一个 $n!$。

状态 $O(n^7)$，转移 $O(1)$，总复杂度 $O(n^7)$，但是 $i+j+t+a+b+c\le n$，所以可以跑过去（次数可以用插板法算一下）。。

[代码](https://www.luogu.com.cn/paste/v43mwkof)、