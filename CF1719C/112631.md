由于前两题都是推结论的题，做这题时也先上手推了一下结论。（**以下所有表述默认 $i$ 从 $1$ 到 $n$**)

考虑样例数列，手玩一波

$1$ $3$ $4$ $2$

因为 $1<3$，将 $1$ 推至尾部，得

$3$ $4$ $2$ $1$

同理推得以下数列

$4$ $2$ $1$ $3$

$4$ $1$ $3$ $2$

$4$ $3$ $2$ $1$

若进一步下推，则可得

$4$ $2$ $1$ $3$

此时与前面的数列重复，即表明已经出现循环。

考虑出现循环的 **原因**，是因为最大值永远不会换掉，每一个数前来比较，结果一定相同。而由此可以得到结论：

在最大值到达第一个位置之后，所有非最大值的数字一定不会胜利，而最大值数字每场都胜利。

而若最大值初始在位置 $i$ ，到达第一个位置所需要的轮数应为 $i-1$。

于是，考虑模拟最大值到第一个位置的过程。因为只需要考虑首尾，用双端队列来维护。

而由于可能会有在 $i-1$ 轮内的提问，考虑用优先队列存储提问，然后在模拟时存储这些提问的答案到 $ans$ 数组。

在 $i-1$ 轮后的提问，判断是否是最大值，**若是**，则将前 $i-1$ 轮的获胜数与 $k-i+1$ 相加 ( $k$ 为询问的轮数）作为答案。**若不是**，则直接输出前 $i-1$ 轮中模拟出的答案。