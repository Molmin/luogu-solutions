- [传送门](https://www.luogu.com.cn/problem/CF1719C)

### 题意

$T$ 组数据，有 $n$ 个实力各不相同的人打擂台，实力分别是 $1$ 到 $n$。这些人会按照读入的顺序排成一个队列进行比赛，每次最前面的两人比较实力，实力高的到第一个，实力低的到最后。

再给你 $q$ 个询问，每次问你 $a_i$ 经过 $k$ 轮擂台后，赢了多少场。

### 思路

我们可以定义两个数组，$l$ 数组记 $a_i$ 在第几轮开始在第一位，另一个 $r$ 数组记 $a_i$ 又在第几轮结束到了最后。

之后再定义一个数组 $Max$，表示每轮都是谁在第一位。

最后判断 $a_i$ 胜利的时间是否比 $k$ 小或相等的，并且 $a_i$ 是否胜过。

若是，答案就是 $k-l_{a_i}+1$。还要注意的是，如果 $k$ 大于了 $a_i$ 最后结束胜利的时间，那需输出 $r_{a_i}-l_{a_i}+1$，可以与之前的进行比较，取最小值。

若不是，输出 $0$。

### 代码

```cpp
T=read();
while(T--){
	n=read();
	q=read();
	for(int i=1;i<=n;i++){
		a[i]=read();
		l[i]=0;
      	r[i]=0;
	}
	Max[1]=a[1];//首先a[1]在最前
	for(int i=2;i<=n;i++)
		Max[i]=max(Max[i-1],a[i]);//记录每一轮都是谁胜
	for(int i=2;i<=n;i++){
		if(Max[i]!=Max[i-1]){//若Max数组变了，就把记录该数的开始时间，并把上一个数的结尾记录
			l[Max[i]]=i;
			r[Max[i-1]]=i-1;
		}
	}
	r[Max[n]]=1e10;//最后Max的最后一个数必是胜利者，将其也存入r数组，这里我将其记录为一个极大值
	l[a[1]]=2;//存入开头
	for(int i=1;i<=q;i++){
		x=read();k=read();
      	k++;//因为位置和轮数差1，所以要加
		if(l[a[x]]<=k&&r[a[x]]!=0)
			cout<<min(k-l[a[x]]+1,r[a[x]]-l[a[x]]+1)<<endl;
		else cout<<0<<endl;
	}
}
```