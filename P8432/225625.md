## 题解

提供另一种推法。

对于偶数 $k$，设 $f(n,k)$ 表示此时的答案。考虑 $k$ 是奇数的情况，此时 $\frac{k+1}{2}$ 这个值至多在数列中出现一次。所以，当 $k$ 是奇数时，答案就是 $f(n,k-1)+f(n-1,k-1)$。以下只考虑 $k$ 是偶数的情况。

令 $m=\frac{k}{2}$。

对于任意的值 $x\in [1,m]$，如果 $x$ 在数列中出现，那么 $k+1-x$ 就不能在数列中出现。

所以，假如 $[1,m]$ 中有 $i$ 个数出现，那么 $[m+1,k]$ 中就至多有 $(m-i)$ 个数出现。枚举 $i,j$ 分别表示在 $[1,m],[m+1,k]$ 中出现的数的个数，用插板法得到：

$$
f(n,k)=\sum_{i=0}^m \sum_{j=0}^{m-i} \binom{m}{i}\binom{m-i}{j}\binom{n-1}{i+j-1}.
$$

根据范德蒙德卷积，对于任意整数 $s,a,b$ 和正整数 $r$，有：

$$
\begin{aligned}
	&\sum_{i} \binom{r}{a+i}\binom{s}{b+i}\\
	&=\sum_{i} \binom{r}{r-a-i}\binom{s}{b+i}\\
	&=\binom{r+s}{r-a+b}.
\end{aligned}
$$

固定 $i$，令 $(r,s,a,b)\gets (m-i,n-1,0,i-1)$，可以得到：

$$
f(n,k)=\sum_{i=0}^m \binom{m}{i}\binom{m-i+n-1}{m-1}.
$$

预处理组合数即可。**注意特判 $k=1$ 的情况。**