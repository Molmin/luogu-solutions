说下这个转移方程如何得到。

因为选取区间可以交叉但不能包含，可知各选取区间若以左端点排序，则右端点严格递增。且左右端点均不重复。

故枚举左端点，则到现在左端点时，可从之前左端点状态加上新一段。由于需要使之前「每个」左端点均单调，故状态定义用小于等于。

得
$$
s_{i,j}=
\max\{s_{i-1,j},s_{i,j-1},[L\le cost_{i,j}\le R]value_{l,r}\}
$$
