### Part 1 $30\text{pts}$ 写法

因为 $n$ 在 $10^6$ 范围内，于是立刻想到 $\operatorname{O}(n)$ 的暴力写法。

【防抄袭】代码：

![](https://cdn.luogu.com.cn/upload/image_hosting/64fg18bw.png)

这样可以拿到 30pts。

### Part 2 $100\text{pts}$ 写法

再来看一下这个式子。

随着 $i$ 的不断增加，每次累加的值会越来越小，直到趋近于 $0$。我们猜想，到了一定程度后，小数点后的四位数就不会改变了。

可是！当 $n \to \infty$ 并且 $x=1$ 的时候，这个式子是发散的（惊恐.jpg）。

但是！$n$ 最大只有 $10^{18}$，因为这个式子发散的很缓慢，我们的想法可以实现（狂喜.jpg）。

最后，这个“到了一定程度后”是多少呢？我们用极限数据去推算，运算大约$8\times 10^4$ 之后，小数点后四位数就不会变了。

只要稍稍加些改进就行了。

【防抄袭】代码：

![](https://cdn.luogu.com.cn/upload/image_hosting/r57r9e3j.png)

### Part 3 某些优化

因为数据很良（凉）心，上面的代码可以过。

其实我们在循环时可以记录 $x^{i-1}$ ，当前运算需要的 $x^i=x^{i-1}\times x$，这样复杂度可以降低至 $\operatorname{O}(\min(n,8 \times10^4))$。

~~reader：这么简单的优化方法你还要说？~~

----

愉快地结束辣！