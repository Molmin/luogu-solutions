题意描述里有一句：“对每张图片 i，小 D 都最多只记住了某一张质量不比 i 差的另一张图片 Ki。”


即只有一个父亲，且m <= n,所以建树，容易想到树形dp，


对于 ”=“ 的，直接用并查集将之看成一个点，


对于“<”的，将小的连一条到大的点的边，


然后不一定是一棵树，可能是森林，所以扫一遍，每次求出答案然后用乘法原理并起来。


令f[x][y]表示以x为根，有y个不同的数的方案，容易想到，对于一个点，他的儿子间可以随便组合，


但是儿子肯定不能更改与父亲的关系。


即 t[i] =  ∑f[x][q] \* f[to[i]][p]\* C(p - (e - q),q - 1)\* C(q - 1,e - 1)) ;


另外，如果树上有环，直接返还 0；


[蒟蒻代码](http://tgotp.science/4013-hnoi2015%E5%AE%9E%E9%AA%8C%E6%AF%94%E8%BE%83/)
