考虑一颗树怎么染色。

每个子节点染成边的颜色，如果与父亲节点相同，就随便染色（这条边的限制已经被父亲节点满足）。

那么一定可以染色。

所以把原图跑最小生成树再按上述方法染色即可。

倘若原图不连通，那么无解。