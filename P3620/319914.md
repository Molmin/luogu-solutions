首先，每条电缆必须是相邻的两幢楼之间连接的。否则，我们用同样的字母表示连在一起的两幢楼，如果有类似 a \* a 的情况，那么分类讨论：

+ a \*  a中当中的那幢楼没有连电缆，那么可以将改为 a  a \*，比原来更优。
+ 如果当中的楼有连电缆，例如 a b a \* \* \* b，那么将当中的 a 和 b 交换位置，改为 a a b \* \* \* b 比原来更优。

所以现在只用考虑相邻的楼之间的差即可。假设 $d[i]=pos[i]-pos[i-1]$，题目即求在 $d$ 中选择 $k$ 个不相邻的数。我们考虑 $d$ 中最小的数 $d_k$，以及其两边的数 $d_{k-1}, d_{k+1}$。

如果 $d_{k-1},d_{k+1}$ 均不选，那么如果没有选择 $d_k$，那么将选择的其中一个数改为 $d_k$ 一定更优。说明一定选择了 $d_k$。

如果 $d_{k-1}, d_{k+1}$  只选择了一个，那么不能选择 $d_k$，此时如果将选择的那个改为 $d_k$ 一定更优。说明不能只选一个。

综上，我们证明了：要么选 $d_k$，要么 $d_{k-1}, d_{k+1}$ 同时选。

此时我们考虑怎么讨论这两种情况，可以这样：先取出 $d_k$，累加在答案上，然后去掉 $d_{k-1}, d_{k+1}$，插入 $d_{k-1} + d_{k+1} - d_k$。如果这个数最后被选了，相当于将 $d_k$ 替换为 $d_{k-1}$ 和 $d_{k+1}$，否则就是选择了 $d_k$。这样便高效地解决了分类地问题。

实现：使用链表和 set 即可。

~~最后请大家自觉日膜UM~~

[Code](https://www.luogu.com.cn/paste/rqffg67l)

