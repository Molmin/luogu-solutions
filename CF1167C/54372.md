可以看出，如果把每一个人看作一个结点，每个关系就相当于把关系里的所有人合并到同一个连通块中，很容易想到用并查集实现，每次输入一个关系可以任选一个人（比如第一个人）然后把其他人都合并到他的连通块里。

```cpp
int find(int x){return f[x]==x?x:f[x]=find(f[x]);}//找爸爸（路径压缩）
...
k=read();//关系所包含的人数
		if(k)
		{
			yee=read();//输入第一个人
			for(j=2;j<=k;j++)
			{
				x=read();//对于输入的每一个人
				int p=find(x),q=find(yee);//找爸爸
				if(p!=q) f[q]=p;//合并
			}
		}
```

最后只要输出每个人所在的连通块里的人数就好了，可以开一个数组记录联通块大小，对每个人找出爸爸并让爸爸所在联通块的大小加一，最后输出即可。

```cpp
for(i=1;i<=n;i++) size[find(i)]++;
for(i=1;i<=n;i++) printf("%d ",size[find(i)]);
```

