# SP32192 SUMMATION - SUMMATION 题解

## 题外话
[事原题罢（悲）](https://www.luogu.com.cn/problem/P2415)
## 题意
给定一个集合，求出此集合所有子集元素之和。
## 思路
先看样例，第一组数据给定的集合为 $\{1,2,3\}$，子集为 $\varnothing,\{1\},\{2\},\{3\},\{1,2\},\{1,3\},\{2,3\},\{1,2,3\}$。总和为 $1+2+3+1+2+1+3+2+3+1+2+3=24$。

第二组数据给定的集合为 $\{4,1,2\}$，子集为 $\varnothing,\{4\},\{1\},\{2\},\{4,1\},\{4,2\},\{1,2\},\{4,1,2\}$，和为 $4+1+2+4+1+4+2+1+2+4+1+2=28$。

我们再自己造一组数据，集合为 $\{1,2,3,4\}$，子集为 $\varnothing,\{1\},\{2\},\{3\},\{4\},\{1,2\},\{1,3\},\{1,4\},\{2,3\},\{2,4\},\{3,4\},\{1,2,3\},\{1,2,4\},\{1,3,4\},\{2,3,4\},\{1,2,3,4\}$，和为 $1+2+3+4+1+2+1+3+1+4+2+3+2+4+3+4+1+2+3+1+2+4+1+3+4+2+3+4+1+2+3+4=80$。

不难发现，每个数都被加了 $2^{n-1}$ 次（$n$ 是集合中元素的个数），所以我们就可以得出结果公式
$$ ans=\left(\sum_{i=1}^{n}a_i\times2^{n-1}\right)\bmod100000007$$
## 如何证明
一个集合一共拥有 $2^n$ 个子集，而对于集合内的每一个元素，我们都有两种选择，即选或不选。本题是让我们选集合内的元素，所以一共能选 $2^n\div2=2^{n-1}$ 次。 
## 代码
```cpp
#include <bits/stdc++.h>

using namespace std;

int a, n;
long long s = 0;

int main() {
	int t, t1 = 0;
	cin >> t;
	while(t --) {
		t1 ++;//测试数据编号。 
		s = 0;//清零。 
		cin >> n;
		for(int i = 1; i <= n; i ++) cin >> a, s += a;//累加。
		for(int i = 1; i <= n - 1; i ++) s *= 2, s %= 100000007;//边计算，边取模。 
		printf("Case %d: %lld\n", t1, s);
	}
	return 0;
}
```

