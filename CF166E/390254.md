再介绍一种新的递推方法：
$$
f[i] = (f[i-1]*2)+(f[i-2]*3)
$$

$f[i]$ 表示的是走 $i$ 步的方案数

---
### 1. 当走了 $i-1$ 步时：

- 如果此时在起点， 则不可能用 $1$ 步再回到起点， 所以这种情况不能转移。

- 如果此时不在起点，则用 $1$ 步可以回到起点，但我们没有存储这种状态， 所以这种情况不能转移。

- 那我们现在考虑在 $i-1$ 步能到起点的那些方案中，退 $1$ 步，如图：


![](https://cdn.luogu.com.cn/upload/image_hosting/kl0ncp67.png?x-oss-process=image/resize,m_lfit,h_300)


因为现在是处理 $i$ 步到达起点的方案数， 所以现在在 $f[i-1]$ 方案的基础上还有 $2$ 步，此时到达起点的方案则为 $2$ 种 （向左或向右），如图（蓝色和黄色的为两条路径）：

![](https://cdn.luogu.com.cn/upload/image_hosting/sg53t9ut.png?x-oss-process=image/resize,m_lfit,h_300)

- 所以在 $f[i-1]$ 中的每一种方案都有 $2$ 种方案对 $f[i]$ 产生贡献。

---

### 2. 当走了 $i-2$ 步时：

- 如果此时在起点， 则相对于 $f[i-2]$ 中的每一种方案都有 $3$ 种方案可以再次回到起点， 如图：


![](https://cdn.luogu.com.cn/upload/image_hosting/iwoucjxm.png?x-oss-process=image/resize,m_lfit,h_300)

- 所以在 $f[i-2]$ 中的每一种方案都有 $3$ 种方案对 $f[i]$ 产生贡献。

- **为什么这里不考虑退 $1$ 步了呢？**

这里退一步的方案与不退的方案其实是同一种方案。
退一步后，当前不在起点，还剩 $3$ 步，此时要用完 $3$ 步再回到起点的话，第一步只能先到起点（此时的方案不就与上面不退 $1$ 步的方案一样吗？），第二步走到任意顶点，第三步回到起点。

---
[代码](https://www.luogu.com.cn/paste/o3tr7kpp)