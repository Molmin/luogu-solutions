### 题意简述

有 $N$ 个物品和 $M$ 个背包，第 $i$ 个物品的体积为 $A_i$，第 $j$ 个背包的容积限制为 $B_j$。将第 $i$ 个物品放到第 $j$ 个背包里面会产生 $W_{i,j}$ 的价值。求最大的价值和。

相关 NPC 问题：[Generalized assignment problem](https://en.wikipedia.org/wiki/Generalized_assignment_problem)

### 测试点 $1, 2$

- 数据随机生成，没有特殊性质。
- 测试点 $1: N = 5, M = 5$。
- 测试点 $2: N = 25, M = 8$。

搜索 + 剪枝，或者直接采用能解决测试点 $8, 9, 10$ 的程序。

### 测试点 $3$

- 测试点 $3: N = 2000, M = 1$。

求解 $01$ 背包问题并输出方案。

### 测试点 $4, 5, 6$

- 所有物品的体积相同或大致相同。
- 测试点 $4: N = 1000, M = 100, A_i = 233$。
- 测试点 $5: N = 1000, M = 200, A_i = 2233$。
- 测试点 $6: N = 500, M = 100, A_i \approx 19960700$。

每个背包能放的物品数量固定，为背包容积与物体体积的比值向下取整。设这个值为 $K$。

我们可以建立网络流模型：

> 对于每个物品，连到源点，容量为 $1$，费用为 $0$。  
> 对于每个背包，连到汇点，容量为 $K$，费用为 $0$。  
> 对于每个物品，连到每个背包，容量为 $1$，费用为对应的 $W_{i, j}$。  
> 求解最大费用最大流，并输出答案。

### 测试点 $7$

- 除了第 $1$ 个物品，所有物品的体积相同。
- 测试点 $7: N = 500, M = 100, A_1 = 46972, A_i(i \ne 1) = 11743$。

枚举第 $1$ 个物品所放的背包，问题转化为测试点 $4, 5$ 的最大费用最大流。

### 测试点 $8, 9, 10$

- 数据随机生成，没有特殊性质。
- 测试点 $8: N = 500, M = 200$。
- 测试点 $9: N = 1000, M = 300$。
- 测试点 $10: N = 1000, M = 300$。

枚举物品优先级的排列。

按照排列的顺序枚举每个物品，并将物品放在 **满足容积限制** 的背包中 **权值最大** 的一个。

对于排列的生成，采用爬山算法，重复多次执行如下过程：

- 随机交换 $K$ 对物品的优先级得到新排列
- 在若干个新排列中选择最优的一个替换当前排列

~~记得程序运行前洗把脸（逃）~~

[提交记录 (98 pts)](https://loj.ac/submission/764208)

关于 $98$ 分：这是 LOJ 上目前的最高分数，再进一步的优化很困难。如果您找到了测试点 $8$ 的解法，欢迎您私信我做法。
