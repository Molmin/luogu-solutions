# P1654 题解
[$\text{题目link}$](https://www.luogu.com.cn/problem/P1654)

由公式得（这里默认大家都学过因式分解）：  

$(x+y)^3=x^3+3x^2y+3xy^2+y^3$  
每增加$k$，都会增加$k(3x^2y+3xy^2+y^3)$  

那么我们定:  

$exdv_i$表示概率  
$r_i$代表第$i$次点击对得分期望的贡献   
$s_i=E[x_i]$(题目下$x_i$的贡献)  
$t_i=E[{x_i}^2]$(题目下${x_i}^2$的贡献)  

那么我们来推式子：  
$r_i=p_i(E[3{x_{i-1}}^2+3x_{i-1}+1])$  
$s_i=p_i(s_{i-1}+1)$  
$t_i=p_i(t_{i-1}+2g_i+1)$

答案就是$r_n$

然后根据这个式子去写代码就行了。  
估计不超过$20$行就能解决。  

代码太过简单，就不放了。