~~一道挺麻烦的模拟题。~~

------------

## 题意：

已知给出编号从 $1$ 到 $n$ 的 $n$ 名学生的考试成绩，所有学生成绩均为非负整数。每个学生最开始均知道自己成绩，他们想要知道其他人的成绩。
输入三个正整数 $a$，$b$ 和 $c$。
有 $2$ 种操作：

$1$：当 $a=0$ 时，表明编号 $b$ 的学生知道了编号为 $c$ 的学生成绩，合并成绩。

$2$：当 $a=1$ 时，在已知条件和 $b$ 同学所掌握的信息中判断 $c$ 同学的成绩，输出下限和上限。


------------

## 分析：

首先我们先通读题意，找出关键点。

$1$：所有同学的成绩都为非负整数，这证明所有同学的成绩都不小于 $0$。这证明输出下限时绝对不能输出一个负数！！！

$2$：找上限和下限时只能根据当前 $b$ 同学所掌握的信息，用成绩总分减去已知成绩再减去未知成绩的最大值和最小值，绝对不能用其他同学的信息！！

$3$：查找时，要注意可能会给出已知同学的成绩的编号，这是不能再估算了，直接输出该同学成绩！！！

明白坑点后就思路不难想了。

------------

## 思路：

首先我们用 $sum$ 代表总分，用 $l$ 代表每个同学已知的成绩，$flag$ 代表未知的同学个数,$ans$ 代表界限。我们可以得到一个式子。
 
上限最大等于 $100$，反之如果成绩达不到满分 $ans = sum - l[b]$。

下限等于 $ans = sum - l[b] - (flag[b] - 1) \times 100$，如果小于 $0$ 输出 $0$。

注意这里的 $flag$ 的个数要减去要查询同学的本身。

但要加个特判，我们定义一个 $vis$ 数组，$vis[i][j]$ 代表第 $i$ 个同学知道了 $j$ 个同学的成绩。再查询中如果 $vis[i][j] = true$ 直接输出该同学成绩。

合并操作中，我们直接将 $vis[b][c]$ 标为已知，然后把 $b$ 同学已知的成绩加上 $c$ 同学的成绩，未知成绩个数 $flag[b]-1$。

具体实现，请移步参考代码。



------------

## $ACcode$

```cpp
#include<bits/stdc++.h>

using namespace std;
int n,w[100010],m,a,b,c,l[5001],sum;
bool vis[5001][5001];
int flag[5001];
int main(){
	cin >> n ;
	for(int i = 1 ; i <= n ; i++ ) flag[i] = n - 1;
	for(int i = 1 ; i <= n ; i++ ) cin >> w[i],sum += w[i],l[i] = w[i];
	cin >> m ;
	for(int i = 1 ; i <= m ; ++i ) {
	    cin >> a >> b >> c;
	    if(a){
	    	if(vis[b][c]) {
	    		cout << w[c] <<' ' <<w[c] << endl;
	    		continue;
		}
	    	if(flag[b] > 1) {
	    	    if(sum - l[b] < 100 ) cout << 0 << ' ' <<sum - l[b] << endl;
		    else {
			 if(sum - l[b] - (flag[b]-1) * 100 >= 0 ) cout << sum - l[b] - (flag[b]-1) * 100 <<' ' << 100 << endl;
			 else cout << 0 <<' ' << 100 << endl;
		    }
		}
		    else cout << sum - l[b] <<' ' <<sum - l[b] << endl;
		}
		else {
			vis[b][c] = true;
			l[b] += w[c];
			flag[b]--;
		}
	}
	return 0;
}
```





 