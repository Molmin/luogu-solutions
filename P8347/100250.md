## 另一侧的月
### 更加简要的题意
给定一棵无根树。
- 每次操作是可以随便定根然后保留一个与根直接相连子树，等价表述是选取一条边，把它去掉，保留两个连通块中的一个。
- 对于一个点，先手胜。
问谁有必胜策略。

注：方便起见定义单点树存在一个后手必胜的后继状态（空树）。
### 结论
先手必胜当且仅当存在结点度数为偶数。
另外本题的 $SG$ 函数为树中偶数度数结点的个数。
### 博弈论的基本定理
>对于任意先手必胜(N 态)的局面，满足其存在一个后继局面后手必胜。（定理一）
>对于任意后手必胜(P 态)的局面，满足其任意一个后继局面先手必胜。（定理二）

$SG$ 函数是这样一个关于游戏局面的状态函数：  
- 对于所有终端位置（无后继），本题中为后手胜利的空树。
- 对于某个状态 $T$，$SG_T = \operatorname{mex}\{SG_S \mid S\:\footnotesize\texttt{是}\normalsize\:T\:\footnotesize\texttt{的后继状态}\}$。
- 本题而言先手胜利的情况下，$SG_T$ 非零。反之亦然。

Sprague-Grundy 定理：游戏的和的 $SG$ 函数值是它的所有子游戏的 $SG$ 函数值的异或。
### 分析
以下分析将无根树意义下的同构树视为等价状态，其 $SG$ 相同。（但不一定视为相同）。
#### 定性结论
考虑菊花图。根据题意，单点先手必胜。所以，有两个点的菊花图后手必胜。  
继而，有三个点的菊花图，它的后继局面有两个：单点树和两点菊花图。因此它是先手必胜。
我们可以发现，对于深度为 $2$ 的，有 $n$ 个点的菊花图，它的后继状态只有单点树和 $n-1$ 点菊花图。  
因此，按照博弈论的基本法可以产生如下结论：对于菊花图，花瓣个数为偶数那么先手必胜，否则先手必败。

~~（奇怪的定义和名字警告）~~  
定义 $k$ 层偶度根奇度枝叶树（下文称为 $\text{EOT}$/$E-O$ 树），奇度根奇度枝叶树（下文称为 $\text{OOT}$/$O-O$ 树）为满足下列条件的有根树：  
1. 深度为 $k$ 的有根树。
2. 所有与根直接相连的树为 $s(s<k)$ 层 $E-O$ 树。
3. 对于 $\text{EOT}$，根的度数为偶数。对于 $\text{OOT}$，根的度数为奇数。
另外单点树为 $1$ 层 $\text{EOT}$。

我们可以发现，对于所有任意深度的 $\text{OOT}$ 所组成的集合恰好与任意不含偶数度数结点的有根树组成的集合等价。  
此外，$\text{EOT}$ 除根外不含偶数度数结点。

显然如果两棵有根树在无根意义下同构则它们在游戏中视为等价。

（开始归纳）  

假设对于任意 $s(s<k)$ 阶的 $\text{EOT}$ 和 $\text{OOT}$ 来说满足：  
1. $\text{EOT}$ 为 $N$ 态。
2. $\text{OOT}$ 为 $P$ 态。

那么对于 $k$ 阶：
对于与根直接相连的子树个数为 $1$ 的 $\text{OOT}$，定根的儿子为新根，则它变成 $k-1$ 阶 $\text{OOT}$，属于 $P$ 态。  
对于任意根度数为 $2m$ 的 $\text{EOT}$，如果任意根度数为 $2m-1$ 的 $\text{OOT}$ 是 $P$ 态，因为通过去掉一棵子树可以得到一个根度数为 $2m-1$ 的 $\text{OOT}$ 的后继状态，所以它是 $N$ 态。  

对于任意根度数为 $2m-1$ 的 $\text{OOT}$，情况略复杂一些。  
如何证明它属于 $P$ 态呢？  
只要证明它的所有后继局面属于 $N$ 态。  
1. 对于保留它的一棵子树，显然子树是某阶的 $\text{EOT}$，是属于 $N$ 态的。  
2. 对于删除一棵子树，假设删除的子树的根为 $u$，其父亲为 $f_u$。  
删掉它之后得到的后继状态中，以 $f_u$ 为根的子树是某阶的某阶的 $\text{OOT}$，属于 $P$ 态。  
因此该后继状态存在一个 $P$ 态的后继，为 $N$ 态。  
又因为 $u$ 是任意的，所以原状态的所有删子树类型的后继状态均为 $N$ 态。
所以，原状态的所有后继状态均为 $N$，因此原状态为 $P$ 态得证。

我们现在证明了所有 $\text{OOT}$，亦即所有**不含偶数度数结点的有根树**为 $P$ 态。  
考虑到同构树等价，因此，所有**不含偶数度数结点的树**为 $P$ 态。

对于存在偶数度数结点的树，取其偶数度数结点组成的虚树上的叶子，它在原树上总有一个子树不含偶数度数结点。  
因此原树存在一个后继为 $P$ 态，原树为 $N$ 态。

综上，一个树的游戏状态为 $N$ 态，当且仅当，树存在一个结点度数为偶数。

这个结论检查发现对于同构树的状态是相同的。
#### 分析 SG 函数
显然根据上文，**不含偶数度数结点的树**为 $P$ 态，在这里 $SG$ 函数为 $0$。  
对于一个含 $k$ 个偶数度数结点的树，显然对于所有小于 $k$ 的非负整数 $x$ 总有一个后继为含 $x$ 个偶数度数结点的树。  
因此归纳得出 $SG$ 函数的值即为偶数度数结点的个数。对于 corner 显然也是成立的。
#### 策略？
显然搞出偶数度数结点组成的虚树乱搞就行了。每次保证离开自己手上的时候都是后手必胜就行了。
### code
```javascript
let FileLines = require("fs").readFileSync(0).toString().split("\n"), outputBuf = [],s = 0;
const readLine = (x = (s ++)) => FileLines[x].split(" ").map((e) => +e);
let T = readLine()[0], deg = {};
while(T -- > 0) {
	const n = readLine()[0];
	deg = {};
	for(let i = 1; i < n; ++ i) {
		let [u, v] = readLine();
		deg[u] = (deg[u] ?? 0) + 1;
		deg[v] = (deg[v] ?? 0) + 1;
	}
	let flag = 0;
	for(let i = 1;i <= n; ++ i) {
		if (~(deg[i] ?? 0)&1) flag = 1;
	}
	outputBuf.push(flag?"Hifuu":"Luna");
}
console.log(outputBuf.join("\n"));
```
