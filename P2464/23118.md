先推荐一下[博客](http://www.cnblogs.com/xzz\_233/p/7396374.html)。。。


我这里的“种类”就是原题的“编码”。。。


对每种书建立一棵平衡树（我用无旋treap），然后一开始往每个平衡树里插坐标（当然要有序插入）。


开一个数组记录每个位置上书的种类。


对于'C'操作，找到这个位置上书的种类，然后在对应平衡树上删去这个坐标。再记录新的种类，在对应平衡树上新增这个坐标。每个平衡树记录的坐标都应该是有序的。


对于'Q'操作，答案是对应平衡树上的B的排名减去(A-1)的排名，所以剩下的区间就是[A,B]。


输入保证书的种类$<=2^{31}−1$，所以要离散化。。。我只会map。。。而且懒得打离线了。。。所以边读入边离散化。。。离散化在ins函数中体现，及每读入一次就插入（有的话当然不插入）

