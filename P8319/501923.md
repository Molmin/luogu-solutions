# 题意

给你一个 $n$，求在 $1\le x\le n$ 中 $f(x)$ 的最大操作次数。

定义 $f(x)$ 为：

有一个 $\dfrac{0}{x}$ 的分数。重复以下步骤直到这个分数为 1：
  
1. 分子 $+1$。

2. 如果这个分数可以约分，约分到最简形式。

# 分析

首先我们可以发现当一个 $\dfrac{0}{x}$ 的分子一次又一次的加时肯定有一次会被约分或者变成 1，且约分后一定会变成形如 $\dfrac{1}{x\div a}$ 的分数。

因为若可以约分就约分到最简形式，所以当第一次有 $x\bmod a=0$ 时就会约分且约分成 $\dfrac{1}{x\div a}$。

那么我们令 $t[x]$ 为 $\dfrac{0}{x}$ 变成 1 的操作次数。

则我们就尝试求出 $x$ 的除一外的最小因数即可，此时状态转移方程就是 $t[x]=t[x\div a]+a-1$，$a$ 为 $x$ 的除一外的最小因数，因为 $t[x]$ 为 $\dfrac{0}{x}$ 变成 1 的操作次数而约分后为 $\dfrac{1}{x\div a}$ 且 $t[x\div a]$ 的意义是 $\dfrac{0}{x\div a}$ 变成 1 的操作次数，多操作了一次，所以要减去 1；但是当 $x$ 是一个质数时，$t[x]=x$，因为 $\dfrac{0}{x}$ 变成 1 的过程中一定不会约分。

例如：

$$t[36]=t[18]+(2-1)=t[9]+(2-1)+(2-1)=t[3]+(3-1)+(2-1)+(2-1)=3+(3-1)+(2-1)+(2-1)=3+3+2+2-3=7$$

但是题目要求的是求出 $1\le x\le n$ 中 $f(x)$ 的最大操作次数，所以取一个 $max$ 即可。

可以 AC，但是时间非常大 4.96s，考虑换方法。

我们令每一个不是质数的 $x$ 都表示成 $p_1^{a_1}\cdot p_2^{a_2}\cdot p_3^{a_3}\cdot …\cdot p_m^{a_m}$，且 $p$ 数组时递增的。

$$t[x]=t[x\div p_1]+(p_1-1)=t[x\div p_1^2]+(p_1-1)+(p_1-1)=……=\sum\limits^m_{i=1}{p_i\cdot a_i}-\sum\limits^{m-1}_{i=1}a_i$$

例如：

$$t[36]=t[2^2\times3^2]=2\times 2+3\times 2-(2+2-1)=4+6-3=7$$

因为我们发现答案都小于等于 小于 $n$ 的最大质数，所以我们只需要求一下即可。

你可以用埃氏筛或者试欧拉筛，我用欧拉筛时间可以到 366ms。

这里只放两个代码，一个是[欧拉筛](https://www.luogu.com.cn/paste/6pxsw3s2)，一个是[普通枚举，再加一个“记忆化”](https://www.luogu.com.cn/paste/29v3mnwq)。

