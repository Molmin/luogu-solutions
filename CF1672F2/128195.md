### 题意

前情提要为 CF1672F1。

给出两个长度为 $n$ 的数组 $a$ 和 $b$，你需要判断 $b$ 是否是满足**最少交换次数最大**的一个置换。

数据范围：$2 \leq n \leq 2 \times 10^5$，$1 \leq a_i \leq n$，$1 \leq b_i \leq n$。

### 做法

根据 [CF1672F1 的做法](https://chzhc.blog.luogu.org/solution-cf1672f1)所述，若每个环中都有**出现次数最多**的元素，那么这个构造就是合法的，考虑将这个出现次数最多的元素删去，若剩下的图中还存在环，那么 $b$ 就是不合法的，否则 $b$ 就是合法的（原因是每个点都一定属于某个环）。

但是直接连边的边数是 $n^2$ 级别的，考虑建虚拟结点，对应的虚拟节点连向对应 $a_i$ 相同的结点，那么 $b_i$ 就只需要对对应的虚拟节点连边即可，这样不影响联通性，并且将边数降到了 $n$ 级别。跑拓扑判断有无环即可。

时间复杂度 $\mathcal O(n)$。

[评测链接](https://codeforces.com/contest/1672/submission/154955390)。