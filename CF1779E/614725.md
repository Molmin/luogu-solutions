竞赛图经典套路。

对于一场两两对决的比赛，我们把任意两个人的胜利者向失败者连边，所成的就是竞赛图（可以理解成一张有向的完全图），它有着一些性质：

$\text{Lemma 1:}$ 竞赛图中，如果一个点有着最高的出度，那么它就是可能的胜利者。
* 考虑证明结论：**任意一个另外的点都可以从这个点出发经过最多两次到达。** 这样，我们显然可以安排出这样一个符合要求的淘汰赛使得这个点胜出。
* 我们设一次到达的点集 $S_1,$ 两次到达的点集 $S_2$。 若存在一个点 $x\not\in S_1,S_2$， 那么对于所有 $x\in S_1$ 以及那个度数最多的点，这个点必然和它们有有向边相连（注意竞赛图是完全图）。此时这个点的度数就过多了，矛盾。

$\text{Lemma 2:}$ 竞赛图缩点后是一条链的传递闭包结果，即一条链中，每个点都和它后面的所有点连有向边。
* 注意到竞赛图缩点后还是两两有边的竞赛图，因此分类讨论一下不难证明。

$\text{Lemma 3:}$ 竞赛图缩点后，链顶的 SCC 中任意一个点的出度都大于之后的 SCC 中所有点的出度。
* 由强连通分量的定义以及结论 $2$ 不难证明。

那么，我们只需要找出链首的那个 SCC 中的点就行了。先按照度数降序排列，那么答案一定是这个数组的一个前缀。我们考虑这些点满足什么性质。先考虑其必要条件。如果是前 $i,$ 个，由于这些点都和其它点有着有向边，那么容易用两种方法计算总出度并列出等式：$\sum\limits_{k=1}^ideg_k=\frac{i(i-1)}{2}+i(n-i).$ 

（等式右边相当于是把内部贡献和与外部点的贡献分开来算）

事实上，这个也是充分条件。

考虑证明。如果在真正的第一个 SCC，即前 $i$  个点之前就存在一个 $m$ 也满足条件，那么 $v_1,..,v_m$ 和 $v_{m+1},..,v_i$ 两两有从左到右的边。那么就没有从右面回去的边，和它们同在一个 SCC 中矛盾。

故这样判断是正确的。$O(n\log n).$ [代码](https://codeforces.com/contest/1779/submission/209067904)。