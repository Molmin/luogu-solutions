考虑网络流建图，对于每条边 $\left<u,v\right>$，在网络流图上建立两条边：$u\to v$，如果流表示将该边染成红色，$v\to u$，表示将改变染成黑色。

建立超源 $s$ 和超汇 $t$，考虑左边红色点，$s$ 向该点连一条下界为 $1$ 的边，表示强制流红大于流黑，对于左边黑色点，该点向 $t$ 连一条下界为 $1$ 的边，表示强制流黑大于流红，右边同理。

最后跑一遍费用流即可。