题意：$n$ 个人呈环状排列，第 $a_i$ 个人有 $b_i$ 枚硬币。一次操作可以令一个人给相邻的两个人各一枚硬币，求有没有方法使得没有人最终有一枚以上硬币。

核心思想：找不变量

解：

显然，若总硬币数超过 $n$ 则必不可能。

对于每一次操作，两枚硬币一枚给了编号大 $1$ 的人，一枚给了编号小 $1$ 的人，所有硬币的所有者的总编号是不变的。考虑从 $1$ 到 $n$ 和从 $n$ 到 $1$，所有硬币的所有者的总编号在模 $n$ 意义下是不变的。若总硬币数小于 $n$，至少有一个 $0$ 可以出现在任意位置，则无论初始硬币总编号数模 $p$ 如何均可转移到结束状态。若总硬币数恰为 $n$，则唯一可能结束状态是所有人均持 $1$ 枚硬币，所以有且只有初始总编号数模 $n$ 余 $\dfrac{n(n+1)}{2}$ 才可以达成。

代码：
```cpp
#include <bits/stdc++.h>
using namespace std;
long long n, k, a, b, sum, res;
int main()
{
	cin>>n>>k;
	for(int i=1; i<=k; i++)
	{
		cin>>a>>b;
		sum+=b;//记录总硬币数
		res=(res+a*b)%n;//记录总编号值
	}
	if(sum>n)
		cout<<-1;
	else if(sum<n)
		cout<<1;
	else if(res==n*(n+1)/2%n)
		cout<<1;
	else
		cout<<-1;//分类讨论
	return 0;
}
```