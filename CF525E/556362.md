每个数都有三种状态：

- 不选

此时对答案没有贡献。

- 选，但是不加感叹号

此时对答案贡献 $a_i$。

- 选，并且加上感叹号

此时对答案的贡献是 $a_i!$。

$n\le25$，那么我们可以考虑直接进行爆搜，但是，时间复杂度 $O(3^n)$ 直接 T 飞。

此时我们可以发现一个事情：因为我们要求的是和，所以可以用前一半的搜索答案和后一半的搜索答案匹配即可。

那么我们就可以使用折半搜索：把前一半的数字和后一半的数字用 `vector` 存储下来，然后再使用二分。

时间复杂度 $O(3^{\frac{n}{2}}+k^23^{\frac{n}{2}}\log3^{\frac{n}{2}})$。

最后还要注意一点，那就是二分的时候要保证序列有序，所以就是要先对 `vector` 进行排序。

[AC Code](https://codeforces.com/problemset/problem/525/E)