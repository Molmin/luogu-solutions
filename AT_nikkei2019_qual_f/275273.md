学长讲的做法。

考虑将每种颜色的价值最大值和次大值取平均数，这样做显然不影响答案，并且好处是贪心时按双关键字排序只用考虑一种颜色当前只有一种物品的情况。

之后把所有物品扔进优先队列，每次从优先队列中取价值最大的物品。如果当前物品是第一次出现，就稍作调整即可。

具体而言，考虑有哪些决策。

- 可以不取当前这个物品，取还在队列里面且它的颜色之前已经出现超过两次的物品。取价值最大的即可。

- 如果要取当前物品，可以把之前拿过的相应颜色出现次数大于 $2$ 的物品扔掉，再拿当前颜色的最大和次大。

- 也可以把前面只出现两次的物品扔掉，再往后面拿三个同色的（颜色前面没出现过），参考样例 $1$。

维护两个 `multiset` 即可，具体见 [代码](https://atcoder.jp/contests/nikkei2019-qual/submissions/37784504)。