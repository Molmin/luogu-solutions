细心点即可，AC不了的，注意楼下AKB48说到的三个情况。

另外我还因为忽略了p1==2时的数字展开，只拿了90分……

下面提供**C语言版**，希望用C的各位同胞多写题解。。。:-D

```cpp
#include<stdio.h>
int main(void)
{ 
    char a[120]={'\0'},b[10000]={'\0'};
    int i,j,k,l,p1,p2,p3;
    scanf("%d %d %d\n",&p1,&p2,&p3); 
    gets(a);
    i=0;
    while(a[i]=='-') {i++;printf("-");}
    for(j=0;i<115 && a[i]!='\0';i++)
    {
        if(a[i]=='-' && a[i+1]>a[i-1] && a[i+1]!='-' && a[i-1]!='-'   // 减号后>减号前，减号前后不为'-' 
            && ( (a[i+1]>=97 && a[i-1]>=97) || (a[i+1]<=57 && a[i-1]<=57) )  ) //减号前后都是小写字母或都是数字 
        {                                                                    //满足则展开字符串，分情况讨论 
            if(p3==1) 
                for(k=a[i-1]+1;k<a[i+1];k++)
                    for(l=1;l<=p2;l++)
                    {
                        if(p1==1 || (p1==2 && k<=57) ) 
                            b[j++]=k;
                        else if(p1==2 && k>=97)
                            b[j++]=k-32;
                        else if(p1==3)
                            b[j++]='*';
                    }
            else if(p3==2)
                for(k=a[i+1]-1;k>a[i-1];k--)
                    for(l=1;l<=p2;l++)
                    {
                        if(p1==1 || (p1==2 && k<=57) )
                            b[j++]=k;
                        else if(p1==2 && k>=97)
                            b[j++]=k-32;
                        else if(p1==3)
                            b[j++]='*';
                    }    
        }
        else b[j++]=a[i];    //不满足则不做处理。 
    }
    for(i=0;i<j;i++)
        printf("%c",b[i]);
    return 0;
}
```