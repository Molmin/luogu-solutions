whkzb 了，先做个题快乐一下（

没错这就是我 NOIP 前夜开的最后一道题目。当时我看错题了，以为是要删掉元素，WA 了之后才发现是修改。然后发现需要分析分析就弃了。今天来补一个。

我们考虑最终改成的那个序列，删掉其中一个成为的严格递增序列，中的没被修改的序列。考虑对这个序列 DP，$dp0_i$ 表示考虑到第 $i$ 位，前 $i$ 位都不能被删除，第 $i$ 没被修改且不被删除时候的最多不被修改的元素数量，$dp1_i$ 则表示前 $i$ 位必须有一个被删除。

那么转移就是 $dp0_i$ 可以转移到 $j$ 当且仅当 $a_j\leq a_i-i+j$ 即 $a_j-j\leq a_i-i$。$dp1_i$ 可以转移到 $dp0$ 和 $dp1$，后者的条件跟上面一样，前者因为在这一段里面删除了一个，所以 $\leq$ 右边要 $+1$，但是因为删除的那个不算被修改了，所以 $\max$ 里面的式子里要 $+2$。然后把涉及到的式子的值都离散化，维护三个 BIT 即可。

为了方便，我们假设 $a_{n+1}=+\infty$ 然后它必须不变且选。最后答案就用 $n+1$ 减一下即可。