简单题。

容易想到我们询问每一个点，如果 $dis_{ij}=1$ 那么就在 $i$ 和 $j$ 连一条边。可惜这样询问是线性的，过不去。

显然这样会把每条边建两次，所以我们只需要去掉一半的情况就能达到 $n$ 的一半的目标。

我们假定 1 为根，只需要询问 1，得到的数组就是各个结点的深度。不难发现深度奇偶性相同的点之间不可能有边相连。所以我们只需要分别统计深度为奇数和偶数的个数，然后把个数少的都问一遍即可。