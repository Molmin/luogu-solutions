Solution: 

考虑无解是什么情况 ① $h!=v$ ② $\sum l_i$ 与 $\sum p_i$ 无法被分为相等的两部分 感觉这两个条件很对。

然后考虑怎么构造一个多边形，因为横着的和竖着的都被分成了两相等部分，现在一共有四块，考虑怎么配对才可以构造。比较直观的是想到配对成一个类似三个直角三角形的形状!

![屏幕截图 2021-02-22 154535.png](https://i.loli.net/2021/02/22/xvyZMoE5ejR8gzm.png)



只举一块的例子，其余三块同理。

对于第一块而言，也就是一个边数少的 $x$ 边配上一个边数多的 $y$ 边的形状，至少不能让构造出来的线超过图中的斜线（这点真是太妙了，用不超过一段斜线的方法保证了不相交）。然后考虑构造不超过斜线的多边形。只要一开始的时候 $x$ 边很大 $y$ 边很小就可以保证，（因为目标点是 $(\sum x,\sum y)$） 所以只需将 $x$  从大到小排一遍，$y$ 从小到大排一遍即可。（从斜率上保证不超过斜线）。

代码QAQ:
[Code](https://www.luogu.com.cn/paste/wofit6d9)