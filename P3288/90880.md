###   概念
$\qquad$流量：每条边经过的次数

   $\qquad$原点：流量的来源。
   
   $\qquad$汇点:流量的最终终点（在本题对应终点）。
   
   $\qquad$残量网络：这条边（流）中还能有多少流量通过。



$\qquad$首先，题目要求总交通量不变，所以我们要求总交通守恒，不生产，只搬运。

$\qquad$我们可以对应扩容和压缩对应建两条边：

$\qquad$压缩$(v,u,ai-di)$（从$v$到$u$有一条边权$ai-di$的路）边权为$ai-di$是因为压缩$1$，花费$ai$，但减少$1$个单位，费用减少$di$。之所以要从$(v,u)$从$u$走到$v$之后，如果想压缩可以再从$v$走向$u$，把第一次带过去的流量换回去，相当于悔棋。

$\qquad$扩容$ ( u,u,ai+di) $（从$u$到$u$有一条边权$ai+di$的路）边权为$bi+di$是因为扩容$1$，花费$bi$，增加$di$,如果想扩容，就可以从自己再跑向自己，达到扩容。

$\qquad$我们令$tot=max( \dfrac{x-y}{k})$ 即$tot\ge \dfrac{x-y}{k}$

所以$tot*k \ge x-y$

$\qquad$我们二分$mid$调整比率，也就是$tot-k$我们可以发现$k$实际上就是在我们在初始化时建的新图上跑一次边数，因为实际上每一条边都是以次调节。我们还可以把$X-Y$转化为$X-(X+\sum{}{}di)$也就是$-X$
所以问题就变成了比较$mid*k$与$-\sum{}{}di$的大小。若$(mid*k)+\sum{}{}di$小于零，$mid*k$小于$X-Y$，否则$mid*k$大于$X-Y$,题目就变成了求负环。
代码
