解：  
分数规划+负环   
我们一开始会想到网络流。    

首先我们假设图中一开始流量为0，目前我们处于增广阶段，那么对于题目中的两种调整方式  
压缩  就相当于增广时退流   
扩容  就相当于不断增广   
因为要“调整之后，必须要保持每条道路满负  荷，且总交通量不会减少”，那么单纯扩容显然是不会更优的  
可能存在的更优方案为   在保证最大流不变的情况下使得压缩的扩容的总费用加起来最少。
也就是说存在如下残量网络：   
扩容  u -> v  花费 b+d   
压缩  （即相当于反向边有流量的话） 满足 c>0 时 v -> u  花费  -(b-a) 即a-b  



然后我们考虑对问题求解，（这一看就是分数规划） 我们就想起了二分。  
假设当前答案为 ans ,令 Z=X-Y  
那么不优的情况一定满足 Z >= ans * k 也就是 Z - ans * k >=0  
==> ans * k -Z <= 0  
Z=X-Y 也就是说 Z=调整之前的总费用是 - 调整后的总费用  

也就是  Z=Σ我们在残量网络中走过的边权和  k=我们在残量网络中经过的点   
到这里，我们要知道一个定理。   
消圈定理   
所谓消圈定理，就是在某个流 ff 中，如果其对应的残余网络没有负圈（剩余流量为 00 的边视为不存在），

那它一定就是当前流量下的最小费用流  。

反之亦然。即「ff 是最小费用流等价于其残余网络中没有负圈」。

有了这个定理，我们就好做了。  
我们二分ans,将每条边边权加上ans（把Σ降掉），判断是否存在负环  
搞定。

还不懂得看代码吧。  
[代码](http://www.cnblogs.com/adelalove/p/8496554.html)