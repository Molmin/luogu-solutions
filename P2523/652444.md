[题目传送门](https://www.luogu.com.cn/problem/P2523)

#### 第十篇题解！！！好开心！！！$o(*￣▽￣*)ブ$



------------------------------------分割线--------------------------------------


### 分析：

序列合法的充要条件就是：大于等于 1 数的个数不超过 $n$ ，大于等于 2 数的个数不超过 $n-1$ ，...... ，大于等于 $i$ 的数不超过 $n-i+1$ ，大于等于 $n$ 的数的个数不超过 $1$ 。

我求出 $res[i]$ 表示大于等于 $i$ 的数还能用几个。

那么现在就是数一数有多少序列，满足大于等于 $1$ 的数的个数不超过 $res[i]$ 。

下图是一种合法方案，蓝色的 “进度条” 的结束位置就代表了实际中这个位置填了什么数字，上面的一排 $4$ ，$3$ ，$2$ ，$1$ 表示的是 “大于等于 $1$ 的不超过 $4$ 个，大于等于 $2$ 的不超过 $3$ 个，大于等于 $3$ 的不超过 $2$ 个，大于等于 $4$ 的不超过一个” ：

![](https://img-blog.csdnimg.cn/20200216090207816.png)

下图是一种不合法方案，大于等于 $1$ 的最多有一个，但是他却有两个：

![](https://img-blog.csdnimg.cn/20200216090541790.png)

$f_{ij}$ 表示所有的 “进度条” 都在 $i$ 或 $i$ 之前 “截止” ，并且在 $i$ “截止” 的进度条有 $j$ 个的方案数。

$f_{ij}=\sum\limits_{k=lj}^nf_{i-1},k\dbinom{k}{j}$

代码一不小心删了 qwq ，找时间 update qwq。

Bye！