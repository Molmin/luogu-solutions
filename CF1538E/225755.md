- **题意**：

$t$ 组数据，每组数据给定 $n$ 个操作,每个操作为以下两者之一：

- `x = a + b` 表示将变量 `b` 和 `a` 中的字符串拼接后赋给 `x`。

- `x := s` 表示将字符串 `s` 赋给 `x`。

对于每组数据，求最后一次操作中变量 `x` 中的字符串所含有子串 `haha` 的个数。

$t\leq 10^3,n\leq 50$。给出的所有变量名或字符串的长度均 $\leq 5$，且所有字母都是小写字母。

- **做法**：

我们发现如果直接暴力做的话，最后一个字符串的长度是 $O(2^n)$ 级别。

所以不可能存下整个字符串，那么我们考虑如果将两字符串拼接，会对答案产生的贡献。

对于 `x = a + b`，可能产生贡献的部分只有 `a` 的后缀和 `b` 的前缀，而且这个前后缀的长度肯定不超过 $3$，因为如果大于 $3$，的话会和原串中的 `haha` 个数算重。由此容易发现新贡献的答案就是后缀 $a[size_a-2\cdots size_a]$ 和前缀 $b[size_b-2\cdots size_b]$ 所拼接而成的字符串中子串 `haha` 的个数。

然后对于 `x := s` 的操作，我们直接预处理出长度 $\leq 3$ 的前后缀和 `haha` 子串个数。

代码实现上会有一些小细节需要注意：比如字符串长度小于 $3$ 时前后缀和拼接的地方需要特判之类的，具体可以参考我的代码。

时间复杂度为 $O(tn)$。

- [代码](https://www.luogu.com.cn/paste/6yw80zcz)