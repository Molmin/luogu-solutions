[题目链接](https://codeforces.com/problemset/problem/1628/C)

提供一个比较憨，但不需要 $n$ 是偶数的限制的手玩构造方法。

首先有两个 trick ：

- 并不需要真的还原棋盘，可以利用已知信息直接求答案，即用一些格子表示出整张棋盘的异或和。

- 将棋盘黑白染色（国际象棋棋盘的样子）后，黑色格子和白色格子是独立的，可以分开计算。

于是就可以快乐地手推了。

这种题一般要么推成递归的形式，要么直接推出通解，前者一般要简单一点。

这里就不展示我推的心路历程了，主要解释我的图。

 ![img](https://cdn.luogu.com.cn/upload/image_hosting/0exqu9fi.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000) 

 ~~没错，我菜到手推了 $n = 16$ 的才找出规律~~

 红色格子是选了的格子，黄色格子是没有选的格子，蓝色格子是需要满足相邻格子中有奇数个红色格子的格子。

 可以发现如果把第一行第一列去掉，那么递归的形式可以表述为红蓝相间一圈后黄蓝相间一圈，这里的一圈是两行两列的。

 但这样归纳的话边界情况比较麻烦，不妨让整张棋盘在右下角扩展一行一列，颜色为黄蓝相间。 设 A = “黄蓝一圈，红蓝一圈”， B = “红蓝一圈，黄蓝一圈”，递归形式为：ABAB...

这样做的话，边界就只需要判断当前递归的矩形是否合法即可。

~~或许你发现了，这个做法更适合用来解决 $n$ 是奇数的情况，不过偶数也能做而已~~

[代码](https://codeforces.com/contest/1628/submission/162043385)