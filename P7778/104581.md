upd on 2021.8.2：更新了更更更简单的做法，所以重新写了一遍题解。

[原题解链接](https://www.luogu.com.cn/paste/i0s5fg13)。

------------

可以发现整条路径上的所有点按顺序必然是以 $x$ 坐标或 $y$ 坐标单调的，所以我们直接排序，将相邻的两点连起来判断即可（注意特判连边和坐标轴平行的情况）。

复杂度 $O(n\log n)$。