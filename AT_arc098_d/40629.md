首先容易发现一个基本事实，将最优行走序列列出来，对每个点提取子序列都形如若干次无意义经过和最后一次捐献。

证明基于调整，把一次无意义的经过换到捐献前不会变劣。

之前过程中开拓连通性的是无意义的经过，这不利于对捐献过程的分析，把行走过程反过来，问题变为我们要初次到达一个点，要么直接从这个点进入，要么这个点在我们已经到达过的点的邻域中并可以对这个点反捐献(xiao。这样的话反捐献成为了连通性的开拓方法，其中对 $x$ 的反捐献定义为持有 $v\geqslant d_x=\max\{a_x-b_x,0\}$, 反捐献后变为 $v+b_x$。

那么我们可以这样刻画这个过程(略去反捐献的合法性判定和收益)，被经过的点集设为 $S$ ,初始为 $\{x\}$,每次可以选择 $\forall y\in I(S)/S,v\geqslant d_x=\max\{a_x-b_x,0\}$ 来捐献，然后$S\to S\cup \{y\}$。

假设我们已经有一个定的初值要判定合法性，我们就可以每次选择邻域中 $d_x$ 最小的来走，这直接推导出了第一次我们只会选择相邻点都 $\geqslant $ 其 $d_x$ 的走。

因而现在我们可以一个熟悉的结构 (点)Kruskal重构树 上描述这个过程，我们总是从叶子出发每次走完一棵子树，到根的父亲，再用同样的方法走完根其他兄弟的子树。进一步的思考可知限制最紧的儿子和父亲共同赋予了整个流程新的限制。

具体设 $\sup_{x}$ 表示 $x$ 为根子树的限制，$\Delta_x$ 为其增量(定值$\sum b_i$)我们有 $\sup_x=\min_{y\in son_x}\{\sup_y,d_x-\Delta_y\}$ 。