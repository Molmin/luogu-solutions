### 题意理解

有 $n$ 个套娃，已经存在了 $k$ 个链。现在要求将所有套娃按顺序套成一个链，求最少步骤。

将套娃 $a$ 从 $b$ 中取出算一步，将 $b$ 套到 $a$ 上算一步。

### 解题思路

因为要套成一整列，那么起始的套娃编号一定是 $1$。所以其他所有的链都要拆开，每拆开一个长 $m$ 的链花费 $m-1$ 步。套娃 $1$ 所在链上的套娃分情况考虑，如果是编号对应的，保留不动；编号不对应的取下来，每取一个花费 $1$ 步。之后再将所有取下来的套娃套回去。

### AC 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,k,m,a,ans;
int main(){
	cin>>n>>k;
	for(int i=1;i<=k;i++){
		cin>>m>>a;
		if(a==1){	//套娃 1 所在的链 
			int cnt=1;
			for(int j=2;j<=m;j++){
				cin>>a;
				if(a==j)	cnt++;	//记录编号对应的套娃的数量 
			}
			ans+=m-cnt+n-cnt;	//分别为要取下的步骤和套上去的步骤 
		}
		else{
			for(int j=2;j<=m;j++)	cin>>a;
			ans+=m-1;	//剩最后一个套娃的时候就不算步数了 
		}
	}
	cout<<ans;
	return 0;
}
```

整体来说本题主要考察思维，但难度也不算很大，主要在于要想清要怎样取下和套上。个人认为属于较低难度的橙题。