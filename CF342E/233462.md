### 题意

> $n$ 个点的树，初始根节点 $1$ 是黑色其余白色。$q$ 次操作，每次操作把一个点染黑或询问离某个点最近的黑色点离它的距离。$n,q\le 10^5$。

### 题解

貌似做法很多，题解区树剖/LCT/点分树/分块神仙打架，我只能想到离线做 CDQ 分治。。。

暴力是遍历所有黑色点然后取 $min$，考虑 CDQ 分治，那么以一个 $\log$ 的做法转化成：

> 有一棵树，若干个点是黑色，然后给出若干个点分别询问离它最近的黑色点距离。

这个显然可以换根 DP $O(n)$ 解决，但是因为是 CDQ 分治所以不能在完整树上跑……那就建棵虚树呗。

复杂度是 $O(n\log n)$ 的。

[Code](https://codeforces.com/contest/342/submission/172351490)