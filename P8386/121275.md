小清新计数题。

首先你考虑怎么判断一个序列是否满足条件，设 $f_i=(0/1)$ 表示这个序列的前 $i$ 项是否满足条件，特殊的，$f_0=1$。

不难得出如果 $\exists j\in[1,i-1]$ , $(f_{i-1}=1) \land (a_i=a_j)$，那么 $f_i$ 就是 $1$，不然为 $0$。


我们根据判断条件来设计 dp，设 $f_{i,j}$ 表示前 $i$ 位，有 $j$ 种数所对应的其中一个下标 $i$ 满足 $f_{i-1}=1$，并且当前序列不满足条件的方案数。$g_{i,j}$ 表示前 $i$ 位，有 $j$ 种数所对应的其中一个下标 $i$ 满足 $f_{i-1}=1$，并且当前序列满足条件的方案数。

转移式子很显然： 

1. $f_{i-1,j}\times j\to g_{i,j}$，表示一个不合法的加了一个数变成合法的了。
2. $g_{i-1,j}\times j\to g_{i,j}$，表示一个本来就合法的加了一个数仍然合法。
3. $f_{i-1,j}\times(m-j)\to f_{i,j}$，表示一个本来就不合法的序列，加了一个数，仍然不合法。
4. $g_{i-1,j-1}\times(m-j+1)\to f_{i,j}$，表示一个原本不合法的序列，加了一个数变成不合法的了，此时满足条件的数又增加了一个。（因为不合法，不会和前面的数重复）

时间复杂度 $O(n^2)$。