区间dp。

其实就是【NOI1995】石子合并的简化版。

设 $f[i][j]$ 为区间 $[i,j]$ 的答案。

那么 

$$f[i][j]=\max\{\ f[i][k]+f[k+1][j]+\sum_{l=i}^{j}a_{i}\  \}\ (k\in[i,j))$$

$k$ 是枚举中断点。后面的和用前缀和维护。

时间复杂度 $O(n^3)$。