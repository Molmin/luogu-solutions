## CF1810F

求最大值的最小值，想到二分答案 $x$，考虑判断 $x$ 是否合法。

需要构造出对于任何一个叶子 $i$，$a_i+dep_i\le x$，即 $dep_i\le x-a_i$。

贪心地，将 $i$ 放在第 $x-a_i$ 层（从 $0$ 开始编号）。设一个在第 $i$ 层的叶子的权值为 $\frac{1}{m^i}$，发现所有叶子的权值之和始终等于 $1$，一个点成为一个叶子就相当于它不能再分了，不妨将总权值减去 $\frac{1}{m^i}$。所以需要满足 $1-\sum_{i=1}^n\frac{1}{m^{x-a_i}}\ge 0$，化简得到 $\sum_{i=1}^nm^{a_i}\le m^x$。

用 $\verb!set<int>!$ 维护 $m$ 进制数，容易去掉二分，时间复杂度 $O(q\log_2m)$。

[代码](https://codeforces.com/contest/1810/submission/208706346)。

