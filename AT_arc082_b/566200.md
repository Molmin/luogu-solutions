### 题目分析：

因为 $p_i \ne i$，所以这道题可以这样做：循环枚举序列 $p$ 到 $n - 1$，如果 $p_i = i $，那么就把他与下一个数交换，并把交换次数加一，因为这样就可以保证，交换后两个数一定各不等于 $i$，后面的 $p_n$ 需要特判，如果相等，也把交换次数加一。

因为交换后的两个数一定符合条件，所以如果需要交换，可以交换完后，直接把 $i$ 加一，跳过交换好的 $p_i + 1$。

**代码（拒绝抄袭）：**

```cpp
#include<bits/stdc++.h>
using namespace std ;
int ans , n , a[1000010] ; 
int main(){
	cin >> n ; 
	for(int i = 1 ; i <= n ; i++) cin >> a[i] ; 
	for(int i = 1 ; i < n ; i++){
		if(a[i] == i){ //如果需要交换
			ans++ ; //交换次数加一
			swap(a[i] , a[i + 1]) ; //与后面的数交换
			i++ ; //跳过p[i + 1]
		}
	}
	if(a[n] == n) ans++ ; //特判，如果怕数组越界，还是加吧
	cout << ans << endl ; //记得加岛国特有的换行
	return 0 ;
}
```