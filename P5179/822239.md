## P5179题解

看到这道题，突然产生了一种梦回小学时代的感觉。

首先我们考虑一种最简单的情况，如果左右两边的分数一个小于 $1$，一个大于 $1$，那么显然 $p=1$，$q=1$。

于是乎，我们可以对这个问题进行简化：我们通过一系列操作，把原问题转化为左右两边的分数一个小于 $1$，一个大于 $1$，问题就能迎刃而解啦！

我们举个栗子，详细地解释一下这个流程：$\dfrac{123}{456}<\dfrac{p}{q}<\dfrac{456}{789}$，遇到这样的情况怎么办呢？我们先对它取倒数，得到 $\dfrac{789}{456}<\dfrac{q}{p}<\dfrac{456}{123}$，为了满足上面的条件我们把左右两边减去左边比 $1$ 大的部分，把问题转化为 $\dfrac{333}{456}<\dfrac{q-p}{p}<\dfrac{333}{123}$，满足条件了，于是乎我们可以令 $q-p=1$，$p=1$，得到正确答案。其他操作也大同小异，递归函数即可。

代码如下：

```cpp
#include <bits/stdc++.h>
using namespace std;

void work(int a,int b,int &p,int &q,int c,int d)//注意这里的p、q前要加取地址符
{
	if(a<b&&c>d) p=1,q=1;
	else
		work(d%c,c,q,p,b-(d/c)*a,a),q+=(d/c)*p;
}

int main()
{
	int a,b,c,d,p,q;
	while(cin>>a>>b>>c>>d)
	{
		work(a,b,p,q,c,d);
		cout<<p<<'/'<<q<<endl;
	}
	return 0;
}
```