一道比较神仙的题目吧。

钦定 $f_0=f_{n+1}=0$

首先考虑一种特殊情况：当所有的 $f$ 构成了一个上凸函数的时候。

那么有 $f_{n}=\frac{f_{n-1}+f_{n+1}}{2}$，换而言之，不移动比移动一定更优。

于是这时直接 `printf("%d",f[i]);` 即可。

我们因此受到了启发。

考虑将所有的点 $(i,f_i)$ 算出一个凸包来。

那么对于凸包内的点，这个点的最优策略一定是跑到附近的两个凸包上的点。

首先给出一个结论：如果有一条长度为 $L$ 的线段，从 $x$ 出发随机往左或往右，跑到 $0$ 的概率是 $\frac{L-x}{L}$，跑到 $L$ 的概率是 $\frac{x}{L}$。

但为什么是凸包上的点呢？

假如现在有三个点 $a,b,c$，满足 $a<b<c$，其中 $a,c$ 是凸包上的点，而 $b$ 不是，现在有 $a<x<b$，那么假如计算到 $a,b$ 停止的话期望是 $\frac{f_a(b-i)+f_b(i-a)}{b-a}$，而到 $a,c$ 停止的期望是 $\frac{f_a(c-i)+f_c(i-a)}{c-a}$。

我们现在要比较 $\frac{f_a(b-i)+f_b(i-a)}{b-a}$ 和 $\frac{f_a(c-i)+f_c(i-a)}{c-a}$ 的大小关系。

而根据凸包推出来的结论有 $\frac{f_c-f_a}{c-a}>\frac{f_b-f_a}{b-a}$，而 $\frac{bf_a-af_b}{b-a}$ 和 $\frac{cf_a-af_c}{c-a}$ 的关系也可以通过做一点点小变化得出，于是就可以推出：$\frac{f_a(b-i)+f_b(i-a)}{b-a}<\frac{f_a(c-i)+f_c(i-a)}{c-a}$。

然后根据我们之前得出的“特殊情况”所以答案即为往左和往右的属于凸包上的点作为停止点的答案。