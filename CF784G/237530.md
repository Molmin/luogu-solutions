# CF784G 题解

这道题就是输入一个**只有加减**的表达式，输出一个 BF 程序，让这个程序输出表达式计算结果。  
可以先计算结果，再输出。  
## Part 1 计算结果
`scanf` 真是个好东西！它可以带符号读入整数。这道题也不区分优先级，直接一边读入一边计算：  

```
int x,s=0;
while(~scanf("%d",&x)){
	s+=x;
}
```  

## Part 2 输出
本题的重点！  

输出时，可以先分离数位，再逐位输出。结果为0与225间的整数，所以不需要用循环，只需要用三个变量分别存储三位，同时转化成 ASCII 码：  

```
int a=s/100+48,
    b=s/10%10+48,
    c=s%10+48;
```  

之后就是输出 BF 程序。

首先，必须知道 BF 的语法。这种语言有一个指针和一个数组，有如下几种命令：  

（表格来自[百度百科](https://baike.baidu.com/item/Brainfuck/1152785)）  

| 字符 | 含义 |  
| :-: | :-: |
| > | 指针加一 |
| < | 指针减一 |
| + | 指针指向的字节的值加一 |
| - | 指针指向的字节的值减一 |
| . | 输出指针指向的单元内容（ASCII码） |
| , | 输入内容到指针指向的单元（ASCII码） |
| \[ | 如果指针指向的单元值为零，向后跳转到对应的\]指令的次一指令处 |
| \] | 如果指针指向的单元值不为零，向前跳转到对应的\[指令的次一指令处 |
  
很多人都只是把 BF 语言当成一个玩笑，很少有深入研究它的，其实它也有很多值得研究的地方。  
输出字符时，为了快，可以直接用 `+` 加 ASCII 码，然后用 `.` 输出。  
输出了一位之后，其他题解都是用 `>` 移到下一位，其实可以只用一个字节的空间输出。  
BF 中有一个有用的东西： `[-]` 。这三个字符表示：如果当前的数值不是零，就一直减。这就可以把一个字节的空间清空，再写入新的字符。  
唯一需要注意的是不能输出前导零。
这一部分的代码：  
```
int a=s/100+48,b=s/10%10+48,c=s%10+48;
puts("[-]");
if(a>48){
	while(a--)putchar('+');
	puts(".[-]");
}
if(a>48||b>48){ 
	while(b--)putchar('+');
	puts(".[-]");
} 
while(c--)putchar('+');
puts(".[-]");
```  
这个做法目前是[最优解](https://www.luogu.com.cn/record/55880647)。