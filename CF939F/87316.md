这个题 有点难的 彻底理解是真的用了很长时间

文字是空虚的我们直接上图

![](https://cdn.luogu.com.cn/upload/pic/62958.png)

抽象一下题目，我们后面就用白色黑色代替表述了，总之都是相对方向不影响做题。红色道道表示火热的炙烤——

设定fij表示第i个区间，结束这个区间的时刻没有被烤的那一面（即白色面）累计被烤j单位时间的最优决策

我们肉眼可以看出，在同个区间里翻来翻去毫无疑问是木大的，所以一个区间至多只会被翻两次

**第一种情况：只翻一次。（如上半张图）**

我们可以发现：

1、黑色一共被烤了j的时间

2、时间一共是r

1+2->3、白色一共被烤了r-j

4、本序列，白色被烤了k时间

3+4->5、上一序列，白色被烤了r-j-k

所以fij=max f[i-1][r-j-k]+1

**第二种情况：翻两次。（下半张图）**

1、黑色一共被烤了j的时间

2、本次，黑色被烤了k

3、上一序列结尾，黑色被烤了j-k

所以fij=max f[i-1][j-k]

然后单调队列滚一滚就好啦

相信大家都会写啦




