可以先设 $S_i$ 为进行 $i$ 次异或积变换之后序列内所有元素的异或和。

可以发现，当 $n$ 为奇数时，无论 $S_0$ 的值为多少，$S_1$ 一定为 `0`。
之后的变换也不会改变序列内元素的值。又因为 $k\geq1$，所以当 $n$ 为奇数时，答案为 $a_i \ \text{xor}\ S_0$。 

当 $n$ 为偶数时，可以发现 $S_i$ 的值始终不变。则每个元素有两种取值。

当 $k$ 为奇数时，答案为 $a_i \ \text{xor}\ S_0$。

当 $k$ 为偶数时，答案为 $a_i$。