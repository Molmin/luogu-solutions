```
高精TLE，压位出奇迹。
```
### 题意
给定一个长度为 $n$ 的序列 $a$，对于序列 $a$ 中的相同的两个数 $x$，可以用一次操作将它们变成 $x+1$，求操作后序列 $a$ 中的最大值。

数据范围：$n \le 2 \times 10^5$ 。
### 分析
~~来自 2048 忠粉的窃喜。~~ 

由于题意中的操作性质较少，我们可以构造序列 $b$，使得 $b_i=2^{a_i}$，则题目中的操作对于序列 $b$ 来说相当于普通加法。那么题目就变成了这样：

- 给定长度为 $n$ 的序列 $b$，其中任意的 $b_i$ 均是 $2$ 的整数次幂。

- 定义一次操作为：将 $b$ 中相同的两个数用它们的和替代。

- 求 $\log_2{\max b}$ 的最大值。

显然将能加的都加起来即为最大值，但是寻找相同的数最快需要 $O(n)$，会 TLE，所以考虑二进制意义下的和 $s$。

如果数字 $b_x$ 没有被操作，那么在它对 $s$ 的贡献就是把和的第 $a_x$ 位变成 $1$，且下一位不会进位。（如果有进位，说明其它数合成了 $b_x$，那么它就可以被操作，矛盾。）

所以，没有被操作的数对 $s$ 的最大值无影响。

那么答案即为 $s$ 的最高位的 $1$ 所在的位置。
### 做法
因为 $n \le 2 \times 10^5$，所以需要高精度，但是一般的高精度的时间复杂度为 $O(n^2)$，是无法通过此题的。

对此，解决方案有以下几种（我只想到这些）：

- 用 set 或 map 维护区间中连续的 $1$，时间复杂度 $O(n \log n)$，可以通过。

- 打线段树，码量较大，时间复杂度 $O(n \log n)$，可以通过。

- bitset + 卡常，同机房巨佬过了，我反正没过。

- 压位高精，时间复杂度 $O(\dfrac{n^2}{B})$，是否通过取决于 $B$（压的位数）。

- 奇怪的方法……

我采用了压位高精的方法，但是用 long long 是过不了的，得用 __int128。（逃）

代码见 [link](https://codeforces.com/contest/1705/submission/165622299)。