## **Hint**
这肯定是道数学题了
**期望的拆分**
首先回顾[期望](https://baike.baidu.com/item/%E6%95%B0%E5%AD%A6%E6%9C%9F%E6%9C%9B/5362790?fr=aladdin&fromid=10318906&fromtitle=%E6%9C%9F%E6%9C%9B "@百度百科")的求法:
[离散型随机变量](https://baike.baidu.com/item/%E7%A6%BB%E6%95%A3%E6%80%A7%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F/5977114?fr=aladdin&fromid=9980865&fromtitle=%E7%A6%BB%E6%95%A3%E5%9E%8B%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F "@百度百科")$x$的取值可以是$$x_{1},x_{2},x_{3}...x_{n}$$取到这些值的概率分别为$$P(x_{1}),P(x_{2}),P(x_{3})...P(x_{n})$$
则$x$取值的期望$$E(x)=x_{1}*P(x_{1})+x_{2}*P(x_{2})+x_{3}*P(x_{3})+...+x_{n}*P(x_{n})$$即$$\sum _{k=1}^{n} x_{k}*P(x_{k})$$
通常情况下我们求期望需要列[分布列](https://baike.baidu.com/item/%E5%88%86%E5%B8%83%E5%88%97/6815651?fr=aladdin "@百度百科"),但实际上分布列是一个综合统计的产物,不方便我们思考,我们这次换一种思路,我们分开来思考

以$n=3$为例

|   排列   |   local数   |   权   |
|   :-:   |   :-:   |   :-:   |
| 1 2 3 | 3 |   ${1}\over{6}$   |
| 1 3 2 |2 | ${1}\over{6}$ |
| 2 1 3 |2 | ${1}\over{6}$ |
| 2 3 1 |2 | ${1}\over{6}$ |
| 3 1 2 |1 | ${1}\over{6}$ |
| 3 2 1 |1 | ${1}\over{6}$ |

local数数量就是随机变量$x$的可能取值,每一种排列的权都为${1}\over{6}$,所以合并同类项后

$E=(3+2+2+2+1+1)* {{1}\over{6}}$

它与分布列本质是一样的 (其实我就是用蹩脚的语文解释了贡献的含义)

3+2+2+2+1+1实际上的意义是什么? 

local数数量的总量

所以我们得出了本题期望的公式:

![](https://cdn.luogu.com.cn/upload/pic/24774.png)

而排列数即为 $A_{n}^{n}=n!$ ,所以我们考虑local数的数量

此处的local数数量即是 $1$~$n$ 成为local数的情况总数

于是我们考虑某一个数成为local数的情况数

可以想到,对于一个数 $x$ ,比它小的数有 $1,2,3,4...x-1$ ,所以排在它前面的数必须都要是这之中的数它才会成为local数,而 $x$ 顶多排到第 $x$ 位

当 $x$ 排在第 $i(i\leq x)$ 位时,它前面有 $i-1$ 个数,后面有 $n-i$ 个数,所以这时它成为local数的情况数 $$T_i=A_{x-1}^{i-1}*A_{n-i}^{n-i}=A_{x-1}^{i-1}*(n-i)!$$
所以 $x$ 是local数的情况总数$$sum=\sum_{k=1}^{x-1}A_{x-1}^{k-1}*(n-k)$$
~~现在就是考验数学能力的时候了,要知道这只是一个用符号表示的求和式,你要推出简单而普适性的结论,需要严谨的数学推理,这需要你具有卓越的联想能力,优秀的推理能力,高超的计算功底以及夯实的数学积累,要知道当年欧拉失明时就是靠着.....~~

所以我们选择打表

但是我们拿这这个公式打表并看不出来什么

我们想到我们最后的结果是每一个元素的情况数除以 $n!$ ,所以我们打表对 $n$ , $i(i\leq n)$ 成为local的总情况数除以 $n!$ 的结果,然后我们奇迹般地发现$$ans_n={\sum_{i=1}^{n} {{1}\over{i}}}$$
至于打表的具体情况,这里有我一个[学长的博客](http://liaoy148.lofter.com/post/1da8a74e_a3d612e "%%%liaoy大佬")

我们可以轻松过80分,所以只有一个困难了,对于 100% 的数据 $n$ 在 $int$ 范围,这部分要用到[调和级数](https://baike.baidu.com/item/%E8%B0%83%E5%92%8C%E7%BA%A7%E6%95%B0?fr=aladdin "点击畅游数学海洋"),至于这个调和级数是个什么我也不懂,但知道它的公式即可过这一题了$$\sum_{i=1}^{n} {{1}\over{i}}=ln(n+1)+r (n→∞)$$其中$r$是欧拉常数,我们知道$r\approx 0.5772156649$(而且我们只知道这些,我们甚至连它是有理数还是无理数都不知道)

所以100分就是这么拿到了,代码很短,但是数学很美妙

##**code**
```cpp
#include<cstdio>
#include<cmath>
using namespace std;
int n;
double ans;
int main() {

    scanf("%d",&n);
    if(n<=1000000)
     for(int i=1;i<=n;++i) ans+=((1.0)/i);
    else ans=log(n+1) +0.5772156649;
    printf("%.8lf",ans);
    return 0;
}
```


　　