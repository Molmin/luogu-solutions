楼下题解扯淡...

【正解是并查集】

用并查集缩点，带权并查集

然后DP就好了

记住要优化DP的空间
