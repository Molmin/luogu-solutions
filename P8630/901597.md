[题目传送门](https://www.luogu.com.cn/problem/P8630)

## 思路

读入一个字符串 $s$，一个整数 $n$，以及 $n$ 个长度为 $8$ 的字符串，然后统计 $s$ 中所有连续 $8$ 个字符的排列在这 $n$ 个字符串中出现的次数之和。

具体来说，代码首先创建一个空字典 $k$，然后对于每个长度为 $8$ 的字符串，将其字符按照字典序排序后作为键，出现次数作为值，存入字典 $k$ 中。接着，代码遍历 $s$ 中所有长度为 $8$ 的子串，将其字符按照字典序排序后在字典 $k$ 中查找出现次数，并将所有出现次数累加到变量 $ans$ 中。最后，代码输出变量 $ans$ 的值。


## Python Code

```python
# 读入一个字符串 s
s = input().strip()
# 读入一个整数 n
n = int(input())
# 创建一个空字典 k
k = {}
# 对于每个长度为 8 的字符串，将其字符按照字典序排序后作为键，出现次数作为值，存入字典 k 中
for i in range(n):
    # 读入一个长度为 8 的字符串
    ss = input().strip()
    # 将字符串 ss 中的字符按照字典序排序
    ss = ''.join(sorted(ss))
    # 如果排序后的字符串 ss 已经在字典 k 中，将其出现次数加 1
    if ss in k:
        k[ss] += 1
    # 否则，将其出现次数设为 1
    else:
        k[ss] = 1

# 初始化变量 ans 为 0
ans = 0
# 遍历 s 中所有长度为 8 的子串
for i in range(len(s) - 7):
    # 取出 s 中从第 i 个字符开始的连续 8 个字符
    ss = s[i:i+8]
    # 将字符串 ss 中的字符按照字典序排序
    ss = ''.join(sorted(ss))
    # 如果排序后的字符串 ss 在字典 k 中，将其出现次数加到变量 ans 中
    if ss in k:
        ans += k[ss]

# 输出变量 ans 的值
print(ans)
```

### 注意

这段代码的时间复杂度为 $O(n \times 8! \times m)$，其中 $n$ 是密码个数，$8!$ 是每个密码的排列数，$m$ 是字符串 $s$ 的长度。对于较大的输入，可能需要优化算法以满足时限要求。 


[已AC，请放心食用](https://www.luogu.com.cn/record/110674039)
