#### Description

> 给定 $n,m$，求第二类斯特林数的奇偶性。

#### Solution 1

打 表 出 奇 迹

首先，我们要知道第二类斯特林数的规律，假设第二类斯特林数为 $S(n,m)$，如下：

$$S(n,m)=S(n-1,m-1)+m \times S(n-1,m)$$
$$S(0,0)=1,S(n,0)=S(0,m)=0$$

然后我们就开始打表吧（用暴力进行辅助）：

||$n=0$|$n=1$|$n=2$|$n=3$|$n=4$|$n=5$|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|$m=0$|$1$|$0$|$0$|$0$|$0$|$0$|
|$m=1$|$0$|$1$|$0$|$0$|$0$|$0$|
|$m=2$|$0$|$1$|$1$|$0$|$0$|$0$|
|$m=3$|$0$|$1$|$3$|$1$|$0$|$0$|
|$m=4$|$0$|$1$|$7$|$6$|$1$|$0$|
|$m=5$|$0$|$1$|$15$|$25$|$10$|$1$|

我们以 $n=m$ 这条线作为一条中轴线，右上角的 $n > m$ 的三角都为 $0$。

所以 $n>m$ 直接特判，然后就可以得到排除这些 $0$ 并 $n,m$ 扩展到 $10$ 的一个表格：

||$n=0$|$n=1$|$n=2$|$n=3$|$n=4$|$n=5$|$n=6$|$n=7$|$n=8$|$n=9$|$n=10$|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|$m=0$|$1$||||||
|$m=1$|$0$|$1$|||||
|$m=2$|$0$|$1$|$1$||||
|$m=3$|$0$|$1$|$3$|$1$|||
|$m=4$|$0$|$1$|$7$|$6$|$1$||
|$m=5$|$0$|$1$|$15$|$25$|$10$|$1$|
|$m=6$|$0$|$1$|$31$|$90$|$65$|$15$|$1$|
|$m=7$|$0$|$1$|$63$|$301$|$350$|$140$|$21$|$1$|
|$m=8$|$0$|$1$|$127$|$966$|$1701$|$1050$|$266$|$28$|$1$|
|$m=9$|$0$|$1$|$255$|$3025$|$7770$|$6951$|$2646$|$462$|$36$|$1$|
|$m=10$|$0$|$1$|$511$|$9330$|$34105$|$42525$|$22827$|$5880$|$750$|$45$|$1$|

经过我和 rui_er 和 zycany 和 limaopipi2022 的不懈努力，和 [Oeis](https://oeis.org/) 的大力支持，我们，终于把规律找到了！

假设 $\dfrac{m+1}{2}=k$，可得：

- 当 $\left(k-1\right)\text{ and }(n-m+k-1)=k-1$ 时，答案为 $1$
- 当 $\left(k-1\right)\text{ and }(n-m+k-1)\ne k-1$ 时，答案为 $0$

$\rm and$ 为按位与。

#### Code

```cpp
#include <bits/stdc++.h>
#define divi(x) (x + 1) / 2

using namespace std;

int main () {
	int t;
	scanf("%d", &t);
	while (t--) {
		int n, m;
		scanf("%d%d", &n, &m);
		if (n < m) { // 特判表格右上角，因为题目的坑这里的 n > m 要改成 n < m
			puts("0");
			continue; 
		} else if (((divi(m) - 1) & (n - m + divi(m) - 1)) == divi(m) - 1) { // n <= m 中的第一个式子
			puts("1");
			continue; 
		} else { // n <= m 中的第二个式子
			puts("0");
			continue;
		}
	}
	return 0;
}
```

但是，这个做法基于 rui_er 给的做法，所以我们再换一种做法来看。

#### Solution 2

我们先把 $m \times S(n-1,m)$ 进行简化，如果 $m$ 为偶数就省略 $S(n-1,m)$，如果为奇数就有一倍的 $S(n-1,m)$。

然后，我们就可以模拟一种类似平面直角坐标系的问题：

> 如果我们遵守上面的推理，点 $(x,y)$ 到 $(x+1,y+1)$ 称为一种变化规则，点 $(x,y)$ 到 $(x+1,y)$ 称为另一种变化规则，求 $(0,0)$ 到 $(n,m)$ 需要的变化规则的方案数。

假设第一种为变化规则 $S$，第二种为变化规则 $C$，很容易就会发现需要哪些变化规则是以一个循环节来进行的，循环节即为 $S+N \times C+S$，$N$ 对于不同的情况取不同的值。

并且很容易发现，要进行 $m$ 次 $S$ 操作，$n-m$ 次 $C$ 操作（根据第二类斯特林数的定义），我们 $S$ 操作已经定了，只需要进行 $C$ 操作的安排即可。

很容易就知道，最终的答案即为（设 $\dfrac{m+1}{2}$ 为 $k$）：

$$C^{n-m+k-1}_{k-1}\bmod 2$$

然后 …… 该咋办 qaq

然后有一个救命的结论：

> $C^n_m$ 为奇数当且仅当 $n\text{ and }m=m$，$\rm and$ 为按位与。

然后我们就可以进行判断了。

~~草，我推理到现在才发现写出来和 rui_er 的没啥区别，那我不放这个 Sol 的代码了~~

By Shuchong    
2020.8.19