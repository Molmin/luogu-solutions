### 题意

$N$ 头牛 $B$ 个牛棚，每个牛棚的容量分别有限制。每头牛对每个牛棚有一个评分，分配牛到牛棚内，最小化所有牛对其所在牛棚评分的最大值与最小值之差。

### 题解

假设所求的答案（即差的最小值）为 $ans$，那么不难发现所有 $x<ans$ 的差 $x$ 均不能找到分配方案（否则与 $ans$ 最小矛盾），进一步，对于一个 $x>ans$ 的 $x$，在 $0$ 到 $x$ 这些差中必然可以找到分配方法。从而可以二分。

假设二分的差为 $k$，考虑枚举所有牛评分的最小值 $i$，则最大值为 $i+x-1$。则把牛向这一段的牛棚一一连边，加上牛棚容量的限制，就是一个多重匹配，上 Dinic 即可。

```cpp
bool check(ll x)
{
	for(ll i=1;i+x-1<=m;i++)
    {
		memset(head,0,sizeof(head));
		tot=0,s=0,t=n+m+1;
		for(ll j=1;j<=n;j++)add(s,j,1);
		for(ll j=1;j<=m;j++)add(j+n,t,b[j]);
		for(ll j=1;j<=n;j++)
			for(ll k=i;k<=i+x-1;k++)
				add(j,a[j][k]+n,1);
		if(MaxFlow()==n)return 1;
	}
	return 0;
}
```