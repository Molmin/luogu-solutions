经典套路题。

先对序列排序。极差最小一般情况先考虑双指针（论据可以见 [P1712 [NOI2016] 区间](https://www.luogu.com.cn/problem/P1712)、[P7514 [省选联考 2021 A/B 卷] 卡牌游戏](https://www.luogu.com.cn/problem/P7514)），具体来说就是固定左端点 $l$，找到最小的 $r$ 满足区间 $[l,r]$ 满足条件。

这个题显然可以这么做。首先固定左端点 $l$。$[l,r]$ 满足题意的充要条件就是 $\forall i \in [1,m], \exists j \in [l,r]$ 满足 $i|a_j$。所以我们拿个桶，$p_i$ 记录 $i$ 的出现次数。用变量 $s$ 记录当前桶中有多少个在 $[1,m]$ 中且不同的数。则 $[l,r]$ 合法的充要条件就转化成了 $s=m$。以右指针 $r$ 的移动为例，对于 $a_r$ 的每个 $[1,m]$ 中的因数 $t$：

- $p_t=0$：则 $s \gets s+1,p_t \gets p_t+1$。

- $p_t>0$：则 $p_t \gets p_t+1$。

左端点移动也类似，只不过从增加变成了删去。

注意把 $r$ 到达 $n$ 但 $s<m$ 的情况判掉。时间复杂度 $O(n \sqrt{a_i})$，1e5 2s 绰绰有余。