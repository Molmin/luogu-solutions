## 题意

$n \times m$ 的网格，`S` 代表起点，`F` 代表终点。现在有一个王后想从起点到达终点。王后每一步可以朝八个方向移动任意多格，求最小步数。

## 思路

首先我们可以将题目做一下转化：从起点到终点拐弯的次数最小。因为最优方案相邻的两步走的方向肯定不同。

我们看看数据范围：$n \le 10^3$，$m \le 10^3$，$t \le 30$，这也就意味着适用于 [P2937](https://www.luogu.com.cn/problem/P2937) 的 $O(64nm)$ 01bfs 会 T（事实上确实会 T）。

然后就可以想到另一种方法：把 `-|/\` 四个方向的连通块缩成一个点，不同方向之间的点与点连边，最后跑 bfs。然后就可以过了。

## 代码

[code](https://www.luogu.com.cn/paste/grtwg3bc)