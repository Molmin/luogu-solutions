under 题解 [AT685](https://www.luogu.com.cn/problem/AT685)

同步发布于[个人博客](https://fa555.github.io/2020/某At的dp场/#F-準急)

### problem

有一条有 $N$ 个站的电车线路。你要在这条线路上送外卖。

- 你需要在 $1$ 号站停靠，在 {$2$ 号站，…，$N - 1$ 号站} 的子集停靠，在 $N$ 号站停靠。
- 你不会在连续超过 $K$ 个车站停靠。

求有多少种可能的停靠方案数。答案对 $10^9 + 7$ 取模。

### solution

设 $f_{i, 0/1}$ 表示前 $i$ 个车站不停靠/停靠的方案数。显然有 $f_{i, 0} = f_{i - 1, 0} + f_{i - 1, 1}$。

对于 $f_{i, 1}$，需要减去不合法的方案数，即前 $K - 1$ 个车站都停靠的方案数。~~显然~~这个等于 $f_{i - K, 0}$。

边界条件 $f_{0, 0} = f_{0, 1} = f_{1, 1} = 1, f_{1, 0} = 0$。

答案即为 $f_{N, 1}$。总复杂度 $O(N)$。

### code

``` cpp
constexpr int mod = 1000000007;

int f[1000003][2];

int dp(int N, int K) {
  f[0][0] = f[0][1] = f[1][1] = 1;
  for (int i = 2; i < K; ++i)
    f[i][0] = f[i][1] = (f[i - 1][0] + f[i - 1][1]) % mod;
  for (int i = K; i <= N; ++i) {
    f[i][0] = f[i][1] = (f[i - 1][0] + f[i - 1][1]) % mod;
    f[i][1] = (f[i][1] - f[i - K][0] + mod) % mod;
  }
  return f[N][1];
}

```