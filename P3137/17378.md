楼下的代码写的很优美，但是题解蒟蒻我看不懂啊，所以由我来组成注释吧。

由于我们要求的是距离的平方和的最小值，那么我们就要用到一个性质：对于这种链式且单向的每个坑（谷仓）都要填一个什么东西（奶牛），当每个奶牛的路径不会经过别的奶牛的时候最小。

至于证明大家自己脑补，我只给出针对三个点的公式(b+c)^2+(a+b)^2<(a+b+c)^2+b^2;

为了不路径重复我们要**逆时针选择**每只奶牛，把奶牛尽量移到离它尽量远的地方。

但这是个环，我们该怎么把它变成一条链呢？

直接就照输入顺序当成一条链做是不行的，这样会留下空位。

另一种做法是破环成链，但楼下用了一种更巧妙的做法。一个性质：不管奶牛怎么分布，总有至少一只奶牛它是不动的。

我们先给每只奶牛顺时针排个序，就有了a数组，表示输入顺序下每个地方应该由哪里的奶牛占去。因为从左到右每个坑保证由剩下的下标最小的奶牛填，所以不会有哪只奶牛会越过别的奶牛。

（想了非常非常久b数组）观察a数组发现有些奶牛反而必须要去左边才能填满谷仓，而这是不符合移动规则的。

记谷仓号-下标为逆差，就有了b数组。（接下来需要烧脑）

事实上逆差=-位移（顺时针为正）。找出逆差最大的那个，如果我们把每只牛的移动路径都加上这个逆差，那就会都成为正数，也就满足移动规律。

那么我们找到的逆差最大的奶牛位移就为0，它一定待在原位。c数组表示下标对应a数组的每只奶牛的最终目的地。c[逆差最大的奶牛的a下标]=它所在谷仓。然后算出c数组就可以算出答案了。

楼下的代码太神了，蒟蒻我想了一天才想出来。

还有我不信这才普及难度，出到提高组应该得分率蛮低吧。
