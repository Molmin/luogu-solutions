由于刚开始给出的字符串一定合法，所以刚开始给出的字符串一定有左括号和右括号各 $ n/2 $ 个。当然，我们生成的字符串也必须有 $ k/2 $ 个左括号和右括号。

我们可以扫描一遍原字符串，如果遇到左括号，且左括号的数量$ <= k/2 $ ，就可以把左括号放入答案序列。

如果是右括号，我们需要确保在当前左括号数量小于右括号数量的情况下（左括号数量等于右括号的话，就不能再添加右括号了），在满足右括号数量$ <= k/2 $ 的情况下，将右括号放入答案序列。

显然，这样的做法不会破坏原来括号的相对顺序，因而这样的做法是合法的。

```cpp
#include <stdio.h>
char s[200005],res[200005];
int main()
{
 int n,k;
 scanf("%d%d",&n,&k);
 scanf("%s",s);
 if(n==k)printf("%s",s);
 else
 {
  int cntl=0,cntr=0,tot=0;
  for(int i=0;i<n;i++)
   if(s[i]=='(')
   {
   	if(cntl!=k/2)
   	{
   	 cntl++;
   	 res[tot++]='(';
   	}
   }
   else
   {
   	if(cntr!=k/2&&cntl>cntr)
   	{
   	 cntr++;
   	 res[tot++]=')';
   	}
   }
  printf("%s",res);
 }
 return 0;
}
```