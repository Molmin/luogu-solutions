# 题目

[CF1839E](https://www.luogu.com.cn/problem/CF1839E)

# 思路

不妨假设一个数变成 $0$ 以后将它删去。

考虑以下几种情况：

1. 如果只有一个数，则先手必胜。
2. 如果只有两个数，
   - 如果两个数相同，则后手必胜。
   - 如果两个数不同，则先手必胜。

而对于每次操作，两个数**减少量相同**。

因此只要能够把原序列划分为两个**总和相同**的子序列，**后手**就能使每个回合结束后得到的两个子序列**总和也相同**（保证他选择的数与先手选的数所属子序列不同即可），一直删除到只剩两个相同的数，从而保证必胜。

那么，如果原序列**不能**被划分为两个总和相同的子序列，是不是在若干次操作后，得到的序列**也不能**被划分为两个总和相同的子序列呢？答案是肯定的，下证明：

> 证明：
>
> 若原序列不能被划分为两个总和相同的子序列，而两人选择了 $x$ 和 $y$（不妨设 $x\leqslant y$），假设操作结束后的序列能够被划分为两个总和相同的子序列，其中 $y-x$ 所在的子序列中其他数之和为 $s_1$，另一个子序列总和为 $s_2$，即 $(y-x)+s_1=s_2$，则在原序列中 $y+s_1=x+s_2$，也可以找出两个总和相同的子序列，与假设矛盾，证毕。

也就是说，如果原序列不能被划分为两个总和相同的子序列，**先手**无论怎么操作都能把序列删除至只剩一个数或两个不同的数，从而保证必胜。

至于如何判断原序列能不能被划分为两个总和相同的子序列，就是一个背包问题了，复杂度 $O(n^3)$。

# 代码

[code](https://codeforces.com/contest/1839/submission/208380092)