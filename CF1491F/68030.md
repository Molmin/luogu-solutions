这里是官方题解。

考虑每次询问一侧放第 $i(i>1)$ 颗磁铁，一侧放之前的 $i-1$ 颗磁铁。

这样，你问到的第一个非 $0$ 值一定表示这颗磁铁是第 $2$ 颗有磁性的。

你可以借此找到所有有磁性的磁铁：第 $1$ 颗可以二分，后面的磁铁可以通过与当前找到的有磁性的磁铁询问来判断。

询问次数 $n-1+\lceil \log_2 n \rceil$，在限制的 $n + \lfloor \log_2n \rfloor$ 范围内。