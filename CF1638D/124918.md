考场上想出来了，可惜被抓去睡觉了。

首先如果我们要正着构造的话不太好构造，这时候我们观察到一个特点：在最后一步操作后一定会留下一个 $2 \times 2$ 的同色方格，这就引导我们往构造题的常见套路——反向构造来想。

考虑将一个 $2 \times 2$ 方块染成同色的反操作：将一个 $2 \times 2$ 的同色方块替换成任意颜色。将无色方块看成可以变作任意颜色的方块，操作变为将 $2 \times 2$ 的同色方块变为无色，之后由于无色方块可以变作任何颜色，因此如果有一个残缺的 $2 \times 2$ 同色方块但其所缺少的部分是无色方块，那我们就可以直接将无色方块看做这种颜色，直接将其消掉。

考虑消掉一个 $2 \times 2$ 方块后影响的最多是以其为中心的 $4 \times 4$ 方块，其左上角最多在原本左上角的八连通块位置，因此往原本左上角的八连通块搜索即可，代码简单，可以自行写出。

掉大分.jpg