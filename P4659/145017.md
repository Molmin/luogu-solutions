此题解为个人对 @0nullptr 的题解内容补充。

## 题意
有 $n$ 管道 $2n$ 个阀门，每个阀门状态由指定开关决定，要使每个管道有一个阀门关闭。

## 思路
先想到网络流，但发现难以控制每个开关的开关节点只有一个有流，也因可能两个阀门都关闭难以确定最大流。

此时反向思考，一个阀门打开意味着另一个阀门必定关闭。因此可以对开关拆点，由使阀门打开的节点向使另一个阀门关闭的节点连有向边，表示对其的依赖。

记开关 $i$ 的断开闭合为 $i$ 与 $i'$ ,则若 $i$ 可达 $i'$，$i'$ 又可达 $i$ ，即 $i$ 开关的闭合依赖于断开，断开又依赖于闭合，无解。  
否则若 $i$ 可达 $i'$，则只能选 $i'$，反之亦然。  
若 $i$ 与 $i'$ 互不可达，则选满足其依赖的节点都被选的。因为若 $i$ 向 $j$ 有连边，则 $j'$ 向 $i'$ 有连边，所以一个点的依赖节点对应的反点都依赖这个点的反点，一个点被选了说明依赖其反点的开关都有点被选了。

此时发现可以选择两点中所属强连通分量编号最小的（使用 tarjan 算法）。  
若 $i$ 可达 $i'$ 则 $i'$ 的强连通分量编号必定比 $i$ 小。  
否则假设 $i$ 所属强联通分量编号小于 $i'$ 所属编号，不合法时则 $i$ 的依赖点强连通分量编号小于依赖 $i'$ 的点的强连通分量编号。  
分类讨论，若 $i$ 所属强联通分量编号小于依赖 $i'$ 的点的强连通分量编号，则 “$i$ 的依赖点强连通分量编号小于依赖 $i'$ 的点的强连通分量编号”不成立，因为 $i$ 的依赖点会先被遍历。反之则“$i$ 所属强联通分量编号小于 $i'$ 所属编号”不成立，因为 $i'$ 会先被遍历。
因此用此方法选择是正确的。