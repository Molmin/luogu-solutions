首先把相同字母缩成一段，设 $c_a,c_b,c_c$ 分别为 $a,b,c$ 出现次数，不妨假设 $c_a\le c_b\le c_c$。

显然答案的上界是 $3c_a$，考虑如何尽量接近这一上界。

先删去连续子串 `ACB` 或 `BCA` 中的 `C` 和整个串开头结尾的 `C`，直到不存在这样的 `C` 或者 $c_c=c_b$。

假如 $c_c$ 仍然大于 $c_b$，那为了减小 $c_c-c_b$ 的值，只能不停删去 `AC` 或者 `CA`（因为其他串都不能减小 $c_c-c_b$）。可以证明，这样一定可以让 $c_b=c_c$。

现在不停删去连续的 `BC` 或者 `CB`，直到 $c_a=c_b=c_c$，就是答案。可以证明，这样一定能删到 $c_a=c_b=c_c$。

有一个细节：删去一段长度为偶数 `AC` 或者 `CA` 时，需要保证两端不都是 `B`（也即，`BACB` 中的 `AC` 是不能被删除的；`BACACB` 中只能删除一个 `AC`，不能删两个）。删去 `BC` 或者 `CB` 时也存在类似问题。

代码：https://atcoder.jp/contests/agc036/submissions/21045617

---

（其实可以证明删除 `AC` 或 `CA` 时永远不会出现以上特殊情况，但是我写代码的时候比较蠢就也判了下）