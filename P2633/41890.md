~~emmmLCA求错了然后debug了1h的丢人事迹我是不会说的~~

一开始看到这个题以为是点分，后来发现没法做。

现在做主席树的时候做到这个题了 

就想在DFS序上搞事情……就像链剖一样……然后GG了

偷看了一眼题解的第一行(划掉)发现用Root[i]表示路径[1,i]情况

然后就没什么思维难度了……

对于路径[u,v]的离散化后的值域情况
我们可以用segt[v]+segt[u]-segt[lca]-segt[father[lca]]来计算

然后就是求第k大的模板了

建树的时候有点小技巧(见[代码](http://www.cnblogs.com/refun/p/8685692.html)) 