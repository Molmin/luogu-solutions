我们定义第 $i$ 秒时 $a_p$ 的值为 $a_{p,i}$，我们每次在第 $t$ 秒查询其实是在查询 $p,y$ 其实是在查询 $\sum
\limits_{i=0}^t \left[a_{p,i}<y\right]$.

事实上这个东西必然是不好维护的，但我们可以发现另一个性质，$a_{p,i}=a_{p,0}+s_{p,i}$，其中，$s_{p,i}$  表示第 $i$ 个时刻对于位置 $p$ 的增量，而这个 $s$ 必然是好维护的。

我们考虑对于所有的询问按照 $p$ 排序，那么就可以滚动掉 $s$ 的第一维，现在需要考虑的是如何通过 $s_{p-1,i}$ 转移到 $s_{p,i},i\in{\left[1,q\right]}$.

既然已经滚动掉了第一维，原先的区间问题也转化为单点问题，而单点是平凡的。

对于一次 $t$ 时刻的区间 $\left[l,r\right]$ 加 $w$ 操作，他对于单点 $p\in\left[l,r\right]$ 的影响是什么，他会使 $s_{p,i}+w,i\in\left[t,n\right]$.

这由此启发我们在由 $s_{l-1,i}$ 转移到 $s_{l,i},i\in{\left[1,q\right]}$ 时给 $s_{l,i}+w,i\in\left[t,n\right]$，而由 $s_{r,i}$ 转移到 $s_{r+1,i},i\in{\left[1,q\right]}$ 时给  $s_{r+1,i}-w,i\in\left[t,n\right]$，每次查询的时候只需要在现有的 $s$ 数列上进行一次前缀查就可以了。

等于说要求维护一个数据结构，支持区间加，区间减，区间大于某数查。显然的是，分块可以维护，所以利用分块做扫描线对询问进行扫描即可解决该题。
