都是$O(log^3N)$的线段树套平衡树？

看到泥萌都是二分+区间rank诶...

作为解决区间动态Kth最基本解法，线段树套平衡树肯定不能这么弱

其实可以$O(log^2N)$的...

离散化序列$A$以及接下来要修改的数

然后$build$一棵可爱的权值线段树，

在没有区间这个限制时，我们在权值线段树上查询第k小是这样的

定义$cnt[o]$代表$o$所对应的值域

当你站在$o$时，观望左儿子$lc$与右儿子$rc$

如果$cnt[lc] > k$，那么最终答案一定在$lc$所对应的值域里

否则在$rc$所对的值域里，并且$k-=cnt[lc]$

那么现在有区间限制呢？

其实就是$cnt[o]$并不是所有都满足了，而是$cnt[o]$中下标在$l$与$r$之间的所有数

所以很自然想到将$cnt[o]$替换成一棵平衡树$BST[o]$

$BST[o]$存放落在$o$所对应的值域的数在数组$A$的下标

然后无脑$rank$

至于修改操作就比较简单了...

直接找到该删除的删除，该添加的添加