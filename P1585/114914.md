#### Description

> 给定一个 $n \times m$ 的矩阵，从右上角开始走，每走到一个格子就放入一枚金币，两枚金币 $(x_1,y_1),(x_2,y_2)$ 会产生影响当且仅当设他们分别是第 $t_1,t_2$ 放入的，$t_1 \bmod \frac{n \times m}2=t_2 \bmod \frac{n \times m}{2}$，影响值为 $k_1 \times |x_1-x_2| +k_2 \times |y_1-y_2|$，整个矩阵的价值为所有影响值的最大值。求价值的最小值。

#### Solution

说剪枝之间说亿点代码的细节，首先算挪到这个位置的影响大小，如果 $step \le \frac{n \times m}{2}$ 就不用考虑（但是得标记位置），否则就找到位置并计算影响。

然后是处理到没到过，可以考虑先把 $vis$ 都赋成 true 再把 $(1,1) \sim (n,m)$ 赋成 false。

最后注意从右上角 $(1,m)$ 开始走。

直接爆搜，不能接受，考虑剪枝。

首先套一个最优性剪枝，另 dfs 函数 $f$ 为 $f(x,y,step,v)$，如果目前答案 $v+p\ge \min$ 就直接 return。

然后考虑可行性剪枝，如果走到这里把整个矩阵分成了大于等于两个连通块，那么拐进任意一个连通块里都无法到达另外一个连通块，所以这块需要减掉。怎么判断呢？如果一个格子的上下已经走过，左右未走过，那么代表这个格子要不就是已经走过的要不就是路径绕了一圈又回来了，就会形成大于等于两个连通块，是要剪掉的，同理，左右已经走过上下未走过也是这样的。

这样就是可以通过了的。