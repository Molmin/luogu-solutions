# $2-SAT$的模板
## \>1.1
在说及实现之前，让我们来理解什么是**2-SAT**，已经知晓的可以跳至**1.2**

现在我们有6个布尔变量 $a,b,c,d,e,f$ ，现在给出如下关系：

- 若 $a$ 的值为0，则 $b$ 必须为1
- 若 $c$ 的值为1，则 $d$ 必须为1，且反之成立(即若 $d$ 的值为1，则 $c$ 必须为1，下同)
- 若 $e$ 的值为1，则 $f$ 必须为0
- 若 $a$ 的值为1，则 $e$ 必须为0，且反之成立
- 若 $d$ 的值为1，则 $e$ 必须为1，且反之成立

请给 $a$~$f$ 合理的值使得上述条件成立。无需多加思考，自然能发现一组合理的 a~f 为 0,1,0,0,0,1

但如果变量有30个，要求也不再仅仅是这5个。自然就要困难许多。

**我们可以考虑借助图的性质来达到这些要求**。

比如 **_对于编号为1~10的有着不同关系的布尔变量，我们可以考虑建一个有20个点的图。其中，点1~10用于对应上述变量为1的情况，点11~20用于对应上述变量为0的情况。_** 将每一个关系连接的两个变量之间建一条单向边，比如说：

![TJ-WinterVacation 1](https://s2.ax1x.com/2020/01/20/1ixenP.png)

这里点1对应变量1为1时，点12对应变量2为0时。

单项边由点1指向点12，表示“点1成立时，点12成立”。

也就表达了图中文字的意思。

## \>1.2
现在开始说2-SAT的具体实现，已经知晓的请跳至1.3以了解本题思路。

首先，我们需要把变量表示为点，两两间的关系表示为单向边。

假使我们的输入格式为 $int1$ $int2$ $int3$ $int4$ ，分别 表示$int1$为$int2$时，$int3$必须为$int4$。

**这里仍以1.1加斜部分为例作讲解**

那么我们可以使用邻接表这样操作：

```cpp
struct edges{
	int v, next;
}edge[27];//10个变量，对应20个点

inline void add_edge(int u, int v){//邻接表的操作，不再赘述
	edge[++ cnt] = (edges){v, first[u]};
	first[u] = cnt;
}
void inst2edge(){
	register int x, y, a, b;
	scanf("%d %d %d %d", &x, &y, &a, &b);//x为y时，a必须为b
	add_edge(y?x:x + 10, b?a:a + 10);
    	//因为是布尔变量，仅有两值，因此采用三步运算符
}
```

很好理解，现在图建完了，怎么做呢？

首先，我们需要满足**所有的**条件。其次，我们知道对于任意变量$i$而言，点$i$和$i + 10$不能被这些条件(也就是边)所置于同一个连通块。很快能想到，我们能$Tarjan$对点染色。然后判定点$i$和点$i + 10$颜色是否相同。若相同，则无法满足，反之则能满足。若需要输出一组合理的解，我们只需要把这一颜色的点对应的值返回来，而没被染上这个颜色的，就去任意值。

由于$Tarjan$实现不难，因此不作讲解。

## \>1.3
现在，看到题目。我们能够毫不费力的想到把满式、汉式作为布尔值的两种表达。

然后每个评委的要求可以被看作是“或”的表达，因此转为“必”的表达。

- 比如说：评审一要求的是m1或h7，那么我们可以转化为h1时必h7，和m7时必m1

注意建边时单向边。因为是A时B成立而非B时A成立。

这样我们就建好了图。使用Tarjan对所有点染色，查看是否存在对于任意的食材i，hi和mi有着一样的颜色。若有，则为BAD，反之则为GOOD。

额外的，为了方便读入，我给出了如下代码：

```cpp
inline bool SP_read(int &goal){//对快读稍加改动
	goal = 0;
	register char now;register bool state;//state表示m或h，这里我选用的是h为true
	while (now = getchar(), now != 'h' && now != 'm')continue;//吃掉所有的其他输入
	state = now == 'h';
	while (now = getchar(), now < '0' || now > '9')continue;//这主要是为了避免输入不规范
	while ('0' <= now && now <= '9'){
		goal = (goal<<1) + (goal<<3) + (now^48);//逐步赋值
		now = getchar();
	}
	return state;
}
```

最后，注意有多组数据，你需要初始化。