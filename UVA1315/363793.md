# 原题：[UVA1315 Crazy tea party](https://www.luogu.com.cn/problem/UVA1315)

## 一、题目大意

$n$ 个人按编号围着桌子坐成一圈，编号由 $1 \sim n$，每次只能交换相邻座位的人的位置，问多少次可以将所有人的左右两人互换，即左边的人到他的右边，右边的人到他的左边。(即座位顺序从原来的顺时针方向变为逆时针方向)。

## 二、分析

先来举几个例子：
- $n=1$ 和 $n=2$ 时一次都不要交换，即答案为 $0$；
- $n=3$ 他们三人的编号为 $1\ 2\ 3$ 把他们从中间切开来，得到两段 $1$ 和 $2\ 3$ 第一段还是 $1$ 不需要换，第二段换为了 $3\ 2$，他们合并起来是 $1\ 3\ 2$ 由于是圆桌所以是 $3\ 2\ 1$ 要换 $1$ 次；再看看另一种直接换从 $1\ 2\ 3$ 直接换为 $3\ 2\ 1$ 要换 $3$ 次。

所以可以得出这 $n$ 个人分为尽可能相等的两段，交换的次数最小。

再看看
- 当 $n=7$ 时分为 $1\ 2\ 3$ 和 $4\ 5\ 6\ 7$ 两段，第一段换为 $3\ 2\ 1$ 要 $3\ (2+1+0)$ 次，第二段换为 $7\ 6\ 5\ 4$ 要 $6\ (3+2+1+0)$ 次，一共要换 $3+4=7$ 次；
- 当 $n=8$ 时分为 $1\ 2\ 3\ 4$ 和 $5\ 6\ 7\ 8$ 两段，第一段换为 $4\ 3\ 2\ 1$ 要 $6\ (3+2+1+0)$ 次，第二段换为 $8\ 7\ 6\ 5$ 要 $6\ (3+2+1+0)$ 次，一共要换 $4+4=8$ 次。

综上所述

- 当 $n$ 为奇数时

$ans=0+1+2+\cdots \cdots+(\lceil\dfrac{n}{2}\rceil-1)+0+1+2+\cdots \cdots+(\dfrac{n+1}{2}-1)$

$\ \ \ \ \ \ \ \ =(0+(\lceil\dfrac{n}{2}\rceil-1))\times\lceil\dfrac{n}{2}\rceil+(0+(\dfrac{n+1}{2}-1))\times\dfrac{n+1}{2}$

- 当 $n$ 为偶数时

$ans=0+1+2+\cdots \cdots+(\dfrac{n}{2}-1)+0+1+2+\cdots \cdots+(\dfrac{n}{2}-1)$

$\ \ \ \ \ \ \ \ =(0+(\dfrac{n}{2}-1))\times\dfrac{n}{2}\times2$

## 三、code

```cpp
#include<bits/stdc++.h>
#define ll long long
using namespace std;
ll n,t;
int main(){
	scanf("%lld",&t);
	while(t--){
		scanf("%lld",&n);
		if(n%2){
			ll hl=n/2,hr=n/2+1;
			printf("%lld\n",(0+hl-1)*hl/2+(0+hr-1)*hr/2);
		}
		else{
			ll ha=n/2;
			printf("%lld\n",(0+ha-1)*ha/2*2);
		}
	}
	return 0;
}
```
```cpp
//ha表示为偶数时，一半的人数
//hl表示为奇数时，左边一半的人数，即 (n-1)/2
//hr表示为奇数时，右边一半的人数，即 (n+1)/2
//(0+x-1)*x/2 大家应该看出来了，是 0+1+2+3+……+(x-1) 的和，首项是 0 末项是 (x-1) 一共 x 项
```