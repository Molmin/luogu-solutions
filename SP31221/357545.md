> 既然没有C++题解，那么就来水一篇。

----

### 题解 $SP$ $31221$

----

### 题目大意

Zen有 $n$ 枚硬币，他要抛硬币算命。第 $i$ 枚硬币是正面的概率是$P_i$。请你求出**这 $n$ 枚硬币中恰好有 $k$ 枚是正面**的概率。

----

### 解题思路

这道题可以使用**动态规划**。

我们假设 $dp_{i,j}$ 是有 $i$ 枚硬币时恰好有 $j$ 枚是正面的概率。

那么现在就是要把这个问题拆分成更小的子问题。

这时，要么让这枚硬币正面朝上；要么让这枚硬币背面朝上。

即，$dp_{i,j}= dp_{i-1, j-1} \times P_i + dp_{i-1, j} \times (1-P_i)$。

其中 $dp_{i-1, j-1} \times P_i$ 是这枚硬币正面朝上时的情况，$dp_{i-1, j} \times (1-P_i)$ 是这枚硬币背面朝上时的情况。

注意初始值是 $dp_{0, 0} = 1$。

代码使用最基础的dp实现。由此得到 $19$ 行 $AC$ 代码：

```cpp
#include <cstdio>
double dp[1001][1001];
int main() {
  int t;
  scanf("%d", &t);
  while ( t-- ) {
    int n, k;
    dp[0][0] = 1.0;
    scanf("%d%d", &n, &k);
    for (int i = 1; i <= n; i += 1) {
      double p; scanf("%lf", &p);
      for (int j = 0; j <= n; j += 1) {
      	dp[i][j] = dp[i - 1][j - 1] * p + dp[i - 1][j] * (1.0 - p);
      }
    }
    printf("%.10lf\n", dp[n][k]);
  }
  return 0;
}
```