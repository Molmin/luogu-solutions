## 题意

有一个 $ N $ 个点 $ M $ 条边的无向图。第 $ i $ 条边连接 $ A_i $ 和 $ B_i $，边权为 $ C_i $，保证 $ C_i $ 互不相同。

现在有 $ K $ 个人，依次从 $ 1 $ 到 $ K $ 编号。第 $ 1 $ 个人先操作，会删掉图里一个边权和最大生成森林。然后是第 $ 2 $ 个人，会删掉剩下图里一个边权和最大生成森林。依次类推，接下来是第 $ 3 $ 个人，第 $ 4 $ 个人，……，直到第 $ K $ 个人。对于每条边，你需要求出它是被哪个人删掉的。

## 思路

首先将所有边从大到小排序，并且维护 $K$ 个并查集，代表第 $i$ 个人选的生成森林。然后遍历排序后的边，记为 $(u,v)$。显然把这条边删掉的人的编号就是满足 $(u,v)$ 在第 $i$ 个并查集不连通的最小 $i$。

直接做是 $O(MK \log n)$ 的（并查集带一个 $\log$），考虑优化。

可以证明 $(u,v)$ 在编号为 $1 \sim K$ 的并查集中的连通情况具有单调性，即有一段是连通的，有一段是不连通的。因此可以直接二分，找到 $(u,v)$ 不连通的最小编号，然后连边即可。时空复杂度与线段树方法相同。

时间复杂度 $O(NK + M \log N \log K)$，空间复杂度 $O(NK)$。

## 代码

[code](https://atcoder.jp/contests/joisc2015/submissions/32583809)