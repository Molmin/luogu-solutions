为了便于处理，我们把点权带来的贡献算在边权上

那么定义就是：

对于树的每条边，贡献为 

$a_u+a_v+min(a_u,a_v)*\lceil log_2(dist(u,v))\rceil$

因为题面要求

$\lceil$除了权值最小的点外，每个点至少有一个点权小于它的相邻点$\rfloor$，

所以我们建立的树应该以最小值为根

然后每个节点的父亲是唯一权值比它小的

结合之前的贡献计算，每个点向它的 $2^k$ 级祖先中权值最小的连边，

因为每一次都往小的连边，满足树的无环性质

因此，我们只需要倍增预处理出每个节点的 $2^k$ 级祖先即可，时间复杂度为 $O(nlogn)$