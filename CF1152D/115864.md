
此题有一个推导过程稍微麻烦的 $\Theta(n)$ 做法，个人感觉过程可能有些绕弯路了，也欢迎大家提出更巧妙的方法。

首先我们有一个递推 $f_{i,j}=f_{i-1,j}+f_{i,j-1} \  (j \leq i)$，可惜这个递推式不是对任意位置成立的，这让我们很难受。于是我们可以考虑根据原本的 $f$，在其留空的位置按递推式推出 $g$，看看它长什么样（通常都很好用！）：

```
1   0   -1  -2  -3  -4  -5  
1   1   0   -2  -5  -9  -14 
1   2   2   0   -5  -14 -28 
1   3   5   5   0   -14 -42 
1   4   9   14  14  0   -42 
1   5   14  28  42  42  0   
1   6   20  48  90  132 132 
```
现在得到的这个矩阵，除第一行以外，所有位置都满足 $g_{i,j}=g_{i-1,j}+g_{i,j-1}$ 了，也就是说每一行都可以直接用上一行的前缀和表示。规律也很明显：

$$f_{n,m}=[x^m] \left( \frac{1-2x}{(1-x)^{n+2}} \bmod  x^{n+1}\right)$$
而最终答案是
$$\sum_{i=0}^n \sum_{j=0}^i f_{i,j}[i+j \bmod 2 = 1]$$

其中第 $i$ 行所有数的和很简单，它就是 Catalan 数 $C_{i+1}$。
***
现在重点在于对 $i \in [0,n]$ 求出
$$s_i=\sum_{j=0}^i (-1)^j f_{i,j}=\sum_{j=0}^i[t^j] \frac{1+2t}{(1+t)^{i+2}}= [t^i] \frac{1+2t}{(1+t)^{i+2}(1-t)}$$
写成二元 GF 就是
$$[t^ix^i] \frac{1+2t}{(1-t^2)(1+t-x)}=[u^0] \frac{u+2u^2}{(1-u^2)(-x+u+u^2)}$$
尝试分式分解，原式可以分解为这么一大坨：
$$[u^0]\frac{1}{2-x}\left( \frac{ -1+2x+(1+x)u}{x(1-u^2)}+\frac{x(-1+2x)+(1+x)u}{x(u^2+u-x)}\right)$$
由于左边这部分显然是没有 $u$ 的负次项的，故化简为
$$ \frac{-1+2x}{x(2-x)}+\frac{1}{x(2-x)} \red{[u^0]\frac{x(-1+2x)+(1+x)u}{u^2+u-x}}$$
后面那部分继续大力分解：
$$[u^0]\left( \frac{\alpha + x \beta}{u+\alpha}+\frac{\beta + x \alpha}{u+\beta}\right) $$
$$\alpha = \frac{1-\sqrt{1+4x}}{2} \ , \ \beta = \frac{1+\sqrt{1+4x}}{2}$$
接下来一步很关键，仅凭直觉乱搞很可能会得出错误的结果。我们需要考察分解出的每个分式，是否真的包含 $u^0$ 的项（在先按 $x$ 展开，再按 $u$ 展开的情况下）。

稍加思索我们可以断定 $\frac{1}{u+\alpha}$ 是不包含 $u^0$ 项的（乘上一个只含 $x$ 的幂级数，显然不影响这一性质），直接扔掉即可。这是因为 $\alpha$ 常数项为零，导致：
$$\frac{1}{u+\alpha}=\frac{u^{-1}}{1+\alpha/u}=\sum_{i \geq 0} (-1)^i \alpha^i u^{-i-1}$$
同理也可以验证 $\frac{1}{u+\beta}$ 是包含 $u^0$ 项的，故原本红色的那部分就可以直接写为 $1+x\alpha/\beta$，然后可以化简得到
$$s_i=[x^i] \frac{\alpha / \beta+2}{2-x}=[x^i]\frac{-1+2x+\sqrt{1+4x}}{2x(2-x)}$$
****
于是，答案就可以写为
$$\frac 12\sum_{i=0}^n C_{i+1}-(-1)^is_i$$
到这里就能以 $\Theta(n)$ 的时间复杂度算出答案啦～ 

ps：答案的生成函数显然为代数幂级数，二元的常系数递推得到这样的结果，也是意料之中的。