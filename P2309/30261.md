终于AC的我来发题解啦！本题第一个题解，占坑~

首先我们会想到什么？暴力【滑天下之大稽】$O(n^3)$，你给我弄一个试试。

我们很容易想到另外一种方法：对于数组a，计算出前缀和$s_i$，之后一遍二重循环就可以计算子段和。这样是一个很大的进步，然而仍然不能通过。

那么我们该怎么办呢？

让我们看一下，我们实质上要找到数对$(i,j)$的组数，它们都满足：

$s_i-s_j<0,1\leq j\leq n,0\leq i\leq n-1$

移项，得$s_i<s_j$。

所以……这不是一个裸~~逆序对~~正序对吗……

读入时，将所有数值取其相反数，跑逆序对即可。

另外要注意：因为i可以为0（就是从开头开始的一段区间），最后还要加上$s_i$中负数的个数。

~~因为逆序对问题是普及-的，所以这题我给了普及-。~~

刨掉逆序对以后的代码如下：

```cpp
        scanf("%d",&n);
    for(int i=1;i<=n;i++){
        scanf("%d",&a[i]);
        s[i]=s[i-1]+a[i];
        a[i-1]=-s[i-1];
        if(a[i-1]<0)++ans;
    }
    a[n]=-s[n];
    if(a[n]<0)++ans;
    merge(1,n);
    printf("%lld",ans);
    return 0;
```
祝大家能够从中得到启发。再见~~
