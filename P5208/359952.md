首先，这题呢是可以问一些不等式出来，然后就要猜出来每个数。

额我们大胆猜测一次不会去问太多数，因为这个东西看起来不能 $n\log n$。

我们发现不能只想着求出具体值，为什么呢，因为它题目里的限制全是不等式。

我们考虑 $n=3$ 怎么办。

然后我们发现只有类似如下几种的询问是有用的：

- $\{a\},\{b\}$

- $\{a\},\{a,b\}$

- $\{a\},\{b,c\}$

第一个询问可以得出 $a\leq b$ 或者 $a\geq b$ 可能有用。

第二个询问可以得出 $b\leq 0$ 或者 $b\geq 0$，完全没用。

第三个询问暂时得不出什么，可能有用。

接下来的第一种想法是 $Q(\{a\},\{b\}),Q(\{a\},\{c\}),Q(\{c\},\{b\})$ 然后把它们排序起来，虽然这种方法很笨，但是我们先继续思考排序后怎么做。

容易发现这就是 subtask3，可以通过仔细读题发现保证有  $1$，那我们设这个序列单调不降。

结合 100 次考虑二分，进行一次 $Q(\{x_i,x_{i+1}\},1)$ 。

- 若 $x_i+x_{i+1}\leq 1$，则 $x_i=0$

- 若 $x_i+x_{i+1}\geq 1$，则 $x_{i+1}=1$

可以二分出结果，中间那个数要用奇偶性判定。

于是我们有了一种 $\mathcal{O}(n\log n+3\log n)$ 的做法，可以拿到 $52$ 分的高分。

我们想一想哪里可以优化，发现这个排序没有很好的利用 $x_i\in[0,1]$ 的性质，于是我们把上面的第三种询问用起来，也就是进行 $Q(\{a\},\{b\}),Q(\{c\},\{a,b\})$，我们不妨假设 $a\leq b$，接下来分为两种情况：

- $a+b\leq c$ 能够推出 $a=0,b\leq c$.

- $a+b\geq c$ 

第一种情况我们很开心，直接排序好了，第二种情况我们就很悲伤了。

我们有三种情况：

- $a=0,b=0,c\leq0$

- $a=0,b=1,c\leq1$

- $a=1,b=1,c\leq1$

得到 $c\leq b$

最后我们得到一个序列，考虑这个序列是什么，首先它是有序的。

于是执行一波二分，把序列里的值求出来，但是还会剩一个，这里用了 $5k+3\log k$ 次操作确定了 $k$ 个数，同时也必定找到了一个 $1$，因为最后的 $1$ 是最小值嘛。

最后用这个 $1$ 把中间没求出来的全部干掉。

给一个 example：

${a,b,c,d,e}$ 分别为 $0,1,0,1,0$

序列先加入 $a$

$Q(\{a\},\{b,c\})+Q(\{b\},\{c\})$ 得到 $a\leq b$ 于是将序列加入 $b$。

$Q(\{b\},\{d,e\})+Q(\{d\},\{e\})$ 得到 $b\geq d+e,d\geq e$ 于是 $e=0$，不用加入序列。

接下来发现 $b$ 为最大值为 $1$，而 $a$ 是判断不出来的，至此，用了 $2\times5+3\times 0$ 次，得到了 $2$ 个数，并且得到了一个 $1$。

接下来用 $Q(1,\{x,y\})$ 和 $Q(x,y)$ 可以得出另外的数（注：这里的原理等同于上面二分的原理）。

最后剩下一个数用奇偶性得出，本题得到解决。













