线段树水题

假设每次操作可以 $O(n)$ 做，我们怎么判断是否可行？

我们可以直接扫一遍序列，这个尺码的人肯定尽量用当前尺码的鞋子（因为都已经扫到这里了，这个鞋子不用也浪费了），所以也就是说，每次 $a_i$ 可以加等于 $a_{i-1}-k$ ，当然如果这个值小于 $0$ 了就不能加。但是如果可以发现，如果直接加了，只会使得原来不满足的变满足，而不会使得满足的不满足。也就是说可能把 'NIE' 判断成 'TAK'。

但是我们只要对于每一个 $l,r$ 都判断一次就不会有问题了。所以我们就转化为求是否有 $l,r$ 满足 $(\sum_{i=l}^r a_i )> k\times (r-l+1+d)$。所以我们只要求出最大的 $\sum_{i=l}^r (a_i-k)$ 即可。

所以可以直接线段树求最大子段和。