**sol to CF1342F**

一个很愚蠢的想法，直接枚举哪些位置保留了，然后内层 dp 一下怎么划分，直接设 $dp_{i,S1,S2}$ 表示选第 $i$ 个的时候已经被确定划分的集合 $S1$ 以及当前位置被划分的集合是 $S2$ 时的最长长度，凭感觉就直接爆炸。

发现先枚举哪些位置保留很 naive，可以直接做内层。

然后发现内层这个 $S1,S2$ 怎么都砍不掉，鉴定一下，关键词最长上升子序列，dp，直接转化一下维护维度，设 $dp_{i,S}$ 表示长度为 $i$ 的最长上升子序列当前已经被确定的集合是 $S$ 时的末尾最小值。

然后发现这个好像很难直接转移，具体来说这个状态确定的是当前的集合划分长啥样，没有保证能让最后的集合里面选出代表元组成一个最长上升子序列，那就直接暴力加一维 $j$ 表示当前的代表元是 $j$ 即可。

转移就刷表。每次对 $dp_{i,j,S}$ 枚举超集 $T$，即可确定下一个位置分配的集合 $T/S$，贪心地选 $T/S$ 中 $j$ 的后继作为代表元即可转移。

时间复杂度 $O(3 ^ n n ^ 2)$。然后我也不知道为什么能过。。。感觉很离谱啊。

