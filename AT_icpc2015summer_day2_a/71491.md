提供一个更好（相比于另一篇题解）的做法

首先肯定要约分

然后我们知道如果可以用 $a^2 \cdot b$ 进制表示的话一定可以用 $a\cdot b$ 进制表示

我们只需要枚举它的每一个因子 $a$ ，让 $q$ 中只保留 $a$ 的一次幂，多余的部分除去即可

代码十分简单，你甚至不需要判断它是不是质数，而且跑得飞快

它大概是下面这个样子的：

```cpp
int p,q;
int main() 
{
    cin>>p>>q;
    q/=__gcd(p,q);
    rep(i,2,sqrt(q)) if (!(q%i)) 
    {
        while(!(q%i)) q/=i;
        q*=i;
    }
    cout<<q<<'\n';
    return 0;
}
```