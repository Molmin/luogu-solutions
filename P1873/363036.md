## 前言
这题是不是重了？大家如果通过了这道题，可以去 [P1873](https://www.luogu.com.cn/problem/solution/P1873) 水双倍经验，原代码就可以过哦！

## 题目意思及翻译
有那么一丢丢的费解。这题的意思是**给定 $n$ 棵树的高度**，让你求一个**最大的参数值** $r$，使得**他把所有树 $r$ 米以上的部分砍掉**之后，能得到 $m$ 米或以上的木材（换句话来说，如果**再升高 $1$ 米**，那他将**得不到 $m$ 米的木材**）。

## 思路
本题为一道非常基础的**二分答案**题。

（~~虽然我是来水题解的~~，但我觉得还是有必要详细讲讲二分）。

### 二分
------------
~~二分不就是倍增的反操作吗？~~

二分，就是把一个数列**分成两部分分别查找答案或进行处理**，这是一种比暴力循环枚举答案更快的基础算法，时间复杂度为 $O(\log$ $n)$。

我在这里举个例子，让大家对二分有一个比较清楚的认识。

例：在 $1$ 到 $100$ 中找 $24$ 这个数。

1. 把 $1$ 到 $100$ 看成一个**递增的数列**，并将它**平均分成两部分**，**也就是 $1$ 到 $50$ 一部分，$51$ 到 $100$ 一部分**。很明显，$24$ 在前面较小的一部分，所以**后面一段不用考虑**（一下排除了一半，酸爽啊）。

2. 把前面一段再平均分成两段，$24$ 在 $13$ 到 $25$ 之间，所以**只考虑后面一段**。

3. 把 $13$ 到 $25$ 又平均分成两段，$13$ 到 $19$ 一段，$20$ 到 $25$ 一段，$24$ 在后面一段，所以又排除一些数。

4. 把 $20$ 到 $25$ 又又平均分成两段（**只要还没确定 $24$ 的位置，就要一直分**），**排除 $20$，$21$，$22$**。

5. 把 $23$ 到 $25$ 又双叒叕分成两段，**这时，$24$ 位置确定了，二分结束**。

如果要暴力枚举，要枚举 $24$ 次，但是二分 $5$ 次就得出了答案，非常优美。

既然二分这么好用，那是不是所有地方都能用二分呢？大家可能注意到我上面的一句话：

``把 1 到 100 看成一个递增的数列。``

二分只能用于**有序的数列中**，换句话来说，**只有单调递增或者单调递减的数列**，二分思想**才能得出正确答案**。比如下面的这组数据，二分就不能直接使用：``5,3,1,4,2,6,9``

------------
相信大家知道二分的实现过程了吧？

建议初学着先去做一下 [P2249](https://www.luogu.com.cn/problem/P2249)。

## 实现方法
以下是二分的基本实现方法（**不要急着复制，这只是模板**）：
```cpp
int mid, l = 0, r = 0x3ffffff;//定义左右边界和中间量
while(l <= r){//循环终止条件，当 l = r 时，答案就已经确定了
		mid = (l + r) / 2;//模拟平均分成两段的过程
		if(check(mid))	l = mid + 1;//check() 后面会讲，要手写
		else	r = mid - 1;
		//说明一下，l = mid + 1 的意思是这个结果可能小了，可以尝试更大一点（通过缩小左边界来达到忽略左边一段的效果） 
		//r = mid - 1 的意思是这个结果太大了，要小一点（通过缩小右边界来达到忽略右边一段的效果） 
	}
```
回到本题，他要求一个最大的 $r$ 值，我们如何确定当前求到的 $r$ 是不是最大值呢？

这就要联系题目了。题目中说要求要得到 $m$ 米的木材，那我们**求出每一棵树被砍掉的米数**，得到一个总和 $s$，拿这个 $s$ 去跟 $m$ 比较，**如果大于表示可能还能再升高，如果小于表示要降低。**

所以，check 函数是这么写的：
```cpp
bool check(int x){//x 为当前求得的答案（即mid） 
	int s = 0;//定义总和 
	for(int i=1;i<=n;i++){
		if(a[i] > x)	s += a[i] - x;
		//求出每一棵树被砍掉的部分，因为有的树可能会小于当前高度，不会被砍，所以要加判断 
		if(s >= m)	return true;//把这个判断写在循环内，可以节省一点时间 
	}
	//if(s >= m)	return true;//写在这里也可以！ 
	return false;
}
```

## 一些小坑
本题比较基础，所以没多少坑，不过有一些地方还是要注意一下。

1. 注意 $r$ 的初始值，太小会导致一开始就错过了一些数。
2. 最后输出的是 $l$，$r$ 还是 $mid$，不同题目要具体分析。

## 代码
以下是参考代码。珍爱生命，远离抄袭。

前面解释过了，代码就不加注释了，方便大家看。

Code：
```cpp
#include<bits/stdc++.h>
using namespace std;

const int N = 1000000 + 10;
int a[N], mid, l, r, n, m;

bool check(int x){
	int s = 0;
	for(int i=1;i<=n;i++){
		if(a[i] > x)	s += a[i] - x;
		if(s >= m)	return true;
	}
	return false;
}

int main(){
	cin >> n >> m;
	for(int i=1;i<=n;i++)	cin >> a[i];
	l = 0, r = 1e9;
	while(l <= r){
		mid = (l + r) / 2;/
		if(check(mid))	l = mid + 1;
		else	r = mid - 1;
	}
	cout << r << endl;
	return 0;
}
```
写题解不易，如果这篇文章帮到你了，别忘了点个赞哦！