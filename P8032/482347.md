### 解题思路

首先定义一个 $k$ 来判断每次输出多少个空格，然后分别定义两个循环和一个下标 $i$ 来遍历：

> + 先看 $s_i$ 是不是 `{`，是就先输出 $k$ 个空格以及输出 `{`，再空格往后推两位：$k \gets k+2$，且换行后 $i \gets i+1$ 然后跳出本次遍历。
> + 再看 $s_i$ 是不是 `}`，这里是注意，还要判断之前的 $s_{i-1}$ 是不是小写字母，是就还要帮忙换一个行，再**先**将空格往前推两位：$k \gets k-2$，**然后**输出 $k$ 个空格和输出 `}` 显然发现，之所以先变化了 $k$，是因为如果**后**变化 $k$ 就会让 `}` 延迟更新，并且缩进等级与中间的字母一样。作为 `}`，就代表着一段的结尾，所以还要看 $s_{i+1}$ 是不是 `,`，是就先输出 `,` 再换行，然后跳出本次遍历。
> + 既然不属于括号，那就一定属于字母或者逗号，先输出 $k$ 个空格，然后进入内部循环查找字母。

>> + 如果遇上了 `}` 退出内部循环，并且 $i$ 不变，把 $s_i$ 给下一次外部循环中的判断语句处理。
>> + 如果遇上了 `,` 输出就 `,` 并且还要换一行，因为内部循环中的 `,` 前面一定只有字母，然后 $i \gets i+1$ 退出内部循环。
>> + 什么符号都不属于的只有字母了，现在输出 $s_i$，别换行，然后 $i \gets i+1$ 进入下一次内部循环。

### 代码
```cpp
#include <bits/stdc++.h>
using namespace std;
string s;
int k = 0;
int main() {
  cin >> s;
  int i = 0;
  while (i < s.size()) {
    if (s[i] == '{') {
      for (int j = 1; j <= k; j++) {
        cout << ' ';
      }
      cout << s[i] << "\n";
      k += 2;
      i++;
      continue;
    }

    if (s[i] == '}') {
      if (s[i - 1] >= 'a' && s[i - 1] <= 'z') {
        cout << endl;
      }
      k -= 2;
      for (int j = 1; j <= k; j++) {
        cout << ' ';
      }
      cout << s[i];
      if (s[i + 1] == ',') {
        cout << s[i + 1];
        i++;
      }
      cout << "\n";
      i++;
      continue;
    }

    for (int j = 1; j <= k; j++) {
      cout << ' ';
    }
    while (i < s.size()) {
      if (s[i] == '}') {
        break;  // i 不变，给下一个循环中的外部判断语句处理。
      }
      if (s[i] == ',') {
        cout << s[i];
        cout << "\n";
        i++;
        break;
      }
      cout << s[i];
      i++;
    }
  }

  return 0;
}
```