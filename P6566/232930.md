听说好多人这次都 $AK$ 了，~~我好惭愧呀（第三题全*wa*）。~~

好的，絮絮叨叨的话题结束了。我们要开始严肃的讲解了。

但在此之前，需要有几个问题向大家明确：

1、题目输入的是 _**星星**_ ，而不是 _**星座**_ 

2、看清题目描述，左边、左上、上面、右上、右边、右下、下面、左下 8 个位置的 _**星星**_为_**星座**_。

3、包含的 _**星星**_ 数量相同的 _**星座**_ 被视为一个 _**星系**_ （一个 _**星系**_ 中的 _**星座**_ 不一定相邻）， _**星系**_ 的大小为 _**星系**_ 中包含的所有 _**星星**_ 数量。

4、问题求的是星空中有多少个 _**星系**_ ，_**星星**_或_**星座**_；以及最大的 _**星系**_ 有多大，而不是 _**星星**_  或 _**星座**_ 的面积。

好了，明确了这几个项，就可以来做题了。

一眼就可以看出，这道题最简单的做法是$BFS$,因为文中提到了八方向。所以，我们可以利用广搜求出星座的数量以及每一个星座的面积，存入$a$数组。

再用桶数组存每个面积星座的数量，然后根据最大值累加星系的数量，并求出最大的面积星座，注意可以用 $bb[i]*i$
计算，最后输出。

我们重点来讲一讲广搜：

代码加注释：
```cpp
void bfs(int x,int y)//由一点计算出星座的面积
{
	int h=0,t=1,cx,cy;//和往常一样哦
	c[1][1]=x;c[1][2]=y;a[++xx]=1;//用c[1][1]标记行，用c[1][2]标记列,统计新星座的面积。
	b[x][y]=0;//把这个点标记为0，变为走过。
	while(h<=t)
	{
		h++;
		for(int i=1;i<=8;i++)//八方向
		{
			cx=c[h][1]+dx[i];
			cy=c[h][2]+dy[i];//计算一下通过八方向的行和列。
			if(cx<1||cy<1||cx>n||cy>m||b[cx][cy]==0) continue;//越界或走过就下一个循环
			t++;
			c[t][1]=cx;c[t][2]=cy;//标记
			b[cx][cy]=0;a[xx]++;//这个点标记，星座的面积增加
		}
	}
}
```

好了，这里是  **~~全~~** 代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,m,xx,a[150000],c[1500*1500+100][5],b[1600][1600],weimx,ans,bb[100010];
int mx;
string st;
char ch;
const int dx[]={0,1,1,0,-1,-1,-1,0,1};
const int dy[]={0,0,1,1,1,0,-1,-1,-1};
void bfs(int x,int y)
{
	int h=0,t=1,cx,cy;
	c[1][1]=x;c[1][2]=y;a[++xx]=1;
	b[x][y]=0;
	while(h<=t)
	{
		h++;
		for(int i=1;i<=8;i++)
		{
			cx=c[h][1]+dx[i];
			cy=c[h][2]+dy[i];
			if(cx<1||cy<1||cx>n||cy>m||b[cx][cy]==0) continue;
			t++;
			c[t][1]=cx;c[t][2]=cy;
			b[cx][cy]=0;a[xx]++;
		}
	}
}
int main()
{
	cin>>n>>m;
	getline(cin,st);
	for(int i=1;i<=n;i++)
	{
		for(int j=1;j<=m;j++)
		{
			ch=getchar();
			if(ch=='*') b[i][j]=1;
		}
		getline(cin,st);
	}
	for(int i=1;i<=n;i++)
	  for(int j=1;j<=m;j++)
	      if(b[i][j]) bfs(i,j);
	sort(a+1,a+xx+1);//这一段其实不用
	for(int i=1;i<=xx;i++)
	{
		bb[a[i]]++;
		weimx=max(weimx,a[i]);
	}//统计b数组
	for(int i=1;i<=weimx;i++)
	{
		if(bb[i]) ans++;
		mx=max(mx,bb[i]*i);
	}//求问题
	cout<<ans<<" "<<mx<<"\n";
	return 0;
}
```

认真写题解的我给认真看题解的你们一个赞$o$  $!$