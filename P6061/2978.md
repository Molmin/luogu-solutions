下面是官方题解。

题意简述：用环来覆盖一张图的最小代价。

## 第一档部分分

$30 \%$ 暴力的去枚举所有可能的覆盖方案。

所有 $w_i=0$ :用点覆盖需要支付点权的代价，而环覆盖没有代价。用类似贪心的思想，尽可能多的用环去覆盖节点即可。

## 第二档部分分

$n=m$ ,所有点出度为 $1$ :整张图是一个巨大的环，那么只有两种可能：全部使用点覆盖/用一个大环覆盖。判断下即可。

## 正解

我们发现 $n$ 其实非常小，这个复杂度允许我们先进行一次floyed预处理，直接求出点对之间的最短路

然后我们回到问题本身，我们希望求得的方案是把图中所有节点全部覆盖，并且代价最小，这跟二分图的完美匹配很接近。

所以我们建造这样一个辅助图，两边都有 $n$ 个节点，对于原图中的点对 $u,v$ ，在左边的 $u$ 向右边的 $v$ 连一条边权为 $dis[u][v]$
的边。之后再把每一个左边的 $u$ 向右边的 $u$ 连接一条边权为 $a[u]$ 的 边。

我们发现这张图一定存在完美匹配，那么进一步的，我们求出最小代价的完美匹配就是答案。

接下来就是标准套路，采用KM算法或者费用流都可以解决，但是费用流在本题实际表现不如KM。