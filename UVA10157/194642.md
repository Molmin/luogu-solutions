题目是什么意思呢？？

![](https://cdn.luogu.com.cn/upload/image_hosting/p4zt2w3p.png)

翻译一下（不一定是准的，大概是这样）

```cpp
设 X 是一个关于圆扩号的表达式的集合。X 中的元素仅由“（”或 “）”组成，定义为：

空的字符串属于X
若A属于X，则(A)也属于 X
若A,B属于X，则它们的串连AB也属于X
例如下面是构造正确的圆括号的表达式（所以属于X）

()(())()
(()(()))
再如下面是构造不正确的圆括号的表达式（所以不属于X）

(()))(()
())(()
假设E是一个构造正确的表达式（所以它属于X），它的长度D(E)为其中单个括号的个数。它的深度定义如下：

若E为空，则D(E)=0
若E=(A)，A属于X，则D(E)=D(A)+1
若E=AB，A,B属于E，则D(E)=MAX(D(A),D(B))
例如："()(())()"的长度为8，深度为2。你的任务是告诉你一个构造正确的表达式的长度和深度，计算该表达式可能有几种。

数据输入：
多行，每行两个整数 n,d (2<=n<=300 , 1<=d<=150)。

最多有20行，也有可能为空。

数据输出：
每行一个整数，表示满足条件的表达式的个数。

样例说明：
(())() ()(()) (()())

```

这样就好做多了

可以再提炼一下内容，题目就是在说：

```cpp
给你n个括号，求合法的匹配中，深度不超过d的组合数。

```

明白多了！

很像卡塔兰数，可以利用卡塔兰数的递推公式求解

**dp卡特兰数高精度**

我们可以把最左边的“(”和其配对的“)”看成一组分界线，它们把剩余的括号分成了左右两部分，其中左边的深度最多为d-1，右边部分的深度最多为d。

接下来枚举左右两边的括号数，把每种情况累加即可。

首先 $Dp_{L,D}$ 表示 长度为 L， 深度最大为 D 的字符串种数。

$ 0\le i\le k-1 $

$Dp_{L,D}=\sum{Dp_{k,j-1}\times Dp_{L-k-1,j}}$ 

递推，k对括号分成两组，

左边i个生成串A，右边$k-1-i$个生成串B，

还有一对在A外，形成（A）B形式；

这时A的深度最大为$d-1$，B的深度最大为 $d$

深度为$d $ 时方案数：$Dp_{k,d}-Dp_{k,d-1}$

最后把所有的都加起来（做一遍前缀和）

这样子，答案不就是：$Dp_{n/2,d}-Dp_{n/2,d-1}$

好了，已经提供了整个思路了，代码也不在话下了

希望通过题解

```cpp
关于此，我确信已发现了一种美妙的证法 ，可惜这里空白的地方太小，写不下。
			
            	-----jun头吉吉

```

[jun头吉吉](https://www.luogu.com.cn/user/174304#main)

在这里已经有了完整思路，祝愿看到的人早日AC
