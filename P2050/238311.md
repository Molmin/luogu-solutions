建图别的题解也说得差不多了，我也是看的题解 /dog  

## 我主要想说一下 思路和负环 ##  

noi的题多数是一个比较裸的的东西，加上巧妙的优化就成了一道有区分度的~~好题~~  
这道题也是一样的，先考虑一下每个人的等待时间是什么？？？  
**其实**假如一个厨师一共做了4个菜，花费依次是$c1,c2,c3,c4$,那我现在的等待时间其实就是$4*c1+3*c2+2*c3+c4$,所以我可以得到一个性质，就是每个厨师做菜花费的时间是$1*c1+2*c2+3*c3+...+n*cn$  
那有了这个性质，我显然可以把一个厨师拆成若干个，这样我知道这个厨师的系数k，我把这个厨师的当前状态记为$(i,k)$，我就可以优美且明确的连出一条$c=1,w=cost*k$的一条边给每个菜，因为一个厨师在一个系数的情况下只能用一次，直接从源点来一条$c=1,w=0$即可  
题中说了每种菜有多少个，那我就把每个种类建一个点，再把这个点连给汇点一条$c=p[i],w=0$  

### 这样图就建好了 ###

下来就是模板时间，讲到这里[P2053 修车](https://www.luogu.com.cn/record/43867988)这道题你就会做了，但在这道题中你会拿到60分的tle，常规操作，我现在要考虑如何优化  
tips:如果一个厨师现在$(i,1)$的状态还没用，他会使用$(i,2)$这个状态吗？？？  

显然他不会，但我在建完静态图之后，我傻不拉几的把这些状态都搜了一遍，这样不好，那我是否可以不把这个图全部建出来，而是在每个厨师把$(i,j)$这个状态用完之后再把$(i,j+1)$这个状态建出来,显然可以，那我就先把初始的图建出来，暴力增广，每次增广完之后再把当前用掉的点分裂出新节点。  

然后这道题就完了，我下来主要讲一下如何避免**负环**出现  

我加点的时候如果会出现负环会是什么情况呢
![来自Yazhi很丑的图片](https://cdn.luogu.com.cn/upload/image_hosting/7a986vgs.png)  
显然我的$c1>c2$,如果不满足这个性质，我肯定先增广$c1$,所以其实这样一次一次找增广路动态加边是不会出现负环的

评论区里还有一些错，比如**第三个数据**出现了负环，因为第三个数据把一个厨师的跑满了，它默认把(1,p+1)建出来了，如果你把每个种类的点当作m*p+i，就可能重点导致错误