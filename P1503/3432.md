这道题可以这么做：

对于每一次询问来说，其实就是想知道，从X这个点，向右能有多少个连续的点，向左能有多少个连续的点，那么对于一个方向考虑，另一个方向同理。以向左为例：

我们用a[i]=1代表i这个方式没有被摧毁，a[i]=0表示已经被摧毁，那么sum[i]就表示从1~i一共有多少个房子没有被摧毁，有了这个东西以后，则有如下发现：对于0<=j<i，如果sum[i]-sum[j]=i-j,则说明[i+1,j]这个连续的区间的房子都是完好的。

有了这个发现，我们可以用一个树状数组来表示每个点是否是完好的，如果从完好到被摧毁，则insert(i,-1),如果从摧毁到修复，则insert(i,1)。维护了这个东西以后，每次查询的时候，for循环从i开始到左边，找到最远的sum[i]-sum[j]=i-j即可。

考虑到如果最远的那个点是k,那么k的右边一定都满足sum[i]-sum[j]=i-j，而k的左边一定都不满足，因此可以二分来做。

时间复杂度O(m\*log(n)\*log(n))
