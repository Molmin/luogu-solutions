我们来讲一下树上莫队。

   前置技能：莫队，括号序列

   我们如果要维护子树的信息的话，只要把树展开成DFS序就好了。

   那么如果是路径呢？

               1

            /   |    \

          2     3     4

                  |

                  5

   我们在进入和退出一个节点时都把这个点扔到序列里，那么我们发现上面这个数的序列为：

        1 2 2 3 5 5 3 4 4 1

   我们记一个点的第一次出现的位置为st[i],第二次为ed[i]

     那么比如我们要找1 到 5 的路径， 我们取 st[1] 到 st[5] 这一段区间，我们发现在 1-5上的点出现了一次，而不在这条路径的点出现了偶数次。

    -> 一条 从 a 连向其子孙 b 的路径，我们可以取 st[a] 到 st[b] 的区间。（st[a]<=st[b]）

    若我们要从2 到 5 呢？

    我们取ed[2]到st[5],我们发现在 2-5上的点出现了一次，而不在这条路径的点出现了偶数次。但是LCA 1却没有出现，那么我们在统计答案的时候把这玩意加上就好了。

    -> 一般的， 一条 由 a  连向 非子孙 非祖宗点 b的路径，我们可以取 ed[a] 到 st[b] 的区间再加上lca 对答案的贡献。（st[a]<=st[b]）
    这道题显然可以这样维护：
    ```
[代码在这里](http://www.cnblogs.com/rrsb/p/8672557.html)