讲起来我有好几个同学就叫 Madeline（

这道题目应该说是一个很巧妙的证明题，十分建议大家来做一做，可以先不要看题解。

## 题意

给定 $n$ 个点，编号为 $i$ 的点权值为 $w_i=(i+1)^2-1$，任意两点 $x$ 和 $y$ 的连边权值为 $\gcd(w_x,w_y)$，对于这样的一个图，求其最小生成树的边权之和。

## 解析

然而你想跑 $\rm\small Kruskal$ 还是 $\rm\small Prim$？秉持着面向数据范围做题的思想，$n\le 10^{18}$ 的极限数据还是让我打消了这个念头。这样的一个数据范围让人想到可能是 $O(\log n)$ 或者 $O(1)$ 的复杂度。那这就显然的数论推导/结论题了。

那我们来写一篇简单的数学推导：

设 $f(x)=(x+1)^2-1$。

首先是整式乘法加因式分解易得：

$$f(x)=x^2+2x+1-1=x^2+2x=x(2+x)$$

为了令边权尽可能小，我们会对 $f(x)$ 和 $f(x-1)$ 求最大公约数，易得：

$$\gcd\left(f(x),f(x-1)\right)=\gcd(x(2+x),(x+1)(x+3))$$

这时候很有意思了，我们来看看 $x(2+x)$ 和 $(x+1)(x+3)$ 的关系。

首先 $x$ 和 $x+1$ 互质，$x+2$ 和 $x+3$ 互质，$x+1$ 与 $x+2$ 互质是非常显然的事实了（相差为 $1$），那么可能存在的非互质情况就源于 $x$ 和 $x+3$，那么他们最大的公因数就是 $3$，于是只能和 $2$ 连接。

接下来对几组 $f(x)$ 做下测试，会发现对于 $x=4,10$ 的情况是特殊的，那么要做特殊处理。即 $x+1$，其余情况均为 $x-1$，也就是和 $1$ 相连。

## 结论

$f(x)=\begin{cases}x+1&x=4\\x+1&x=10\\x-1&\rm Otherwise\end{cases}$

