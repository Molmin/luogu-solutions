首先有这个平局这个东西存在，使得次数可能达到无限。我们不列无穷级数，想办法把这个平局给搞掉。我们可以重新定义「一次」为从当前开始第一次分出胜负，这样次数显然是有限的，就很好求。而这两者的转化恰好是成比例的，原定义下的答案显然是新定义下的答案乘以「新的一次在原定义下的期望次数」，而这显然是个定值。设它为 $e$，显然满足 $e=1+Ce$，所以 $e=\dfrac{1}{1-C}$（这个 $e$ 其实也能列无穷级数求）。

然后考虑新问题的答案。那次数显然少则 $n$，多则 $2n-1$，枚举一下，考虑每种的概率是多少。假设 A 赢了，最后一步显然一定要是 A，前面要有 $n-1$ 个 A 和 $i-n$ 个 B，总分布方式数是 $\dbinom{i-1}{n-1}$。而每种出现的概率为 $A^nB^{i-n}$。B 赢的话就镜像一波，容易列出 $i$ 次的概率。然后乘以 $ie$ 加起来就是答案的期望值啦。

代码就不用给了吧 qwq