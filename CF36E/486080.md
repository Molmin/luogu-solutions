首先，覆盖所有边恰一次，妥妥的欧拉路模型。

然后就先考虑如何判无解了。怎样无解呢？

1. 有少于$ 2 $条边。（如果不是样例给了，大概很难注意到……）

1. 有超过$ 2 $个连通块。

1. 仅有一个连通块，且连通块中奇点数大于$ 4$。

1. 有两个连通块，且其中某一个块中奇点数大于$ 2$。

那么，是否所有条件都满足，就一定有解呢？

是的。

假如从**欧拉路**的方向考虑，就会非常麻烦，因为你找出的欧拉回路删去后可能使得这张图分成许多不连通的图。

因此，这里有一个很好的思路：在两个奇点间连边，这样就会转换为**欧拉回路**，然后在欧拉回路上断去新加的边就行了。

具体而言，对于两个连通块的情形，显然上述结论正确，因为每个连通块都必然符合条件。

然后，对于仅有一个连通块的情形，其中可能有$ 0 $个，$2$ 个或是 $4$ 个奇点。

$0$ 个奇点就搜出回路然后随便砍两刀断环成链即可。

$2$ 个奇点就在额外连的那条边处砍一刀，然后再随便砍一刀就行。

$4$ 个奇点这两刀必须砍在额外的两条边的位置。这形成的两条链必然非空，因为这两条新边必然无公共端点，即其在欧拉环上必然不相邻。

时间复杂度 $O(m)$。