感觉前面两篇题解写的不是很清楚，所以写了一篇给萌新看的，神犇请绕道。

~~顺便说一句本题的翻译是我提供的。~~


首先看思路，我们知道题目中 $2^v-1$ 可以表示为$\sum_{i=0}^{v-1}2^{i}$，故要记录每个次幂的出现情况，然而本题中 $a_i<2\times10^9$，所以不能开数组，要使用 STL 中的 map。

因为 $2^n+2^n=2^{n+1}$，所以当我们每次输入一个次幂 $x$ 时，如果这个 $x$ 已经出现过，我们就应该将 $x+1$ 次幂出现的数量加一。同理，如果 $x+1$ 次幂也已经出现过，那么就要将 $x+2$ 次幂加一……直到发现 $x+i$ 次幂尚未出现过为止。如此一来可以保证最后所有次幂的个数都不大于 $1$。

上述过程可以用以下代码实现：

```
while(sum.count(x))//x次幂已有 
sum.erase(x++);//清除并更新x 
++sum[x];//此时x未出现过，所以加一
```
由于最后题目求的是要补上多少个次幂，所以我们应统计出已有的最高次幂，并以其作为题目里的 $v$，也就是说从 $0$ 到这个最大值中所有次幂我们都需要，即我们需要 $v+1$ 个次幂，那么答案就是 $v+1$ 减去 map 的 size。

代码如下

```cpp
#include<iostream>
#include<map>
using namespace std;
int n,v,ans;
map<int,int>sum;
int main(){
	cin>>n; 
	for(int i=1;i<=n;++i){
		int x; cin>>x;
		while(sum.count(x))//x次幂已有 
			sum.erase(x++);//清除并更新x 
		++sum[x];//此时x未出现过，所以加一
		v=max(v,x);//同时更新2次幂的最大值 
	}
	cout<<v+1-sum.size()<<endl;//由于还要考虑是否需要0次幂，所以加1 
	return 0;
}
```

