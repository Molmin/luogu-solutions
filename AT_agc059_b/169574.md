## B - Arrange Your Balls

我们令出现过的颜色种类数为 $m$，答案的上界是 $m$（直接排序即可），下界是 $m-1$，证明见下：

- 我们吧每种颜色看作一个点，由于要构成一个环，所有所有的点一定是联通的，每条边都会对答案有 $1$ 的贡献，所以最有情况是一棵树，此时答案为 $m-1$。

于是我们只要考虑能否构造出一棵树即可。每种颜色的出现次数代表了这种颜色在树上度数的上界（度数不够可以原地跳）。

只要最多边数 $\ge m-1$，一定能构造出来。考虑将所有点按度数从大到小排序，然后维护两个指针从右往左扫，左指针表示最右边的剩余度数 $\not=1$ 的节点，不行了就往左移，拿 $1$ 的度数用于连向父亲。然后 dfs 整棵树即可。

提交记录：[link](https://atcoder.jp/contests/agc059/submissions/37026547)。