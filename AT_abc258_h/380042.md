题解的矩阵大小都是 $3$，提供一个矩阵大小为 $2$ 的做法。

考虑容斥，$dp_i$ 表示总和为 $A_i$，并且不出现除了 $A_i$ 其他前缀和的方案数，将 $A_{n+1}=S$，容易发现方程：

$$
dp_i=F_i-\sum_j dp_j\times F_{A_i-A_j}
$$

其中 $F_i$ 表示仅用奇数凑出的 $i$ 的方案数，打表发现 $F_i$ 为斐波那契数列。

然后用一个矩阵维护后面那坨求和，从 $\sum_j dp_j\times F_{A_{i-1}-A_j}$ 变为 $\sum_j dp_j\times F_{A_{i}-A_j}$ 即可。

矩阵就是斐波那契数列的矩阵，大小为 $2$。