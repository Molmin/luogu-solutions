超 级 多 合 一

#### Description

> 给定一个函数 $y=ax^2+bx+c$，并给定 $n$ 次操作：
> 1. 将函数向上平移 $k$ 位；
> 2. 将函数向右平移 $k$ 位；
> 3. 将函数关于 $(k_1,k_2)$ 对称；
> 4. 求函数在 $[k_1,k_2]$ 上的最大值和最小值；
> 5. 求函数与 $y'=ux^2+vx+w$ 是否有交点
>
> 回答第 4 次和第 5 次操作的答案，并在每次操作后输出当前函数的最值。

#### Solution

既然有一堆基本上互不相干的操作，我们就逐个处理。

**操作 1**：函数变为 $y=ax^2+bx+c+k$。

**操作 2**：函数变为 $y=a(x-k)^2+b(x-k)+c$，即 $ax^2+(b-2ak)x+ak^2-bk+c$。

**操作 3**：一个点 $(x,y)$ 经 $(k_1,k_2)$ 对称后是 $(2k_1-x,2k_2-y)$，代入式子即：

$$\begin{aligned}2k_2-y&=a(2k_1-x)^2+b(2k_1-x)^2+c\\y&=2k_2-a(2k_1-x)^2+b(2k_1-x)^2+c\\y&=-ax^2+(4ak_1+b)x-4ak_1^2-2bk_1+2k_2-c\end{aligned}$$

**操作 4**：分两种情况讨论：

- 对称轴经过 $[k_1,k_2]$，那么函数最值就是对称轴，另一个就是端点。
- 对称轴不经过 $[k_2,k_2]$，那么两个最值肯定都是观点。

判断即可，要对 $a$ 的正负性分类讨论。

**操作 5**：联立方程：

$$\begin{aligned}ax^2+bx+c&=ux^2+vx+w\\(a-u)x^2+(b-v)x+c-w&=0\end{aligned}$$

看做一个一元二次方程，列出 $\Delta$：

$$\begin{aligned}\Delta&=(b-v)^2-4(a-u)(c-w)\\&=b^2-2bv+v^2-4ac+4aw+4uc-4uw\end{aligned}$$

当 $\Delta \ge 0$ 时，两个函数有交点；当 $\Delta < 0$ 时，两个函数无交点。

**函数最值**：代入二次函数的顶点坐标公式 $\left(-\frac{b}{2a},\frac{4ac-b^2}{4a}\right)$ 的纵坐标。