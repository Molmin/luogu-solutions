无向图的度数和一定为偶数，于是我们可以得到所有答案奇偶性相同。

考虑怎么判定一个长度为 $n$ 的度数序列 $deg$ 是否合法。

先将 $deg$ 降序排序。

考虑长度为 $i$ 的前缀，考虑其度数和最大的情况，就是前 $i$ 个点两两有边，后 $n-i$ 个点 $j$ 向前面的 $\min(deg_j,i)$ 点有边，因此即为 $i(i-1)+\sum\limits_{j=i+1}^n \min(deg_j,i)$。

感性理解（大胆断言）一下，如果 $deg$ 的每个前缀都能满足这个度数和的限制 $\sum\limits_{j=1}^ideg_j \le i(i-1)+\sum\limits_{j=i+1}^n \min(deg_j,i)$，那么序列 $deg$ 必然合法。

~~然而事实上，如果你可以打开题面里的网址，你是可以找到一个 Erdos-Gallai 定理，内容即为以上。~~

由此我们也可以得到答案一定是一段区间：

+ 当未知点的度数 $X$ 小于某个界值 $L$，可能会在某个较前的 $i$，也就是 $deg_i < X$ 时已经不满足限制了，此时我们适当提高 $X$ 可以让限制变宽（即上面限制的右式变大），使其满足限制。

+ 当未知点的度数 $X$ 大于某个界值 $R$，可能会在某个较后的 $i$，也就是 $deg_i > X$ 时不再满足限制，此时我们适当降低 $X$ 可以让前缀度数和变小（即上面限制的左式变小），使其满足限制。

因此考虑二分 $L$ 和 $R$，如果在检查的过程中出现了不合法，则根据当前的 $deg_i$ 与二分值 $X$ 的关系判断将 $X$ 调小或调大。

二分出 $L$ 和 $R$ 后，再输出它们中所有奇偶性和已知点度数和相同的数即可。

总时间复杂度 $O(n \log n)$。

[code（duel 的时候没想清楚就直接写，最后写成 2log 了）](https://codeforces.com/contest/1091/submission/212790322)