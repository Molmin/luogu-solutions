### CF246E Blood Cousins Return

#### 题意

（我觉得翻译挺简洁的就不自己概括了）

> $~~~~$ 给定一片森林，每次询问一个节点的K-Son共有个多少不同的名字。一个节点的K-Son即为深度是该节点深度加K的节点。

---

#### 题解  

$~~~~$ 可以想到一道~~名字和~~内容和它很相似的题[CF246E](https://www.luogu.com.cn/problem/CF246E "求k级祖先的k级儿子个数") ，那道题分成两个部分，其中一部分就是求 $k$ 级儿子的个数，直接用 Dsu on tree 即可，具体来说，每次维护每个节点子树内不同深度的点的个数即可。  

$~~~~$ 这题不大一样，需要计算的是种类数而不是个数，但换个角度思考，我们可以把种类数看作去重过后的个数，那我们的 `cnt` 就要能够去重并且计算元素个数。  

$~~~~$ ~~直接一个 STL `set` 甩上去当`cnt`就行了.~~

$~~~~$ 现在的需求类似于 [P1972 [SDOI2009]HH的项链](https://www.luogu.com.cn/problem/P1972)，只是这是区间问题，那我们是不是可以尝试把这个树上的问题搞下来，变成区间的问题呢？  

$~~~~$ 当然可以！我们考虑到每个询问的对应区间深度一致，那就可以变成记录每个询问的区间深度，在 dfs序上两个端点的值，按深度排序后一次按深度对形成的区间求解即可。  

$~~~~$ 至于这个求解，理论上是要用 BIT 的，不会的话可以去看一下原题。但不知道 莫队 能不能卡过去awa.