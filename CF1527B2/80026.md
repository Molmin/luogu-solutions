在做这个题之前应该先搞清楚 B1 的逻辑。这也是为什么这次要搞出一个 B1 与 B2 的原因——一步跨到这里来是很难的。

如果 B1 切掉的话，应该会注意到这么个事情：除了平局，``0`` 的个数为偶数的时候后手必胜，奇数的时候先手必胜。考虑 ``0`` 的个数模 $4$ 为 $0$  的情况。这个情况一开始卡了我半天，我以为都是平局，其实不然。

考虑B的操作：A 一开始随机挑一个对称的 ```00``` （即$\cdots 0 \cdots 0 \cdots $，下称 ```00```）填上一个 ```1```，B 也跟着填，在**对称的地方**也填上 ```1```，使得整个式子还是为回文串（注意，这里不要转！）。这样模 $4$ 余 $0$ 就变成了模 $4$ 余 $2$！后面这个情况自然不用多说肯定是 B 赢——A 填一次我就转一次，然后先后易手，$4$ 个一周期，怎么搞都是 A 输。当然也可以就参照这个思路——只要非对称个数（**下称 ```01```**）

分析一下刚刚这个操作的本质——**不要回文串！** 我尽可能地把回文串丢给对方，让对方拿到回文串，我就有可能赢。想想奇数，奇数的时候也是如此——A先把中间堵上就变成了回文串，退化到之前的偶数回文，而这种情况后手必胜。

（下面简称：```0``` 的个数为奇数的回文串（长度为奇同时中央为 ```0```）——奇回文；```0``` 的个数为偶数的回文串——偶回文）

正文开始：

先说结论：**只要不是平局，先手必胜**。

注意到多个 ```01``` 和 $1$ 个 ```01``` 本质是一样的，只是重复次数不同，因而下面只分析非回文只含一个 ```01``` 的情况。

1、差一个 ```01``` 奇回文

考虑先手必胜操作：**转**。这样留给 B 的就是和 A 一样的局面，而且 B 还不能转，他只能选取非对称的 ```01``` 或者中央的 ```0``` 填上。如果选择 ```01``` 中的 ```0``` 填，那么留给 A 的就是奇回文——A 先手必胜；如果填中央的 ```0```，此时 A 先手，情况退化到下面的 2 情况：

2、差一个 ```01``` 偶回文

此时 A 填上 ```01``` 中的 ```0```，变成偶回文，B 先手，此时 A 后手必胜。

多个 ```01``` 的情况类似——只需要转，让 B 填 ```01```，A 就一直转。直到留下最后一个 ```01```，再执行上面所说的操作即可。

估计看到这里还有一个疑问：A 在上面的操作中要比 B 多掏钱，怎么保证回文结论的适用性？

对于 1 情况，拢共的 ```0``` 个数为偶，B 必然比 A 多掏钱。

对于 2 情况，```0``` 个数为奇，预处理操作中 A 多填了一个 ```1```，但是在偶回文情况中，先手比后手掏的钱要大于等于 ```2```，因而 A 必胜。

现在再讨论最后一个情况：平局。

显然 ```001``` 和 ```100``` 是平局。如果此时再插入更多对称的 ```11```，也不影响——比如 ```11010```。因而，此类情况的判定是：长度为奇，```01``` 仅一个，没有 ```00```。

（附记：整理自yj的想法，叶老师yyds）