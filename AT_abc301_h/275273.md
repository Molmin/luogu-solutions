基础图论。

考虑快速求出 $d(s, t)$，那么边权要 $+1$ 的边仅当边权等于 $d(s, t)$ 时答案可能为 $1$。求 $d(s, t)$ 可以建出 Kruskal 重构树，查两点 $\text{LCA}$ 点权得出。

考虑把询问离线，把相同的 $d(s, t)$ 的询问和相同边权的边放在一起考虑。边权 $< d(s, t)$ 的边在之前合并。现在问题变成了有一个图，询问假设删掉其中一条边，会不会使得两点不连通。边双缩点后，如果这条边在一个边双内，或者两点在同一边双内，答案显然为 $0$，否则查这条边是否在两点路径上即可。

时间复杂度 $O(m \log m)$。

[code](https://atcoder.jp/contests/abc301/submissions/41438878)