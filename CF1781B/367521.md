## 题目大意

有 $n$ 个人要去看电影，第 $i$ 个人有一个要求 $a_i$，你要从 $n$ 个人中选出 $x$ 个人，满足：

- 当第 $i$ 没被选时，$a_i>x$。（不然个个都去了不带他会生气）
- 当第 $i$ 被选时，$a_i<x$。（不然去了没人陪也会生气）

求方案数。

## 解题思路

### 分析题目

稍微分析一些题目就会发现：

- 要求一样的人总是会**一起去**。
- 当 $a_i<a_j$ 且第 $j$ 个人去了，那第 $i$ 肯定也会去。换句话说就是**当一个人要去，那条件比他低的人都要去**。

根据特性一，我们可以想到把所有条件相同的放一起，也就是统计每个条件的人数。

比如第三个样例：
```
6 0 3 3 6 7 2 7
```
可以转化成：

$
\def\arraystretch{1.2}
\begin{array}{|c|c|c|c|c|c|c|c|c|} \hline
条件 & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\ \hline
人数 & 1 & 0 & 1 & 2 & 0 & 0 & 2 & 2 \\ \hline
\end{array}
$

设此数组为数组 $b$。

然后根据特性二，我们可以想到用**前缀和**。

设 $sum_i = \sum_{j=0}^i b_j$。

### 解题方法

数据范围总是能提示我们：

$ \sum n≤2×10^5 $

这告诉我们时间复杂度是 $O(n)$ 的。

我们考虑用**枚举人数**的方法。

假设我们选了 $i$ 个人，则条件 $\le i$ 的人都**不**满足**不去**的要求 $(a_i>x)$，即要去的人数为 $sum_{i}$。

所以人数 $i$ 合法的条件一：$i=sum_{i}$。

但是，此时条件等于 $i$ 的人就说话了：“如果你带我去的话，我就**不**满足**去**的要求 $(a_i<x)$，那我就生气了！”。

这样我们就遇到了一个尴尬的情况，对于条件等于 $i$ 的人，不能带他去，也不能不带他去。所以想要人数 $i$ 合法，必须不能有这种尴尬的人。

因此人数 $i$ 合法的条件二：$b_i=0$。

## 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
const int N=2e5+10;
int T,n,a[N],b[N],sum[N],ans; 
int main(){
	cin>>T;
	while(T--){
		cin>>n;
		ans=0;
		for(int i=0;i<=n;i++)b[i]=sum[i]=0;
		for(int i=1;i<=n;i++){
			scanf("%d",&a[i]);
			b[a[i]]++;
		}
		sum[0]=b[0];
		for(int i=1;i<=n;i++)sum[i]=sum[i-1]+b[i];
		for(int i=0;i<=n;i++)if(sum[i]==i&&b[i]==0)ans++;
		printf("%d\n",ans);
	}
}
```
这么简短的代码不会有人看不懂吧……