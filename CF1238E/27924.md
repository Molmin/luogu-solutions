**使用算法分析**

一看数据范围$m \leq 20$，就差没把状压贴脸上了

然后Educational Div2的E题是不会出状压搜索的，而且$m \leq 20$的数据范围搜索分分钟就TLE掉，那么考虑状压dp

我们用$Count(i)$表示$i$中$1$的个数

我们用$f_i$表示当前状态为$i$，keyboard中前$Count(s)$的元素均为$s$中的元素的最小代价

**无后效性**

我们用$cnt_{i,j}$表示元素i和元素j相邻的次数，那么转移的时候增加的价值$就变成了i与j之间的相邻次数*(集合的相邻元素之和-集合外的相邻元素之和)$

**状态转移方程**

我们发现加入元素j的时候，$f_{i|(1<<j)}=min \{f_i+sum\}$，其中$sum$表示往集合i中加入j元素的代价，计算公式为$sum=(\sum_{k \in i} cnt_{j,k}-\sum_{k \notin i} cnt_{j,k})*Count(i)$

**循环边界条件**

$i \in [0,2^m)$

$j,k \in [0,m)$

**时间复杂度**

时间复杂度为$(2^m*m^2)$，有卡常，注意不要开long long。