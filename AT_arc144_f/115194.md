垃圾题。这种大分类讨论什么时候滚出 ARC？（所以说虽然切了道 Ag 题也没啥好说的，普通打表题一道，难点也不在 AC 而在于一遍 AC 或者赛时 AC）

首先问题不弱于判断 Alice 是否有必胜策略，因此我们需要先观察出这个 SG 函数的规律。

打表可以发现我们需要大致分 $a=0,2a\le m$ 和 $2a>m$ 讨论。

> Case 1. $a=0$。

打个表发现 $SG(x)=\lfloor\dfrac{x}{m}\rfloor$。

这样答案也好求，直接几个 if 即可。题解里不赘述。

> Case 2. $2a\le m$。

打个表可以发现如下规律：

- $SG(x)\in\{0,1,2\}$。
- 对于 $x\ge m+2a$，$SG(x)=SG(x-m)$。
- 对于 $x<m$，$SG(x)=\lfloor\dfrac{x}{a}\rfloor\bmod 2$。
- 对于 $m\le x<2m$，$SG(x)=2$ 的位置是所有在 $[m+a,m+2a-1]$ 中满足 $\lfloor\dfrac{x}{a}\rfloor\bmod 2\ne\lfloor\dfrac{x-m}{a}\rfloor\bmod 2$ 的 $x$ 组成的集合。

于是还是直接预处理出第二个周期中 $SG(x)=2$ 的位置，然后几个 if 即可算出 $SG(x)$，而如果要求前缀中 $SG(x)=v$ 的个数，那么当然还是几个 if 搞定的事，实在不行看代码。

> Case 3. $2a>m$。

还是分周期处理。以 $m=29,a=27$ 为例打表观察规律。将 $SG(xm+y)$ 的值写入表格第 $x$ 行 $y$ 列，可以得到如下表格：

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 2 2 
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 0 0 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 1 1 0 0 4 4 
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 2 2 1 1 0 0 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 3 3 2 2 1 1 0 0 6 6 
6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 5 5 4 4 3 3 2 2 1 1 0 0 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 8 8 
8 8 8 8 8 8 8 8 8 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 9 9 
9 9 9 9 9 9 9 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 10 10 
10 10 10 10 10 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 11 11 
11 11 11 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 12 12 
12 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 13 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
13 12 12 11 11 10 10 9 9 8 8 7 7 6 6 5 5 4 4 3 3 2 2 1 1 0 0 14 13 
```

首先前 $a$ 个元素都是 $0$，在 $[a,a+m)$ 这一段区间中，SG 值 $\bmod m<a-(m-a)$ 的部分与上一行相比加了 $1$，其他位置都没有变化，同理，在 $[a+m,a+2m)$，$\bmod m<a-2(m-a)$ 的部分与上一行相比加了 $1$，其他位置均没变。由此我们可以得到，在 $[a+(k-1)m,a+km)$ 这一部分中， $\bmod m<a-k(m-a)$ 的部分与上一行相比加了 $1$，其他位置也没变（严谨地来说，这里的 $<$ 定义为在 $a-k(m-a)$ 之前）。还是几个可以用 if 和上下取整搞定的事情。

总之这题的难点就在于 if if if……感觉挺无语的（