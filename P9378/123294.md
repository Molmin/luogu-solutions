### B. [P9378 [THUPC 2023 决赛] 物理实验](https://www.luogu.com.cn/problem/P9378)

如果可以判断答案是否包含集合 $S$，就可以按权值从大到小加实验并检查是否合法。

依次处理每一轮宇宙射线：按脆弱度从小到大枚举每个实验。对于已经考虑过的实验，跳过。

- 若当前实验属于 $S$，则必须在这一轮宇宙射线之前完成实验。
- 若当前实验不属于 $S$，则一定选择让宇宙射线轰击该实验，否则不优（调整即可）。退出这一轮宇宙射线。

若退出第 $i$ 轮宇宙射线时，必须完成的实验数量大于 $a_i$，则答案不可以包含集合 $S$。否则将剩下所有属于 $S$ 但未被完成的实验加入序列，可得对应构造。

时间复杂度 $\mathcal{O}(n ^ 3)$。[代码](https://uoj.ac/submission/632975)。