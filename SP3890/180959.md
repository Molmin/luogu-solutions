作业题发现没题解，来补一篇用 $\varphi$ 做的。
## 题意
对于一个 $a$ 行 $b$ 列的矩形，记 $f(a,b)$ 为被对角线穿过的格子数，求有多少对 $(a,b)$ 满足 $f(a,b)=n$。($(a,b)$ 与 $(a,b)$ 算同一种)
## $\operatorname{Sol}$
画图可以发现一个显然的结论：若 $\gcd(a,b)=1$，则 $f(a,b)=a+b-1$。对于 $\gcd(a,b)>1$ 的情况，若将 $a$ 和 $b$ 同时除以 $\gcd(a,b)$，方案数不会发生实质的改变。那么我们枚举 $n$ 的约数 $d$，只需要考虑在 $\gcd(a,b)=1$ 的情况下 $f(a,b)=d$ 的情况即可。

式子化一下，即为 $b=d-a+1$,

所以即求 
$$\sum_{d|n}\sum_{i=1}^d[\gcd(i,d-i+1)=1]$$
根据 $\gcd$ 的性质，显然 $\gcd(i,d-i+1)=\gcd(i,d+1)$

所以原式化成
$$\sum_{d|n}\sum_{i=1}^d[\gcd(i,d+1)=1]$$

发现后面的 $\sum$ 就是 $\varphi$ 的定义式，所以即求
$$\sum_{d|n}\varphi(d+1)$$

注意 $(a,b)$ 和 $(b,a)$ 属于同种情况，所以在 $d\not= 1$ 时， $\varphi(d+1)$ 需要除以二；在 $d=1$ 时，相当于正方形，不需除以二。

复杂度 $O(N)$。