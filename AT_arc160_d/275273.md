搞笑题，我不会做，我更搞笑。

考虑逆序操作，即初始有一个全 $0$ 序列，每次单点加 $k$ 或者长为 $k$ 区间加 $1$。考虑把一个操作集合唯一对应到一个最终序列，不难发现只要限制每个区间加 $1$ 的次数 $< k$ 即可。因为如果正序操作，加上了限制，每个点被每个区间加的次数能算出来。

于是题目变成了统计序列 $b_{1 \sim 2n - k + 1}$ 个数，要求：

- $\sum\limits_{i=1}^{2n - k + 1} b_i = \frac{m}{k}$
- $\forall i \in [1, n - k + 1], b_i < k$

这是一个有上界的插板法，容斥，钦定 $i$ 个元素不合法，其余任意，那我们得到：

$$ans = \sum\limits_{i=0}^{n-k+1} (-1)^i \binom{n-k+1}{i} \binom{\frac{m}{k}-ik+2n-k}{2n-k}$$

暴力计算组合数，时间复杂度 $O(n^2 \log mod)$。

[code](https://atcoder.jp/contests/arc160/submissions/41439136)