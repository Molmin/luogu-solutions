## 分析：
撇开乱七八糟的操作，提供一份十分清爽的题解。

这题的难点，仅仅是**建图！建图！！建图！！！**

- ### 第一张图：

超源连向所有行的右手第一格，然后按顺序连接格子，由于不是最终建图所以没有边权，点权是当前的能源价值，最后连到超汇。

当然，可能点对之间存在保护关系，于是从保护方向被保护方连边。

- ### 第二张图：

我们发现这个DAG里出现本该没有的自环，我们可以知道原本子环内以及子环后可以到的点现在都到不了了，因为如果要到达就必须经过那个环，而环内植物可以两两保护。。

于是我们就可以缩点了，别惊讶，缩点是图论里的重要算法，这正体现了本题极高的综合性。

缩完点我们可以利用深搜来标记子环及子环后的点（除超汇），把他们通过打标记给删掉。

- ### 第三张图：

如果你要吃了某个植物，那首先你要把保护它的所有植物吃掉才行，这让你想到啥？

没错，最大权独立子图的定义即是如此。

于是我们把边全部反向，按照求最大权独立子图的方案建图（正点权连超源，负点权连超汇，原本边无限流），然后跑完直接正点权和-最小割即可。

值得一提的是，原来的超源和超汇作为点权为0的点，仍要作为原来图的一部分参与网络流。

然后就没啦，代码又臭又长就不放了。