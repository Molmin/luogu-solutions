
模拟题，建议评绿。

# 题意 & 翻译

有 $t$ 个 $8 \times 8$ 的国际象棋棋盘，用 $.$ 表示空的格子，棋盘上可能出现的字母为 ``KQRBHP`` 和 ``kqrbhp``，分别表示黑方子和白方子的王、后、车、主教、马、兵。

对于每个棋盘输出这些信息：

- $\text{Safe}$：即双方的王都没有被威胁

- $\text{Impossible}$：双方的王都受到了威胁

- $\text{Black/White Check}$：黑方或白方被威胁了

- $\text{Black/White Checkmate}$：黑方或白方被将死了，即使用任何方法都无法摆脱威胁。

# 思路

首先先明确国际象棋的走棋规则：

- 车走直线

- 马走日字，可以跳过其它棋子

- 主教（象）走对角线

- 皇后既能走直线，也能走对角线

- 王只能向八个方向走一格

- 兵吃子时斜着吃，如果它在之前还没有动过，可以向前走两格，否则只能走一格。如果兵走到底线时可以升变，可以变成后、车、马、主教。

（由于题目中并没有特殊规定，所以我们只能假设它是按照普通国际象棋的规则来走棋）

此题分为两步：

## 判断是否被将

分白方黑方，即按照走棋方法枚举黑方与白方的每一颗子是否将到对方王。若双方都没被将或双方都被将了。就输出 $\text{Safe}$ 或 $\text{Impossible}$。

如果只有一方被将，那么我们就要考虑它只是被将了还是被将死了。

## 判断一方是否被将死

国际象棋中的将死判断颇为复杂，主要有三种可以解除威胁的方法：

**退**

即王离开这一格。还需要判断王下一步走的格子是否在某个对方子的攻击范围内。

**挡**

使用己方的棋子使王脱离威胁，即使用别的子使王离开攻击范围。

**吃**

吃掉对方威胁王的子。

如果三个都不可行，那么王就被将死了。所以输出 $\text{Black/White Checkmate}$。如果有一个可行，那么输出 $\text{Black/White Check} $。

实际上这题思路不难想，对国际象棋有一定了解的人都想得到。但是模拟的过程非常繁杂。

# 代码

模拟的代码太丑了，不放了。