考虑到 $M \leq 10^{18}$ 且 $19! < 10^{18} < 20!$，所以如果区间有四个数以上时，区间长度最多只有 $19$。还有，当区间仅有 $4$ 个数时，最小数不到 $2.5\cdot 10^5$。

所以对于区间长度大于等于 $4$ 的，直接暴力开 `map` 存下最优的答案即可。

对于长度为 $2$ 的，可以设小一点的数为 $x$，列方程 $x(x+1) = n$ 求解并判断根是否为整数。也可以二分找这个 $x$。

对于长度为 $3$ 的，~~当然也可以解方程~~，继续考虑二分。此时要注意到三个数的奇偶性：如果三个数是“奇—偶—奇”，三个数的 $lcm$ 就是三数相乘；如果三个数是“偶—奇—偶”，三个数的 $lcm$ 应为三数乘积除以 $2$。

至于预处理：

```cpp
map<ll,pair<int,int> > mp;
for(int l = 1;l<=250000;++l){
	ll res = 1ll*l*(l+1);
	for(ll r = l+2;;++r){
		res /= gcd(res,r);
		if(res > inf/r) break;
		res *= r;
		if(!mp.count(res)) mp[res] = make_pair(l,r);
	}
}
```