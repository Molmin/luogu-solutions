本题 $n$ 最大是 $10^5$，$k$ 最大是 $10$，要求长度为 $k+1$ 的上升子序列的数量。

- 我会暴力！

暴力去把您嘞！

- 我会动归！

设 $dp_{i,j}$ 表示以 $i$ 为终点的长度**恰好**为 $j$ 的上升子序列个数。那么很容易得到 $dp_{i,1}=1$ 以及 $dp_{i,j}=\sum_{1\le k<i,a_k<a_i}dp_{k,j-1}$ 两个方程，那么时间复杂度 $O(n^2k)$，~~稍微优化了一点~~相对上一个算法优化了一点，然而还是过不了。

- 我会那状数组！

对以上方程的求和符号求解用那状数组进行优化。开 $10$ 个那状数组进行统计即可。时间复杂度 $O(nk\log n)$。