都向最中间去走肯定是最优的，所以我们只需要算出这些人走到中心点 $(\lfloor\frac{n}{2}\rfloor,\lfloor\frac{n}{2}\rfloor)$ 的距离即可。

我们发现，对于紧邻中心点的 $8$ 个点到中心点的最短距离一定为 $1$，然后这个 $9$ 个点外面一圈的的 $12$ 个点（也就是 $n$ 从 $3$ 增加到 $5$ 的时候）到 $8$ 个点的最短距离是 $2$ ，它们只能先走一步到 $8$ 个点任意一点，再走一步到中心点，以此类推。

也就是每当上一个 $n$ 加上一个 $2$ 的时候，相比原来的 $n-2$ 的答案，实际上只加上了最外面一层的步数，而最外面一层的每一点到中心点的步数实际上就是 $1$ 加了几个 $2$ 到的 $n$ （也就是一共从一个点扩展出了多少层）。最外面一层的点很容易看出来是 $4*i-4=4*(i-1)$

所以我们得到递推式，$f_i=f_{i-2}+4*(i-1)*(\lfloor\frac{i}{2}\rfloor)$

其中 $f_1=0$。

[$\mathcal{Code}$](https://codeforces.com/contest/1353/submission/80143867)