这道题目是个线段树模板题。

首先，我们对于区间修改操作，分成两种情况：

$i\le j$ 和 $j< i$ 。

第一种 $i\le j$ 的情况可以直接区间修改，使用标记永久化/懒标记下传解决问题；

第二种情况就要把要修改的区间断成两段，一段是 $[i,n]$ ，一段是 $[1,j]$ ，在上面继续区间修改。


区间查询也是如法炮制，如果 $j<i$，答案就是$\max(rmq(1,j),rmq(i,n))$ 。（`rmq`是求区间最值函数）

不然直接返回 $rmq(l,r)$ 。

然后注意题目给出的区间端点 $l,r$ 是要额外加上 $1$ 的。

注意一些线段树实现的细节。