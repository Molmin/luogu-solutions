对我这种不懂 $\mu$ 函数什么的人来说这个题做起来远不止 2400* ()

具体做法和 45dino 的一样，这里主要讲一个官方题解和洛谷题解都没有提到的结论的证明。

首先我们令 $c_i=a_i-b_i$。不难发现本题的调整过程是 $1\rightarrow n$ 逐项调整的，在 $i$ 处执行操作调整之前，$i$ 的因数 $d$ 可能会对它做出影响。我们设 $f_i$ 是在第 $i$ 处做的操作次数（可能为负），显然 $f_1=|c_1|,f_2=|c_2-f_1|$，我们都不难看出：

$$f_i=c_i-\sum_{d|i,d\neq i}f_d$$

答案为 $f$ 绝对值之和。

问题是 $f_1$ 每次是不确定的，我们要快速计算 $f$ 的和，那么就得想办法把它搞成 $c$ 的形式。我不是很理解怎么观察到 $\mu$ 的结论的，在我看来提供一个方向的话，就是这里这个 $d|n$ 让我们想到可能和 $\mu$ 有关，然后质数 $p$ 的 $f$ 值是显然易见为 $f_p=|c_p-c_1|$ 的，那么我们研究几个非质数 $4,6,8,10,12$，比如说 $f_6=|c_6-f_3-f_2-f_1|=|c_6-(c_3-c_1)-(c_2-c_1)-c_1|$ 这样的展开它们，然后就大概能猜到这个结论了：

$$f_i=\sum_{d|i}\mu(\frac{i}{d})c_d$$

但是我是来证明这个玩意的：

对于任何一个 $k\rightarrow n$ 的转移，显然最后 $f_n$ 中，$c_k$ 的体现是可能会在某些 $f_m$ 中，满足 $k\mid m\mid n$ 的，这样 $f_m$ 的式子里可能会有 $c_k$，然后又体现在 $f_n$ 的式子里。

显然 $m=kl$，其中 $l\mid (g=\frac{n}{k})$。

我们来研究 $\mu(g)\neq 0$ 的情况，其实就是 $g$ 没有次数大于 $1$ 的质因数。我们设有 $\alpha$ 个，记这种情况下 $k\rightarrow n$ 的贡献为 $f(\alpha)$，注意这里的 $f$ 和上文意义不同。

显然 $f(1)=-1$，这意味着 $g$ 为质数，那么 $f_n$ 里关于 $c_k$ 的只有减 $f_k$ 这一项，而 $f_k=(c_k-...)$。

我们来探究 $f(2)$ 的值。此时发现 $g$ 有两个不同的质因数 $p,q$，$l$ 的值有三种：$1,p,q$。对于 $l=1$，显然贡献还是 $-1$，对于 $l=p/q$，显然贡献变成了 $1$。此时 $f(2)=1$。

对于 $f(3)$ 是同理的，$\omega(l)=0/1/2$ 的方案数各有 $1/3/3$ 种（$w(n)$ 是 $n$ 的不同质因数个数），$f(3)=-1+3f(1)-3f(2)=-1$。

到这里，我们可以考虑归纳了，假设 $f(\alpha)=(-1)^{\alpha}$ 对于 $\alpha \lt n$ 成立，那么 $f(n)$ 就是二项式系数 $\dbinom{n}{i}$ 里，$i$ 为奇数的项之和和 $i$ 为偶数的项之和，众所周知这个值是 $0$。但是注意到我们不能把 $\omega(g)$ 个质数全部选择了，所以要去掉 $1$，而 $\alpha$ 的奇偶性恰好决定了这个 $1$ 是减掉还是加上。所以答案不是 $1$ 就是 $-1$，而刚才提到 $g$ 的质因数两两不同所以 $\mu(g)\neq 0$ 时，确实 $k\rightarrow n$ 的贡献是 $\mu(g)c_k$。

好的让我们证明 $g$ 带平方质因子的时候 $k$ 不会对 $n$ 产生影响。其实是类似的，我们发现研究 $g=p^2$ 的时候贡献确实为 $0$，$g=p^2q$ 的时候也是 $0$（$p,q$ 为不同质数），那么可以归纳证明 $\mu(l)=0$ 的时候不产生贡献，产生贡献的 $l$ 只可能是 $\mu(l)\neq 0$ 的，所以你可以抹掉 $g$ 的质因子的那些次数，然后又变成了二项式系数的奇数项和偶数项之差问题，但是此时 $\dbinom{n}{n}$ 可以选择了所以结果为 $0$，那么最后贡献还是 $0$。

其实这个证明还是需要自己去感性理解一下的，因为有些东西我不太能够表述出来，不过也许这是一个经典的莫反 trick 之类的？

代码我就不放了，和 45dino 的没啥区别。

#### update：发现我傻逼了，证的极其麻烦，刚学了莫反学了个寂寞。

我们看这个式子：

$$f_i=c_i-\sum_{d|i,d\neq i}f_d$$

就是 

$$c_i=\sum_{d|i}f_d$$

就是说，$c$ 是 $f$ 的和函数。根据莫比乌斯反演：

$$f_i=\sum_{d|i}\mu(\frac{i}{d})c_d$$

完事...