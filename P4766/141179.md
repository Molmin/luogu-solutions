首先离散化，使时间区间为 $[1,p]$，$dp_{i,j}$ 表示杀死出现时间 $[l,r] \in [i,j]$ 的所有外星人的最低成本，则答案为 $dp_{1,p}$，考虑转移。

- 如果没有外星人，那么 $dp_{i,j}=0$。
- 如果有外星人，那么设 $maxn_i=max(d_p)\ ([l_p,r_p]\in [i,j])$，不难得到 $dp_{i,j}=\min(dp_{i,k-1}+maxn_k+dp_{k+1,j})\ (k \in [i,j])$。

然后发现预处理 $maxn$ 数组是 $O(n^2)$ 的，时间复杂度是 $O(n^4)$ 貌似并不过的去，如果用线段树维护 $maxn$ 的话也要 $O(n^3 \times logn)$，因为离散化之后 $n$ 达到了 $600$ 的规模也很难过去。

接下来是一个比较重要的结论了：我们并不用处理 $maxn$ 数组，只要直接找到一个 $p$ 满足 $d_p$ 在所有满足条件的点中最大，这样子就能够做到 $O(n^3)$ 了。

为什么这样子是对的呢？~~绝大部分题解都没有解释，可能他们觉得这个太简单了~~。感性理解一下，枚举的这个 $k$ 就意味这在 $k$ 这个时间点上进行一次操作。那么对于 $p$，必然有一个操作是在 $[l_p,r_p]$ 之间的（为了消除 $p$），而且因为 $p$ 是最大的，那么 $maxn$ 就显然是 $d_p$ 不用预处理了。

[code](https://www.luogu.com.cn/paste/umr8j8ob)。