如果直接求和，$s_i+s_j$ 的组合有 $O(n^2)$ 种，直接硬干极为困难。

运用算两次的想法，转而考虑 $s_i,s_j$ 之间的分割位置 $k$。

转化之后，只需统计多少个模板串是 $t_1t_2\cdots t_k$ 的后缀及多少个模板串是 $t_{k+1}t_{k+2}\cdots t_n$ 的前缀即可。

设 $f_k$ 表示是 $t_1t_2\cdots t_k$ 的后缀的模板串的个数。

对模板串建 $\text{AC}$ 自动机，找到当前自动机上对应的节点；一直沿着 $\text{fail}$ 指针跳，此时 $f_k$ 为所有跳到的节点上以这些节点结尾的模板串的个数。

前缀和后缀的统计方法是一样的，把文本串和模板串翻转一下就可以了。

最后把每个位置的贡献加一下就好了，复杂度 $O(26n)$。

