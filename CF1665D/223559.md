### $\text{Difficulty : 2000}$
---
### 解题思路：

从最大猜测数量来看 $2^{30}=1073741824$ 恰好比 $10^9$ 大一点，可以往二的指数上想。

考虑一个引理，$\gcd(x,x+a)\le a$，且仅当 $a|x$ 的时候取等。引理的证明直接用辗转相除推一步即可。

结合以上两条，考虑如何在已知一个二进制位的后面所有位的情况下用题目给出的询问求出当前二进制位。不妨将后面的所有位上补至全为 $0$，询问补上后的数 $x'$ 和 $x'+2^{cur+1}$，式子中的 $cur$ 表示当前的二进制位数。

如果得到的答案是 $2^{cur+1}$，可以断定，当前位置原来一定是 $1$，否则一定是 $0$。这个结论可以结合之前的引理得到。

---
### 代码：

```cpp
#include<cstdio>
using namespace std;
int T,x,ans;
int main(){
	scanf("%d",&T);
	while(T--){
		ans=0;
		for(int i=0;i<30;i++){
			printf("? %d %d\n",(1<<i)-ans,(1<<i)-ans+(1<<(i+1)));
			fflush(stdout);
			scanf("%d",&x);
			if(x==(1<<(i+1)))ans+=(1<<i);
		}
		printf("! %d\n",ans);
	}
	return 0;
}
```
