#### 前言

这道题属于比较简单的组合数学（算，吧

你可能需要前置知识：乘法原理

#### 思路：

因为序列长度一共$2*n - 2$，显然不需要考虑会出现两段不相邻的长度为$n$的具有相同车种的情况。

考虑两种特殊情况：

+ $n = 1$的时候，没有车位，输出$0$
+ $n = 2$的时候，有$2$个车位，轻松的知道是$4$种

然后就是$n >= 3$的情况。

首先我们发现，在$2*n - 2$的序列中取一段连续的长度为$n$的子序列共有$n-1$种方法。

因为"有**恰好**n个连续汽车的品牌相同"

题目可以抽象为序列染色。

所以取的连续这一段的左右两边不能跟这一段的车的品牌相同，所以取到的长度为$n$的段的左右两边是其余$3$种里面任意取一种，也就是这种情况:

[![DVGgSI.md.png](https://s3.ax1x.com/2020/11/17/DVGgSI.md.png)](https://imgchr.com/i/DVGgSI)

旁边的格子显然不能是蓝色。不然就不满足长度为$n$了，然后除了这两个，其他剩下的格子都可以是四个颜色中的任意一个。

在$2*n - 2$的序列中取一段连续的长度为$n$的子序列的$n-1$种方法中有两种情况:

[![DVG2lt.png](https://s3.ax1x.com/2020/11/17/DVG2lt.png)](https://imgchr.com/i/DVG2lt)

[![DVGR6P.png](https://s3.ax1x.com/2020/11/17/DVGR6P.png)](https://imgchr.com/i/DVGR6P)

这两种情况只能涂三个颜色的只有一个格子，特殊考虑。

答案计算就是:

有注解版：

$sum_1$(涂色段在中央的情况，即不在边界) = $(n - 3)$(取长度为$n$的序列的方案，而且不出现在边缘的情况) *$4$(每次长度为$n$的序列可以是四种颜色中的任意一个) * ($3 * 3$)(旁边两个格子只能取$3$种) * $pow(4,2 * n - 2 - (n + 2))$(剩下的格子可以任意涂四种颜色)

$sum_2$(涂色段在边缘) = $2$(在左边以及在右边两种情况) * $4(每种情况4种颜色)$ * $3$(旁边一个格子只能涂三种) * pow(4,n - 3)(其余涂四种)

$sum_1$ = $(n - 3) * 4 * 3 * 3 * pow(4,n-4)$

$sum_2$ = $2 * 4 * 3 * pow(4,n - 3)$

$Ans = $ $sum_1 + sum_2$

答案就是两种情况之和。

这道题代码跟上面说的没啥差别，因为是数学题嘛。。。没啥代码难度，分类讨论即可

```cpp
#include <bits/stdc++.h>
using namespace std;
#define int long long 
signed main()
{
	int n ;
	cin >> n;
	if(n == 1){cout << 0;return 0;}
	if(n == 2){cout << 4 << endl;return 0;}
	int Ans = 0;
	Ans += 2 * 4 * 3 * pow(4,n - 3);
	Ans += 4 * ( n - 3 ) * 3 * 3 * pow(4,n-4);
	cout << Ans;
	return 0;
}
```