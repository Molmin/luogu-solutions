### Update

2022.8.10 更改错别字（中 $\rightarrow$ 种）
***
首先可以确定一个长度为 $n$ 的区间 $[l,r]$，那么这个区间一共有 $4$ 种选择，因为是**恰好** $n$ 个，所以 $l-1$ 和 $r+1$ 就是 $3$ 个选择。

剩下 $n-4$ 个位置可以选择任意的车，就是 $4^{n-4}$，所以答案就是 $4\times3\times3\times4^{n-4}=3^2\times4^{n-3}$。

特别地，在边上（$l=1\text{或}r=2n-2$）的时候，会有一边越界，也就是说，有一个 $3$ 会变成 $4$，答案会变成 $3\times4^{n-2}$。

$l$ 右边界：$l+n-1\le2n-2\rightarrow l\le n-1$。

所以 $l\in[1,n-1]$，答案就是 $(n-3)\times3^2\times4^{n-3}+2\times3\times4^{n-2}$，时间复杂度 $O(\log n)$。