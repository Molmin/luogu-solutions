### 解题思路：

简单数数题，简单的乘法原理和加法原理就行了。

可以强制规定某一个范围内为某一种颜色的车，这个范围左右的不能是相同颜色，然后其他的随便排就行。

由于相同颜色车放在最左右两边时，又一边没有车可以放，所以单独考虑。

---
### 公式推导：

先考虑在中间的情况：

根据乘法原理，第一次可以选择固定颜色的的车有 $4$ 种可能情况。

考虑起点，那么这些车可能的排列位置有 $n-3$ 种。

题目要求是恰好，所以左右可以放的只有 $3$ 种。方案是 $9$ 种。

其他位置随便放，可以选择的位置一共有：$n-4$ 个。算成方案就是：$4^{n-4}$。

这种情况下一共有：$36\times (n-3)\times 4^{n-4}$ 种方案。


---
然后考虑在两边的情况，相对简单：

一个位置不能放相同的，可行的方案是 $3$ 种。

一共有：$n-3$ 个位置放可以任意放，也就是：$4^{n-3}$ 种方案。

相同的颜色一共有：$4$ 种。

左右两边，还要乘以 $2$。

这样一共是：$24\times 4^{n-3}$。

---
### 代码：

```cpp
#include<cstdio>
#include<algorithm>
using namespace std;
#define int long long
int pow(int a,int b){
	int ans=1;
	while(b){
		if(b&1)ans*=a;
		a*=a;
		b=b>>1;
	}
	return ans;
}
int n;
signed main(){
	scanf("%I64d",&n);
	int ans=24*pow(4,n-3)+36*(n-3)*pow(4ll,max(0ll,n-4));
	printf("%I64d",ans);
	return 0;
}
```
