这道题目是一道图论题。

我们可以用字典树 Trie 来解决这道题。

我们考虑直接在 Trie 上优化建图。

我们考虑如何处理子树。

我的方法是这样的：对于子树，可以通过新建点连向儿子的子树点，来代表这棵子树的入边 $or$ 出边。

这样只要建立选了 $i$ 就不能选 $i$ 子树中元素的条件。

剩下就只需要注意细节即可。

细节比较繁琐，需要细心处理。

代码鬼畜，细节繁多，无法突出重点，就不放了。