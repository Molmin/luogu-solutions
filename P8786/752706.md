### [P8786 [蓝桥杯 2022 省 B] 李白打酒加强版](https://www.luogu.com.cn/problem/P8786)
## **$1.$** 思路
#### $(1)$ 题意
 
设李白酒显酒量为 $va,$则有两种操作：

1. $va=va×2$ (共 $n$ 次)
2. $va=va-1$ (共 $m$ 次）

并且最后一次为操作 $(2),va$ 初始值为 $2,$要求经过 $n+m$ 次操作后 $va=0$ 的方案数对$10^9+7$取模。



#### $(2)$ 状态

本题为一道dp。

状态定义： $dp[i][j][k],$代表操作 $(1)$ $i$ 次$,$操作$(2)$ $j$次$,va=k$ 时的方案数。

边界：$dp[0][0][2]=1$ （ $va$ 初值为 $2$ )。



#### $(3)$ 转移方程

##### 1.
基于 $2$ 种操作的定义$,$设计有以下状态转移方程：

  1.$dp[i][j][k]=dp[i][j][k]+dp[i-1][j][\dfrac k2]$ ( $2$ 整除 $k$ 时,对应操作   $1$ )
  
  2.$dp[i][j][k]=dp[i][j][k]+dp[i][j-1][k+1]$ (对应操作 $2$  )
  
  
##### 2.
  
 特别的$,$最后一次操作为操作 $2 ,$故仅考虑到 $dp[n][m-1][1]$  即可。
 
 
##  $2.$ 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
const int mod=1e9+7;//别忘记取模
int n,m,dp[105][105][105];//dp数组
int main()
{
	cin>>n>>m;
	dp[0][0][2]=1;
	for(int i=0;i<=n;i++)
	{
		
		for(int j=0;j<=m-1;j++)
		{
			if(i==0&&j==0) continue; 
			for(int k=0;k<=100;k++)//因为最多出现100次操作2，故va最大为100
			{
				if(k%2==0&&i) dp[i][j][k]+=dp[i-1][j][k/2];//操作1
				if(j) dp[i][j][k]+=dp[i][j-1][k+1];//操作2
				dp[i][j][k]%=mod;//取模
			}
		}
	}
	cout<<dp[n][m-1][1]%mod;//见1.3.2
}
```
