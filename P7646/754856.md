考虑这种求至少，最小的，优先考虑最短路。注意到 $K \leq 1000$ 和 $M \leq 1000$ 的情况下。直接对于每一个点都和他能到达的所有边都建图空间为 $k^2\times m$ 肯定超了。所以，需要优化。让我们继续深挖题目性质，同一个管道内能到达的所有点花费都相同，所以，对于每一个管道建一个假点，就可以得到每个点都建边同样的效果，空间复杂度优化为 $m\times k$ 的大小，挺好的。把同一个管道的搞在一起，对假点建图跑最短路即可。