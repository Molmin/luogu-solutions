[传送门](https://www.luogu.com.cn/problem/SP179)
### 分析
将样例拆解：
上式：
~~~ 
 1 b1 b2 a1 a2 a3 a4 d1 d2 d3 d4  1
~~~
下式：
~~~
a1 a2 a3 a4 c1 c2 c3 c4 b1 b2 e1 e2
~~~
显然原式中的 1 是确定的，对于这些点进行标记，    

对于标记过的点，不同位置肯定都是一样的，

对与这些标记过的点的对应点，我们同样可以进行衍伸。

这样将所有确定的点标记后，我们可以再次观察：
标记后：
~~~cpp
上式：1 b1 b2 1 a2 a3 1 d1 d2 d3 d4 1
下式：1 a2 a3 1 c1 c2 1 c4 b1 b2 e1 1
~~~
这样，看似有 8 个自由点，   
但是 $b1=a2=c1=d2$，$b2=a3=d3$，等。     
有若干个点通过上下连接在了一起，视为一个点，     

于是我们可以在对每个点跑一遍连通块，看看有多少个连通块即可。    

若令连通块个数为 $x$，
最后答案即为 $2^{x}$，注意答案可能比较大，需要开高精。

### 判 0
由于判 0 的点比较多且容易错，特别列出。      
1. 倘若长度不相同，输出 0；
2. 第一次标记时，如果一个点已经被染色，且这个颜色与现在要染的颜色不同，输出 0；
3. 如果上下都是数字，且上下不同，输出 0。
