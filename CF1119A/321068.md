本题的重点在于一个性质：**在答案大于零时组成答案的起点或终点必定是第一个或者最后一个建筑物**。

（观前提示：下文中的不等于首项或不等于末项是指**不等于首相或不等于末项或不等于首项和末项**，而不是同时不等于首相和末项）

证明的话我们将这个东西数学化一下：对于数列中的一个数字 $a_i$，它如果不等于首相或末项，那么以它在内答案一定和首相或末项有关，这点很好理解。唯一需要考虑的是如果他等于首相或末项怎么办？这种情况下他就**一定不是正确答案**（在此排除整个序列全相等答案为零的情况），我们可以设有一个数 $a_{i+1}$ 不等于首相或末项，**那么 $i+1$ 与首相和末项组成的答案中的一个一定比 $i$ 组成的要大**（在此处是 $+1$，故应为与首项组成的答案大）。

数据全输入进来跑一遍就好。

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	//输入 
	int n;
	scanf("%d",&n);
	int data[300005];
	for(int i=0;i<n;i++){
		scanf("%d",&data[i]);
	}
	
	//判定 
	int ans=0;
	for(int i=1;i<n;i++){
		if(data[i]!=data[0]){
			ans=max(ans,i);
		}
	}//以首项为答案
	for(int i=n-2;i>=0;i--){
		if(data[i]!=data[n-1]){
			ans=max(ans,n-1-i);
		}
	}//以末项为答案
	printf("%d",ans);
	return 0;
}
```
