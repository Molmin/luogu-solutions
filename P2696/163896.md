**听说本题题解很多，本人发现了一种~~奇葩~~的递推式。**

**先~~手动~~枚举** n 个人中第一个幸运儿的编号

**2个人 —> 1为幸运儿**

  3 -> 3

  **4 -> 1**

  5 -> 3

  6 -> 5

  7 -> 7

  **8 -> 1**
  
  发现规律没

  9 -> 3

  10 -> 5

  11 -> 7

  12 -> 9

  ...

  **16 -> 1**

  ### 2^n -> 1

  ### 没错，当人数 n 为**2的幂数**时，第一个幸运儿都会是 1
 
  ### 后面的就依次为公差为 2 的等差数列（1,3,5,7,9...），直到下一个2的幂数

  设 f[n] 为n个人所需的钱数

### 当n为2的幂时 比 1 大的全部淘汰 最后 1 号得到2金币，其余得1金币 所以 

### f[n] = n+1

### 当n不为2的幂时，通过等差数列，轻易求出第一个幸运儿 k，

### f[n] = f[k]+(n-k) //大于k的全部淘汰，剩下1-k，就是f[k]

### 还有一种特殊情况，当n== 2^n-1时 幸运儿的就是n 所以每个人得两个 金币

### f[n] = n*2


```cpp
#include <cstdio>
long long a[105],b[65540]={0,0,2,6}; //前面四个打表
int main() {
	for(int i=1;i<=30;++i) {
		a[i]=1<<i;       //利用位运算枚举2的幂
	}
	int n;
	scanf("%d",&n);
	int p=2,k=1;
	for(int i=4;i<=n;++i) {
		if(i==a[p]) {
			p++;
			k=1;
			b[i]=i+1;
		}
		else if(i==a[p]-1) b[i]=2*k;
		else b[i]=b[k]+(i-k);
		k+=2;
	}
	printf("%lld",b[n]);
	return 0;
}
```
