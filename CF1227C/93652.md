构造体.

看到题目说最多操作 $ n $ 次, 也就是说, 你随便构造出一个符合要求的括号序列, 都可以由给定序列变过去.

我们就一个字符一个字符的匹配, 如果给定序列当前位置 $ l $ 和合法序列不一样, 那么我们就从后面位置 $ r $ 找一个和合法序列当前位置一样的, 把区间 $ [l,r] $ 倒置就好了.

这样操作次数一定不会超过 $ n $次的.(最多就有 $ n $ 个位置要交换嘛)

复杂度 $ O(n^2) $.