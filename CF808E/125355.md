# 题目

[传送门](http://codeforces.com/problemset/problem/808/E)

# 题解

这道题有两种做法，前者 $\mathcal O(n)$，后者 $\mathcal O(n\log_{\frac{3}{2}}n)$ .（此处将 $n,m$ 视作同阶，不作明显区分）

首先定义 $a[i][j]$ 为重量为 $i$ 而价格在重量为 $i$ 的第 $j$ 贵的物品.

**方法一 —— DP**

令 $f[i]$ 表示在空间为 $i$ 时，只选重量为 $1$ 和 $2$ 的商品的最大价值，那么我们有初始化 $f[1]=a[1][1]$

而后，我们可以每 $2$ 的跨度为一个单位，每次考虑是选一个 $2$ 物品还是两个 $1$ 物品，进行比较之后更新 $f$ 数组即可

在得到 $f$ 数组之后，我们用 $\mathcal O(\frac{m}{3})$ 的复杂度暴力枚举 $3$ 物品选了多少个，用 $\mathcal O(1)$ 即可算出价值

**方法二 —— 三分查找**

同样的思路，首先暴力枚举选了多少个 $3$ 物品，然后，在重量固定时，以 $2$ 物品的数量为 $x$，定义 $f(x)$ 为价值，可以证明 $f(x)$ 是单峰的

>在 $x$ 越大时，选入的 $2$ 物品价值会越来越小，而剩下的空间来选 $1$ 物品，一定是尽量往大选，所以，当 $f(x)$ 下降时，表示再加入的一个 $2$ 物品价值已经少于扔掉的俩 $1$ 物品的价格，而扔掉的 $1$ 物品会随 $x$ 增加而越来越大，而加入的 $2$ 物品价值会随 $x$ 增加而越来越小，所以，当 $f(x)$ 开始下降之后，就没有可能再增加，即可证明 $f(x)$ 是单峰的，所以可以使用三分

那么，外圈枚举 $3$ 物品，对于每一个 $i$ 做三分，最后标记最大价值即可.

# 代码

**方法一与方法二**

```cpp
https://www.cnblogs.com/Arextre/p/13379824.html
```
