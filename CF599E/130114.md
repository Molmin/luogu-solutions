 题目 ：  
 有一棵 $ n $ 个有标号节点的树，根节点为 1，有 $ m $ 条边已经 被确定，另有 $ q $ 限制，形式为：节点 $a_i $ 与  $ b_i $ 的 $ LCA  $ 为 $c_ i$ 你需要求出这棵树有多少种不同的可能形态 $n ≤ 13, q ≤ 100$
 
 


------------
看到 $ n $ 的范围，想状压


- 令  $ f_{rt,msk} $ 表示根节点为  $ rt $ ,子树中的点集为  $ msk $ ，这棵子树中有多少不同的方案

- 转移形式 大 致 ：  $ f_{rt,msk} =  \sum _{x\in msk} f_{rtx,x} *  f_{t,msk-x} $  

- 即每次找出 $ rt $ 的一个儿子子树，然后去掉这个子树以后剩下的还是以 $ rt $ 为根的子树。

  为了防止重复计数，我们可以强制  $ x $ 包含   $ msk $ 中最小的节点。



接下来考虑限制条件

- 对于强制连边，如果 $ rt $ 和 $ msk $ 中的一个点 $ v $ 要强制连边，那么转移时如果  $ v\in x $  ,那么 rtx必须为 $ v $

- 对于 $ lca $ 的限制，如果有一组限制要求  $ u,  v $  的 $ lca $ 为 $ rt $ ，  那么 $ u, v\in rt $ 必须满足，而且$ u, v $在上述转移中不能同 时属于 $ x $

时间复杂度 $ O(3^n ∗ poly(n, m, q)) $，其中 $ poly(n, m, q) $ 表 示只与   n, m, q  有关的多项式复杂度.  


###### 代码略

