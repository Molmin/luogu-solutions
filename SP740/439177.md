我做完后翻了一些题解，很少有人不用前缀和写 DP，所以我就来写一下这篇不用前缀和的题解吧。

首先为什么是区间 DP 呢？非常明显，因为他是从左右端点取的，但是很容易判断不是队列，加上刚好 $O(n^2)$ 可以过的数据，那么肯定就是一个中规中矩的区间 DP 了。

通过对数据的分析，我们肯定不会枚举中间点，所以我们是从区间 $[i,j]$ 的两端 $i$ 和 $j$ 取的数。设 $dp_{i,j}$ 表示选 $[1,n]$ 时选到区间 $[i,j]$，接着选完 $[i,j]$ 的答案（**注意状态**）。那么 $dp_{i,j}$ 就是从 $dp_{i+1,j}$ 或者 $dp_{i,j-1}$ 再选一个数转换的。考虑到是先选了 $[1,i-1]$ 和 $[j+1,n]$，所以如果要加上一个数，就需要乘上 $n-len+1$，其中 $len$ 表示区间 $[i,j]$ 的长度（即 $j-i+1$）。

那么我们就可以列出方程了：

$$dp_{i,j}=\max(dp_{i+1,j}+v_i\times (n-len+1),dp_{i,j-1}+v_j\times (n-len+1))$$

简单的输出答案为 $dp_{1,n}$。

最后注意一个地方——**初始化**，根据状态可知，$dp_{i,i}$ 是选的最后一个数，所以初始为 $dp_{i,i}=v_i\times n$。

代码就不给了，请给位读者自行完成这道题！！