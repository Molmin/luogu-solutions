想要知道正解的请去看另外两位大佬的题解。

我只是想说一下如何用人类智慧，步步套娃，来骗到一些部分分。

先说一个事情，这个图一定没有重边与自环。我的个人能力只想到了30-50分的办法，不过作为$ZJOI$，6个题每个题骗50，就进省队了。

算法一：k = 1，n = 5000嘛，你可以暴力把图建出来，然后就可以获得0分的好成绩了。

算法二：k = 2，不难发现一个图的线图的点数就是这个图的边数，利用算法一里的图，输出边数，期望得分10分。

算法三：k = 3，我们想要$L^2(G)$的点数，就是需要知道$L(G)$的边数，不难发现$L(G)$的边数与G每个点的度数有关，点$i$的度数为$d[i]$，对答案的贡献是$C_{d[i]}^2$，期望得分20分。聪明的你一定要预处理逆元的，要不然常数不优秀的话就会收到$TLE$好礼。

算法四：k = 4，我想要$L(G)$的点的度数，不难发现，这与$G$的共点边数有关。对于每个边，它变成的点的度数就是与它相邻的边（与它有公共点的边）的数量，期望得分30分。共点边是我自己口胡定义的，不过我相信聪明的你一定可以理解的。

算法五: k = 5，这个是重头戏，值20分呢。我想要$L(G)$的共点边数，不难发现这可以枚举G的两条邻边进行统计，不过复杂度是糟糕的O($n ^ 4$)，就算是你的复杂度是O(松)的，都过不去。

然后这个时候你需要一些信仰，还需要一些卡常能力，你要相信图上的边和点会很少，O($n ^ 2logn$)是能过的，因为没有写过，我也不确定能不能过，如果有人写完，请告诉我一声，非常感谢。

不过我们不难发现，对于同一个点，共点边数量的相同的边，是等价的。而一对相邻的公共点为x的边的贡献是$g[i] + g[j] - 2$, $g[x]$含义是x的共点边数，不难发现这个答案是可以$NTT$的, $g[x] <= n$，所以复杂度O($n ^ 2logn$)的。相信信仰的力量，奥利给一下就完事了。

最后没有代码，因为懒得敲了，要是在考场上就敲了。