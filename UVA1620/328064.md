感觉还是比较有意思的题目？虽然是个结论题 233

首先考虑考虑序列中某段长度为 $x$ ，内部含有 $y$ 个逆序对的子段 $[l,r]$ 的性质：

(1) 该子段无论怎么重排，对 $[1,l-1]$ 的贡献不变，对 $[r+1,n]$ 的贡献不变。

(2) 该子段内部，顺序与逆序两种排布的逆序对数量之和为 $\frac{x^2+x}{2}$。

(3) 根据 $(1)$ 和 $(2)$ 可以得知，每次操作后，逆序对数量的变化量一定是 $(\frac{x^2+x}{2}-y)-y$ 。

回归到本题，可以知道每次逆序对的变化量肯定是 $6-2\cdot y$ 的形式。注意到序列翻转时，其他的指标都没有变，只有逆序对变了，所以可以用逆序对数量来衡量可达性。注意到每次增多/减少的数量都会是偶数，所以如果这个环不存在一个断裂使得逆序对数量为偶数，那么就不可以被变换成 $1,2,3,4\cdots n$ 。

这题原本的数据范围是 $10^3$ ，当然可以暴力枚举每个断裂。注意到，如果 $n$ 是奇数，且存在某个断裂的逆序对数也是奇数，那么这个环的所有断裂逆序对数都会是奇数。证明可以考虑，每次断裂的变化相当于把开头的元素移到结尾。那么假设当前开头元素是第 $k$ 大，那么可以知道这个元素会贡献 $n-k$ 个逆序对，移动到尾部后则会贡献 $k-1$ 个逆序对，$\Delta = k - 1 - n + k=2\cdot k - n - 1$ ，可知 $\Delta$ 本身一定是偶数。于是证毕，不可能出现偶数个逆序对的情况。

实现就是求个逆序对。此处不再赘述。