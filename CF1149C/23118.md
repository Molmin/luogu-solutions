有一个合法的括号序列，每次交换两个括号（保证还是合法）求这个括号序列对应的树的直径

Orz zsy碾标算

直径相当于选一段，匹配完括号以后剩下最多的括号数

然后（因为zsy太强了）等于这一段分成两段后面的权值和-前面的权值和最大值，其中左括号权值为1，右括号为-1，证明显然

所以在线段树上维护一堆东西。。。就行了

要维护的：最大/最小前/后缀和，最大前/后缀的$d$值，序列整体$d$值，权值和，答案

一段的$d$值就是将这一段分成两段后-前权值最大值

https://www.cnblogs.com/xzz_233/p/10798276.html