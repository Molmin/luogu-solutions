### 推式子+背包
----

显然的，这一题只需要做两种决策：拿，不拿。

所以本质是一道 $0/1$ 背包。

题目中要求 $ \Sigma a_i = k \times \Sigma b_i$。

珂以推出柿子：


$$\Sigma a_i- \ (k\times\Sigma b_i\ )=0$$

再来看如何换成背包。

我想到的是把美味值 $a$ 拿来作价值，因为我们可以将它看成"主元"（大概是这个意思）

背包的总容量 $V$ 应该 $=10^4$  。
为何？ 题中说最多有$100$个水果，每个水果的美味值最大$100$ 也就是 $100^2 =10^4$。

那么，每个物品的体积是什么呢？

设 $sum_i=a_i-k\times b_i$ （此时 $sum_i$ 不一定满足上面等于 $0$ 的性质）

如果 $sum_i =0$ 那么它满足性质，也就是说可满足 $k$ 倍关系。

否则它会是一个 $-10^4 $ 到 $10^4$ 之间的非$0$整数。

我们可以将它看成一个“差值”。

如果它太大，需要之后的负数来减，如果太小，需要之后的整数来加。

也就是尽量使它等于 $0$。

套入背包的方程：

$$\begin{cases}f_1[j]=\max(f_1[j],f_1[j-sum[i]]+a[i]),(sum[i] \ge0)\\f_2[j]=\max(f_2[j],f_2[j+sum[i]]+a[i]),(sum[i]\le0)\end{cases}$$

最后用 $ans$ 和 $f_1[i]+f_2[i]$ 不断更新最大值即可（$ans=0$ 即是无解，输出 $-1$）

---

代码：：

初始化：（这里最好赋值为 $-10^9$，我试过 $0xcf,INT\_MIN$ 都是错的……（玄学））

![](https://cdn.luogu.com.cn/upload/image_hosting/dvr1ubc7.png)



$DP$：

![](https://cdn.luogu.com.cn/upload/image_hosting/8axuy57s.png)

(图片防抄袭~（思路有了应该不用看代码吧……）)

-----
