## 题解：

~~这篇题解即将刷新本蒟蒻写的最认真的数学题解的记录。~~

~~蒟蒻太菜了考试的时候只拿了18分~~

蒟蒻一开始的时候是这么想的：

观察原方程：
$$
y^2-x^2=ax+b
$$
把它转化成函数形式：
$$
y=\sqrt{x^2+ax+b}
$$
因为$x,y\in N$，所以我一下子就想到了**完全平方数**这个东西。

如果能把右侧的部分换成这样的形式：
$$
\sqrt{(x+k)^2}，k\in N
$$
那就显然会有无数组解。

然后我们展开，变成：
$$
\sqrt{x^2+2kx+k^2},k\in N
$$
和上面的对应上，就能列出一个等式关系：

当$2k=a,k^2=b$的时候，有无数组解。

一联立：
$$
\frac{a}{2}=\sqrt{b}
$$
这个时候有无数组解，输出$inf$即可。

~~然后蒟蒻就没有思路了~~。

冥思苦想了很长时间，最后还是用了暴力枚举，剪枝还剪错了，只好用了最最暴力的两重循环枚举来解决了这个问题。只得了18分。

今天看到了正解，惊喜地发现，我和大佬们的思路竟然重合了那么$1\%$，至少我推出来了无解的情况应该是什么样子的，而这种情况正是通往“有解”的情况的大门。

我们这样考虑：

因为原式子是个二元二次方程。这个方程很难搞。

如果我们把它换为一元方程的话，肯定就会容易一些。

但是我们还要求可行解的个数...怎么办呢？

灵光一闪（希望大家记住这个思想）

我们可以**构造$x,y$的映射关系**，这样求出一个合法的$x$，肯定就会有一个合法的$y$与之对应，我们就可以少搞很多东西。

那么，我们以此入手，分析原式子可得两边均大于等于0.

我们怎么对这个式子进行处理呢？有一个方法被蒟蒻起了个名字：**归一法**，这个方法通俗一点讲，就是把一个主元用一些辅元表示，然后通过一些辅元的关系和范围等求出主元的解。

那么我们就可以设$t=y-x,t\in N$.

这样，原式子就被我们搞成了这样：
$$
(x+t)^2-x^2=ax+b
$$
整理：
$$
x^2+2tx+t^2-x^2=ax+b
$$
再整理：
$$
x=\frac{b-t^2}{2t-a}
$$
那么，在有解的范围内（也就是$a/2\not= \sqrt{b}$）：

分类讨论：

一、$\frac{a}{2}<\sqrt{b}$时，有：
$$
t\in (\frac{a}{2},\sqrt{b}]
$$
二、$\sqrt{b}<\frac{a}{2}$时，有：
$$
t\in [\sqrt{b},\frac{a}{2})
$$
注意特判分母不得零的情况！！~~（化身数学班主任）~~

因为这个$t$定义的时候就是关于$x,y$的式子，所以当我们找到一个合法的$t$，我们就找到了一组解$(x,y)$。

基于此，我们只需要在$t$的范围内循环找可行解即可。



最后强调，代码实现的坑点是取整和特判...

代码：

```cpp
#include<cmath> 
#include<cstdio>
#define int long long
using namespace std;
int a,b,l,r,ans,n;
signed main()
{
    scanf("%lld%lld",&a,&b);
    r=sqrt(b);
	l=a/2;
    if(r*r==b && r*2==a) 
	{
		printf("inf");
		return 0;
	}
    else if(a==1 && b==0) 
	{
		printf("1");
		return 0;
	}
    else if(r>=l)
	{
        for(int i=l+1;i<=r;i++)
            if((abs(b-i*i))%(abs(2*i-a))==0) 
				ans++;
        printf("%lld",ans);
		return 0;
    }
    else
	{
		if(l*2==a)
			n=l-1;
		else 
			n=l;
        for(int i=r;i<=n;i++)
            if((abs(b-i*i))%(abs(2*i-a))==0) 
				ans++;
        printf("%lld",ans);
		return 0;
    }
}
```

