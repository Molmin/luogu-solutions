//看到一个NOI大佬的题解，觉得思路特别好，又清晰，于是整理一下思路

用四维数组f储存

一维第二列位置，二维三维四维存i-1，i，i+1是否有雷

初始化：f[0][0][0][0]=f[0][0][0][1]=1;

如果a[i]为0

```cpp
f[i][0][0][0]=f[i-1][0][0][0]+f[i-1][1][0][0];
f[i][1][0][0]=f[i-1][0][1][0]+f[i-1][1][1][0];
f[i][0][1][0]=f[i-1][0][0][1]+f[i-1][1][0][1];
f[i][0][0][1]=f[i-1][0][0][0]+f[i-1][1][0][0];
```
如果为2
f[i][1][1][0]=f[i-1][0][1][1]+f[i-1][1][1][1];

f[i][1][0][1]=f[i-1][0][1][0]+f[i-1][1][1][0];

f[i][0][1][1]=f[i-1][0][0][1]+f[i-1][1][0][1];

如果为3

f[i][1][1][1]=f[i-1][0][1][1]+f[i-1][1][1][1];

然后如果a[n]=1

ans=f[n][1][0][0]+f[n][0][1][0];

因为n+1就没有了

所以肯定四维为0

如果a[n]=2

ans=f[n][1][1][0];

如果a[n]=3

肯定无解

如果a[n]=0



ans=f[n][0][0][0]

输出ans

```cpp
# include<iostream>
using namespace std;
int n,tot;
int a[10001];
int f[10001][2][2][2];
int main()
{
    cin>>n;
    for(int i=1;i<=n;i++)
      cin>>a[i];
    f[0][0][0][0]=f[0][0][0][1]=1;
    for(int i=1;i<=n;i++)
      {
          if(!a[i]) f[i][0][0][0]=f[i-1][0][0][0]+f[i-1][1][0][0];
          if(a[i]==1)
          {
              f[i][1][0][0]=f[i-1][0][1][0]+f[i-1][1][1][0];
              f[i][0][1][0]=f[i-1][0][0][1]+f[i-1][1][0][1];
              f[i][0][0][1]=f[i-1][0][0][0]+f[i-1][1][0][0];
        }
        if(a[i]==2)
        {
            f[i][1][1][0]=f[i-1][0][1][1]+f[i-1][1][1][1];
            f[i][1][0][1]=f[i-1][0][1][0]+f[i-1][1][1][0];
            f[i][0][1][1]=f[i-1][0][0][1]+f[i-1][1][0][1];
        }
        if(a[i]==3) f[i][1][1][1]=f[i-1][0][1][1]+f[i-1][1][1][1];
      }
    if(!a[n]) tot=f[n][0][0][0];
    if(a[n]==1) tot=f[n][1][0][0]+f[n][0][1][0];
    if(a[n]==2) tot=f[n][1][1][0];
    cout<<tot;
    return 0;
}

```