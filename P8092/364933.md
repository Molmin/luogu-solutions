[题目传送门](https://www.luogu.com.cn/problem/P8092)

## 题意

给定一个长度为 $N$ 的数列 $\{h_n\}$, 定义一次操作为选取一个数 $i$, 使 $h_i,h_{i+1}$ 的值减少 $1$, 求出使数列 $\{h_n\}$ 的每项相等且为非负数的最小操作数的**二倍**，否则输出 $-1$。

## 解析

我们可以对于所有的 $2\le i\le n-1$ 进行判断，如果 $h_i<h_{i+1}$，则我们对 $h_{i+1},h_{i+2}$ 进行 $h_{i+1}-h_i$ 次操作（按照如上逻辑进行的操作定义为操作 $1$）；同理如果 $h_i<h_{i-1}$，则我们对 $h_{i-1},h_{i-2}$ 进行 $h_{i-1}-h_i$ 次操作（按照如上逻辑进行的操作定义为操作 $2$）。

按照这样的思路，我们可以首先按照 $1\sim (n-2)$ 的顺序进行 $n-2$ 次操作 $1$，然后按照 $n\sim 3$ 的顺序进行 $n-2$ 次操作 $2$，如此往复直到出现任意的 $h_i<0$ 或某次顺序操作判断都不成立时不再进行任何操作。前者因为已经在进行了最小次操作仍然不符合约束，则不存在合法解。后者因为已经遍历的所有可能的不相等情况，则说明在所有数非负的情况下相等，即存在合法解。

我们可以将每次的操作数累加在一个 `ans` 变量上，如果存在合法解要输出**二倍**的 `ans`(因为是一次操作耗费两袋玉米)，否则输出 $-1$，平均时间复杂度为 $\Theta(n\log n)$，所以我们可以考虑在每次判断时再次加上是否非负的判断进行优化避免 `TLE`。