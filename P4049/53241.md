## 凸包+Floyd最小环

#### 做法：
1.用前两维分别作为横纵坐标，将合金表示成平面直角坐标系中的点

2.求原材料的凸包，然后判断这个凸包是否包含所有待加工的合金。如果不是，则无解。

3.对凸包上的所有点建图，建图方式如下：

枚举任意两个点。若所有待加工合金均在两个点所连直线的一侧，则两个点间距离为$1$，否则为$inf$

#### 理由：

首先，考虑模型的转化。

1.第三维显然没用，可以去掉

2.前两维可以表示为坐标系内的一个点

3.两个点所能表示出的所有点均在以两点为端点的线段上

4.首尾相接的两条线段$AB,BC$可以表示出$\triangle ABC$内的所有点（感性理解一下，或者通过推式子也能得出相同的结论）。

5.对第4条进行合理推广，一个由多条首尾相接线段所构成的多边形可以表示出其内部所有点，因此求原材料的凸包就可以判断是否有解了。

然后，考虑求出的凸包中有些点是没用的，因为我们只需要包住所有待加工合金的点，而不需要包住所有原材料的点。

按照上面提到的建图方式建图，求最小环即可去掉无用的点。可以性感理解一下。我尝试这用我垃圾的语文功底尝试解说一个。

两个点之间连边表示两个凸包上的点可以直接相连，所以如果待加工合金的点分布在线段两侧，那么说明我们把凸包切开了，这两个点直接相连是不合法的。否则，说明这两个点可以直接相连，而不需要其他点来形成对于待加工合金的凸包。

- Q：为什么是最小环？

- A：因为要求凸包，一定要首尾相接，所以要成环。因为要尽量去掉无用的点，所以要一个最小环。