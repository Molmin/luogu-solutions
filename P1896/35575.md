状态压缩好题！


首先关注数据范围， n 和 m 都很小，考察一个国王的攻击范围，只有当前行的一个格子，上一行的三个格子和下一行的三个格子。


考虑暴力做法，我们可以显而易见的发现，在每一行中，也有很多国王互相冲突的情况，而对于整个矩阵，每一行的情况都是类似的，我们可以首先预处理出所有的 “在某一行内国王不冲突的所有情况" 将这个状态用一个二进制数表示。对于的本题情况，个人估算下来合法状态大概在一百种左右，即使使用 DFS 枚举每一行再判断，也可以通过 n = 7 （个人估计有可能过 n = 8） 的点。


说到这里其实已经和正解非常接近了，由于我们最开始提到的国王攻击的范围，可以发现，对于一个合法的棋盘，它的前任意行也都是合法的，我们考虑动态规划，用


f[i][j][k] 表示 前 i 行，放好了 j 个国王，**第** i 行的放置状态为 k，


我们得到了状态转移方程


f[i + 1][j + b[l]][a[l]] += f[i][j][a[k]] (a[l] 状态 和 a[k] 状态不冲突)


完美解决了这个问题。
