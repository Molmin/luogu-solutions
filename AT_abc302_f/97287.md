# [ABC302F] Merge Set 题解

## 题意：

给定 $N$ 个串 $S$，第 $i$ 个串长度为  $A_i$，$S_{i,j} \in (1 \dots M)$

规定当两个串 $S_i \cap S_j \neq \varnothing$ 则可以将两串合并。

求出最小的合并次数，使得有一个串同时包含 $1$ **和** $M$。

无解输出 $-1$。

原题面：[[Link]](https://atcoder.jp/contests/abc302/tasks/abc302_f)

## 题解

我认为这道题最大的难点在于读题，要求是有一个串同时包含 $1$ **和** $M$，**而不是** 同时包含 $1$ **到** $M$。

首先看到两个串合并的条件是有交集，可以想到根据两个串是否有交进行建图。直接枚举两个串时间复杂度显然是不对的，所以考虑用下面的方法建图。

![](https://cdn.luogu.com.cn/upload/image_hosting/4jeq0dwo.png)

样例 1 举例。如图，我们将每个串向它的每一个数字连一条长度为 $1$ 的边。这样建图后会发现，每个串会贡献两次长度，$n$ 个串需要合并 $n - 1$ 次，所以假设 $1$ 到 $M$ 的最短距离为 $len$ 最终的答案为 $\frac {len} 2 - 1$。由于边长都为 $1$ 直接拓扑即可，时间复杂度为 $O(N + \sum_{i=1}^N A_i)$。

## 代码

传送门：[[Link](https://www.luogu.com.cn/paste/084i7cyq)]

