找一个数组 $c_{1\sim n}$，使得 $b_i=c_ia_i$ 两两不同，那么肯定存在一个顺序使得 $b$ 严格递增，代价也就是 $\sum c_ia_i$。

对于每个 $a_i$ 枚举 $a_i\sim na_i$，分别建一个左部点，连向右部点 $i$。那么这张图的最小费用最大匹配就是答案。

考虑右部点数只有 $n$，所以我们可以在每次产生新增广路后（这只会发生 $n$ 次），从汇点进行一次 bfs $\mathcal{O}(n^2)$，处理出所有能到达汇点的右部点；从小到大考虑这 $\mathcal{O}(n^2)$ 个左部点时，只要 $\mathcal{O}(1)$ 判断它连向的点是不是可以到达汇点就行了。总复杂度 $\mathcal{O}(n^3)$，可以用 bitset 优化掉一个 $w$。