这可能是有本题最简洁的代码的题解

利用数轴稍微模拟一下本题 $a$ 和 $b$ 移动的最短方案，即可发现是这样的：（在下面的讨论中，我们假设 $c < d$，红线是 $a$ 的变化过程，蓝线是 $b$ 的变化过程）。

![](https://cdn.luogu.com.cn/upload/image_hosting/i0mwrjx0.png)

可以发现，答案至多为 $2$ ，分为两个步骤：

1. 把 $a$ 和 $b$ 同时移到 $\frac{d+c}{2}$ 处

2. 把 $a$ 挪到 $c$ ，同时把 $b$ 挪到 $d$

下面讨论什么时候这两个步骤可以省去。

若要省去步骤 $1$，则一开始就存在 $a=b=\frac{d+c}{2}$。因为一开始有 $a=b=0$，所以要想省去必须有 $\frac{d+c}{2}=0$，即 $d=-c$。所以当给定的两个值互为相反数时，可以省略步骤 $1$。

若要省去步骤 $2$，则很明显，$d=c$ 就是必要条件。因为经过了第一次操作后，$a$ 仍然等于 $b$。如果不进行第二步，则最后 $a$ 还是等于 $b$。

如果无解，则说明 $\frac{d+c}{2}$ 不是一个正整数。整个式子乘 $2$ 后，可以化为 $d+c$ 不是一个偶数（即 $d+c$ 是一个奇数）。

于是可以[只用 301B 愉快的 AC 了](https://www.luogu.com.cn/record/57295092)（包含文件输入输出及相应注释，不包含一大堆预编译）！
```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	int T;
	scanf("%d",&T);
	while(T--){
		int c,d;
		scanf("%d %d",&c,&d);
		if((d+c)&1) printf("-1\n");
		else printf("%d\n",2-(d==c)-(d==-c));
	}
	return 0;}
```