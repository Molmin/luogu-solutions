[参考资料](https://yhx-12243.github.io/OI-transit/records/cf329E.html)

不妨认为所有坐标互不相同。

先假设 $n=2k$。考虑一维情况，显然最优解为 $\sum_{i>k}x_i-\sum_{i\le k}x_i$。为了取到该值，称后半部分元素为峰，前半部分元素为谷，最终的排列必须波谷交替排列。

回到二维情况，先假设第一维取到最优解，考虑第一维对第二维的影响。

如果第一维的峰、谷，在第二维仍适用（点集相同或互换），则两维可同时取到最优解。

否则，至少有一维不能取到最优解。考虑第二维维的次优解是什么：考察某个 $d_i=x_{i+1}-x_i$ 的贡献，容易发现 $d_i$ 在最终答案里的系数 $\le \min(i,n-i)$。同时，只要不是最优解，$d_{k}$ 的系数一定不能取到 $k$，最多只能取到 $k-1$。因此，次优解的值不大于最优解减去 $d_k$。事实上，无论第一维的峰、谷是什么，次优解都能取到该值。证明附在文末 [1]。

接下来考虑 $n=2k-1$，一维情况是容易的。称后半部分元素为峰，前半部分元素为谷，中位数为平地，最终的排列必须波谷交替排列，平地可插入在任意位置。

考虑两维的中位数是否相同。

1. 两维中位数相同。

   如果第一维的峰、谷，在第二维仍适用（点集相同或互换），则两维可同时取到最优解。

   否则，至少有一维不能取到最优解。类似上面的分析，次优解的值不大于最优解减去 $\min(d_{k-2},d_{k-1})$。事实上，该值一定能取到。证明和 [1] 类似。

2. 两维中位数不同。此时，可以证明一定能同时取到最优解。证明和 [1] 类似。

综上，做法是：

- 先求出两维分别的最优解，如果能同时取到就输出。
- 否则，一定是其中一维取次优解，看哪一维减少量更少。

[代码](https://codeforces.com/problemset/submission/329/171983417)

---

[1] 次优解中，每个位置的贡献为：

```
- - ... - 0 0 + ... + +
```

分类讨论两个中间位置均为峰 / 均为谷 / 一波一谷，可以发现，减号中峰的个数与加号中谷的个数至多差 1。据此容易构造出一种合法方案取到次优解。

