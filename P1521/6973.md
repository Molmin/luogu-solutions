楼上大神的题解与我的思路大致相同，建议先阅读他的题解。

在此提及其中最重要的优化。（而那位大神没有讲清楚）

上述第二个转移方程： f[i,j]=sum{f[i-1,j],f[i-1,j-1],f[i-1,j-2].....f[i-1,j-i+1]}

从而可得f[i][j-1]=sum{f[i-1][j-2],f[i-1][j-3]....f[i-1][j-i]}

可以发现f[i][j]=f[i-1][j]+f[i-1][j-1]-f[i-1][j-i]

转移时直接如此即可。

另外我使用了滚动，那就把核心代码贴出来吧。

```cpp
f[0][0]=1;
    for(i=1;i<=n;i++)
        for(j=0;j<=k;j++){
            if(j){
                if(j>=i)f[i&1][j]=(f[(i-1)&1][j]+f[i&1][j-1]-f[(i-1)&1][j-i])%mod;
                else f[i&1][j]=(f[(i-1)&1][j]+f[i&1][j-1])%mod;
            }
            else f[i&1][j]=f[(i-1)&1][j];
        }
```
**由于涉及到减法与取模，最后千万加上这一句。**

```cpp
f[n&1][k]=(f[n&1][k]%mod+mod)%mod; 
```