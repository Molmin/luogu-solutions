先搞出来一颗表达式树。

然后发现这个只会是一颗二叉树。

$1$ 就是 $root$ 了。

对于每个叶子节点都是 $a,b,c,d,A,B,C,D,?$。

$?$ 其实就是所有的结合。

把这个状态计入叶子节点。

然后我们就可以递归算出来任意一个点所对应的柿子的取值方案数。

发现柿子只有 $0/1$ 所以状压一下。

然后发现这个玩意是可以 $FWT$ 计数的。

直接暴力 $FWT$ 即可。

然后把最后 答案状压 一下输出 就好了。