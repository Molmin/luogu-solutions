正解是离散化+差分

楼下的是离线做法

在线做法可以用二叉搜索树来进行离散化

理论复杂度一样是O(nlogn)

但裸的二叉搜索树会被卡，需要平衡操作

最后遍历一遍和楼下题解一样处理就好了
