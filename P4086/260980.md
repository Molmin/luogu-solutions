### 前言

A 掉了这么一道题目，如果不发题解也太可惜了 ……

我也是太惨了，我 [发了贴](https://www.luogu.com.cn/discuss/show/207014) 下载了两次数据，然后再调了 30 minutes。

### 分析

这道题目其实可以暴力或者线段树做出来，但是我想利用 单调栈 这种 o(n) 的线性表来做，顺便巩固一下 单调栈 。

~~不过题解区好像没有 单调栈 。~~

那么题意就不多讲了，就是要你求一个区间的最小值，总和，平均值。

那么区间最小值，毫无疑问利用单调栈的单调优势，如何你不懂单调队列，建议还是看暴力。

然后就是总和，总和我利用了前缀和的 o(1) 查询操作来做。

平均值要注意精度问题。

输出么，就要注意是升序输出的 ！我这里用栈来做存储答案的容器。

并且，$1 \le K \le N-2$，这个表示 K 只有在 1~N-2 之间存在着答案。

利用一个来变量来记录最大值。

剩下的细节也只有见代码了：

### 代码

```cpp
#include <iostream>
#include <cstdio>
using namespace std;
const int INF=100005;
int n,a[INF],q[INF<<1],r,sum[INF],ans1[INF],r1;
double Max;
//定义变量，这里我单调栈开了 2 倍空间，就怕不够。其实不用管这些的，一般来说，1 倍空间就够了。
signed main()
{
        scanf("%d",&n);
        //读入 n 。
        for (int i=1; i<=n; i++) {
                scanf("%lld",&a[i]);
                sum[i]=sum[i-1]+a[i];
               	 //读入 a[i] 并且建立 sum 前缀和。
        }
        for (int j=n; j>=n-2; j--) {
                while (r>0 && a[q[r]]>=a[j]) r--;
                q[++r]=j;
        }
        //我用的是倒序的处理方式，因为这样子单调队列比较好实现，上面的是预处理最后两个。
        for (int k=n-2; k>=1; k--)
        {
                double ans=0;
                ans=(double) ((sum[n]-sum[k])-a[q[1]])/(1.0*(n-k-1));
                // printf("%lf %d %d\n",ans,k,q[1]);
                //然后就是吃掉了 前 k 个那么就减去，然后再去掉一个最小值，那么每一次单调栈里面的最小值或最大值一般是第 1 个或者第 0 个，单调队列里是 l ，后面是笔者比较容易出错的地方，n-k-1 表示了有 n 个数，去掉了前 k 个数，还要去掉一个最小值的数。所以大家引以为戒。
                if (Max<ans) {
                        r1=1;
                        ans1[r1]=k;
                        Max=ans;
                }
                //假如说找到了比 Max 还要大的，那么就将队列清空，也就是 r1=1 。并且 Max 赋值为 ans 。
                else if (Max==ans) {
                        ++r1;
                        ans1[r1]=k;
                        Max=ans;
                }
                //如果一样呢？那么就利用栈来存起来。
                while (r>0 && a[q[r]]>=a[k]) r--;
                q[++r]=k;
                //这里就是单调栈的维护方式，(如果遇到一个比你小还比你强的人，AFO 吧。也就是 r-- 弹出。然后在利用下标存现在的值。
        }
        for (int i=r1; i>=1; i--)    printf("%d\n",ans1[i]);//倒序输出，这样可以保证升序。
        //然后输出，注意用换行符输出 ，但是空格输出我不清楚会不会炸。
        return 0;
}

```

### 写在后面的话

我这篇题解如果有错误，那么请在评论区里留言，我将会很感谢反映的人。

**谢谢观赏！**