# 前言

蒟蒻刚学图论，比较入门的图论题目，题解重点讲想法，可以跳读，望支持。

upt 2023/8/10 : 修改笔误。

## 题目翻译

在一个多米诺骨牌上，它击倒了下一个，然后又击倒了那个，一直到最后。有时多米诺骨牌无法击倒下一个。那样的话我们必须用手把它击倒才能让多米诺骨牌再次倒下。给定一组用手击倒的多米诺骨牌，你的任务是确定倒下的多米诺骨子的总数。

（来自百度翻译）

## 题意理解

多米诺骨牌效应，即推倒一个骨牌，后面的骨牌会连锁反应。而本题中需注意：并不是所有的骨牌都推倒。

## 思考过程

### 建模（图）

多米诺骨牌（以下简称骨牌）各自推倒了固定的若干个骨牌。也就是说，一个骨牌连接一些骨牌。

理解题意，不难想到：骨牌都有编号，这个过程可以用图来表示。

不理解的看下面。

#### 什么是图？

图不像线性表一样有前驱后驱，并且连续；也不像树一样有祖先的关系（层次）。它只不过是“地图”或者说“网”。

这是 [OI-Wiki](https://oi-wiki.org) 中给的官方解释：

>图 (Graph) 是由若干给定的顶点及连接两顶点的边所构成的图形，这种图形通常用来描述某些事物之间的某种特定关系。顶点用于代表事物，连接两顶点的边则用于表示两个事物间具有这种关系。

有方向引导的图是有向图，反之为无向图。

本题中，骨牌推骨牌是有方向的，所以是有向图。

#### 如何存储图？

我们存储图的方式叫：**邻接表**。邻接表很像“超链接”。

比如一个网站需要 $5$ 个链接，那这 $5$ 个链接应分别指向 $5$ 个网址。即原网站需要添加 $5$ 个超链接。

懂了吧。

一般的，邻接表用 `vector` 实现。

以下代码中，`linker` 是“链接”信息，第 $x$ 个下标的 `vector` 是顶点 $x$ 连接的点。`maxn` 是顶点的数量。

```cpp

vector<int> linker[maxn];

void addEdge(int x,int y){ //建边,边是图的连接者.
    linker[x].push_back(y);
}

```

### 搜索/遍历

深度优先，就是使劲按链接给的信息向下**遍历**，这叫做“深度优先遍历（dfs）”。

一般的，深度优先用**递归**实现：

```cpp
void dfs(int d){ //d是深度(点的编号或其他)
    if(边界条件){
        return ;
    } //这个条件也可以在递归的时候处理.
    for(枚举状态(即能到达的点))
        dfs(这个能到达的状态(点)); //递归.
}
```

### 理清思路

对一个图给出的出发点遍历，算出已遍历的点的个数。

### 实现

代码（无注释）：

```cpp
#include <bits/stdc++.h>

using namespace std;

vector<int> linker[100024];
int vis[10024];

void dfs(int u){
    for(auto&it:linker[u])
        if(!vis[it]){
            vis[it]=1;
            dfs(it);
        }
}


int main(){
    ios::sync_with_stdio(false);
    int t;
    cin>>t;
    while(t--){
        memset(vis,0,sizeof(vis));
        for(int i=1;i<=100024;++i)
            linker[i].clear();
        int n,m,k;
        cin>>n>>m>>k;
        for(int i=1;i<=m;++i){
            int x,y;
            cin>>x>>y;
            linker[x].push_back(y);
        }
        for(int i=1;i<=k;++i){
            int s;
            cin>>s;
            vis[s]=1;
            dfs(s);
        }
        int ans=0;
        for(int i=1;i<=n;++i)
            if(vis[i])
                ans++;
        cout<<ans<<endl;
    }
}
```

### 注意事项：

十年 OI 一场空，多组数据不清空。

这道题只有 $2\text s$ 可以用比较快的读入方式。

## 总结

今天收获蛮多的：图。

图是一种比较重要的数据结构，希望大家好好学习！

推荐题目：<https://www.luogu.com.cn/problem/P5318>

~~同学们，再见！~~