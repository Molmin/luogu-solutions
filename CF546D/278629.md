具体而言，$\mathcal{O}(n\ln^2n)$ 的做法长什么样呢，大概就是：

对于一个素因子 $p$，可以得到 $v_p(x!)=\sum\limits_{i=1}^{\infty} \left[\dfrac{x}{p^i}\right]$。

然后线性筛素数，对于每次询问统计 $x!$ 的上述式子即可。

所以可以得到一个非常显然的 $\mathcal{O}(n\ln^2n)$ 的做法。

尝试优化。

我们不需要对于每一个 $p$ 求出上述式子的值，我们只需要知道 $\sum\limits_{p} v_p(x!)$。

也就是 $x!$ 所有的质因子个数。

我们可以单独求出每个 $i(1\le i\le x)$ 的素因数个数，然后前缀和就可以得到 $x!$ 的质因数个数了。

然后根据 CSP2021-J 的阅读程序我们发现可以把这个玩意的预处理扔到线性筛里面去。

这样的复杂度就被优化到了 $\mathcal{O}(n+t)$。

代码就不贴了。