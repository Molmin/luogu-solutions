~~先吐槽~~：因为按位异或和按位与的优先级调这个破题一下午，谢谢有被恶心到。

此题一看就可知道是一个求最大团的问题，然而一般无向图的求最大团是一个$NPC$问题，况且看到其数据范围就可以弃了。所以我们要分析一下其中的性质。

先看$B$国，可以看出其为一些奇数点和偶数点，况且其中存在一些连边。是二分图既视感。不过二分图是两边的部点不存在连边，所以我们需要建一个关于$B$国的补图。同时补图的最大独立集就是原图的最大团，于是$B$国直接建补图跑最大独立集即可。

再看$A$国，其要求可理解为选出的人要求两两奇偶不同，所以$A$国只能选出$0、1、2$人，再看$B$国中和这几个人有关系的跑最大独立集，我们直接暴力把所有情况取个$\max$即可，记得最大独立集$=n-$最大匹配数。

然后你快乐的连边之后一顿非常巨的操作跑匈牙利写完了发现$T$了几个点。（然后并不会$Dinic$），所以这时候就需要时间戳优化匈牙利。

匈牙利中占了时间效率很大的一块就是`memset`，每次都要`memset`理论每次都是$O(n)$的效率（当然肯定要小一点），那么每匹配一次都是$O(n^2m)$的，这个题要求多次匹配岂不是直接挂了。

~~所以时间戳优化出现了！~~其实根本没那么高深，设一个时间戳为$\text{Clock}$，原来的布尔类型数组就改为整数类型，转化如下：

$$\text{vis}[v]=1\rightarrow \text{vis}[v]=\text{Clock}$$
$$\text{vis}[v]=0\rightarrow \text{vis}[v]\not=\text{Clock}$$

每次`Clock++`，即可$O(1)$初始化。

~~然后就愉快的跑就完事了~~才不，这个毒瘤出题人居然卡常（可能只有我/kk），跑匈牙利的函数里的那个循环必须加`register`才能过（大数据居然快了$\text{200ms}$），否则卡线$TLE$。

其他没啥了。