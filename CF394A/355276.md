# CF394A

[洛谷传送门](https://www.luogu.com.cn/problem/CF394A)

[原题传送门](https://codeforces.com/problemset/problem/394/A)

## 题目说明

一道题意比较简单的模拟题。

~~（莫名其妙打了个最优解）~~

模拟的过程为火柴棍游戏，其中规定的输入格式如下：

```
|||+||=|||||
```
请问如果最多只能移动一个火柴棍（无法移动加，减，等于号上的火柴棍），火柴棍等式是否成立？

如果给出的等式本身就成立，那么直接输出。

## 解题思路

判断条件的本身并不复杂。

将等式左边的两个加数记为 $n$，$m$。等式右边的和记为 $k$。

那么首先判断是否：
$$n+m=k$$
如果满足该条件证明给出的等式本身就是符合要求的，直接输出。

继续判断是否: 
$$n+m+2=k$$
只有在当 $k$ 正好与左边的式子的和的差值为 $2$ 时，将 $k$ 处的火柴棍左移，也可以做到等式合法。同理也可以判断：
$$n+m=k+2$$
只有当左边的和比 $k$ 正好大 $2$ 时，则将 $n,m$ 中任意一处的火柴棍右移。

**但是这里有一个魔鬼细节：因为当出现刚刚描述的情况需要进行右移时, $n$ 或者 $m$ 不能为 $1$, 应当选择那个值大于 $1$ 的加数进行操作。**

## 代码

```cpp
#include<bits/stdc++.h>

using namespace std;
//输出函数
void print(int a,int b, int c){
    for(int i=0;i<a;i++)cout<<"|";
    cout<<"+";
    for(int i=0;i<b;i++)cout<<"|";
    cout<<"=";
    for(int i=0;i<c;i++)cout<<"|";
}
int main()
{
   string a;
   cin>>a;
   int n=0,m=0,k=0,plus=0,s=0;//n,m为加数，k为和，plus记录加号出现次数, s记录等号出现次数
   for(int i=0;i<a.length();i++){
       if(a[i]=='+')plus++;
       if(a[i]=='=')s++;
       if(a[i]=='|'&&plus==0&&s==0)n++;//分别读入n,m,k数据
       if(a[i]=='|'&&plus==1&&s==0)m++;
       if(a[i]=='|'&&plus==1&&s==1)k++;
   }
   if(n+m==k) cout<<a<<endl,exit(0);//如果式子本身合法，直接输出
   if(n+m+2==k){//情况1，需要从右往左移，只需要在输出的前面提前打一个'|', 然后k的地方减少一个棍子就好了
           cout<<"|";
           print(n,m,k-1);//三个参数分别代表两个加数棍子的数量，以及和的棍子的数量
           return 0;
   }
   if(n+m==k+2){//情况2，需要从左往右移，默认是挪第一个加数，但是如果第一个加数只有1的时候，就只能挪第二根棍子
       if(n>1){
           print(n-1,m,k+1);
           return 0;
       }if(m>1){
           print(n,m-1,k+1);
           return 0;
       }
   }
   cout<<"Impossible"<<endl; //如果情况都不符合，输出impossible
}

```
完结撒花！
