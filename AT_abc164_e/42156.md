设 $f_{i,j}$ 为在 $i$，有 $j$ 个银币的方案数。由于 $a_i\le 50$，$\sum a_i\le 5000$，因此 $j$ 的最大值只会有 $5000$。

容易观察到对于每个 $i$，$j$ 是单调不减的。这意味着我们可以用类似于 Dijkstra 的方法转移（可以看作分层图最短路）。按照以下两种方式转移即可（$v$ 为时间，$a$ 为金钱）：

$$f_{i,j}\leftarrow f_{k,j+a(k,i)}+v(k,i)$$

$$f_{i,j+c_i}\leftarrow f_{i,j}+d_i$$

用二叉堆实现转移，时间复杂度为 $\Theta(T\log T)$，其中 $T=n\sum a_i$ 约为 $250000$。
