最近在练一些思维难度的题，尽量做到一题写一篇题解加深印象。

题意：在一棵树上，每个点都有一个点权。两人依次把上一人所选的节点的其中一个相邻节点的点权减 $1$，直到其中一个人把任意节点的点权变为 $0$ 时获胜。求先手的所有必胜点。

首先考虑只存在叶子节点和根节点的树。对于根节点而言，显然先手一定会往权值最小的叶子节点走（因为后手只有一条往根节点走的路径，此时先手为了先使自己获胜一定先往点权更容易变成 $0$ 的节点，即点权最小的叶子节点走）。此时先手当且仅当根节点的点权大于所有叶子节点的最小点权时可获胜。

而事实上，由上可知，当父结点节点的点权大于其所有子节点的最小点权时，该节点就是先手必胜态；否则，它就是先手必败态。

而当树的层数变多时，不妨从下到上考虑。此时，对于每一层的节点，我们都可以求出它们的子节点是先手必胜态或先手必败态。而对于节点 $u$，若其子节点 $v$ 是必胜态，则先手必不可能从 $u$ 走到 $v$（因为如果到达 $v$ 点，则后手转为先手，后手有必胜策略）。故先手必会走到先手必败态的子节点。

而此时后手必不可能继续向下走（因为在当前子树中后手是先手，必败），故后手一定往回走回 $u$ 节点。此时，不用考虑 $u$ 所有子节点的子树（因为上已证后手不可能往子树走），故此时又回到了最上面所讨论的只存在叶子节点和根节点的情况，只需判断 $u$ 的点权大于其所有子节点的最小点权即可（换言之，只要枚举 $u$ 所有子节点，当中只要有点权小于 $u$ 的，则 $u$ 是先手必胜态）。

综上，先手的策略即为：不断去权值更小的子节点且不会回溯，直到找不到更小的节点为止。

而对于每一个节点是否是先手必胜态，只需以该节点为根节点（因为是树所有根节点所以不用考虑环的情况），`dfs` 跑一遍必胜必败点的板子即可。

代码略。