## Sol

首先有一个很显然的观察：如果两道菜 $i,j$ 最后能变成相同种类的菜，一定满足 $a[i]+b[i]-m[i]=a[j]+b[j]-m[j]$ 。所以我们按照 $a[i]+b[i]-m[i]$ 分组，在每组内分别处理，最后把答案合并起来即可。

考虑对于处理之后的 $a[i]$ 的范围是多少，由于在一组内 $a[i]+b[i]-m[i]$ 都相等，所以显然如果操作后的 $a[i]=a[j]$ ，$i,j$ 这两道菜就肯定是同一种类了。显然 $a[i]$ 最小的情况就是从 $a[i]$ 吃掉 $m[i]$ ，所以 $a[i]_{min}=max(0,a[i]-m[i])$；$a[i]$ 最大的情况就是从 $b[i]$ 吃掉 $m[i]$ ，所以 $a[i]_{max}=a[i]+min(0,b[i]-m[i])$ ，这两个式子手玩一下就能理解。

那么现在我们将每道菜 $a[i]$ 的范围看成一条线段，我们的问题就转化为了如下问题：选出最少的点数覆盖所有线段，求最小点数，并输出每个点的坐标（用于输出方案）。则我们有如下贪心策略：每次在还没有覆盖到的线段中选右端点最靠左的那条线段的右端点，然后标记所有能覆盖的线段，重复此步骤直到所有线段都被覆盖。

这样的正确性很轻松就可以证明：因为第一条没有被覆盖的线段必须要有点覆盖，而如果要尽可能使挑选的这个点也能覆盖后面的点，选在右端点显然是最优的。

所以我们对于所有线段排序之后从前往后扫一遍就行了，每次选到的点就是被覆盖到的线段的 $a[i]$ 的取值，根据这个可以算出 $a[i],b[i]$ 各减少了多少，也就是合法方案了。总时间复杂度 $O(n\log n)$ 

这题的代码不难写，所以就不放了。