考虑如何连边：

- 若 $x$ 查证 $y$ 是 `imposter`，说明 $x$ 和 $y$ 身份**一定不相同**，连无向有权边 $(x,y,1)$

- 若 $x$ 查证 $y$ 是 `crewmate`，说明 $x$ 和 $y$ 身份**一定相同**，连无向有权边 $(x,y,0)$

若这个图存在边权异或和为 $1$ 的奇环，则无解。

否则，此图保留边权为 $1$ 的边后一定是二分图，答案就是取每个联通块最大的一部分并相加即可。

使用带权并查集维护上述操作，复杂度即为 $O(m\alpha(n))$。

[代码](https://codeforces.com/contest/1594/submission/131252622)