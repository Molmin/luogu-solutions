简单的（？）复杂数据结构题。

## 题意简述

维护一个树上路径的 $\text{multiset}$。支持询问所有路径的 $d$ 邻域是否有交集。

一条路径的 $d$ 邻域定义为树上所有距离其小于等于 $d$ 的点集。

## 题解

首先我们考虑能不能找到一个点使得只要判断它是否在交集里头即可。

考虑所有路径 $lca$ 的深度。取最深的点的 $d$ 级祖先 $x$ 就是我们需要的点。

考虑 $x$ 子树内的路径一定是符合的（深度最大），此时越往上，其他不符合的可能性也就越小。所以 $x$ 就是要找的点。

然后我们找到 $x$ 的 $d$ 级祖先 $y$。于是所有路径一定要么穿过 $y$，要么在 $y$ 的子树内。

在子树内的话我们就需要查询所有 $lca$ 到 $u$ 的最长距离。这是个经典的区间直径问题。

于是板子拉拉就写完了。

这个题取深度最大点的思想还是很好的。

Submission : http://codeforces.com/contest/1464/submission/102506126

