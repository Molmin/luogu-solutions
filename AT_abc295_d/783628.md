[ABC295D](https://www.luogu.com.cn/problem/AT_abc295_d)

## 题意
给出一个由数字构成的字符串，求其中有几个区间中每个数字出现过偶数次

## 思路
考虑序列 $1223132123$

区间 $[1,4]$ 中，数字 $1$ 出现 $1$ （奇数）次，$2$ 出现 $2$ （偶数）次，$3$ 出现 $1$ （奇数）次

区间 $[1,10]$ 中，数字 $1$ 出现 $3$ （奇数）次，$2$ 出现 $4$ （偶数）次，$3$ 出现 $3$ （奇数）次

所以区间 $[6,10]$ 中，每个数字都出现了偶数次

**即如果两个区间每个数字出现的次数的奇偶性都相同，那么两个区间之差中每个数字必然是出现偶数次**，也就是我们要求的答案

这里我们需要一点状态压缩的思想，把 $0$~$9$ 每个数字出现的次数的奇偶性用一个十位二进制数表示，再记录每种状态出现过的次数

对于每个区间 $[1,i]$，它可以与任何一个与它奇偶性相同的 $[1,j](j < i)$ 组成区间 $[j + 1,i]$ ，这个区间中每一个数字都出现过偶数次

最后是超短的代码

## 代码
```c++
#include <cstdio>
#include <algorithm>
#include <cstring>
using namespace std;
 
const int maxn = 5e5 + 10;
char s[maxn];
int cnt[3000];
 
int main()
{
	scanf("%s", s + 1);
	int n = strlen(s + 1);
	long long ans = 0, t = 0;
	for (int i = 1; i <= n; i++)
	{
		cnt[t]++;
		t ^= 1 << (s[i] - '0');
		ans += cnt[t];
	}
	printf("%lld", ans);
	return 0;
}
```