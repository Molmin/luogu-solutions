## 题意简述

有一条范围 $[1,m]$ 的数轴，有 $n$ 条线段 ，第 $i$ 条为 $[l_i,r_i]$ ，权值为 $w_i$ ，选取一些线段使得它们可以覆盖整条数轴（包括非整数的点），求权值的极差最小值。

## Solution

我觉得本题可以学习的一个很好的思想是，对于这种极差问题，我们可以先考虑把区间按权值从小到大排序，然后用双指针求最值。

具体地，先考虑加入区间，此时移动右端点，如果当前所取区间还没有完全覆盖数轴，那么我就一直取，直到被完全覆盖，便停止。

这样做的合理性在于要求的是极差，我们按权值排序后，都是尽可能让权值小的先取。

也就是说，我们只会在还没有覆盖数轴这种迫不得已的情况下才会取更大的线段，且排序后每次取的都是当前可以取的最小的权值，这样就保证了极差最小的合法性。

然后考虑能否删去一些区间，也即移动左端点。

如果当前左端点区间删去仍然使得条件满足，那么左端点向右移动一位。

这样做的合法性在于，极差只会受到最大值和最小值的影响，最大值当前已经不变了，只需要使得最小值尽可能大。

其实，这也正是我们排序的关键所在，如果原来的序列权值是乱序的，每次加入，删除区间时，不好考虑对极差的影响，不知道是否应该继续加入或删除，排序正巧妙地规避了这一问题。

还有一个问题，就是如何判断数轴已经全部被覆盖，只需要每次给选的区间打上标记即可，而这个操作完全可以用线段树来实现，只需要判断全局最小值是否为 $0$ 。

时间复杂度 $O(nlogm)$ 。



