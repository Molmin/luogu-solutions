## SP181 题解

这是一道比较优秀的**动态规划**题目，十分值得像我这样的 $dp$ 菜鸡一刷。

本题解主要面向动态规划的萌新和菜鸡们。

以鄙人拙见，我们大可以拿这道题目跟经典的$01$背包问题做类比。

------------

请允许我先重复一遍题意：

潜水员有一个带 $2$ 种气体的气缸：一个为氧气，一个为氮气。潜水员有一定数量的气缸。每个气缸都有重量和气体容量。

潜水员为了完成他的工作需要特定数量的氧和氮。要求他完成工作所需气缸的总重的**最低限度**是多少。

~~好吧其实就是乱改了一下我的翻译~~

------------

看到这种样子的题目，第一个想到的多半是$01$背包这个算法。

但这道题与典型的$01$背包的最明显的区别就在于：$01$背包只会涉及到两件事情，重量和价值；然而本题却涉及到了三个。

第二点，$01$背包问题给到我们最大载重，让我们**将能够承载的价值最大化**；然而这一道题恰恰相反，是在给到至少要满足的价值的情况下，让我们**把能提供这些价值的重量最小化**。

------------

在这两点的基础上，我们建立一个 $ dp_{i,j} $数组，**表示获得 $i$ 容量氧气和 $j$ 容量氮气时气缸的最小重量。**

（当然，可以类比$01$背包的 $dp_i$ 数组，它表示的是取 $i$ 重量时价值的最大值）

所以有一点可以先明确：$01$背包的 $dp$ 数组初始是 $0$，因为和本题恰好相反，所以本题的 $dp$ 数组的初值应该是**无限大**的（我比较习惯用$ 1e9 $来表示无限大）。

但还有一个问题，我们并不能把 $dp$ 数组整个儿给设成无限大。

因为当需要 $ 0 $ 容量氧气和 $0$ 容量氮气时，很显然，潜水员不需要携带任何一个气缸，所以此时的最小重量应该是 $0$ 。可以用代码表示为：

```cpp
dp[0][0]=0;
```

我们设潜水员需要 $Y$ 容量氧气，$D$ 容量氮气，容易得出如下所示的初始化代码：

```cpp
for(re i=0;i<=Y;i++)
	for(re j=0;j<=D;j++)
		dp[i][j]=1e9;  //把dp数组的初值赋成无限大 
dp[0][0]=0;  //就像我上面所说的那样 
```

------------

第一阶段结束，现在我们来思考如何进行**状态转移**的问题。

我们设潜水员有 $n$ 个气缸可供选择，每个气缸能够提供 $y_i$ 容量氧气，能够提供 $d_i$ 容量氮气，自身重量为 $w_i$ 。

我先把循环代码给大家放上来：

```cpp
for(re i=1;i<=n;i++)
	for(re j=Y;j>=0;j--)
		for(re k=D;k>=0;k--)
```

是这么一个意思：

现有的氧气、氮气量分别为 $j$，$k$，再在原有的基础上加上第 $i$ 个气缸的储备。

那么很容易知道，加上这个气缸之后，现在有的氧气和氮气量分别为：

```cpp
y[i]+j
d[i]+k
```

那就分别把它们设为 $ now \_ y $ 和 $ now \_ d$ 吧。

从刚刚给的那个循环代码中可以看出：$j$ 和 $k$ 的最大值分别为 $Y$ 和 $D$，因此做出判断如下：

**$ now \_ y $ 和 $ now \_ d$ 是很有可能超过潜水员的需求量 $Y$ 和 $D$ 的。**

我为什么要专门讲这个？其实不管这些也行，只不过最后找最小值的时候，你不仅需要扫描 $dp_{Y,D}$ 的值，还得把它们后边的空间都扫个遍。另外，对于如此不确定的 $ now \_ y $ 和 $ now \_ d$，也存在着极大的 $RE$ 隐患。

**那就干脆把超出需求量的部分浪费掉，就把它当成是刚刚好满足 $Y$，$D$ 的需求吧！**

注意！这很重要！

所以易得以下代码段：

```
now_y=std::min(now_y,Y);
now_d=std::min(now_d,D);
//合理地进行浪费 
```

------------

呼~接下来的活终于要变得轻松了~

正如上文所提及的，这里的 $ dp_{now\_y,now\_d} $ 表示的便是得到 $ now \_ y $ 和 $ now \_ d$ 的氧气和氮气时，气缸总重的最小值。

于是我们就可以来考虑 $ dp_{now\_y,now\_d} $ 是从哪些状态转换而来的了。

- 第一种，那就是不变的情况，也就是 $ dp_{now\_y,now\_d} $ 本身。

- 第二种，也很简单。还记得我刚才提到的：现有的氧气、氮气量分别为 $j$，$k$，再在原有的基础上加上第 $i$ 个气缸的储备这句话吗？好好理解一下，便可以知道第二种状态便是：原本有的 $j$ 单位氧气和 $k$ 单位氮气的最小重量 $dp_{j,k}$ 加上新增的那个气缸的重量 $w_i$，即 $ dp_{j,k}+w_i $

------------

历尽千辛万苦，我们终于推得了伟大的状态转移方程：

$$ dp_{now\_y,now\_d} \ =\ \{dp_{now\_y,now\_d},\ dp_{j,k}+w_i\}_{min} $$

最后我们要求的答案，就是 $ dp_{Y,\ D} $ 廖~

------------

什么？您告诉我还有组数？加上就完了呗~

```cpp
while(t--)
{
	//完整代码还等各位自己补充~
}
```

------------

这篇题解到这里就结束了。

另外，这是本蒟蒻第一次这么大篇幅的题解，有什么不足之处，或者出了什么锅，欢迎各位大佬指出，也恳请大家多多包涵。我将第一时间予以致谢以及对我的文章进行改正。

よろしく！（鞠躬）