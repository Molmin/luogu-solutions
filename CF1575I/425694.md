## 题解

容易想到树链剖分，但是树剖是在点上建立线段树，这个是边权，好像不太好写。

凭借初一数学的经验，我们要拆开绝对值以解决问题。

**先给公式：**

$\max(|x+y|, |x-y|) = |x| + |y|$

**证明：**

楼上大佬用平方证明的，其实我们可以根据初一所学数学知识，对 $x, y$ 的正负性进行分类讨论即可。

- 如果 $x, y$ 中有 $0$ 式子显然成立。

- 若 $0\lt x, y$，化简得：$x + y = x + y$

- 若 $x, y \lt 0$，化简得：$-x-y = -x-y$

- 若 $y \lt 0\lt x$，化简得：$x - y = x - y$

- 若 $x \lt 0\lt y$，化简得：$y - x = y - x$

**问题转化**

有了式子就好办了，**边权就转化成了点权**，对于一条路径，首尾的点权会算一遍，中间会算两遍。然后就是树链剖分板子了。

## 代码
[代码实现](https://codeforces.com/contest/1575/submission/188298805)