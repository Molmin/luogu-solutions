首先想一想什么情况下无解，似乎不太会做。于是尝试打表，看一看等价类个数来猜什么情况有解。

通过打表发现了一个神奇的事实，如果前 $2^{n-1}$ 个数的最高位都为 $0$，那么有解当且仅当可以只用 XOR 操作来达成目标。证明不太会证。

于是目标变成把前 $2^{n-1}$ 个数最高位变成 $0$，翻转一个数的最高位可以全局 XOR 一下把这个数变成全 $1$，然后加 $1$。

于是只需要支持全局 XOR 一个数，全局加 $1$，以及查询一个位置的值。这个很经典，可以倒着建 Trie 维护，不会的话可以见[这题](https://www.luogu.com.cn/problem/P6018)，这里不赘述。

把 $2^{n-1}$ 个数翻好最高位，最后再进行一次 XOR 就行了，操作次数最多 $2^n+1$ 次。
