说实话 这题还真的没想到题解里说的DP

主要题目思路来自于bzoj2288,其实做过bzoj2288的人就会发现这道题和那道题只差环的条件和必须选择k个的条件。

按照那道题的思路，先将同号且连续的一段整合在一段。因为这一段肯定会是整段选上，所以用一个小根堆去维护一样值就好了。然后用链表瞎搞一下就好了。

我就是在那道题的基础上加一个环和必须选择k个就水过去了......

代码就不给了，反正跟bzoj2288差不多。