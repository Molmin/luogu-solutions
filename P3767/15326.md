# 一句话题意


N个点，支持加边、删边、可持久化，每条边要求连接的两个点的差为1或2（模5意义下），问每个时刻是否有合法方案。


# 提示


先看看这两道题（可自行搜索相关题解）：


- [洛谷P2024——食物链](https://www.luogu.org/problem/show?pid=2024)

- [BZOJ4025——二分图](http://www.lydsy.com/JudgeOnline/problem.php?id=4025)


大概会做了吧？（逃


# 具体做法


我们把操作的时间结构建立出来，发现是一棵树，每个操作在父亲节点操作后的图上进行。


然后每个加入/删除操作所影响的范围是他的子树，在dfs序上是一段**连续**的区间，可以使用线段树分治。


分治的过程中可以使用带权并查集，每个点维护一个深度，代表与根节点的差值，执行合并操作时，分情况讨论即可。


注意要支持撤销，所以**不能路径压缩**。
