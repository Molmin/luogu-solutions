# 前言
**stO离散小波变换°Orz**
# 题意
定义：
$$f_{k}(x)=\begin{cases} x^{2c}\oplus c & k = 1\\ f_{k-1}(x^{2c}\oplus c) & k > 1 \end{cases}$$
给定 $a,b,c$，求 $\text{lowbit}(f_b(a))$。
# 思路
因为数据范围 $1 \leq a,b,c\leq 10^{18}$，所以这题肯定推结论。

首先看 $\text{subtask2}$ 的性质：保证 $c$ 为偶数。所以想到通过奇偶性破题。
# 题解
**注：以下的数皆为二进制下的数**
### 当 $c$ 为偶数时
1. 如果 $a$ 为**偶数**，每次操作前 $a=1001011.......001010$，那么 $a$ 变成 $a^{2c}$ 后 $a$ 的末尾就会有**至少** $2c$ 个 $0$（比如：$1001011......1001000...0$），那么每次异或上 $c$ 过后（相当于加上 $c$），答案就为 $\text{lowbit(c)}$。
2. 如果 $a$ 为**奇数**，每次操作前 $a=1001011.......001011$，那么 $a$ 变成 $a^{2c}$ 后末尾**一定**是 $1$，那么每次异或上 $c$ 过后，因为 $c$ 为**偶数**（$c$ 的末尾为 $0$），所以答案为 $1$。

### 当 $c$ 为奇数时
那么每次操作后 $a$ 的奇偶性会发生改变，具体的讲，如果 $a$ 现在是奇数，$a$ 变成 $a^{2c}$ 后它还是奇数，异或上 $c$ 后为偶数；如果 $a$ 现在是偶数，$a$ 变成 $a^{2c}$ 后它还是偶数，异或上 $c$ 后为奇数，它的奇偶性在**有规律**地变化，所以只用讨论最后 $a$ **是奇是偶**。

如果 $a$ **是奇**，那么**毫无疑问**答案是 $1$。

如果 $a$ **是偶**，那情况就有些复杂了，先从奇数推。

当 $a$ 为奇数时，$a$ 的末尾肯定是 $c$，因为 $a$ 为偶数时乘方会有**很多**的 $0$，将现在的 $a$ （奇数）乘方，因为对结果有影响的只有 $a$ 的**末尾**也就是 $c$，所以只看 $c$。考虑把 $c$ 写成 $2^n\times A_n+2^{n-1}\times A_{n-1}+......+2^0\times A_0$ 的形式（其中 $A$ 为 $c$ 每一位上的数），再把上柿做乘方。可以发现，如果第 $i$ 位为 $0$，无论乘方多少次都不变。因为求 $\text{lowbit(a)}$，所以从后往前分析 $1$。

1. 第一个 $1$：乘方后一定是 $1$，最后异或上 $c$ 为 $0$，跳过。

2. 第二个 $1$：设第二个 $1$ 在第 $k$ 位，那么第 $k$ 位的数值一定由**它本身**以及其**后面的数**相乘得到。这时将上面的狮子的第 $k$ 位找到，就是 $2^{n-k}\times A_{n-k}$，我们看它后面的单项式。求第 $k$ 位的数就**等价于**每次在 $2^{n-k}\times A_{n-k}+......+2^0\times A_0$ 中选一个单项式，选 $2c$ 次，满足 $2^{n-k}=2^{i1}\times 2^{i2}\times ...\times 2^{i2c}$。可以发现如果选了第 $i$ 位且 $A_i=0$，那么对第 $k$ 位就**没有影响**。（因为 $0$ 乘以任何数为 $0$）所以对第 $k$ 位有影响的**只有**第 $k$ 位和倒数第 $1$ 位。此时如果满足 $2^{n-k}=2^{i1}\times 2^{i2}\times ...\times 2^{i2c}$，显然我们只能选**一个** $2^{n-k}\times A_{n-k}$ 和 $2c-1$ 个 $2^0\times A_0$。（因为一个$2^{n-k}$ 乘上 $2c-1$ 个 $2^0$ 等于 $2^{n-k}$）然后就有 $C_{2c}^1=2c$ 个 $1$ 相加等于 $0$，（偶数个 $1$ 相加为 $0$）

之后异或上 $c$ 后第 $k$ 位为 $1$，其后面的 $n-k+1$ 位都是 $0$。所以这种情况下答案为 $2^{n-k}$ 也就是 $\text{lowbit(c-1)}$。时间是 $O(1)$ 的。**最后此题得解**！
# 注意
不开 $\text{long long}$ 见祖宗！

当 $c$ 为奇数时，判断 $a$ 最后是否为奇数用 `(a&1)^(b&1)` 就行了。（不打括号见祖宗）
# 代码
```cpp
#include <bits/stdc++.h>
#define ll long long
using namespace std;
ll a, b, c, ans;
void read(ll &x){
	ll f = 1ll; char ch = getchar(); x = 0;
	while(ch < '0' or ch > '9'){if(ch == '-')f = - f; ch = getchar();}
	while(ch >= '0' and ch <= '9'){x = (x << 3) + (x << 1) + ch - 48; ch = getchar();}
	x *= f;
}
void write(ll x){
	if(x < 0)putchar('-'), x = - x;
	if(x > 9)write(x / 10);
	putchar(x % 10 + 48);
}
ll lowbit(ll x){
	return x & - x;
}
void in(){
	read(a); read(b); read(c);
}
void solve(){
	if((c & 1) == 0){
		if((a & 1) == 0)ans = lowbit(c);
		else ans = 1;
		return;
	}
	if((a & 1) ^ (b & 1))ans = 1;
	else ans = lowbit(c - 1);
}
void out(){
	write(ans);
}
signed main(){
	in();
	solve();
	out();
	return 0;
}
```