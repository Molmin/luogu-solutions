[更好的阅读体验](https://www.cnblogs.com/Coros-Trusds/p/15246614.html)

$\texttt{upd~on~2021/9/13:}$ 更改了部分 $\LaTeX$。

## 题目大意

给你一个字符串，只包含 `A,B,C,?`， 其中 `?` 表示 `A,B,C` 中的任意一个，问在所有可能的 `A,B,C` 的字符串中，总共有多少长度为 $3$  的子序列是 <'A', 'B', 'C'>。

## 题目分析

考虑动态规划。

**令 $dp[i][j]$ 表示前 $i$ 个字符中形成 `A,B,C` 的前 $j$ 项的字串数量。**

其中 $0\le i\le 3$，**当 $i=0$ 时无实际意义，只用来计数。**

初始化 $dp[1][0]\gets1$。

如果当前字符是 `?`，那么根据乘法原理，我们直接乘上 $3$ 更新状态：

```cpp
for(register int j=0;j<=3;j++)
{
	dp[i+1][j]=(dp[i+1][j]+dp[i][j]*3)%mod;//乘上 3
}
```

如果不是，那么普通加减即可：

```cpp
for(register int j=0;j<=3;j++)
{
	dp[i+1][j]=(dp[i+1][j]+dp[i][j])%mod;
}
```

最后根据字符更新即可，由于洛谷插入代码的缩进有一点问题，一行一行的修改过于麻烦，代码可以到 $\rm blog$ 里去看看 $\texttt{qwq}$。