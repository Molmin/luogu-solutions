## [P4772 灰化肥，会挥发](https://www.luogu.com.cn/problem/P4772)

## 题目大意：
给出一矩阵，求经过所有仓库的最短路。

## solution:

看到很小的 $n$ 的范围，我们考虑状压。跟 [P4802 [CCO 2015]路短最](https://www.luogu.com.cn/problem/P4802) 不同的是，本题给出了矩阵，所以我们考虑如何建图:
	
我们从每个点出发，进行 $\text{BFS}$ ，这样就可以愉快的状压了。

设**状态** $f[\,i\,][\,j\,]$ 为当前状态为 $\,i\,$ 走到了 $\,j\,$ 点的最短路径长，$g[\,i\,][\,j\,]$ 为当前状态为 $\,i\,$ 走到了 $\,j\,$ 点的最小字典序路径。

至于路径长，~~易得~~状态转移方程为：
   $$f[\,i\,][\,j\,]= \text{max}(f[\,i\,][\,j\,],f[\,i\, \bigoplus\,(1\ll j)][\,k\,]+dis[\,k\,][\,j\,]) $$
   
思考一下最小字典序路径，这里 $g[\,i\,][\,j\,]$ 我用的是 $\text{string}$ 类型，方便字符串的拼接与比较。转移我们考虑两种情况：

1. 当前最短路更新了，相应的路径也要更新。
2. 当前最短路无法更新，但与原状态相等，并且当前的路径字典序较小，可更新。

## 细节处理：
- 只能从 $\text{A}$ 点出发。
- 最后统计答案要赋个极大值。

看到这的同学，可以自己去写代码了(~~tf口吻~~)

[code](https://www.luogu.com.cn/paste/jk067sgm)

### End