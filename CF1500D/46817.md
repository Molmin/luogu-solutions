感觉比C简单

---
考虑设 $f_{i,j}$ 表示以 $(i,j)$ 为右下角最大的合法正方形

那么显然有： $f_{i,j}\le min(f_{i-1,j},f_{i-1,j-1},f_{i,j-1})+1$

考虑记录每个位置向左，向上以及向左上的前 $10$ 种颜色，第 $k$ 个设为 $left_{i,j,k},up_{i,j,k},color_{i,j,k}$

前两个数组的转移都非常简单，每次最多把一个元素弹出去

第三个数组的转移考虑将 $left_{i,j-1},up_{i-1,j},color_{i-1,j-1}$ 视为三个队列，每次从堆头选出最小的一个放进 $color{i,j}$ 的队尾，模拟即可

时间复杂度 $O(10\times n ^2)$，常数很大但能过

[提交记录](https://codeforces.com/contest/1500/submission/110441790)