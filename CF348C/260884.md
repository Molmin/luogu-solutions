- 此题为开摆计划 T6。

**[题目](https://www.luogu.com.cn/problem/CF348C)**
- 给一些集合，计算子集加，子集求和。

**分析**
- 一直觉得这个问题的出法不优美。咱们考虑这个问题更加本质的做法，然后延伸出一系列简单的问题，或许更能获益？
- 下面的问题在一个 $m$ 条边静态图上，范围加：将与一个点直接相邻的点加上某个定值，范围查询：查询与某个点直接相邻的点的权值和，一共 $q$ 次修改查询。
- 单点加，单点查询？按题意模拟即可 $O(m+q)$。
- 范围加，单点查询？按 $\sqrt m$ 分为大度点和小度点：小度点暴力更新，然后查询某个点时暴力看大度点有没有更新自己，复杂度 $O(m+q\sqrt m)$。
- 单点加，范围查询？按 $\sqrt m$ 分为大度点和小度点：每个点只保存周围小度点的权值和，查询的时候暴力查大度点，修改小度点的时候需要暴力更新周围的点 $O(m+q\sqrt m)$。
- 范围加，范围查询？我们拥有的方法：
- 暴力范围加；暴力范围查询；记录一些点直接连边的点集的交，然后就可以快速更新一些范围加对一些范围查询的贡献。
- 因此我们可以：
- 小度点修改：快速更新周围的小度点，然后对于周围的大度点的答案贡献可以直接先计算。
- 大度点修改：先咕掉，作为未完成的询问先躺在大度点里。
- 小度点查询：快速查询周围的小度点，而大度点躺在历史里的修改暴力计算贡献。
- 大度点查询：被小度点贡献的已经计算，而大度点躺在历史里的修改暴力计算贡献。
- 时间复杂度 $O((m+q)\sqrt m)$，空间复杂度 $O(m\sqrt m)$，[代码](https://www.luogu.com.cn/paste/pjw5grqb)。