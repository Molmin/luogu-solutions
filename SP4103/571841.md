双倍经验 UVA11475。

首先，我们将 $S$ 分为两部分：$A$ 和 $B$。（如下图）

$S'=ABB'A'$，（$A$ 的回文串为 $A'$，$B$ 的回文串为 $B'$。

显然，设长度为 $size$，那么 $size\le 2\times |S|$。

我们可以想到的节省长度的办法为：**如果 $B$ 为回文串，那么就可以将 $BB'$ 这一段转化为 $B$。**

即，$B$ 是回文串的时候，$S'=ABA'$。

那么，我们节省得越多，$|B|$ 就会越长。所以这个问题就转化为求 $B$，$B$ 是 $S$ 的后缀，求最长的 $B$。

然后，跑一个 Manacher 就可以了。

时间复杂度为 $O(n)$。

Update:修改错误，麻烦管理员再审核一下。