## SP15438 题解

第一次写题解，多多见谅。

~~证明过程其实没这么复杂~~。

我们可以看出，包含 $N$ 个节点的完全二叉树的 BFS 序，其实就是 $N$ 个节点的完全二叉树的层序遍历。

我们也可以发现，完全二叉树的第一层有 $2^0=1$ 个节点，那么第二层就有 $2^1=2$ 个节点，第 $m$ 层就有 $2^{m-1}$ 个节点。

我们又发现，如果层数为 $k$ ，那么节点数就为 $\sum_{i=1}^{k} 2^{i-1}$，所以说，除掉叶节点那一层的节点数就为 $\sum_{i=1}^{k-1} 2^{i-1}$。

别急，再推一下柿子。 

上面的 $\sum_{i=1}^{k-1} 2^{i-1}$ 是 $2^0 + 2^1 + ... + 2^{k-2}$ ，把它设为 $S$ ，那么 $2 \times S$ 就为 $2^1 + 2^2 + ... + 2^{k-1}$ 。最后二式减一式，得出结果 $S = 2^{k-1} - 1$ 。所以答案就为从 $2^{k-1}$ 开始，一直到 $n$ 。 

但是，我们又~~双叒叕~~发现， $2^k-1$ 就是节点数 $n$ ，那么 $2^{k-1}$ 就是 $\frac{n}{2}+1$ 。答案就是 $\frac{n}{2}+1$一直加到 $n$ 。

代码（码风奇怪，不喜可喷）：

```cpp
#include <iostream>
using namespace std;
int a[10000002],n;
int main(){
	while(cin>>n,n){
		int ans=0;
		for(int i=1;i<=n;i++)  cin>>a[i];
		for(int i=n/2+1;i<=n;i++)  ans+=a[i];
		cout<<ans<<endl;	
	}
	return 0;
}
```