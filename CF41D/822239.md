显然，这是一道 DP 题。

大佬曾说，DP 不了，再加一维。由于题目要求了“权值和是 $k+1$ 的倍数”这个条件限制，所以单纯地使用二维 DP 并不能很好地解决这个问题，于是乎我们要祭出三维 DP 大法，判断士兵所在位置能否满足豌豆数的要求。

我们设 $f(i,j,k)$ 表示士兵在位置 $(i,j)$ 能否获得价值为 $k$ 的豌豆，用数组 $a_{i,j}$ 来存储矩阵，就可以列出状态转移方程：

$$
f(i,j,k)=f(i+1,j-1,k-a_{i,j})
$$

或

$$
f(i,j,k)=f(i+1,j+1,k-a_{i,j})
$$

类似这种用 DP 思想记录能否实现的题目还有很多，感兴趣的同学可以找找。

除此之外，还要注意的是，由于移动是从最后一行开始的，所以在枚举状态的时候，我们要选择倒着枚举。最后在得到解时，我们只需要在所有可能的情况下取最大值即可。

题目还要求输出路径，这个的实现也比较简单，我们只需要在搜索的过程中，记录一下上一个转移来的状态即可。

代码实现也比较简单，这里就不给了，实在不会的可以参考其他题解，要自己思考哟！