莫比乌斯反演模板题了吧。

设 $f(x)$ 表示 gcd 为 $x$ 的方案数，$g(x)$ 表示 gcd 为 $x$ 倍数的方案数。

$g(x)$ 容易求，设 $c_x$ 表示 $x$ 的倍数出现次数，任意多个结合都可使 gcd 为 $x$ 的倍数，但不可不选，则 $g(x)=2^{c_x}-1$。

根据定义容易列出 $f,g$ 的关系：$g(d)=\sum_{d|n} f(n)$，我们希望求 $f$ 而 $g$ 又可求，所以莫比乌斯反演。

得到 $f(d)=\sum_{d|n}\mu(\frac{n}{d})g(n)$。

由于要求 $f(1)$，易知答案为 $f(1)=\sum_{d}\mu(d)\left(2^{c_d}-1\right)$。

线性筛出 $\mu$ 后直接枚举 $d$ 即可完成本题。