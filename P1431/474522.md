### 本蒟蒻第一篇题解

~~某谷，你确定这不是小学奥数？？？~~

[题目传送门](https://www.luogu.com.cn/problem/P1431)

好的，回归正题。首先我们可以用小学奥数方法(方法会在后面给出)轻易得出：

**答案=$log_{3}$n**

但是这只是$p!=0$的情况，你还要分析$p=0$时的情况。

在一波举例子和分析~~加玄学~~之后，你发现：

**$p=0$时，答案=$log_{3}n*2+3$**

于是你将这段代码交了上去。

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	int T,k,p;
	long long n;
	cin>>T;
	while(T--){
		cin>>k>>p>>n;
		if(p!=0) cout<<ceil(log(n)/log(3))<<endl;
		else cout<<ceil(log(2*n+3)/log(3))<<endl;
	}
	
	
	
	
	return 0;
}
```
然后你又惊奇地发现，你只得了$36$分！
正当你茫然而又不知所措的时候，你看到了数据范围：$3<n<10^{10001}$

然后，这道题所有的坑点排完。

# 可以上AC代码了（由于本人懒得敲高精，直接用的python）
~~（我知道你们最想看这个）~~

```cpp
import math
T=input()
T=int(T)
for i in range (T):
	k=input()
  	p=input()
  	n=input()
	k=int(k)
  	p=int(p)
  	n=int(n)
  	if p!=0:
		t=math.ceil(math.log(n)/math.log(3))
	else:
		t=math.ceil(math.log(n*2+3)/math.log(3))
	print(t)

	
```




------------
------------
------------
------------
------------

## 证明：
我们把所有的硬币叫做A，B，C……

**当$p=1$时：**

若$n=3$：

现将A和B称一次，重的就是假的 ，一样重C就是假的。$ans=1$。

若$n=4$：

两两一组称一次，把重的一组拿出来再称一次，重的就是假的。$ans=2$。

若$n=5$：

两两一组分，剩下一个留着。称出来一样重，剩下的就是假的，若不是，就按$n=4$时一样分。$ans=2$。

……

**观察数据得：$ans=log_{3}n$。**



**当$p=-1$时：同$p=1$。**



------------


------------
**当$p=0$时：**

若$n=3$：

现将A和B称一次，一样重C就是假的。不一样重，就把A和C拿出来称，若A，C一样重，B就是假的，若不一样重，就能知道假币轻重情况，无需再称。$ans=2$。

若$n=4$：

两两一组称一次，把重的一组拿出来再称一次，若一样重，所以伪币较轻，再称另一组。$ans=3$。

若$n=5$：

两两一组分，剩下一个留着。称出来一样重，剩下的就是假的，若不是，就按$n=4$时一样分。$ans=3$。

……

**观察数据得：$ans=log_{3}n*2+3$。**

# 证毕！