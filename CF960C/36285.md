# CF960C - Subsequence Counting
- https://www.luogu.com.cn/problem/CF960C
- 分块构造

## 题意

给出 $X,d(1\leq X,d\leq 10^9)$，你需要构造一个序列，满足：
- 长度不超过 $10^4$。
- 每个元素大小不超过 $10^{18}$。
- 假设构造的序列长度为 $n$，那么恰好有 $2^n-1$ 个非空子序列。要求这些非空子序列中，恰好有 $X$ 个子序列满足：序列中元素最大值 $-$ 序列中元素最小值 $<d$。

## 思路

注意到：
- 题目中精确要求了非空子序列的数量，不能多也能不少。
- 构造的序列每个元素大小不超过 $10^{18}$，这正好是 $d$ 取值上限的 $10^9$ 倍。

综上，考虑分块构造。

即：将序列一块一块地构造，每个块之间互不影响。

具体而言：
- 对于同一个块内的元素，两两元素之差均 $<d$。
- 对于不同块的元素，两两元素之差均 $\geq d$。

这样，设某一个块的元素数量为 $cnt$，那么它对总数的贡献为 $2^{cnt}-1$，并且不受其他块的影响。

对于题目中精确要求了非空子序列的数量这一点，将 $X$ 拆二进制构造即可。