一遍过的 CF 紫题。。真的水

看到这种位运算第一个想法就是拆位，然后对互不影响的每一位讨论。

然后就变成了 $01$ 序列，每次给出一个条件：区间都是 $1$/至少有一个 $0$。

想到这里就很显然了。对于区间都是 $1$ 的限制条件，直接区间推平，剩下不是 $1$ 的肯定贪心的染为 $0$。然后再逐个验证区间至少有一个 $0$ 的询问，若这个区间都是 $1$ 则无解，这个建前缀和。

这个区间推平做完之后看了下题解，发现都是线段树？不解，这个是经典老套路了吧，用并查集处理，不知道的可以去做一下 P2391。

这个做法朴素实现是时间 $O(n \log w \alpha(n)$，空间 $O(n)$ 的，用 uoj 上看到的处理这类问题的特殊的并查集可以把时间优化到 $O(n\log w)$。