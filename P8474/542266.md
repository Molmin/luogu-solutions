### - [传送门](https://www.luogu.com.cn/problem/P8474)

------------

### 思路

我们可以先打表，从 $1$ 到 $5$ 分别是：

```cpp
1 3 21 315 9765
```

我们试了一下，首先 $1$ 和 $3$ 暂时并没有什么联系。再看 $3$  和 $21$，我们能发现 $3$ 是 $21$ 的因数，往后再试，~~用计算机算出结果~~，就能知道 $315$ 是 $21$ 的倍数。 

能发现前面的一个数是后面的数的因数。

好，我们再把后一个数除以前一个数的值打成表。

```cpp
3 7 15 31
```

再看看有什么规律，然后继续试试，就可以发现后面的数与前面的数之差有规律可寻。

```cpp
4 8 16
```

这样就比较明显了，就是 $num_i=num_{i-1} \times 2$。

这样，我们从最后的 $num$ 推出第二步的值，再继续推出最终答案就行了。

### 代码

```cpp
//now是表示的是第二步
//num是表示的是第三步
if(n==1)//特判，不过可以不用
	return printf("1\n"),0;
if(n==2)
	return printf("3\n"),0; 
if(n==3)
	return printf("21\n"),0;
if(n==4)
	return printf("315\n"),0;
now=3;
num=4;
for(int i=2;i<=n;i++){//每次都要取模
	ans=(ans*now)%Mod;//推出第一步
	now=(now+num)%Mod;//推出第二步，更新，已备下一次操作
	num=num*2%Mod;//推出第三步
}
printf("%lld\n",ans%Mod);
```