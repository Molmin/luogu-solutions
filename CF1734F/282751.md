
根据这个神秘生成方式，我们发现一个把一个下标写成二进制，那么在某一位上把 $0$ 变成 $1$ 后，这个值肯定变了，也就是说，每一位取值和下标二进制的 `popcount` 奇偶性是相同的。原问题转化为给定 $n,m$，求 $0$ 至 $n$ 中有多少个 $x$，满足 $x$ 和 $x+m$ `popcount` 奇偶性不同。

如果 $n$ 是二的幂次，那么数位 dp 是容易的，$dp_i,0/1,0/1,0/1$ 表示 $x$ 与 $x+m$ 第 $i-1$ 位是否进位，且 $i-1$ 位 `popcount` 奇偶性是否相同。值得注意是存在 $m>n$ 的情况，这种情况下，考虑 $m>n$ 的部分的 `popcount` 奇偶，枚举最后一位是否进位和奇偶性，就可以统计答案。

那么当 $n$ 不是二的幂次的时候，把它拆成若干个二的幂次，然后可以看成是 给定 $n,m$，求 $0$ 至 $n$ 中有多少个 $x$，满足 $x+m1$ 和 $x+m2$ `popcount` 奇偶性不同，这里不理解可以看代码，相当于把它之前算了的下标加进来，这个问题原来的 dp 仍然适用。

代码见 CF 提交。