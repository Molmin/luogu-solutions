考虑什么样的路径能满足条件，我们考虑点分治，如果存在两条路径，一条自下而上连城的数字为$d_1$，另一条自上而下连成的数字为$d_2$,并且满足$d_1\times 10^{dep_2}+d_2=0(mod~m)$，考虑将这个式子变形，发现也就是求有多少对$d_1$和$-d_2\times 10^{-dep}$相等，我们将$d_1$插入$map$中，然后枚举$-d_2\times 10^{-dep}$统计即可。

[$code$](https://pastebin.com/NsMd3JuG)