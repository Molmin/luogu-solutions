## [题目链接](http://uoj.ac/problem/26)

这种思维题评成绿题。。。

由于最后一次询问不影响结果，我们假设最后一次询问回答1。

考虑这样一个事情：回答1的边构成一棵树。

证明：对于不构成一棵树的情况，如果不连通，那么中途就可以直接判断整个不连通；否则，这些边必定会形成环，而对于环上的任意一条边，只要询问了环上其他边就可以直接判断出图连通，不需要询问这条边。

此时有两种解法：

1.将连通的点放入同一个并查集。对于一个询问，如果边的两个端点所属并查集之间只剩下这一条边，那么连，否则不连

2.给边定向，从编号大的连向编号小的。对于一个询问，如果这是其中一个端点的最后一条出边，那么连，否则不连。

容易证明，上述两种做法都能保证在最后一次询问前不被推测出结果。

1证明：如果得到的图不连通，则一定存在两个并查集之间只剩下一条边却没有连，与构造方法矛盾，因此不可能在中途判断出不连通；直到最后一次询问图才连通，因此不可能在中途判断出连通。

2证明：除了0号点，每个点都一定会向比自己编号小的点连一条边，必定直接或间接与0号点连通，因此不可能在中途判断出不连通；第i个点（不包括0号点）的全部出边被询问时连第i条边，则第n-1个点（不包括0号点）的全部出边被询问时连第n-1条边，因此直到最后一次询问图才连通，不可能在中途判断出连通。