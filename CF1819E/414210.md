找个好玩题复建大脑。

先战术看错题，看漏真边连通的条件，大力瞪眼 $114514$ 小时发现不可做。考虑数据是一个菊花，$s$ 随机选择非 $1$ 点，则有一条真边和没有真边的情况完全一样，所以不可做了。

于是发现连通很重要，于是考虑找出一个真边生成树。如果断掉边 $(u,v)$ 后图无法通过真边连通，则 $(u,v)$ 为一条树边，并将 $(u,v)$ 重新连接，否则将 $(u,v)$ 永久断掉。我们断掉 $(u,v)$，以 $\frac{1}{2}$ 的概率随机选择 $u,v$ 之一进行询问。如果 $(u,v)$ 是真树边，设断掉 $(u,v)$ 后两个连通块大小分别为 $a,b$，则每次询问有 $\frac{1}{2}(\frac{a}{n}+\frac{b}{n})=\frac{1}{2}$ 的概率得到否定回答。如果询问足够多次仍未出现否定答案，我们认为断掉 $(u,v)$ 后图依然可以通过真边连通。

对于非树边 $(u,v)$，我们断掉 $u,v$ 路径上的一条边并连接 $(u,v)$，以 $\frac{1}{2}$ 的概率随机选择 $u,v$ 之一进行询问。如果 $(u,v)$ 是真边，则一定会得到肯定回答。否则设两个连通块大小分别为 $(a,b)$，则每次询问有 $\frac{1}{2}$ 的概率得到否定回答。这样我们就确定了所有的非树边是不是真边。