决心写一篇真正易懂的题解。第一页的几个大佬们写的有点晦涩难懂，制裁了一下什么都不想就要看题解的我。自己想这种题真的非常有必要。

给自己总结，给大家讲解一下解一道这种类型的题的解题步骤。

## Step 1 模型转化
我们把中心点独立出去。重点关注外圈点。

容易发现，外圈的点本质上是被分成了一些联通块。 而每一个联通块中**有且仅有**一个点与中间相连。

于是我们的问题就转化完了。现在我们要针对的，就是外圈点。

## Step 2 寻找合适的算法
这一步里经验成分比较多。

这道题感觉像是一个环上$dp$问题。那么此时，我们就应该来浅浅地考虑一下递推式。如果感觉不对，就应该去思考别的算法。但特别注意，就算你认为一个算法是不能解决这道题的，也请在时间充足的时候仔仔细细地思考它。有可能会有意外的收获。

非常幸运地，我们发现此题似乎可以这样解决。
## Step 3 深入思考

首先，环上$dp$的套路就是断环成链。我们考虑先不连接边$1-n$。

我们定义 $dp_i$ 表示前 $i$ 个点连接的不同方案数。

那么我们枚举$(i, i-1, i-2, ..., i-j+1)$这一个连通块的**长度**$j$。我们考虑到中间的点可以连接这个连通块中任何一个点，有$j$种方案。由我们的枚举方式，$i-j+1$和$i-j$之间一定是断开的（否则连通块长度就是$j+1$了）。此时前面$i-j$个点就有$dp_{i-j}$种连接方式。那么就有转移方程$dp_i = \sum\limits_{j=1}^{i}dp_{i-j} * j$。这样的最终方法数就是$dp_n$。

接下来考虑存在$1-n$连边的情况。这是本题的难点。

容易发现，对于包含$1-n$这个联通块，不管它多大，都是一种新方案.

这启示我们枚举$1-n$联通块的大小$sz$。那么剩下了$n-sz$个点。

可以发现包含$1-n$，大小为$sz$的联通块一共有$sz$个。每一种方案下，中间点都可以和这个联通块中任何一个点连边，共有$sz$中方法。剩余$n-sz$个点的方案数就是$dp_{n-sz}$。这样的话，大小为$sz$的方法数就是$sz^2*dp_{n-sz}$

那么就可以的到最终的结果了。

##  Step 4 细节实现
我们粗略估计，发现最终结果可能会爆ll。
于是要使用高精度来实现这题。

代码非常简单，不予赘述。