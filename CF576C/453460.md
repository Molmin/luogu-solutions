这一道题如何转化成莫队问题其他题解已经讲的很清楚了，所以我来注重讲一讲此题所用的奇偶排序优化。

我们发现如果按照普通莫队排序的话二元组的 $x_i , y_i$ 趋向会变成这个样子(横为 $x$ 竖为 $y$)

![](https://cdn.luogu.com.cn/upload/image_hosting/nekyv77w.png)

而奇偶排序优化主要就是通过其奇偶性来决定从小到大排序还是从大到小排序，使得他变成这个样子：

![](https://cdn.luogu.com.cn/upload/image_hosting/dapb0f6f.png)

主要原理是右指针跳完奇数块之后回跳时能顺路把偶数块跳完，以此类推。这样就起到了优化时间复杂度的效果，也可以完美的通过第一篇题解中给出的hack样例。