## 题意

试构造一个正整数数列 $a_1,a_2,…,a_m$，使得这个数列满足以下条件：

- $a_1=a_m=1$。

- $a_i=a_{i-1}-1\ \text{or}\ a_{i-1}\ \text{or}\ a_{i-1}+1\ $，$2≤i≤m$。

- $\sum_{i=1}^ma_i=n$。

求这个数列最短的长度。

最多有 $10^5$ 组数据，$1≤n≤10^{18}$。

## 分析

由于 $n$ 的范围超大，所以我们可以先~~打表找规律~~从 $n$ 较小的情况看。

| $n$ | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ | $7$ | $8$ | $9$ |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $ans$ | $1$ | $2$ | $3$ |$3$ | $4$ | $4$ | $5$ | $5$ | $5$ |

看起来很有规律：$1,2$ 出现了 $1$ 次，$3,4$ 出现了 $2$ 次，$5$ 出现了 $3$ 次，那 $6$ 呢？

| $n$ | $10$ | $11$ | $12$ | $13$ | $14$ | $15$ | $16$ | $17$ | $18$ | $19$ | $20$ |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $ans$ | $6$ | $6$ | $6$ | $7$ | $7$ | $7$ | $7$ | $8$ | $8$ | $8$ | $8$ |

这时的规律就不言自明了，不过还是看不出正解……

于是我们把这个表**转一下**：

| $ans$ | $ans$ 对应的 $n$ | $ans$ 对应的 $\max(n)$ |
| :----------: | :----------: | :----------: |
| $1$ | $1$ | $1$ |
| $2$ | $2$ | $2$ |
| $3$ | $3,4$ | $4$ |
| $4$ | $5,6$ | $6$ |
| $5$ | $7,8,9$ | $9$ |
| $6$ | $10,11,12$ | $12$ |
| $7$ | $13,14,15,16$ | $16$ |
| $8$ | $17,18,19,20$ | $20$ |

如果你还看不出来，那我只好打出来了：

$\ \ 1=1\times1\ \ $ $\ \ 2=1\times2$

$\ \ 4=2\times2\ \ $ $\ \ 6=2\times3$

$\ \ 9=3\times3\ \ $ $12=3\times4$

$16=4\times4\ \ $ $20=4\times5$

$ans$ 对应的 $\max(n)=\left\lfloor\dfrac{(ans+1)\ \text{xor}\ 1}{2}\right\rfloor\times(\left\lfloor\dfrac{(ans+1)\ \text{xor}\ 1}{2}\right\rfloor+((ans+1)\ \&\ 1))$。

用人话来说，若 $ans$ 为偶数，则 $\max(n)=\left\lfloor\dfrac{ans}{2}\right\rfloor\times(\left\lfloor\dfrac{ans}{2}\right\rfloor+1)=\left\lfloor\dfrac{ans}{2}\right\rfloor^2+\left\lfloor\dfrac{ans}{2}\right\rfloor$；若 $ans$ 为奇数，则 $\max(n)=\left\lfloor\dfrac{ans+1}{2}\right\rfloor^2$。

又因为每个 $ans$ 对应的 $n$ 是连续的，所以我们可以根据 $n$ 所在的范围确定 $ans$，记 $a=\left\lfloor\sqrt{n}\right\rfloor$，则：

$$n=\begin{cases}2\times a-1&n=a^2\\2\times a&a^2<n≤a\times(a+1)\\2\times a+1&n>a\times(a+1)\end{cases}$$

为什么是正确的呢？我们以 $a=3$ 来举例。

| $n$ | $9$ | $10$ | $11$ | $12$ | $13$ | $14$ | $15$ |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $a$ | $3$ | $3$ | $3$ | $3$ | $3$ | $3$ | $3$ |
| $ans$ | $5$ | $6$ | $6$ | $6$ | $7$ | $7$ | $7$ |

一一对照就能发现上面 $n$ 的求法是对的。

## 代码

```cpp
#include<bits/stdc++.h>
#define ll long long
using namespace std;
ll t,n,a;
int main()
{
    cin>>t;
    while(t--)
    {
    	cin>>n;
    	a=sqrt(n);
    	if(n==a*a)
    		cout<<a*2-1<<endl;
    	else if(n<=a*(a+1))
    		cout<<a*2<<endl;
    	else
    		cout<<a*2+1<<endl;
	}
	return 0;
}
```