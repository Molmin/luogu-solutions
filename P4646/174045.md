~~踩一下下面那篇题解，这啥嘛根本啥都没讲，建议管理员撤下来。~~

~~我要膜拜 djq。~~

这题你可以发现输入的是个平面图，然后他在这个平面上的表现形式是一个 PSLG（平面直线区域，是叫这个名字吧？）。所以你可以直接套 PSLG 的算法找出每个面，然后建出这个图的对偶图。然后以最外面的无限面为源点跑个 bfs，两边距离相等的边就是保留下来的。

然后我并不会 PSLG。~~对于 dls 这种神仙来说就是懒得写。~~

所以我们考虑比较简单的做法：一个边可能会把平面分成两个区域对吧，所以我们对于一个边我们建两个点，表示这个边两侧的两个区域。这两个区域连一条权值为一的边。然后对于原图中的每个点，你可以通过对他边数的讨论得到某些区域其实是同一个区域。对于可以确定是同一个区域的两个区域，就连一条权值为零的边，这样就缩起来了。

最后跑 01bfs 即可。

但是这有两个问题：

如何找到最外面的区域代表的点呢，就是你可以去找到横坐标最小的点，如果有多个就选纵坐标最小的那个，然后最外面的区域一定就是它上面的边左边的区域，或者它右边的边下面的区域。

然而这个做法对于原图不联通的情况会炸，赛时卡在这里了。解决方法非常 naive，对于每个连通块分别做就可以了。同时这个解决方法也能解决一个大的里面套了一个小的的情况。

然后就做完了。

代码太丑不放了。