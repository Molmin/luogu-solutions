因为 $\bmod\ 2^{20}$，所以能算进答案的区间长度最长也只有 $21$。枚举所有区间，将该区间全部连成一段，用剩下放任自流的方案数计算即可。可以发现剩下的其实就是 $n-1-(r-l)-2$ 个空插入至少 $k-2$ 个异或符号。另外，区间端点在首尾的情况要特判（只消耗一个异或符号或不消耗）。设 $f(n,k)$ 表示 $n$ 个数至少选 $k$ 个的方案数，则：

$$
\begin{aligned}
f(n,k)&=\sum^n_{i=k}\dbinom ni\\
&=2^n-\sum^{k-1}_{i=0}\dbinom ni\\
&\equiv\sum^{k-1}_{i=0}\dbinom ni\pmod2\\
&\equiv\sum^{k-1}_{i=0}[n\ \&\ i=i]\pmod2\\
\end{aligned}
$$

特判 $n=0$。所以我们只需要计算这一部分，时间复杂度是 $O(\log k)$ 的。另外每个区间最多只会造成一位的贡献，所以时间复杂度 $O(n\log k)$。代码……so lazy。