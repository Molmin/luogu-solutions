本题解部分内容借鉴大佬博客（~~好像是全借鉴的~~。

## 题意：
	
给定你一个 $1 \times n$ 的棋盘，棋盘上总共有 $k$ 枚棋子，

有 $\frac{k}{2}$ 枚白棋，有 $\frac{k}{2}$ 枚黑棋。

其中棋盘上的棋子满足最左边一定是白色棋子，最右边的一枚一定是黑色棋子。

同时为了保证游戏可以停止，所以黑棋只能往左走，白棋只能往右走。

游戏结束的条件是当有一个人无法移动自己的棋子的时候，这个人就输了。

同时题目规定不能隔着棋走，也就是只能走棋盘上的空格。

## 思路：

这道题是一道博弈论的题，仔细读题会发现这题可以看成 `K-Nim` 游戏。

那什么是 `K-Nim` 游戏呢？

这是一个公平组合游戏，输赢与当前的状态有关，与游戏者无关。

有 $n$ 堆石子，每次可以从不超过 $k$ 堆中各取一些石子，如过轮到哪个人拿石

子时却石子被拿空，那么这个人就输了。

我们可以将相邻的白黑棋子看成是一堆石子，中间棋盘的空格就是石子的个数。

当两个人移动棋子的时候就相当于是从这堆石子中取出了石子。

`K-Nim` 游戏的解法是：

将每堆石子转换成二进制，然后用一个 $sum_i$ 来表示每堆石子二进制下第 $i$ 

位的数字去 $\bmod (k + 1)$，当有一个 $sum_i \ne 0$ 时，

此时先手必胜，后手必输。

### `Nim` 游戏详细讲解：

这游戏看上去比较复杂，先从简单的情况开始分析。

当只有一堆石子的时候，先手必胜，只需要一次性把所有石子都拿走就行了。

当有两堆石子并且两堆石子数量不一样多的时候，那么你只需要先手从石子多的那

堆中去拿一部分石子让两堆石子数量相等，然后每次拿和对面一样多的石子，也是必胜局面。

那当两堆石子一样多的时候，还会存在必胜局面吗，只能后手必胜，所以你的对手也

可以拿和你一样多的石子让你输掉。

定义两种状态，一种是 `P-position`，另一种是 `N-position`。

`P-position` 是指后手必胜的局面， `N-position` 是指先手必胜的局面。

根据这个定义，我们可以来以 `Nim` 游戏为例来进行一下计算。

我们这里认为 $(x,y)$ 和 $(y,x)$ 是一种本质相同的局面，因为这两种情况只是

交换了两堆的石子数量，并没有本质区别。

下面我们依靠定义证明一下 $(3,3)$ 是一个 `P-position`。

首先 $(3,3)$ 的子局面有 $(0,3)$、$(1,3)$、$(2,3)$，只需要计算出这三种局面的性质就可以了。

$(0,3)$ 的子局面有 $(0,0)$、$(0,1)$、$(0,2)$，其中 $(0,0)$ 显然是 `P-position`，

所以 $(0,3)$ 是 `N-position`（只要找到一个是 `P-position` 的子局面就能

说明现在是 `N-position`）。

 $(1,3)$ 的后继中 $(1,1)$ 是 `P-position`（因为 $(1,1)$ 的唯一子局面 
 
 $(0,1)$ 是 `N-position`），所以 $(1,3)$ 也是 `N-position`。
 
同样可以证明 $(2,3)$ 是 `N-position`。

所以 $(3,3)$ 的所有子局面都是 `N-position`，它就是 `P-position`。

通过一点简单的数学归纳，可以严格的证明“有两堆石子时的局面是 `P-position` 。

当且仅当这两堆石子的数目相等”。 

根据这个过程，我们可以通过递归来计算每种局面的自局面，如果某个局面是 `P-
position`，

那么这个局面的上一步就是一个必胜的局面。

### `K-Nim` 游戏解法证明：

我们这里设堆数为 $d$。

我们考虑只有一堆石子的时候，显然异或和为 $0$ 时先手能变为不为 $0$，
 
而后手在能将其变为为 $0$，假设先手动的最高位为 $i$，

则后手动第 $i$ 位上为 $1$ 的另一个石子，下面的变成与之对应的即可。

那么考虑堆数大于 $1$ 的情况， 当所有数出现次数均为 $(d+1)$ 的倍数时，先

手不可能依然变为出现次数均为 $(d+1)$ 的倍数；

从高到低考虑位 $j$，设现在已经改变的堆数为 $t$， $t$ 个数中有 $a$ 个在位 

$j$ 上为 $1$，$b$ 个为 $0$， 并假设后手改动前这一位上 $1$ 的个数 $(d+1)$ 总共是 $x$。

若 $ a \le x$， 则改变这 $a$ 个中的 $x$ 个即可。若$ b \le (d - x + 1)$。 

 则可以把 $b$ 个中的 $(d + 1 - x)$ 个从 $0$ 变成 $1$。

否则另外选择 $t$ 堆之外的 $(x - a)$ 堆变成1， 

则选的总数为 $(x-a)+a+b$ $ = $ $x + b \le  (d +1- b +b)$ $=$ $d + 1$，

故移动依然合法。

然后统计方案数即可，我们用 $dp[i][j]$ 来表示到第 $i$ 位和为 $j$ 的方案数。

转移一下即可，其他题解都已经写的比较明白了。
