# P2767 树的数量

- - **73**通过
  - **169**提交
- **难度****省选/NOI-**
- **时空限制**1000ms / 128MB

## 题目描述

有$n$个不同节点，请问能组成多少种$m$叉树结构。

（注意：1、节点的两个子树交换了，就不算一种m叉树

2、任意子树可以为空

3、不要当图考虑，同一种树一定是根节点一样，然后下面的子树也一样

4.交换两节点后算一种）

## 输入输出格式

### 输入格式：

输入占一行，输入$n, m(n, m≤127)$。

### 输出格式：

占一行，就是$\text{种类的个数}(\bmod 10007)$

## 输入输出样例

### 输入样例#1：

```
2 2
```

### 输出样例#1：

```
2
```

# 分析

## $DP$

$DP$肯定是可以做的。

考虑设$dp$表示根节点有$j$个儿子，子树大小为$k$的方案数。易得$dp[j][k] = \sum_{l = 0}^{k - 1}dp[m][l]\times dp[j-1][k-l]$，也就是说在一棵树的根节点上接上一棵$m$叉树。

然后发现爆了。

原因显然：具有后效性

所以我们可以暴力升维, 用$f_i$表示$i$个节点的方案数， 然后每次做完之后$f_i=  dp[j][k]$。$\Omicron(n^4)$

这样可以过。

但是我们也可以模仿$catalan数$ 递推，也可以$\Omicron(n^3)$

## ?

我们想到$catalan数$的公式

然后~~盲猜~~出公式 : 

$$\Large\frac{n-1\choose n\cdot m}{n}$$

但是，为什么呢？

![VUlFIS.png](https://s2.ax1x.com/2019/06/05/VUlFIS.png)

**我不会**

## 乱搞

因为题中是$m$叉树，所以连接儿子的边的选择会影响方案数，因此序列中每个数的大小不超过$m$，总共有$n\times m$条边$(可以为空)$，从中选出$n-1$条。

然而，这些方案中只有$\frac1n$是可以的。

为什么呢？

考虑我们在这$n$个点中按$dfs$顺序选儿子

显然我们不可以选已经选过的节点，所以一个方案成立的概率是

$$\Large\prod_{i = 1}^{n - 1}\frac{i }{i + 1} = \frac1n$$



