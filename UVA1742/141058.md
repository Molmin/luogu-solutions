## 题意
坐标系中，一堆平行于 x 轴的油田线段，线段价值为线段长度，找一条直线，它穿过的油田价值和最大。

## 分析
~~话说这题真的有黑难度吗，不过多水一道黑题总是好的。~~


这题好像思路大体上都差不多，所以我尽量详细讲。

第一步：我们考虑如何暴力。你会发现假设答案的线段叫作 $l$，那么 $l$ 总能通过各种变换，比如说往左挪一挪，或者稍微转一转，等等，**通过某一条线段的左端点和某一条线段的右端点**，可以想象一个平面，上面竖着一对对平行的棍，一根棍夹在这些对棍中间，对吧。

知道了这个，我们写出 $\Theta (n^3)$ 的大力 dp。

第二步：我们考虑怎么优化，这里有点跳跃：由于会出现纵坐标相同的情况，那我们不妨旋转一下，把坐标轴转一个直角，得到以 $x$ 为纵坐标，$y$ 为横坐标的坐标系。回到刚才的结论上，**我们必然可以让直线 $l$ 靠在某一条直线的端点上**，这回我们考虑只枚举其中一条线段的左端点，然后第二层我们去找别的线段的左右端点，并记录得到直线的斜率。由于我们固定了一个端点，所以答案直线的斜率必然在这些**斜率的区间里面**，相应的，这些区间的价值对应原油田的价值，当然，如果你映射到坐标轴上搞一个截距也是一样的道理，那么问题转化为，找到一个点，包含这个点的区间的价值和最大，那么这个问题怎么做都可以了，开堆乱搞，尺取乱搞皆可。

[ACcode](https://www.luogu.com.cn/paste/49a5iwz6)
