考虑最暴力的做法，$f[i][s_1][s_2]$表示考虑前$i$个点，小$G$选出的质数集合为$s_1$，小$W$选出的质数集合为$s_2$，考虑到$30$以内的指数只有$10$个，这样做的复杂度为$2^{20}n$。

考虑到$n \le 500$，那么这样做的复杂度是不行的，但是我们知道对于一个$\le n$的数最大只会有一个超过$\sqrt n$的质因数，这样我们发现最多只有$8$个$\le \sqrt{n}$的质因数。

整理一下做法，我们首先将$2-n$的数质因数分解，对于一个数得到他的$\le \sqrt n$质因数集合和一个大于$\sqrt n$的质因数$bigprime$，没有就设为$1$，我们再按照$bigprime$的大小排序，对于一段相同的$bigprime$，我们定义$f1[s_1][s_2],f2[s_1][s_2]$表示$bigprime$在$s_1,s_2$集合内的方案数，最后$f[s_1][s_2]=f1[s_1][s_2]+f2[s_1][s_2]-f[s_1][s_2]$。

[$code$](https://captaindag.github.io/2020/04/03/NOI2015-%E5%AF%BF%E5%8F%B8%E6%99%9A%E5%AE%B4/)