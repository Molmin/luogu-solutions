好像和其他题解的理解方式不太一样。

考虑按编号从小往大添加点。

首先记录下当前的最大值 $x$，设当前添加的点为 $i$.

首先 $x\leftarrow\max\{p_i,x\}$，如果 $x=i$，说明 $1\sim i$ 在前面的 $p_1\sim p_i$ 中间都出现过，**那么之后的任何点都不会和前面的点连边**，则前面的点单独形成一个连通块，独立出来。此时在添加一个点连通块数量加 1.

小注意，至少有一个连通块。

$\mathcal{O}\left(n\right)$ 递推即可。

