若连通块是一棵树，考虑钦定 $k$ 个点为奇度点，方案数为 $\binom{n}{k}$。对于叶子，如果它是奇度点，那么连向它父亲的边要保留，否则不保留。这样自底向上考虑，任意一条边的保留情况都可以唯一确定，所以最后方案数就是 $\binom{n}{k}$。

若连通块存在环，仍然钦定 $k$ 个点为奇度点。考虑随便拎出一棵生成树，非树边选可不选；确定了非树边的状态，就和树的情况一样了。设连通块边数为 $m$，最后方案数就是 $2^{m-n+1} \binom{n}{k}$。

多个连通块的情况，考虑背包 dp，设 $f_{i,j}$ 为前 $i$ 个连通块，选了 $j$ 个奇度点的方案数。转移枚举第 $i$ 个连通块钦定 $k$ 个奇度点（$k$ 为偶数）即可。

时间复杂度 $O(n^2)$。

[code](https://atcoder.jp/contests/arc115/submissions/40823568)