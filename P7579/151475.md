

可以先考虑次品只有一个球的情况。这很明显是一个小学数学题，每次尽量平均分成三份，称量球个数相等的两份。如果相等，次品在另外一份；否则次品在轻的那一份。

接下来考虑两个球。这次把它分成两份（多出来的不管），如果相等，那么每一份有一个次品；否则，轻的那一份有两个次品。

递归处理即可。记得注意边界情况。还有分成两份是如果有多出来的球，在往下递归的时候要带上它。

本代码在所有测试点中的最大询问次数是 $12$ 次。看上去很优秀。

代码写得很丑，不放了吧。

[](膜拜rui_er！！！)