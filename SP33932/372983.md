* **【题目链接】**

[Link:SP33932](https://www.luogu.com.cn/problem/SP33932)

* **【解题思路】**

首先我们发现这个东西很难优化，唯一的突破口就是素数数量很少。那么我们是否可以优化枚举过程呢？

我们考虑一个类似于 Trie 的东西。首先我们把所有数当成 $9$ 位处理，不足的前面补 $0$。然后我们枚举前 $k$ 位，通过预处理得到剩余的数能排列出几个质数。如果给定数字个数小于等于 $9-k$，我们直接暴力枚举即可。我取了 $k=3$。具体来说，我们已经确定了前面 $3$ 位是 $202$，剩下了 $0,0,1,2,3,6$，那么我们就需要用到预处理好的 $f_{202,001236}$。

接下来是预处理的问题。我们可以发现，$f_{001,123456}$ 与 $f_{001,654321}$ 是一样的。那么我们就没有必要存储后者，只存储前者。枚举可以发现有用的状态只有 $5005$ 个，我们可以将它们映射到 $0\sim 5004$ 上。

然后就可以直接枚举质数预处理了。当然，代码里面实现会更复杂一些。

代码就不给了，SP19913 就有人反手交了一发我的代码。