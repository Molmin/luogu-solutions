[题目传送门](https://www.luogu.com.cn/problem/CF1701D)

首先，求出每个位置的最小可取值 $l$、最大可取值 $r$。

然后按照 $r$ 排序，确定一个选择 $a$ 的顺序（这里选择从小到大），然后，把右端点可以覆盖的，暂时放在一起。

因为左端点最大的会最先废掉，所以我们可以考虑把那些左端点最小的先得到 $a$，这一步可以用优先队列维护。

每一个都只会赋一个 $a$，时间复杂度 $O(n\log n)$。