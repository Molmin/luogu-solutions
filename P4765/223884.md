发现两边的最优策略都建立在对方的最优策略之上，恶魔方的策略是选择加排序，凡人方的策略是排序。

凡人方选择完毕后，恶魔方要么烧掉这个物品，要么就让凡人逃跑，这样就发现恶魔方的选择是非常依赖于凡人方的，所以凡人方的决策也可以看作选择加排序。

设凡人方最优策略的选择的排列是 $p$ ，那么最终的最优解就是：
$$
\max_p \min_{t\le k} \left\{v_{p_t} - \sum_{i = 1} ^ t c_{p_i}\right\}
$$
发现对于不同的 $p_1,p_2,\ldots,p_t$ ，只有将这 $t$ 个物品按 $v$ 从小到大排序后，才是最优解。

所以对于凡人方选择的序列 $p$ ，一定是对于 $v$ 单调不减的。

后面就简单了，对于恶魔方的两种策略设计 DP ，先对每个物品对于 $v$ 数组从小到大排序，考虑恶魔两种策略对于总体的贡献，烧掉 $i$ 物品后，为 $-c_i$ 加上后续的贡献，若不释放魔法，则为 $v_i - c_i$ 。

这样设 $f_{i, j}$ 表示考虑排序后后 $i$ 个物品，使用了 $j$ 次魔法的最优解，结合上述策略，可以列出方程：
$$
f_{i, j} = \max \{f_{i - 1, j}, \min\{f_{i - 1, j - 1} - c_i, v_i - c_i\}\}
$$
