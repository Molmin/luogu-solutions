[题目链接：AT1445 乱数生成](https://www.luogu.com.cn/problem/AT1445)

## 分类讨论

本题需分类讨论。

若要使选出的三个数的中位数为 $K$，则可能是以下四种情况中的一种：

1. 一个数小于 $K$，一个数等于 $K$，一个数大于 $K$（仅当 $1 < K < N$）；
2. 一个数小于 $K$，两个数等于 $K$（仅当 $K > 1$）；
3. 两个数等于 $K$，一个数大于 $K$（仅当 $K < N$）；
4. 三个数都等于 $K$。

形式化地：

设选中的三个数分别为 $a,b,c$，且 $a \le b \le c$，则有以下四种情况：

1. $1 \le a < K$，$b = K$，$K < c \le N$（仅当 $1 < K < N$）；
2. $1 \le a < K$，$b = c = K$（仅当 $K > 1$）；
3. $a = b = K$，$K < c \le N$（仅当 $K < N$）；
4. $a = b = c$。

其中第二种和第三种情况可以概括为一种情况：

- 两个数等于 $K$，一个数不等于 $K$。

## 计算

### 计算方法

对于**每次选择**，都是从 $1 \sim N$ 这 $N$ 个数中选，故选择到指定区间 $\left[ l,r \right]$（$1 \le l \le r \le N$） 之间的任意一个数的概率为 $\dfrac{r-l+1}{N}$。

### 对于第一种情况

选出一个小于 $K$ 的数的概率为 $\dfrac{K-1}{N}$；

选出一个等于 $K$ 的数的概率为 $\dfrac{1}{N}$；

选出一个大于 $K$ 的数的概率为 $\dfrac{N-K}{N}$。

而这三个数在所有的选择方案中有 $6$ 种不同的排列。

例如：$\{ 1,2,3 \}$ 有这 $6$ 种不同的排列：$\{ 1,2,3 \}$、$\{ 1,3,2 \}$、$\{ 2,1,3 \}$、$\{ 2,3,1 \}$、$\{ 3,1,2 \}$ 和 $\{ 3,2,1 \}$。

所以第一种情况的概率为：
$$
\frac{K-1}{N} \times \frac{1}{N} \times \frac{N-K}{N} \times 6 = \frac{6 \times (K-1) \times (N-K)}{N^3}
$$

### 对于第二种和第三种情况

选出一个等于 $K$ 的数的概率为 $\dfrac{1}{N}$（需要选两次）；

选出一个不等于 $K$ 的数的概率为 $\dfrac{N-1}{N}$；

而这三个数在所有的选择方案中有 $3$ 种不同的排列。

例如：$\{ 1,2,2 \}$ 有这 $3$ 种不同的排列：$\{ 1,2,2 \}$、$\{ 2,1,2 \}$ 和 $\{ 2,2,1 \}$。

所以第二种情况的概率为：
$$
\left( \frac{1}{N} \right) ^ 2 \times \frac{N-1}{N} \times 3 = \frac{3 \times (N-1)}{N^3}
$$

### 对于第四种情况

（最简单的一种情况）

选出一个等于 $K$ 的数的概率为 $\dfrac{1}{N}$（需要选三次）；

而这三个相同的数在所有的选择方案中仅有 $1$ 种不同的排列。

例如：$\{ 1,1,1 \}$ 只有 $\{ 1,1,1 \}$ 这一种排列（很显然）。

所以第四种情况的概率为：
$$
\left( \frac{1}{N} \right) ^ 3 \times 1 = \frac{1}{N^3}
$$

### 综上所述

选出的三个数的中位数是 $K$ 即为四种情况的概率之和：
$$
\frac{6 \times (K-1) \times (N-K) + 3 \times (K-1) + 1}{N^3}
$$
直接输出答案即可。

## 代码

这里为了免去计算过程中的强制类型转换，直接将 $N$ 和 $K$ 定义为了 `double` 类型。

同时使用 `<iomanip>` 头文件中的 `fixed` 和 `setprecision()` 控制浮点数输出精度。

```cpp
#include <iostream>
#include <iomanip>
using namespace std;
double N,K;
int main()
{
	cin>>N>>K;
	cout<<fixed<<setprecision(20)<<(1+(N-1)*3+(K-1)*(N-K)*6)/(N*N*N)<<endl;
	return 0;
}
```