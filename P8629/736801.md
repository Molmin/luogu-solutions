[题目传送门](https://www.luogu.com.cn/problem/P8629)

简单推导。

我们可以先用 $n=4$ 这个例子列出一个式子：

$$x+2x-1+2(2x-1)-1+2(2(2x-1)-1)-1+2(2(2(2x-1)-1)-1)-1=s$$

一堆 $2$，好烦，所以拆开。

$$x+2x-1+4x-2-1+8x-4-2-1+16x-8-4-2-1$$

合并一部分同类项。

$$x+(2x-1)+(4x-3)+(8x-7)+(16x-15)$$

把每个括号当作一项，显然经过 $n$ 年就是前 $n+1$ 项。先代入样例看看：

$$x+2x-1+4x-3=7x-4=31$$

这玩意就是个一元一次方程。

现在的问题是，对于此题 $ax-b=c$ 的形式，如何求 $a,b$。

还记得第二个式子中的一次项是怎么来的吗？它们是由第一个式子使用乘法分配律转化而来的。事实上，这个过程中我们把每一年所增加的机器人数“从里到外”进行拆分。举个例子，对于 $2(2(2x-1)-1)-1$，具体步骤如下：

$$2(2(2x-1)-1)-1=2(4x-2-1)-1=8x-4-2-1$$

注意到在乘法分配的过程中，一次项系数被乘上了很多 $2$。由于每过年都会乘上一个 $2$（这里先不讨论常数项），所以对于前 $n$ 年，一次项系数和为：

$$a=2^0+2^1+\dots+2^{n-1}+2^{n}=2^{n+1}-1$$

常数项同理，每一次乘法分配都会乘上一个 $2$。另外，每一次拆开括号，就会减去 $1$。此时再看上面的具体步骤，我们发现，外面套了多少层括号，该常数项就会乘上（被分配）多少个 $2$。因为每一次减 $1$ 都携带着一个乘 $2$。可以发现，由于每一年增加的机器人个数都是上一年的机器人个数乘 $2$ 减 $1$，所以每一年都会多出一个括号（参考第一个式子），并在括号外多出一个 $-1$。显然，对于第 $n$ 年，我们可以对常数项列出如下等式：

$$b_0=2^{n-1}+2^{n-2}\dots+2^1+2^0$$

那么对于前 $n$ 年的常数项总和即为：

$$b_1=0+(2^0)+(2^1+2^0)+\dots+(2^{n-2}+2^{n-3}\dots+2^1+2^0)+(2^{n-1}+2^{n-2}\dots+2^1+2^0)$$

根据 $2$ 次幂的性质（$2^0+2^1+\dots+2^{n-2}+2^{n-1}=2^n-1$）可以化为：

$$b_1=2^1-1+2^2-1+\dots+2^{n-1}-1+2^n-1$$

化简得：

$$b_1=2^1+2^2+\dots+2^{n-1}+2^n-n$$

前面一堆 $2$ 的次幂，就差一个 $2^0$。那么后面加上一个 $2^0-1$，保证等式不变，还能进一步化简：

$$b_1=2^{n+1}-n-2$$

解释一下，由于加上 $2^0$ 满足了上面二次幂的性质，所以那一长串的数可以化为 $2^{n+1}-1$，保证等式不变还要减去 $1$（$2^0$），最后把总共 $n$ 个 $-1$ 合并变成 $-n$，就变成一个非常清爽的式子了。

现在得到了方程的所有系数，直接求解。答案显然为 $\frac{s+(2^{n+1}-n-2)}{2^{n+1}-1}$。

注意要写高精度。