~~话说我代码常数怎么又这么大。~~

喜闻乐见的开关灯问题，发现数据范围有点大，不太能高斯消元，怎么办呢？

最暴力的做法是直接枚举每个开关的状态，记录下得到的结果。

怎么优化呢？可以考虑 Meet in the middle。

首先枚举前 $\frac{m}{2}$ 个开关，得到每个最终状态所需最小步数。再对后 $\frac{m}{2}$ 个开关来一遍。

每次询问就枚举后 $\frac{m}{2}$ 的开关的状态，异或最终状态得到前 $\frac{m}{2}$ 个开关的状态，步数取最小值即可。

但是这样单次查询 $O(2^{15})$ ，肯定过不了。我们需要让前面枚举的多一些，经过本地测试，前面 $20$ 个，后面 $10$ 个的效率是最高的。

代码见[此处](https://www.luogu.com.cn/paste/ogx8suy5)。