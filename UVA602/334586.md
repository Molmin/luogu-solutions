较为简单但是有细节的大模拟。

本题主要考察点（按难度）：读题，闰年判断，计算日期，代码能力。

首先读题，发现题目要求的是美国日历，跟其他日历没有关系，不要掉进坑里。

美国日历的闰年判断标准是有变化的，改用公历前是一个，用公历后是一个，这是第一个细节。上代码;

```cpp
bool check_year(int x)
{
    if(x <= 1752) return x % 4 == 0; //改用公历前
    return (x % 4 == 0 && x % 100 != 0) || (x % 400 == 0); //改用公历后。因为上面的条件成立直接 return，故不需要加 else
}
```

第二个注意点是判断日期是否非法。判断依据主要有两点：

- 超出了日期所能表示的范围（如某年 $8$ 月 $35$ 日）。

- 日期本身不存在（如 $1752$ 年 $9$ 月 $8$ 日）。

第二点很容易遗漏，这是第二个细节。上代码：

```cpp
bool check()
{
    //超过日期范围
    if(year < 1) return 0;
    if(month < 1 || month > 12) return 0;
    if(day < 1 || day > month_day[month]) return 0;
    if(year == 1752 && month == 9 && day >= 3 && day <= 13) return 0; //日期本身不存在
    return 1; //其他日期均为合法，可以不加 else 的原因同上。
}
```

然后是最容易被忽视的细节：题面中提到的是“美国日历”，美国人一周的第一天是星期日，不是星期一！所以我们的星期数组要这么定义：

```cpp
const string week_name[13] = {"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};
```

在回到题目上。现在我们已经能够判断日期是否合法，能够判断年份是否为闰年，题目还要求我们输出换算后的日期是星期几。

根据小学奥数我们学过的周期问题：

$$\text{总数}\div\text{周期长度}=\text{周期数}\cdots\cdots\text{余数}$$

总数就是从公元 $1$ 年 $1$ 月 $1$ 日到当前日期的总天数，周期长度是 $7$（一周有 $7$ 天），余数就是星期。

余数很好求，直接取模即可。但是总数比较麻烦，我们把总数拆分来看：年 + 月 + 日。

利用分段的思想，先把年份的日期 $365(366)$ 一段一段的累加，再累加月份，最后是日。

累加年份：

```cpp
for(int i = 1; i < year; i++) date += 365 + check_year(i);
```

这里投机取巧了一下，`check_year` 函数返回的是一个布尔类型，也就是 $0$ 或 $1$，正好对应着闰年多出来的 $1$ 天，直接加上即可。

换句话说，此处平年会 $+0$，也就是不变；闰年 $+1$。

累加月份比年份简单一些：

```cpp
for(int i = 1; i < month; i++) date += month_day[i];
```

但是有一个小问题，**如果一年是闰年，$2$ 月是 $29$ 天不是平年的 $28$ 天**，这是第四个细节，要在计算月份前提前修改：

```cpp
month_day[2] = 28 + check_year(year);
```

同时我们发现在判断日期是否合法时也与闰年多出的一天有关，如果不加，日期 $2008$ 年 $2$ 月 $29$ 日会被判定为非法。这一条语句要加到调用 `check()` 函数的前面。

但是还有一个坑点，如果日期在 $1752$ 年 $9$ 月 $2$ 日前，还要加上删掉的 $11$ 天，因为这时还没有改用公历。

```cpp
if((year < 1752) || (year == 1752 && month < 9) || (year == 1752 && month == 9 && day <= 2)) date += 11;
```

同样使用了分段的思想。

最后在提一下读入，因为本题是以 $0,\,0,\,0$ 为输出终止条件，所以在读入的 `while` 循环头上需要做些文章：

```cpp
while(cin >> month >> day >> year && month && day && year)
```

以上就是这道题的坑点与细节，把上面的代码段组合起来，再加上一些小修改和补充（例如输出），就是可以 AC 的代码，所以就不放出完整代码了。

[笔者的 AC Link](https://www.luogu.com.cn/record/68946801)

做完这道题后可以尝试一下同样为日期判断问题的 [P7075 [CSP-S2020] 儒略日](https://www.luogu.com.cn/problem/P7075)，可能会难一些。

感谢各位的阅读！