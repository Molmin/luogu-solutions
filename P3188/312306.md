## 题目描述

[题目传送门](https://www.luogu.com.cn/problem/P3188)

## 思路简述

一看题目：01背包。

联系本题的特殊数据范围：

> 保证每个 $w_i$ 能写成 $a \times 2^b$ $(a,b\in N)$ 的形式，$a \leq 10$，$b \leq 30$。

> $n\leq 100$。

---

很容易的想到可以对于每一个二进制位进行 dp。

设计状态：$dp[i][j]$ 表示到第 $i$ 个二进制位，现在剩余的背包恰好还有 $j$ 个 $2^i$ 的大小的最大价值。

---

那么用所有 $w$ 能够表示为 $a\times 2^i$ 的物体去更新 $dp[i][j]$,每次转移的方程是 ```dp[i][j]=max(dp[i][j],dp[i][j+a]+v)```（$v$ 为当前物体的价值）。

由于滚动数组，从 $j$ 从小到大转移。

$i$ 从大到小更新考虑 $dp[i+1][]$ 对于 $dp[i][]$ 的贡献。

令 $tag$ 表示 $W$ 在二进制表示下第 $i$ 位是否是 $1$。

那么就有 ```dp[i][j*2+tag]=dp[i+1][j]```。

---

初始化 ```dp[31][0]=0```，其余皆赋值为无穷小。

---

那么现在问题来了，第二维的枚举范围是多少呢？由于 $n\leq 100$，所以当 $j\ge 1000$ 时，后面的所有物体都可以选，直接特判即可。

---
时间复杂度 $O(3000Tn)$

~~码量很小（至多20min写+调这样子？）~~

## 丑陋の代码
[click here](https://www.luogu.com.cn/paste/y8yaku82)