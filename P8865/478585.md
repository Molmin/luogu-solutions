# 思路

一道魔改悬线法的题。

根据题意，`C` 和 `F` 的可以向右延伸的距离是任意的，`F` 向下延伸的距离也是任意的（只要有向下延伸的点）。

我们考虑记录每个点向右延伸的最大距离和向下延伸的最大距离，用一个数组记录下来，分别记为 $r_{i,j}$ 和 $d_{i,j}$，时间复杂度为 $\mathcal O(n^2)$。

我们考虑枚举花园中的所有的点，设当前枚举的点为 $(i,j)$。若 $(i,j)$ 和 $(i+1,j)$ 都为 $0$，则从 $k=i+2$ 处开始向下枚举 $(k,j)$，若当前点为 $1$ 则直接终止循环，否则对于 `c`，根据乘法原理，答案加上 $r_{i,j} \times r_{k,j}$，对于 `F`，答案加上 $r_{i,j} \times r_{k,j} \times d_{k,j}$。

但如果这样做，构造一组全部为 $0$ 的数据可以把时间复杂度卡到 $\mathcal O(n^3)$，这样会超时，我们不难发现，对于每一次统计答案时，$r_{i,j}$ 是不变的，根据乘法的结合律，我们可以将 $r_{i,j}$ 提出来，用一个前缀和来分别维护每个点向下的 $r_{k,j}$ 和 $r_{k,j} \times d_{k,j}$ 的和，这样预处理一遍只需要 $\mathcal O(n^2)$ 的复杂度，我们在遍历每个点，若 $(i,j)$ 和 $(i+1,j)$ 均为 $0$，则将答案加上 $(i+2,j)$ 处向下的前缀和和即可。

注意判断 $i+2$ 是否越界。

时间复杂度 $\mathcal O(n^2)$。