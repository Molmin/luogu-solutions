# 题意
将豚鼠关到若干间房里，在满足要求的同时，使得使用的房间数尽量最少。

要求包括：
- 一间房最多只能关**两只**豚鼠；
- 已知两豚鼠性别**相同**后，才能关进**同一间房**。

输入 $n$ 个数，每个数 $b_i$ 表示第 $i$ 天的计划：
- 当 $b_i=1$ 时，得到一只新的豚鼠，性别未知；
- 当 $b_i=2$ 时，检测所有已得到了的豚鼠的性别。

# 分析
题目告诉我们，当 $b_i=2$ 时，会做“检测所有已得到了的豚鼠的性别”这件事，但不告诉我们豚鼠具体的性别是什么。

所以我们要保证，在能面对**最极端**的性别情况的同时，让房间数量**最少**。

因此，我们要假设每只获得的豚鼠的性别，构造出最极端的情况，从而求出能够承担各种情况的最少房间数量。

由于已知性别相同的两只豚鼠才能被关进同一间房，那么如果每天获得的豚鼠性比都相同，则消耗的房间最少，但这并非最极端的情况。而当未确认性别的豚鼠，**假设的性别尽量持平**的时候，消耗的房间数会最多，情况最极端。

# 算法思路
### 当 $b_i=1$ 时
获得一只豚鼠，更新未知性别的豚鼠的数量。因为其性别是假设的，所以不能和别的豚鼠关在一起。于是，若有空房，则将其关在空房内；若没有空房了，就新建一个房间，将其关进去。

### 当 $b_i=2$ 时
更新豚鼠性别的数据，比较当前未知性别的豚鼠数量，将该新豚鼠的性别假设为当前数量最少的性别。

此时，如果已经有同性别的豚鼠单身住在一间房，则将新豚鼠和该豚鼠共同关在一起，并腾出一间空房间；若无，则新豚鼠继续单独住在一间房。

# 代码
```cpp
#include<bits/stdc++.h>
#define LL long long
using namespace std;
const int N = 1e6+60;
LL _,n,b[N];
void work(){
	cin>>n;
	for(LL i=1;i<=n;i++){
		cin>>b[i];
	}
	LL m[3]={0,0,0},w[3]={0,0,0};  //住了i只公、母豚鼠的房间数量 
	LL unk=0,emp=0,res=0;  //未知性别的豚鼠数量，空房的数量，结果值 
	for(LL i=1;i<=n;i++){
		if(b[i]==1){ 
			if(emp){
				emp--;  //使用一间空房 
				unk++;  //增加一只未知性别的豚鼠 
			}
			else{
				res++;  //总房间的结果数量加一 
				unk++;  //增加一只未知性别的豚鼠 
			}
		}
		if(b[i]==2){
			if(!unk)continue;
			//处理未知性别的豚鼠 
			while(unk){
				if(m[1]>=w[1]){
					//当公的数量大于等于比母的，假设这只为母 
					if(w[1]==0){
						//豚鼠自己住进一间房 
						w[1]++; 
						unk--;
					}
					else{
						//将该豚鼠和原有的另一只同性别豚鼠关在一起 
						w[1]--;
						w[2]++;
						unk--;
						emp++;
					}
				}
				else{
					//当母的数量比公的多，假设这只为公 
					if(m[1]==0){
						//豚鼠自己住进一间房 
						m[1]++;
						unk--;
					}
					else{
						//将该豚鼠和原有的另一只同性别豚鼠关在一起 
						m[1]--;
						m[2]++;
						unk--;
						emp++;
					}
				}
			}
			
		}
	} 
	cout<<res<<'\n';
}
int main(){
	ios::sync_with_stdio(false);
	cin>>_;
	while(_--){
		work();
	}
} 
```
