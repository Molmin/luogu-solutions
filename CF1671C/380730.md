有一个显然的贪心：你买糖的时候一定是拣便宜的买。

因为糖不管如何加价，之间的相对大小不变，所以我们可以把糖排序，然后维护糖数组 $a$ 的前缀和 $b$。

我们发现在我们要买 $x$ 个糖时，开头的价钱一定是 $b_x$（后面每次加价 $x$ 元）。这启发我们枚举每个数量（记为 $i$）的糖，求出买 $x$ 个糖最多能买几天才买不起。就是：

$b_i + xi \le d$，最大化 $x$。其中 $d$ 为**题目中的** $x$。

解得 $x\le \dfrac{d-b_i}i$。注意特判 $d<b_i$ 的情况。

然后我们就要累加答案了。**我们累加的是上面的 $x$，并不是 $xi$！** 原因是 $x$ 已经被累加了 $i-1$ 次（在统计 $1\dots i-1$ 的时候统计的，你买 $i-1$ 个糖肯定比买 $i$ 个糖能负担得久），下面是张图：![](https://cdn.luogu.com.cn/upload/image_hosting/5emwbsv3.png)

题目要求我们求的是 $\sum$（红框面积），而我们把它变成了 $\sum x_i$，就是 $\sum$ 黑框面积（因为我们每次只把 $i$ 增加 $1$）。

代码：[188003871](https://codeforces.com/contest/1671/submission/188003871)