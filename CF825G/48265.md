首先将第一次修改的黑点抓出来，作为树根，然后我们 $\text{dfs}$ 一遍这棵树，记 $a[i]$ 代表第 $i$ 个点到根节点路径上最小的编号

之后对于每一次修改，显然对于修改点的子树里的点的答案是不会有变化的，如果不在子树内，那么第 $j$ 个点的答案就要与修改点到根路径的最小编号取 $\min$，所以在每次修改后记录一个所有黑点最小的到根路径上的最小编号，对于每次查询只需要将这个值与本身这个点到根路径上最小值取 $\min$ 即可

同时说一下正确性

对于不在根的同一棵子树内的两点 $(x,y)$ ，若 $y$ 是黑点，则这条路径上最小值显然是根到 $x$ 最小值与根到 $y$ 最小值中的最小值，多个取并即可，如果在同一棵子树内，那答案的并就是 $x,y$ 中较深的那一个到根的路径上最小值，同样是两个最小值中的最小值，所以查询就转化为了很多条到根的链最小值的最小值，每次取 $\min$ 就是答案