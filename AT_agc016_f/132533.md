幼兔本兔：这又是套路*****

AT2390。

------------------------------------

计数，$n \leq 15$，合法猜测状压 dp 计数。

记 $T / S$ 表示 $S$ 中除了 $T$ 集合以外的点。

我们考虑使用一种方法进行子问题的划分：每次对原集合 $S$ 中拿出一些点 $T$，使得**点集合 $T$ 中的点的 SG 函数值为 $0$，且 $T/S$ 集合中的点对 $T$ 集合中至少一个点有连边（即 SG 不为 $0$），且 $T / S$ 集合中的点内部不能连边（保证 SG 为 $0$）**。

这样设计状态的优越性在于我们可以让子问题的迭代正常的同时并方便转移。

设 $f_S$ 表示状压为 $S$ 的点集合的非法方案数。 

考虑转移：

- 首先合法状态 $S$ 一定得是 $\{1,2\} \in S$；

- 枚举子集 $T$ 作为 SG 函数值**不**为 $0$ 的集合，则剩下的 $T / S$ 为 SG 函数值为 $0$ 的集合；（和上面的反过来了注意）

- 分类讨论。若 $1,2$ 分别属于 $T$ 和 $T / S$，根据定义它们的 SG 函数值不相等，贡献为 $0$；

- 若 $\{1,2\} \in T$，则此时新增的边应该只是 $T$ 与 $T / S$ 集合内的边，因为 $T$ 集合内的边的连接情况可以用 $f_T$ 来表示，而 $T / S$ 内部不能连边。则对于 $T$ 内的点必须向 $T / S$ 中的点连至少一条边，而 $T / S$ 中的点向 $T$ 任意连边即可，这些东西都可以预处理后 $O(n)$ 算。

- 若 $\{1,2\} \in T / S$，则新增的边应该是 $T$ 内部以及 $T$ 与 $T / S$ 集合内的边，即 $T$ 内的点向 $S$ 集合中的点任意连边，而 $T/S$ 中的点向 $T$ 任意连边即可。

预处理数组 $w_{S,i}$ 表示 $i$ 向集合 $S$ 伸进了多少条边以及 $2$ 的次幂即可在 $O(n 3 ^ n)$ 解决此题。
