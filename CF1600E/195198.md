## 思路

神仙 game 题。

我们发现能取到的数一定要么是以 $a_1$ 开头的最长连续上升的序列，要么是以 $a_n$ 结尾的最长连续下降序列。

我们考虑把这两个序列 $p,q$ 拎出来。我们把 $q$ 翻转。原题可以变成：

给定两个单调上升的序列 $p,q$，每次可以取出序列的头（要求必须大于之前取的），问先手赢还是后手赢。

考虑进行分讨：

1. $p,q$ 均为奇数：直接取走开头较大的那个，这样另外一个序列就永远无法取了，所以只有一个长度为奇数的序列可以取，显然先手必胜。

2. $p$ 或 $q$ 为奇数，另一个为偶数：直接取走奇数的那个的开头，则两个序列都是偶数长度。这样 Bob 无论在哪个序列取完，Alice 一定能在他取的序列里，取走下一个元素。因此 Alice 永远不可能无路可走，一定是 Bob 先没有可以取的。所以先手必胜。

3. $p$ 和 $q$ 都是偶数：先手怎么取，都会转化成 2 的情况，此时后手必胜。

所以，如果 $p,q$ 中只要有一个为奇数，则先手必胜；否则后手必胜。扫一遍，贪心的求出 $p,q$ 这两个序列即可。复杂度 $O(n)$。

代码极其好写就先不给了。