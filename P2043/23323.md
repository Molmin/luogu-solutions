
（拍桌子）

 **N的范围为什么是一万啊！至少也是四十万啊！**

分解(N!)的质因数是一道数论的裸题啊，而且完全可以做到接近线性的时间。

既然有更优秀的算法，我们当然要学习咯！

首先要用线性筛素数，筛出N以内的所有素数（不会线性筛也要写个埃式筛法啊）。

由于(N!) = 1 × 2 × 3 × …… × N

所以对于N以内的质数P，出现的次数为

[N/P] + [N/P^2] + [N/P^3] + …… + [N/P^(log(P)N)]

为什么呢？首先P的倍数有1个质因子P，P平方的倍数有2个质因子P，由于P平方的倍数一定是P的倍数，所以先前已经计入过一次，就只需再计入一次，P立方等等也是同理。

那不是就做完了吗，代码三十多行，而且时间复杂度O(NloglogN)，比朴素算法还好写。（为什么复杂度有两个log请自行百度埃式筛法）

**再说一遍啊！我们程序员追求的是最优解呐！**