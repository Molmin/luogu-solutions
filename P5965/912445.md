# P5965 [PA2019]A+B题解
## [传送门](https://www.luogu.com.cn/problem/P5965)
## 题目大意：

给定正整数 $n$，问有多少对非负整数 $a,b$ 满足 $a+b$ 会被错算成 $n$。其中 $a$ 可以等于 $b$，且 $a=1,b=2$ 和 $a=2,b=1$ 是两种不同的方案。

## 过程分析：

我们考虑从第 $i$ 个位置开始，往后拼凑数字得到的每一个数都可以构成一个和为 $n$ 的数对。则从左往右第 $i$ 个位置上数字的选取将会影响其后位置所形成的每一个数对是否满足条件。

我们假设当前第 $i$ 个位置上的数字为 $a_i$：

- 如果 $a_i \neq 0$，则第 $i$ 个位置所选取的数字会对可以构成的数对的个数产生贡献，我们考虑第 $i$ 个位置上选取的数字与其后面能够构成的和的大小关系：
  - 如果第 $i+1$ 个位置上选取的数字 $a_{i+1} > a_i$，那么我们此时选取 $a_i$ 就会将 $n$ 中以 $1a_i$ 开头的数对都选中进去。这里需要注意，如果我们把 $a_i$ 选择为 $9,8,\ldots, a_{i+1}$ 中的任意一个数后，其会导致这段区间的数对被重复统计，因此 $f_i$ 需要减去这个区间里面的数对数量，即 $\displaystyle (a_{i+1} - a_i - 1) \times f_{i+2}$。
    $$f_i = f_{i+1}\times(a_i+1) + f_{i+2}\times(a_{i+1}-a_i-1)$$
  - 如果第 $i+1$ 个位置上选取的数字 $a_{i+1} = a_i$，那么我们此时选取 $a_i$ 就会将 $n$ 中以 $2a_i$ 开头的数对都选中进去。由于此时 $a_i + a_{i+1} = 2a_i = a_{i+1} + a_i$，所以选取 $a_i$ 和 $a_{i+1}$ 代替 $a_i$ 和 $a_{i+1}$ 中的任意一个，结果是等价的。不重不漏，直接加上 $f_{i+2}$ 即可。
    $$f_i = f_{i+1}\times(a_i+1)+f_{i+2}$$
  - 如果第 $i+1$ 个位置上选取的数字 $a_{i+1} < a_i$，显然此时不能选 $a_i$，否则一定不能满足和为 $n$。这种情况下 $f_i$ 不需要加上任何贡献。
    $$f_i = f_{i+1}\times(a_i+1)$$
- 如果 $a_i = 0$，则该位置上的数字对最终方案不会增加任何贡献，只能继续和该数位后的位置一起构成比 $n$ 更大的数对。因此我们可以得到：
  $$f_i = f_{i+1}$$

状态计算的过程结束后，我们最终得到的 $f_1$ 即为答案。

### 状态转移方程：

$$f_i=\begin{cases}f_{i+2}\times (9- a_{i+1}) +f_{i+1}\times (a_i+1) &(a_i = 1, 1\leq i \leq len-1)\\f_{i+2}+f_{i+1}\times (a_i+1) &(a_i \geq 2)\\f_{i+1} &(a_i = 0)\end{cases}$$

## 代码
讲的这么详细，应该不用了吧。