首先用 $\text{DFS}$ 序把这个问题搞到序列上

其次我们发现，每次在奇数层上 ```add val```, 每次就在偶数层上 ```add -val```

每次在偶数层上 ```add val```, 每次就在奇数层上 ```add -val```

我们只要维护两棵线段树，一棵维护奇数层，一棵维护偶数层

在建树的时候，我们记录一下当前节点是奇数层还是偶数层即可

每次在修改的时候，下传一下一个 ```flag``` , 代表当前是奇数层 ```add val```，还是 ```add -val```

在查询的时候，只要判断一下当前节点是奇数层还是偶数层，确认返回哪棵线段树的值即可