UPDATA：注意主席树的root数组等于**插入次数**而不是集合个数；以及之前看错题，这个题问的是“是不是每一个集合都存在一个线段在给定区间内”，而不是“存在一个...”（~~昨天还说题意相当明确来着~~），题目翻译上也写错了（所以没过审？）然后也改掉了不知道能不能过。

昨天打CF这个题写了半天发现是假算法，然后就看了官方题解（贼难懂）发现好妙，把这题的翻译和题解一起写了

题意~~相当明确~~就不多说了

先把线段按**左端点**排序，左端点相同的顺序无所谓

#### 考虑怎么回答一个询问：先找到左端点$\ge a$的位置，然后考虑从它开始右面（数组排过序了）所有右端点$\le b$的线段中有没有编号在$a$、$b$之间的

直接做肯定TLE

对每个集合定义一个$W$，表示这个集合中左端点$\ge a$的线段中，右端点的**最小值**

## 线段树！！！

$a$、$b$之间这个条件用**线段树**就可以解决了（线段树**对集合**维护$W$的最大值）注意这个是关键，答案按集合维护

------------

怎么维护$W$啊（$a$是改变的,$W$也会跟着变）

不知道**强制在线**和$10^5$有没有让你想到什么

## 可持久化线段树！！！

回想一下开始那个排过序的数组，现在倒序把其中的线段插入（计入答案），这样更新的时候就是左端点**随插入顺序向左移**

### 怎么回答询问呢

先在二分找到哪些线段左端点$\ge a$，然后在可持久化线段树上找到最靠左的（符合条件的）线段对应的版本（就是第$n-id+1$个版本，$id$是线段的编号），由于是按左端点倒序插入，这个版本一定包含了所有左端点$\ge a$的线段，然后查一下$[a,b]$之间的最小值看看是不是$\le b$就行了

注意如果没有一个在$a$左边的话，直接no（要不可能查到第0（视写法不同可能是01）个版本去然后RE）