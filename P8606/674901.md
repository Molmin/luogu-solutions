+ 如果前面的小和尚移动了 $c$ 个台阶，后面的也可以移动 $c$ 个台阶，对于这两个和尚而言没有任何的意义。

首先让相邻的小和尚进行配对，间隔为石子的个数。

然后跑一遍 Nim 博弈。

如果所有的石子的数量的异或的值为 $0$，那么通过 SG 定理可知，先发令的法师不会获胜。否则一定会获胜。

否则直接暴力枚举移动的人和移动的步数即可。如果移动完之后答案异或的值为 $0$，那么后手必败（先手必胜）。

时间复杂度 $O(n^3)$，但是远远跑不满。

最后：SDCSP-S 2022 RP++。