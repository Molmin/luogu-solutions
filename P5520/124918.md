# 看到没有人写题解后立马写了一篇

~~我将是第一个题解吗？~~

## 本题解适合蒟蒻观看
（大佬可能会觉得太繁琐了但请勿喷qwq）

言归正传，让我们来看这题

一道组合数学（我这么简单的题还做不好，太蔡了）：

将情况分为两类

- 最后一个位置不放树

- 最后一个位置放了树

我们先讨论第一种情况：

**因为最后一个位置不放树，所以第m颗树后面也一定有空位，因此每棵树后面都有空位**

既然每棵树后面都有空位，那一共能放树的位置就只有$n-m$个（n个位置减去每颗树后面都有的一共m个空位），在这些位置里放上$m$颗树，那一共就是C $\binom{m}{n-m}$.（由于是决定位置，所以是组合），而第i个位置一共有（n-i+1）中选择（例如第一个位置可以种1到m中的任意一棵，而第二个位置就只有m-1棵树可选），因此总的方案数为

$m!*$C $\binom{m}{n-m}$

C $\binom{m}{n-m}$ $=$ A $\binom{m}{n-m}$ $/$ $m!$

$m!*$C $\binom{m}{n-m}$=A$\binom{m}{n-m}$

考虑第二种情况：

**最后一棵树后面没有空位，即前m-1棵树后面有空位，他们分享n-1个位置** 

同理，$m-1$棵树苗的空位占了$m-1$ 个位置，因此最后剩余的位置为$(n-1)-(m-1)$即$n-m$个位置，在这些位置中取树苗的位置一共有C $\binom{m-1}{n-m}$种悬法，同上，最终的方案数要乘上$m!$，$m!=m* (m-1)!$，再次同上，C $\binom{m-1}{n-m}$* $(m-1)!$=A $\binom{m-1}{n-m}$，因此总方案数为m $* $ A $\binom{m-1}{n-m}$


将两种方案加起来一共A $\binom{m}{n-m}$ $+$ m * A $\binom{m-1}{n-m}$，就可以直接算了，算法复杂度O（2n）

简化1：存下A$\binom{m}{n-m}$，m * A $\binom{m-1}{n-m}$ =A $\binom{m}{n-m}$ $/$ $(n-m+1)  *  m$，算法复杂度O(N)

简化二（感谢@--扶苏--） ：A $\binom{m}{n-m}$ $+$ m * A $\binom{m-1}{n-m}$ $=$ A $\binom{m}{n-m+1}$，具体原理就不解释了，时间复杂度O(N)

完结撒花！