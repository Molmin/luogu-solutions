### 解法：

我在比赛时推了三个小时的公式，公式是推出来了，但是...还是爆炸了！于是，在一番思考后写出了这篇题解来加深记忆.

我们来总结一下思路.

排列组合

- 我们可以先把 m 株幼苗放在一起.

- 在每两株幼苗中插一个空格，这样就确保了方案的合法性，用掉了 m - 1 个空格.

- 然后，我们还剩下 n - m - (m - 1) = n - 2m + 1 个空格可以放.

- 在m株幼苗中的 m - 1 个空隙中，我们可以随意填空格，然后在m株幼苗的两边，我们也可以随意填空格(中间的 m - 1 个空位和两边还没有放空格的位置 )，这样方案一定合法.

- 于是！！！我们可以将问题转化为将 n - 2m + 1 个小球放到 m + 1 个盒子里，盒子可以为空的方案数！！！可以直接用公式计算.

- 什么公式呢，那就是：x个小球放到y个盒子中，盒子可以为空的方案数，即为$\dbinom{x+y-1}{y-1}$.

- 所以将 n-2m+1 个小球放到 m+1 个盒子里，盒子可以为空的方案数即为$\dbinom{n-m+1}{m}$.


我们来证明x个小球放到y个盒子中，盒子可以为空的方案数为什么是$\dbinom{x+y-1}{y-1}$.

- 挡板法： 我们有 y - 1 个挡板（可将小球分为y份，也就是y个盒子），可以随意插.

- 插完之后，小球+挡板就有 x + y - 1 个.

- 而挡板可以任意放，则方案数就是从 x+y-1 个物品中选出y - 1 个组成一个集合（不考虑顺序），产生的不同集合数量.

- 也就是$\dbinom{x+y-1}{y-1}$啦！！！

而 m 株幼苗的排列顺序可以不同，故要乘上 m 株幼苗的全排列：m！.

于是公式就可以逐步化简：

![334223424.PNG](https://i.loli.net/2019/08/25/Ng8hqxn6I5VkGF2.png)

（此图片来自AK爷@[interestingLSY](https://www.luogu.org/space/show?uid=25630)，%%%）.

举个栗子：当N=18，M=5时.

如图：

1. 将5株幼苗放在一起，再在其中插入4个空格.

![234234.PNG](https://i.loli.net/2019/08/25/kclvNRAbw53VWCq.png)

2. 剩下的9个空格可以插到6个空隙中

![二位热无若.PNG](https://i.loli.net/2019/08/25/OVuZG1dpBt5QIFW.png)

再套公式，则方案数就是 $\dbinom{14}{5}$ * **5!** .

上代码（其实我相信各位大佬也不需要代码）：


```
#include<iostream>

#define LL long long

using namespace std;

LL type,n,m,p,ans=1;

int main()
{
	cin>>type>>n>>m>>p;
	
	for(int i=n-2*m+2;i<=n-m+1;i++)  ans=(ans*i)%p;
	
	cout<<ans<<endl;
	
	return 0;
}
```

## [Plus Ultra!!!](https://www.luogu.org/blog/OnePunchManGO/solution-p5520)

最后祝大家 CSP2019 RP++!!!(滑稽）
