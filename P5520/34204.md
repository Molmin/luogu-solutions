在讨论区看到这道题就进来做了，感觉这道题并没有题解讲的那么复杂？（雾

一个显然的事实是，如果没有（不能相邻）的限制，答案就是 $A_{n}^m$ 。

如果首先去掉 $m-1$ 个格子，按照没有限制的方法做，最后再在每一对元素间插入一个之前留好的空格，就可以将一个不知道合不合法的方案变成成一个一定合法的方案。这样做其实是在两个问题间建立了一一映射的关系，显然不重不漏，所以最终答案就是 $A_{n-m+1}^m$ 。
```cpp
# include <cstdio>

using namespace std;

int n,m,p,ans=1;

int main()
{
	scanf("%d%d%d%d",&n,&n,&m,&p);
	for (int i=n-2*m+2;i<=n-m+1;++i)
		ans=1LL*ans*i%p;
	printf("%d",ans);
	return 0;
}
```
