## **$\text{CF1744B Even-Odd Increments}$ 题解**

### $\texttt{A.}$ 前言

本蒟蒻的第二篇题解。

话说这道题 ~~真的不坑~~ **坑点很多**。

### $\texttt{B.}$ 思路分析

### $\texttt{Part1. 40 pts}$ 的遍历修改

一开始，某些童鞋的第一反应可能是：**遍历过水题**，结果 $5$ 分钟写完代码，交上去很自然的没了。

思路非常的简单，按照题目说的做就行。（这一部分的代码，**没有就是没有**）。

### $\texttt{Part2.}$ 醒悟

一看数据范围：$1 \leq t \leq 10^4$，$1 \leq n,q \leq 10^5$！没想到 $ t \times n \times q$ 最大竟然可以到 $10^{14}$ 的级别，看来遍历就算再怎么卡常也不可能过这道题了。

那么，我们该怎么办？

### $\texttt{Part3. AC}$ 思路

思路：

对于每一组数据，我们先读入 $n$ 和 $q$。

接着，我们读入这个数列。在读入时，我们可以顺便算一下数列每一项的**奇偶性**和**数列的总和**，目的是本题的操作主要以**奇偶性**和**数列总和**为主。需要注意的是，$1 \leq a_i \leq 10^9,1 \leq n \leq 10^5$，所以该数列的总和最大可达到 $10^{14}$，必须用 `long long` 类型的变量来存储。

然后就是激动人心的 $q$ 次操作了。唠叨两句，其实对于信息学中的很多题目，我们**并不用**完全按照题目说的去完成代码，而是针对题目**需要求的值、可能性等**去完成代码。所以，我们可以这样应对这 $q$ 次操作：

$(1)$ 读入两个整型数，含义如题所述；
 
$(2)$ 将总和加上 奇/偶数个数 $\times x$；

$(3)$ 如果 $x$ 为偶数，那么将数列中的某些数加上 $x$ 并不改变它们的奇偶性 **（余数的性质）**；如果 $x$ 为奇数，那么这次操作中每一个加上了 $x$ 的数的奇偶性将改变，即，操作后数列中**只有**奇数或偶数。

$(4)$ 输出当前的总和。

这就是我们的 $q$ 次操作。每一组数据处理完成后，记得**清空所有非读入的变量**。

### $\texttt{C.}$ $\text\color{green}AC$ $\text\color{green}Coding$

```cpp
//CF1744B Even-Odd Increments
#include<bits/stdc++.h>
#define int long long
using namespace std;
int t,n,q,a,opt,x,sum,ou,ji;

signed main()
{
	cin >> t; //数据组数 
	while(t--)
	{
		//正式开始 
		cin >> n >> q;
		for(int i = 1;i <= n;i++) //输入这个数列。因为我们没有需要在后面继续使用这些数据，所以我们可以只用一个变量  
		{
			cin >> a;
			sum += a; //记录总和  
			if(a % 2 == 0) //记录奇偶数个数 
				ou++;
			else
				ji++;
		}
		while(q--) //开始进行操作  
		{
			cin >> opt >> x; //输入 
			if(opt == 0) //对偶数进行操作 
			{
				sum += x * ou; //总和加上 偶数个数 * x 
				if(x % 2 == 1) //x是奇数，影响奇偶性 
				{
					ji = n;
					ou = 0;
				}
			}
			else
			{
				sum += x * ji;
				if(x % 2 == 1)
				{
					ou = n;
					ji = 0;
				}
			}
			cout << sum << '\n'; //最后输出莫忘记 
		}
		//清空变量好习惯 
		ou = 0;
		ji = 0;
		sum = 0;
	}
	return 0; //好习惯 
}

```

### $\texttt{D.}$ 鸣谢
[~~ice_fish01~~](https://www.luogu.com.cn/user/770910)

**至高无上的管理员**



------------


### **完结撒花！**