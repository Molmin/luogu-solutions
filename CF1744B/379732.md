这个题打眼一看是一道多点加的题目，但我们仔细观察一下题面，就会得出这么一个结论：**一次操作操作的数不全是奇数就全是偶数，加的数相同**。

那么我们就可以简化成这样：

1：开局读入时分别计算**奇数个数**和**偶数个数**，并求出**初始串的总和**。

2：若读入的是“操作0”那么就将总数加上偶数个数×加数

若读入的是“操作1”那么就将总数加上奇数个数×加数。

3：如果操作0的加数是奇数意味着**所有的偶数都变成了奇数**，偶数个数清零，奇数个数=串长度。


同理如果操作1的加数是奇数意味着**所有的奇数都变成了偶数**，奇数个数清零，偶数个数=串长度。

相信在座的各位都理解了，上代码：
```cpp
#include<bits/stdc++.h>
using namespace std;
long long t,n,q,a,b,s[1000000],js,os,cnt;
int main(){
	cin>>t;
	for(int g=1;g<=t;g++){
		cin>>n>>q;
		for(int i=1;i<=n;i++){
			cin>>s[i];
			if(s[i]%2==0)
				os++;
			else
				js++;
			cnt+=s[i];
		}
		for(int i=1;i<=q;i++){
			cin>>a>>b;
			if(a==0){
				cnt+=os*b;
				if(b%2!=0){
					js+=os;
					os=0;
				}
			}
			else{
				cnt+=js*b;
				if(b%2!=0){
					os+=js;
					js=0;
				}
			}
			cout<<cnt<<endl;
		}
		cnt=0;
		js=os=0;
		for(int i=1;i<=n;i++)
			s[i]=0;
	}
	return 0;
} 
```
结束。