$Codeforces$ 的 $hacker$ 真是 $tql$，测试数据就有将近 $600$ 个，即便在原网站评测也花了5分多钟

这一题其实就是大模拟

蒟蒻的思路：

- 从头开始找出第一个左括号的位置，没有就把位置标记为字符串末
- 从结尾开始找出第一个右括号的位置，没有就把位置标记为 字符串首

- 冒号也同如上思路

- 如果第一个左括号（标记的）位置大于等于第一个右括号（标记的）位置，就输出 $-1$

- 如果两个中括号里面没有两个冒号（也就是从左括号向右开始搜索的第一个冒号的位置大于等于从右括号向左搜索到的冒号的第一个位置），也输出 $-1$

- 如果都合法，就统计冒号之间的 $"|"$ 的数量，在把数量加四输出

代码：
```
#include <iostream>
#include <cstring>
#include <cstdio>
using namespace std;

int i,j,k,l,len,ans;
char c[500010];			//定义一个字符数组 

int main()
{
	gets(c);
	len = strlen(c);	//字符串长度
	
	for(i=0;c[i]!='['&&i<len;i++);	//第一个左括号的位置 
	
	for(j=len-1;c[j]!=']'&&j>=0;j--);	//第一个右括号的位置 
	
	for(k=i+1;c[k]!=':'&&k<len-1;k++);	//在括号间从左搜索的第一个冒号的位置 
	
	for(l=j-1;c[l]!=':'&&l>k;l--);	//在括号间从右搜索的第一个冒号的位置 
	
	if(i>=j||l<=k)		//不合法就输出 -1 
		printf("-1\n");
	else
	{
		for(int x=k+1;x<l;x++)	//枚举区间
			if(c[x]=='|') ans++;  //统计数量 
            
		printf("%d\n",ans+4);	 //要加上两边各两个的符号 
	}
	return 0;
}
```