第 14 分块，又是磨炼意志的一道题（细节无穷）。
# 前置知识
二次离线莫队（不会的可以先去做第 14 分块（前体）），根号分治。
# 分析
首先将莫队的查询二次离线，然后就是处理了。

在这之前要先搞一个前缀和，就是 $a_i,i\in[1,x-1]$ 对 $a_x$ 的贡献的前缀和，这里因为只有 $n$ 个询问，所以可以 $O(\sqrt n)$ 询问修改，这里的询问和修改都可以通过枚举因数解决（也就是 $O(\sqrt n)$），所以这里就不用根号分治。

考虑插入一个数 $x$，即更新因数和倍数统计数组。
- $x$ 的因数：可以直接枚举，时间：$O(\sqrt n)$。
- $x$ 的倍数：枚举可能会卡到 $O(n)$ 去，所以考虑根号分治。

根号分治指的是以最大值的根号为分界线用两种不同的方式处理数据（我自己的理解）。

这里就设阈值为 $T=\sqrt{Max_a}$，那么分类讨论插入 $x$ 的贡献：
- $x\geq T$，可以直接枚举它的倍数，时间：$O(\sqrt n)$。
- $x<T$，这里的小于 $T$ 的数我们另开一个循环来处理，我们枚举 $i$ 从 1 到 $T$，先在 $a$ 数组里统计有哪些 $i$ 的倍数（整成前缀和），在像二次离线莫队一样枚举不要的区间，这里统计的就是有多少个 $i$，然后询问就用前缀和来 $O(1)$ 查询，设前缀和为 $pre_i$，有多少个 $i$ 的变量为 $cnt$，这个因数的贡献就是 $(pre_r-pre_{l-1})\cdot cnt$，这里的总时间是 $O(T(n+m))$。

通过上面的处理，这道题就已经切掉了，但是要记得卡常（这此不止有块长可以卡，还有根号分治的阈值可以卡 qwq）。