[luoguP7606 [THUPC2021] 混乱邪恶](https://www.luogu.com.cn/problem/P7606)


首先我们把这个六个方向的位置改一下，改成普通平面上的 $x$ 轴（样例），$y$ 轴（题面）和 $y=x$（数据范围）这三条直线。

那么在每个方向的移动就可以表示为 `(0,+1),(-1,0),(-1,-1),(0,-1),(+1,0),(+1,+1)`，这六个按照输入顺序给入。

考虑朴素dp。我们设 $f[i][j][k][a][b]$ 为用完前 $i$ 个idea，此时在位置 $(j,k)$，且LG指数为 $(a,b)$ 的情况是否能达到。

那么直接枚举六个方向转移就可以了。时间复杂度：$O(n^3p^2)$。

如果用bitset去优化这个东西能达到 $O(\frac{n^3p^2}{\omega})$。过不去。就差一点。

我们看这个问题到底是啥。就是在一个平面上走来走去，求最后在原点位置能够存在一种情况。

这就是在平面上游走啊。

那和随机游走差在哪了呢？~~嗯……相信自己，大声说出你的答案！~~

就差在随机上了啊QwQ

所以在开始的时候给 $n$ 个idea随机一下就好啦！~~诶诶诶？？？？？~~

这样子期望移动的步数就是 $\sqrt n$ 了。

那么我们把之前的 $j,k$ 两维变成根号范围内的枚举就好了。

然后时间复杂度就变成了：$O(n^2p^2)$，然后再加个bitset卡卡，就是：
$O(\frac{n^2p^2}{\omega})$ 了。就能过了呀QwQ.
