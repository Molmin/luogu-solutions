我觉得没有必要考虑DP 有一种更加简单的思路

因为状态数非常少 我们枚举被选中的串 再枚举一个询问的状态（无序）

这是因为每次对位置的询问互相独立 

考虑一个状态需要的期望步数 $\sum_{i=1}^{m} i/(i+n-m)$ 其中n是字符串长度 m是选中状态中1的个数

面向一个已知询问串 每次询问一个位置可以区分一个集合的串 手打bit优化或者强行上Bitset都是不错的选择 

正确性显然 