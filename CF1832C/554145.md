我们先从样例入手。

$a=\{1,3,3,3,7\}$。它的权值是：$|3-1|+|3-3|+|3-3|+|7-3|=2+0+0+4=6$。而我们令 $b=\{1,7\}$，它的权值也是 $6$。

这是因为，当没有绝对值符号的时候，$a_2-a_1+a_3-a_2+a_4-a_3+\dots+a_n-a_{n-1}$，它中间一堆都抵消掉了，最后只剩下 $a_n-a_1$。

而当一个序列单调不升或不降的时候，就可以等同于没有绝对值符号了，因为每个差都是非负整数或非正整数。

于是我们就找 $a$ 最少分为几段，使得每段都单调不升或不降。用两个变量记录当前这一段是不升还是不降，一开始两种状态都不是。从 $a_2\sim a_n$ 扫一遍，如果现在与刚才记录的状态不同，就新开一段并把答案 $+1$。最后因为点数等于段数 $+1$，所以答案还要再 $+1$。

```cpp
#include<iostream>
using namespace std;
int a[300010];
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
        int n;
        cin>>n;
        int cnt=0;
        bool flag1=0,flag2=0;
        for(int i=1;i<=n;i++)
        {
            cin>>a[i];
            if(i>1)
                if(a[i]>a[i-1]&&!flag1)
                    flag1=1,flag2=0,cnt++;
                if(a[i]<a[i-1]&&!flag2)
                    flag2=1,flag1=0,cnt++;
        }
        cout<<cnt+1<<endl;
    }
    return 0;
}
```