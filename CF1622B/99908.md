
## 题意

给定一个 $1$ 到 $n$ 的排列 $a$，再给定一个 $01$ 串 $s$，需要构造出一个排列 $b$，使得对于任意一个满足 $s_i=1,s_j=0$ 的数对 $(i,j)$，满足  $b_i>b_j$，且 $\sum_{i=1}^n|a_i-b_i|$ 的值最小

## 题解

设 $s$ 中 $0$ 的个数为 $l$，因为对于所有 $s_i=1,s_j=0$ 的数对 $(i,j)$，满足 $b_i>b_j$，所以在 $0$ 的位置上只能填 $[1,l]$ 区间内的数，$1$ 的位置上只能填 $[l+1,n]$ 区间内的数。于是把 $0$ 和 $1$ 分离形成两个序列，对这两个序列分别求解即可。

相当于把问题转换成一个序列 $a$，构造出一个序列 $b$ 满足 $\sum_{i=1}^n|a_i-b_i|$ 的值最小，其中 $b_i$ 的范围为 $[1,l]$ 或者 $[l+1,n]$。结论即为构造出一个 $b$ 使得对于任意一个满足 $a_i<a_j$ 的数对 $(i,j)$，满足 $b_i<b_j$。

## 证明

对于任意一个满足 $a_i<a_j$ 的数对 $(i,j)$，考虑将较小的数填入 $b_i$ 还是 $b_j$，假设预备填入的两个数为 $x,y$，其中 $x<y$ 且 $a_i<x,a_j<y$。将 $a_i,a_j,x,y$ 四个数在数轴上表示

![](https://s2.loli.net/2021/12/29/oCYRKmP1yA4fNur.png)

其中将 $x$ 填入 $b_i$，将 $y$ 填入 $b_j$，则答案为红线部分的长度

![](https://s2.loli.net/2021/12/29/HPfi93waZVA8Mtr.png)

将 $x$ 填入 $b_j$，将 $y$ 填入 $b_i$，则答案为绿线部分的长度

![](https://s2.loli.net/2021/12/29/kVbH3uY65sShGd7.png)

显然是将 $x$ 填入 $b_i$ 更优，对于其他三种 $x,y$ 与 $a_i,a_j$ 的大小关系，也可以用同样的方法证明，故将较小的数填入 $b_i$ 更优