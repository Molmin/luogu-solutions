这道题是一个很 naive 的题。  
先猜结论：奇偶环的排列数相等。

证明如下：对于任何一个排列 $P$，交换第 $i$ 个和第 $j$ 个，由于只存在两个在一个环中和不在一个环中两种情况，所以对于两种情况分类讨论即可：  
首先感性理解交换的含义：交换 $i$ 与 $j$ 在排列中的位置后，$i$ 会与 $P_i$ 断开，与 $P_j$ 连接（但是对于 $P_x=i$ 的 $x$ 仍与 $i$ 连接），而 $j$ 同理。可以理解为断开 $(i,x)$，$(j,y)$ 并连接 $(i,y)$，$(j,x)$。  

* 如果两个点在两个环中，将会把两个环断成链并且把两个链的头尾相连导致两个环变为一个，环数 $-1$。  
* 如果两个点在一个环中，将会把环断成两个链并将每个链的头尾相连导致一个环变成两个，环数 $+1$。

综上，无论两个点如何选择，环数目的奇偶性均会改变，即证。

分类讨论，假如点数 $<2$，那么答案为 $0$。（只能有 $1$ 个环）  
否则对于任意一个环数为奇数的，均可以通过翻转前两个转化为环数为偶数，可得偶数环数量大于等于奇数环数量。  
同理可得奇数环数量大于等于偶数环数量，即偶数环数量等于奇数环数量。

由于偶数环数量加上奇数环数量等于所有排列，所以两者的个数均等于 $\frac{n!}2$。  

$11$ 行代码如下：
```c++
#include <cstdio>
#define p 998244353
int main()
{
    int n;
    scanf("%d",&n);
    if(n<2) return puts("0"),0;
    long long ans=1;
    for(int i=1;i<=n;i++) ans=ans*i%p;
    printf("%lld",ans*499122177%p);
}
```

[AC 记录](https://www.luogu.com.cn/record/69400333)