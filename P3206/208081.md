神仙题。。。

首先考虑线段树分治，按照时间建出线段树，然后我们考虑对于分治终点$l=r$暴力修改，但是这样每次的边集都是$m$，显然无法通过，不过这道题有两个小$trick$：

$1.$如果我们将区间$[l,r]$的边权都设为$-INF$，跑一遍$MST$，这时仍然在$MST$中的边权不为$-INF$的边在接下来的子区间也一定在生成树中，因此我们可以直接将其统计贡献并将这些边所连接的连通块缩点。

$2.$如果我们将区间$[l,r]$的边权都设为$INF$，跑一遍$MST$，这时不在$MST$中的边就可以直接删去了。

有了这两个小$trick$，不难证明对于区间$[l,r]$，点和边的规模都是$r-l$的。

还是证明一下吧：

考虑到第一个操作，最多会有$r-l$个点不能被缩，因此点的规模是$r-l$的，第二个操作保证了边的规模与点同阶。

总复杂度$nlog^2n$。
