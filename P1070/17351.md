本题的算法需要层层优化。

先来说第一种方法：

用f[i,j,k]表示第i时刻，走到j位置，走了k步。

进而推出方程：

f[i,j,k]:=f[i-1,j-1,k-1]+a[i,j-1]

 f[i,j,0]:=max(f[i-1,t,k])-b[j];

 1<=t<=n,1<=k<=p(注：此方程我不大确定)

这样是不是太麻烦了呢？

枚举t、k要(n^2)

应此初步优化思想，将上一层的f[i,j,k]的最大值记下来，这样就不用枚举t和k了。3D/0D的动态规划

空间复杂度：n^3 时间复杂度：n^3

90分左右

优化思想2：

本题的k是不是有些无用了？k压根就不用放到数组里嘛！直接在外面枚举。这样我简写一下方程式：f[i,j]:=max(f[i-k,j-k]-s[i-k,j-k])+s[i,j];//k<>0 f[i,j]:=max(f[i-1,t])-b[j];//k=0。s[i,j]为片段和不讲了。

这样就变成了2D/1D的动态规划

空间复杂度：n^2 时间复杂度：n^3

终极优化思想：

1、用优先队列，将2D/1D转化为2D/0D，满分

2、思考，y[i,j]表示i时刻j位置走了y[i,j]步

若y[i,j]<y'[i,j]且s[i,j]>s'[i,j]，这种情况我们要枚举k，但这凭什么成立呢？走的步数多拿的钱少？所以这不成立，故就可以省掉k的枚举，让每个机器人走满k步。那就ok了！

我们用g[i,j]表示i时刻j位置走了几步

若g[i-1,j-1]=p，那么新买一个机器人：f[i,j]:=maxx[i-1]-b[j-1]+a[i,j-1];

否则，将买与不买的大小比较去较大的。

如果买大，则f[i,j]:=maxx[i-1]-b[j-1]+a[i,j-1];g[i,j]:=1;

如果不买大，则f[i,j]:=f[i-1,j-1]+a[i,j-1];g[i,j]:=g[i-1,j-1]+1;

大功告成！空间：n^2 时间:n^2

满分。（注意：这里的环我没有处理，请大家自行处理）
