~~本题出题人站出来！！！~~

首先看完这道题大家一定会觉得这是一个树形 Dp ，事实上，它就是一个树形 Dp 。

我们设 $f_{i,j}$ 表示 以 $i$ 为根，根所在的联通块大小为 $j$ 的方案数。

再设 $g_i$ 表示 以 $i$ 为根能得到的最大分值。

然后我们就可以得出状态转移方程：$f_{i,j}=max(f_{i,j} \times g_y,\dfrac{f_{i,j-k} \times f_{y,k} \times j}{(j-k) \times k})$

然后转移走就行了，最后输出 $g_1$ 。

你以为结束了吗？~~快打高精度吧~~