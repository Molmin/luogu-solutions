考虑 01-trie。

把每个前缀异或和变成二进制插入 01-trie，然后贪心地对后缀异或和搜索 01-trie。$10^{12} \approx 2^{40}$，注意空间复杂度。

显然 $2^p > \sum \limits_{i=0}^{p-1} 2^i$，所以每一个数从最高位开始往后判断是否可以使这一位为 $1$，如果可以那就取 $1$，一定最优。

时间 $O(n \log v)$，空间 $O(n \log v)$。