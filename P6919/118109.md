按题意建出 BST 并数出有多少种树形即可。

这里有一种存树形时不丢失信息的实现：

设一个结点 是叶子 / 只有左儿子 / 只有右儿子 / 左右儿子均有 分别表示为 $0/1/2/3$，这样按先序遍历顺序依次记录每一个结点的状态，就可以用一个四进制数表示整棵树的形态。

从一个树形显然可以唯一得到一个这样的四进制数，而易见从一个合法的四进制数也可以唯一确定一个树形，这是因为每一位存了当前结点的儿子信息，则当前结点的儿子情况唯一确定，且下一步走到哪个结点（即下一位存的是哪个节点的信息）也唯一确定。

本题中 BST 的结点数不超过 $20$，则存树形所需的四进制数值不超过 $4^{20}-1 = 1,099,511,627,775$，用 long long 就可以存下。