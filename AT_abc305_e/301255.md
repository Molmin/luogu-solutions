暴力是 $O(nk)$ 的。

考虑暴力，但是优化。

一个点的监控等级是 $k$ ，与其相邻的点的监控等级就是 $k-1$。

求出每一个点的监控等级，当当前点的当前监控等级大于目前搜索的点的监控等级时，**就不用继续搜索了。**

注意，这样的算法会被链的特殊数据卡到 $O(n^2)$。

所以，按照 $k$ 从大到小看一遍。

[$\texttt{\color{green}{AC\ code}}$](https://atcoder.jp/contests/abc305/submissions/42155103)