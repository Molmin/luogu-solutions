## 题意

给你一个森林。要求支持以下两个操作：

- 选中一个节点，求这个节点所在树的直径。
- 选中两棵树，连接一条能使得两棵树连接后直径最小的边。

## 解法

节点合并用并查集判断，预处理出每棵树的直径。

我们观察操作 2 。发现一个很显然的结论，就是两棵树中的直径中点连边，连后的直径最小。然后观察这两棵树的最长链上的节点个数。

- 如果两个都是奇链，合并后的中点选合并前的中点的任意一个就可以。
- 如果一个是奇链，一个是偶链，合并后的中点选偶链上的那个中点。
- 如果两个都是偶链，合并后的中点选合并前的中点的任意一个就可以。

设连结前 A 树的直径为 $d_a$，B 树的直径为 $d_b$。很显然，合并后的直径为 $l_c = \left\lceil\frac{d_a + 1}{2}\right\rceil + \left\lceil\frac{d_b + 1}{2}\right\rceil$ 。（这里的直径长为直径上点的数量）

然后在并查集上进行合并和信息向上传递即可。

## 代码

本题代码相对来说较为简单，请读者经思考后自行完成。