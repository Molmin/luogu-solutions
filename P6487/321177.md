# 斐波那契数列
为了简洁，用 $f_i$ 表示斐波那契数列的第 $i$ 项，递推式：
$$f_i=\begin{cases}
1&i\le 2\\
f_{i-1}+f_{i-2}&i>2
\end{cases}$$
# 齐肯多夫定理
对于任意一个正整数 $n$，都可以视作若干个不相邻的斐波那契数之和。

证明只需考虑 $n$ 不为斐波那契数的情况。

找到最大小于 $n$ 的斐波那契数 $f_i$，令 $n'=n-f_i$。

依次迭代下去，直到减完。

$n'$ 一定小于 $f_i$，否则 $n\ge 2f_i> f_{i+1}$，上面的假设就不成立了。这样由于前两项是 $1$，最终的结果也一定会是 $0$。

接下来证明不相邻，同样是用反证法，若存在两个数相邻，则可以直接表示为二者之后即 $f_{i+1}=f_i+f_{i-1}$，同样不符合假设。
# 斐波那契博弈
## 定义
一堆个数为 $n$ 的石子，两人交替取走一部分石子，取走数量必须多于 $0$ 且不超过上一人取走的 $2$ 倍。先手不能全部取走，取走最后一个石子的获胜。
## 判定结论
先手必胜当且 $n$ 不是斐波那契数。
## 证明
### 前置性质的推导
主要用到的是不等式加法，不断的放缩。
性质 $1$：
$$\because f_{i-1}<f_i<f_{i+1}$$
$$\therefore f_{i-1}+f_i=f_{i+1}<2f_i<f_i+f_{i+1}=f_{i+2}$$

性质 $2$：
$$\because f_{i+1}<2f_i$$
$$\therefore f_{i+1}+f_i=f_{i+2}<3f_i$$

性质 $3$：
$$\because f_i<f_{i+1}<3f_{i-1}$$
$$\therefore 4f_i<3f_{i-1}+3f_i=3f_{i+1}$$
### 对斐波那契数先手必败的证明
使用数学归纳法，$i\le 2$ 显然成立，假定 $i\le k$ 均成立，现在证对于 $i=k+1$ 同样成立。

先将 $f_{k+1}$ 看作 $f_{k-1}$ 与 $f_k$ 两部分。

设先手取 $x$ 个石子，后手取 $y$ 个石子。

若 $x\ge f_{k+1}$，由性质 $1$，取走个数的二倍已经超过剩余的石子，则后手可以一次取走，且个数不超过 $f_k$。

若 $\dfrac{f_{k-1}}{3}\le x<f_{k+1}$，此时后手一定可以将 $f_{k-1}$ 部分取完，即 $y=f_{k-1}-x\le \dfrac{2f_{k-1}}{3}$，那么下一次先手针对 $f_k$ 部分能取的最大数量为 $2y$。根据性质 $3$ 对比 $2y$ 与 $f_k$，得到 $2y\le \dfrac{4f_{k-1}}{3}<f_k$，则证明先手无法一次取完 $f_k$，那么变成 $f_k$ 局面的子问题，后手最后一次取完时个数也小于 $f_k$。

若 $x<\dfrac{f_{k-1}}{3}$，由性质 $2$，$x<\dfrac{f_{k-1}}{3}<f_{k-3}$，让后手用一定方法取完 $f_{k-3}$ 部分。这里就体现了博弈论中子问题以及归纳法的优美之处，后手取完 $f_{k-3}$ 方法的讨论又回到了前两种情况，讨论 $x$ 与 $f_{k-5}$ 的关系，如果 $x>f_{k-5}$，则 $y<f_{k-4}$ 显然成立，否则先处理好 $f_{k-5}$ 再去单独处理 $f_{k-4}$。而这些的策略都是我们已经假定成立的了。既然保证了 $f_{k-3}$ 部分后手最终取走个数不超过 $f_{k-4}$，也就保证了先手无法一次性取走 $f_{k-2}$，进而保证了后手处理 $f_{k-1}$ 时取走个数不超过 $f_{k-2}$，此时先手也就不难一次取走 $f_k$ 部分（也就是剩余全部石子）。

对上面这种情况再做概括：将 $f_{k+1}=f_{k-1}+f_k=f_{k-3}+f_{k-2}+f_{k}$，此时 $x<f_{k-3}$，意味着后手可以在取走 $f_{k-3}$ 时可以不超过 $f_{k-4}$，那么取走 $f_{k-1}$ 时也就不超过 $f_{k-2}$，自然也就可以后手取走 $f_{k}$，依此得证。
### 对不是斐波那契数情况先手必胜的证明
齐肯多夫定理给了一个优秀的抓手，我们可以划分成若干个不相邻的斐波那契数，而在极端情况下，从小到大取斐波那契数，取走 $f_i$ 这部分时，下一部分最小为 $f_{i+2}$，而 $2f_i<f_{i+2}$。

这里先手的策略是，拆分后取走最小的斐波那契数，后手面对下一个斐波那契数没有办法一次取走，取完这个部分的仍旧是先手，依次直到石子全部取走。

