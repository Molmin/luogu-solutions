### 前言（可以不看）

~~这个蒟蒻在比赛后 $n$ 个小时后才做出来，赶快电摇嘲讽 $Ta$！~~

------------

[题目传送门](https://www.luogu.com.cn/problem/AT_abc308_f)

### 题目大意

有 $n$ 个商品和 $m$ 个优惠券，第 $i$ 个商品价格为 $P_i$。第 $i$ 个优惠券要在商品价格 $\ge L_i$ 的时候才能用，优惠价格为 $D_i$。每个商品只能用一张优惠券，每张优惠券只能用一次。问：最少需要多少钱才能买走所有商品？

------------

### 解法

商品和优惠券都是集合，直接排序吧。

**等等，这题不是贪心吗？**

我们把商品按照价格从小到大排序，优惠券按照使用价格从小到大排序。我们设第 $i$ 张优惠券可以让在 $X_i$ 及以后的商品都能优惠，可以用双游标求出。再把优惠券按照 $X_i$ 排序，给一个 multiset 存目前可以用的优惠券的价格，在优惠券的 $X_i$ 与之前不同时，把这一段区间全部分配价格最大的优惠券，再把价格减掉（最后记得从 $n$ 开始再算一遍）

------------

代码有点长，先放[这里](https://atcoder.jp/contests/abc308/submissions/43214075)了