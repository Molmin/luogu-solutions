### 贪心思路的证明

本人水平有限，如果大家发现纰漏之处，还望不吝赐教。

题意实际上是如下的数学问题：

将 $n+p$ 分解为$n+p=b_{1}2^{a_{1}}+b_{2}2^{a_{2}}+\dots+b_{n}2^{a_{n}}$，求在 $\displaystyle\sum_{i=1}^{n} b_i \leq k$ 的前提下， $p$ 的最小值

给出一种购买方案：初始时 $p=0$ 

$1^{\circ}$：$n$ 在二进制表示下，1的个数大于 $k$ 则跳转到 $2^{\circ}$ ，否则结束

$2^{\circ}$：$n=n+lowbit(n),p=p+lowbit(n)$

下面证明这就是最佳的购买方案， $p$ 就是最终要购买的瓶子数量。



------------


定义概念：

* 最小分解数：
$\forall{x}\in\mathbb{N}$ , 将 $x$ 分解为$x=b_{1}2^{a_{1}}+b_{2}2^{a_{2}}+\dots+b_{n}2^{a_{n}}$,可以取得的 $\displaystyle\sum_{i=1}^{n} b_i$ 的最小值( $a_1<a_2<\dots<a_n$ )

则有：$P_1$：将任意分解方案中的一个 $2^{m}$ 替换为一个 $2^{m-1}$ ，这个分解方案不会更优。

$\implies P_2$：将任意个2的高次幂替换为2的低次幂，方案不会更优。

$\implies P_3$：最佳的分解方案中，$b_i$ 应当取1，否则可以用2的更高次幂替换。即求最佳的分解方案等同于求 $x$ 的二进制表示。



------------


由命题 $P_3$ ，若题中 $n$ 的最小分解数 $>k$ ，

则 $n+p(p<lowbit(n))$ 的最小分解数 $>k$
.

故欲使 $n+p$ 的最佳分解数减小，必有 $p\geq lowbit(n)$.

若 $\exists p>lowbit(n)$，使得 $n+p$ 在二进制下1的个数比 $n$ 减少，则必 $\exists p^{'}<p$ ，可以达到至少不更差的效果，因为二进制下所有低位的和必定小于高位。

例如 $(11101)_2+(100)_2=(100001)_2$，但是 $(11101)_2+(11)_2=(100000)_2$

综上，每次取 $p=lowbit(n)$ 的贪心策略是正确的。



------------

思路完毕，代码我写得并不是很好（先做出的题才想出的证明）就不贴了。