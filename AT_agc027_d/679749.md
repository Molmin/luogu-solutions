想了很多愚蠢的思路。

第一个想法就是在这个棋盘上如果能够满足 $\max(A,B)=\min(A,B)+1$，那模出来就是相等的，微微尝试发现不行，因为不能有相同的。

然后发现如果顺着这个思路走下去，那我们再从一个方阵的角度来考虑，发现大数其实就是周围所有小数的最小公倍数再加一，原因显然。

然后你要求这个最小公倍数必须不重复，所以你考虑构造小数使其满足这个条件。

我们考虑最小公倍数分解质因数之后怎么做，就是取每个因子中指数最大的指数再与质数配起来再相乘对吧，那我们就让每一个大数旁边的数的质数和质数的指数不同，然后你考虑把这些预处理出来然后用。

跑一个 calc 发现我们要用到最大是 $134053$ 这个质数，考虑各种乱搞能不能让这个矩阵合法。

然后没多想直接暴力随机化乱搞，然后直接寄，随 100 次质数表都是挂的，我们考虑另辟蹊径，考虑对于一个四连通的格子应该怎么办节省能够让所有数质数组成部分不相同呢？

考虑如果每一个格子都比前面拿到不同的质数就行了，那一个质数可以用很多次吗，明显是可以的，那就相当于是我们让一个质数用的次数尽量多然后最后的最小公倍数就会尽量小。

思来想去我们发现只要小格子里面填两个质数的乘积就好了，然后你考虑怎么保证大数互不相同，就是把质数塞到对角线里面，小数直接用两条对角线上质数的乘积，然后他们取最小公倍数就不可能取到完全一样的质数，也就不可能会有重复，这样的话总共要用到 $2n$ 个质数，大概就是最大到 $2\times10^4$ 的质数，你考虑这样还不够，直接 rand 质数表，就做完了。

是很妙很牛很神仙的题。