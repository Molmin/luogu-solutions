## 题解：

一道期望DP的入门题目。对于期望DP，我们先要尝试着设置状态，思考转移。

对于期望DP。小伙伴们不太懂的可以走这边：

[浅谈期望DP](https://www.cnblogs.com/fusiwei/p/11743090.html)

期望DP先来尝试设置一下状态：

根据这道题，肯定类比先设置状态为$dp[i]$表示已经买了i种邮票，想要取完的期望钱数。转移方程是：
$$
dp[i]=\frac{i}{n}dp[i]+\frac{n-i}{n}dp[i+1]+i+1
$$
但是上面这个方程~~显然~~是不对的。

为什么呢？因为我们这个方程只考虑了期望钱数，并没有考虑期望次数。根据以上方程，我们新加的钱数默认为i+1，那样的话，整个取邮票的过程就与种数无关，而这显然是不对的。

也就是要考虑期望次数。因为钱数和期望次数有关。

设期望次数为f[i]，那么针对f[i]的转移就是我们比较熟悉的：
$$
f[i]=\frac{i}{n}f[i]+\frac{n-i}{n}f[i+1]+1
$$
即：
$$
f[i]=f[i+1]+\frac{n}{n-i}
$$
这时我们可以来考虑钱数了。

这时，每一个新状态的钱数期望就是上一个状态的钱数期望加上上一个状态的的期望次数+1。

也就是：
$$
dp[i]=\frac{i}{n}(dp[i]+f[i]+1)+\frac{n-i}{n}(dp[i+1]+f[i+1]+1)
$$
代码：

```cpp
#include<cstdio>
using namespace std;
int n;
double f[10010],dp[10010];
int main()
{
    scanf("%d",&n);
    for(int i=n-1;i>=0;i--)
        f[i]=f[i+1]+(1.0*n)/(1.0*(n-i));
    for(int i=n-1;i>=0;i--)
        dp[i]=(1.0*i/1.0*n)*dp[i]+(1.0*(n-i))/(1.0*n)*dp[i+1]+1;
    printf("%.2lf\n",dp[0]);
    return 0;
}
```
