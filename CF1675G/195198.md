看到这么小的数据范围肯定考虑 DP。

观察到一个性质：如果只操作前 $i$ 个，那么前 $i+1$ 个位置的和依旧不变。

所以考虑 DP：$dp_{i,j,k}$ 表示前 $i$ 个放了 $j$ 个饼，第 $i$ 个放了 $k$ 个饼的方案。

由于前 $i$ 个一共放了 $j$ 个，容易得出第 $i+1$ 个位置应该给第 $i$ 个添加 $j-pre_i$ 个馅饼（如果是负数就是放回去），贡献就是 $|j-pre_i|$。

所以我们求 $dp_{i,j,k}$ 的时候，直接枚举每个 $l$，对对应的 $dp_{i-1,j-k,l}$ 取 $\min$，最后加上这个贡献即可。但是复杂度 $O(nm^3)$，不能接受。

观察到我们在转移的时候做了大量枚举的无用功。所以令 $f_{i,j,k}$ 表示原 DP 的意义上加一个后缀 $\min$，然后就可以变成 $O(nm^2)$ 了。

[Code](https://codeforces.com/contest/1675/submission/201924483)