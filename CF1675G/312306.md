简单 dp 题。这里提供一个不太一样的做法。

看到 $m$ 很小，直接顺次将每个 $a_i$ 拆分成 $a_i$ 个 $i$ 形成序列 $b$。

然后考虑 dp，令 $f_{i,j,z}$ 表示第 $i$ 个盒子，放不多于 $j$ 的糖果，一共放置了 $z$ 个糖果。

我们可以先计算出恰好等于 $j$ 的 $f$，然后前缀取 min，求出真正的 $f$。

那么此时有 $f_{i,j,z}=f_{i+1,j,z-j}+\sum_{x=z-j+1}^z|i-b_x|$。计算代价可以移动指针 + 前缀和计算。

状态数事实上是 $n\sum_{i=1}^{n}\frac{m}{i}=nm\log n$ 级别的，时间复杂度为 $O(nm\log n)$，空间复杂度可以做到 $O(nm)$。

~~然而不知道为什么计算代价直接用暴力二分计算的 $O(nm\log n\log m)$ 比上面做法更优。~~

~~复杂度算错不要喷死我。~~

[code](https://www.luogu.com.cn/paste/kf2dbvhr)