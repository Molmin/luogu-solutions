该题直播中讲的是将每一个点设一个点权，先人为设定$f[1]=1$，

再通过$DFS$算出其他点的点权，复杂度$O(n+Q)$

不过我还是想分享一下我的想法：

~~暴力分类讨论~~我们先不考虑图中含有环的情况:（其实就是一棵树）

我们如果先以任意一个点为源点跑一边最短路的话，记到$i$点的最短路为$f[i]$

当我询问的两个点的最短路包含这个点，将他们的$f[a]$和$f[b]$异或起来恰好是最短路(最小异或和)

当最短路不包含这个点时，(如图，求1到3的最短路，以6为源点)因为描红的边被计算了两遍($ a$ $xor$ $a$ $==0$，异或的影响被抵消)，所以此时也恰好是最短路


![](https://cdn.luogu.com.cn/upload/image_hosting/ryuu01v8.png)


而加入环之后，我们注意到，题目中有一句话：

 ### 保证$G$中不存在简单环使得边权异或和不为$0$。
 
 于是我们就有，对于任意一个环内，我从一个点到另一个点的一条路径异或和，和另一条路径的异或和相等(只有$ a1$ $xor$ $a2$ $==0$才有整个环为$0$呀)
 
 于是就可以愉快的把环给砍掉，其余证明同上
 
 复杂度没有直播中的这么优秀，但是也可供参考
 
 ~~顺便在CSP前提醒同学们一句，一定要尝试根据数据范围猜测正解~~
 
 ~~我会告诉你我看到$n,Q<=10^{5}$又想到要用最短路就口胡$O(1)$询问，然后利用$IOI$赛制的特点，打完就交然后过了吗~~
 
 咳咳，正经说一句，这个技巧在$OI$中还是确实很重要的