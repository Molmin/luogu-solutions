这是一道考察基本功的题。

首先，容易想到枚举最终的“对齐方式”，也就是在经过许多次修改操作以及左右移操作后，A一共左移了多少位与B对齐

在对齐方式确定的情况下，显然第三个操作的次数已经固定，即A与B不同的位置个数

现在要最小化前两个操作的次数和

显然在最优方案中A的移动是分为两段：先一堆左移，再一堆右移（或者倒过来），因为我们把它看成B的左右移，那么可以修改的位置就是每次移动之后所有1的位置的并集，而重复到一种移动状态显然不会让集合元素增加

考虑到枚举左右移的最远位置与枚举对齐方式，时间$O(n^3)$，需要优化

考虑到在枚举对齐方式后，每一个需要修改的地方都需要被B的左右移（上文提及将A的左右移转化为B的左右移）覆盖到，因此每个位置可以独立出来

设$l_i$表示最少向左边移动多少次才能让B覆盖到$i$位置，$r_i$同理。那么前两个操作的次数和就是所有需要修改的位置的$r$取max减去$l$取min

对于预处理$l,r$显然是$O(n^2)$的，因为你只需要暴力枚举左右移时的1的位置的并集