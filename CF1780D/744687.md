### 题意

有一个不大于 $10^9$ 的正整数 $n$，先告诉你 $n$ 在二进制下 $1$ 的个数；每次操作你可以将 $n$ 减去一个小于等于 $n$ 的整数，接着再告诉你当前的 $n$ 在二进制下 $1$ 的个数。你需要在 $30$ 次操作内计算出 $n$ 的值。

### 分析

$\log _2 10^9 < 30$，每次询问至少需要计算出 $n$ 的一个二进制位。

举个例子，$(100100)_2-1=(100011)_2$，发现这个数减 $1$ 后二进制下 $1$ 的个数增加了 $1$。

我们不妨设原数在二进制下最低的 $1$ 的位置为 $f$（最低位是第 $0$ 位），减 $1$ 后二进制下 $1$ 的个数增加了 $x$，可以得到式子 $f=x+1$。

于是，我们可以通过这个式子，求出 $n$ 在二进制下每一个为 $1$ 的位。

记得每次减的时候不仅要减 $1$，还要减去 $2^f-1$，因为要把上次减 $1$ 得到的末尾的好多 $1$ 减去，即每次减的数为 $2^f$。

若询问得到的 $cnt$ 恰好等于 $f$，说明此时 $n$ 只剩下末尾的好多 $1$ 了，减去 $2^f$ 会导致 $n$ 变为负数，需要及时退出循环。

最后统计一下所有减的数，这些数的和即 $n$。

### 代码

```c++
#include <bits/stdc++.h>

using namespace std;
int cnt[32];
signed main(){
	int t,k,sum,p,f;
	cin>>t;
	for(int temp=0;temp<t;temp++){
		k=0,sum=0,p=1;
		cin>>cnt[k];
		while(cnt[k]){
			cout<<"- "<<p<<endl;
			sum=sum+p;
			cout.flush();
			cin>>cnt[++k];
			f=cnt[k]-cnt[k-1]+1;
			cnt[k]=cnt[k]-f;
			p=pow(2,f);
			if(cnt[k]==0) sum=sum+p-1;
		}
		cout<<"! "<<sum<<endl;
		cout.flush();
	}
	return 0;
}
```