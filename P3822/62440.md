考虑单点加 $\pm1$，以 $+1$ 为例，直接线段树查找前驱 $0$ 变为 $1$，将这之后的 $1$ 区间推平为 $0$，就是 $O(\log n)$ 的。

若多点增加，但是注意到这里的操作是推平，而多次加 $1$ 的距离不超过 $\log_2V$，所以可以考虑对这 $O(\log V)$ 长度的区间暴力更新，再暴力重构其所在区间的子树。然后剩下最多就只需要跑一个推平操作，其左端点超出这个区间，直接更新，就仍为 $O(\log n+\log V)$。

> 其实考虑到这里就容易想到压位了，这样时间和空间都直接满足了。

最后一个点是关于空间，开 $30n$ 的值域十分危险，考虑到上述操作的端点最多只有：每个操作所在的位置及其高一位的位置，因此离散化即可 $O(n)$ 空间。