### 简化题意

二维矩形，区间加，区间求 $\gcd$。
### 分析
先来考虑弱化的一维版本，显然可以用线段树维护。可是就无法下传标记了，此时我们考虑把区间操作转换为单点，想到了差分。发现 $\gcd(a,b)=\gcd(a-b,b)$，所以维护差分数组是对的，边界再处理一下即可。
### 扩展
现在变成了二维，如果我们简简单单的维护 $n$ 行差分数组，$n$ 颗线段树，修改时一行一行修改就会发现时间复杂度会不行。

这个时候我们想一想，两个数相乘等于 $n$，必定有一个数大于等于 $\sqrt{n}$，另一个数小于等于 $\sqrt{n}$，所以我们挑短的维护就行。一次操作时间为 $O(\min(n, m)\times \log_{\max(n, m)})$，总时间复杂度再乘上一个 $T$ 就可以了，卡卡常完全过得去。