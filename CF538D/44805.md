首先，如果能用某种移动方式表示，那移动方式的矩阵大小不超过 $2n-1$，这点很显然。  
观察发现，`x` 是 $\lor$ 起来的，而 `.` 是 $\land$ 起来的，我们重点考虑 `.`。  
于是我们暴力枚举每个棋子，然后暴力枚举每个 `.`，然后在他们相对位置处打标记，因为这个方向肯定无法走了。  
然后最后就得到了可能的方法，最后带回去检验是否有 `x` 没被覆盖即可。  
代码就不放了（其实是没写