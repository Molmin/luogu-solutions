考虑这个操作的本质是在位置 $i-1,i,i+1$ 分别 $+a_i,-2a_i,+a_i$，所以第一个结论就是所有数的和不会变。

遇到和不变考虑放到前缀和上考虑，相当于在位置 $i-1,i$ 上分别 $+a_i,-a_i$。

然后发现 $pre_i=pre_{i-1}+a_i,pre_{i-1}=pre_i-a_i$，所以这个操作本质上是一个交换相邻两个位置的前缀和的操作，然后要求排序，那么实际上就是模拟冒泡排序，就是求逆序对个数了。

或许会有人问这是怎么想出来的，我能给出来的回答就是**愣想**或者**运气好**。因为如果 adhoc 都有一个通用的流程的话就不叫 adhoc。不过这题有个可以参考的点就是遇到和的信息可以考虑放到前缀和上考虑，然而实际上数列的性质题可以经常考虑**前缀和**或**差分**。

应该不会有人蠢到不会判无解，所以不讲。

懒得离散化所以没写 BIT，直接写的归并排序。

https://codeforces.com/contest/1725/submission/170853780