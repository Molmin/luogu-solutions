# 题解 [CF1343D](https://codeforces.com/contest/1343/problem/D)

本题用差分数组来做。

因为考虑枚举最终更改为的数字 $X$ ，$\Theta(nk)$ 的复杂度显然会超时，所以我们考虑不需要 $\Theta(n+2\times k)$ 的判断方式，因为我们是通过确定 $k$ 来判断每组数字需要更改几个，我们可以考虑在拿到一组数字时，直接求出这组数字可以通过不同次数的更改能到达哪些数字。

易证：

- 一次都不更改的时候显然 $X=a_i+a_{n-i+1}$ 的，所以在此时，更改次数为零

- 更改一次的时候明显是 $\min(a_i,a_{n-i+1})+1\le X \le \max(a_i,a_{n-i+1})+k$ ，即两个数字较大的那个更改为 $1$ ，或者是较小的那个更改为 $k$ ，也就是两数之和能取到的最大值和最小值

- 更改两次就是将两数之和更改为 $2$ 和 $2\times k$ 

我们可以考虑开一个数组 $b[\ i\ ]$ 统计当 $X=i$ 时整个序列需要更改的次数，每次我们需要在此数组上我们求出的区间内值加一，因为修改是 $\Theta(2\times k) $ 的，我们为了达到 $\Theta(1)$ 的修改可以通过差分数组来实现。

易得，$b[]$ 数组是一个以 $2\times k$ 为大小的数组，所以注意其数组大小。 

[$Code$](https://codeforces.com/contest/1343/submission/189902353)