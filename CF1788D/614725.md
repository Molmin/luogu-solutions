经典题。

首先发现一个性质：所有点的移动方向不会发生变化，始终为最开始的方向。这是因为点的移动速度相同，容易得到。

如果所有子集答案都是 $1$，那么总答案为 $2^n-(n+1)$。考虑什么情况会汇聚到多个点。可以发现，如果相邻两个点是形如 $\leftarrow \rightarrow$ 的运动情况的话，会额外产生一个点。容易发现总额外贡献就是这种相邻点对的数量。

枚举点对 $(x,y)$，考虑其贡献。显然，它们中间的点不能再取，而 $x$ 左边必须至少选出一个点离 $x$ 的距离相对于 $y$ 更近。$y$ 同理。显然二分查找。采用 `lower_bound` 和 `upper_bound` 函数。简单用乘法原理统计即可。

复杂度 $O(n^2\log n)$。如果用快速幂会增大常数，会被卡掉。需要预处理 $2$ 的幂次。[代码](https://codeforces.com/contest/1788/submission/210821519)。