暴力，单牌和对牌最后处理就可以了，剩下的各种情况讨论，随机数据轻松跑出。

暴力+贪心，暴力枚顺子，剩下的牌肯定是可以贪心的，随便搞一搞就可以了

```cpp
#include<cstdio>
#include<algorithm>
#include<cstring>
#define mxh 1000000007
using namespace std;
int ans,T,n,i,x,y,pai[6],cnt[15];
void find(int step){
    int i,j,k,w;
    if(step>=ans)return;
    ans=min(ans,step+pai[1]+pai[2]+pai[3]+pai[4]);
    if(pai[4])for(i=2;i<=14;i++)if(cnt[i]==4){
        pai[4]--;cnt[i]-=4;
        if(!pai[3]&&!pai[4]&&!pai[1]&&pai[2]<=1){
            ans=min(ans,step+1);
            pai[4]++;cnt[i]+=4;
            return;
        }
        for(j=1;j<=14;j++)if(cnt[j]){
            pai[cnt[j]]--;cnt[j]--;pai[cnt[j]]++;
            for(k=j;k<=14;k++)if(cnt[k]){
                pai[cnt[k]]--;cnt[k]--;pai[cnt[k]]++;
                find(step+1);
                pai[cnt[k]]--;cnt[k]++;pai[cnt[k]]++;
            }
            pai[cnt[j]]--;cnt[j]++;pai[cnt[j]]++;
        }
        if(pai[2]||pai[3]||pai[4])for(j=2;j<=14;j++)if(cnt[j]>1){
            pai[cnt[j]]--;cnt[j]-=2;pai[cnt[j]]++;
            for(k=j;k<=14;k++)if(cnt[k]>1){
                pai[cnt[k]]--;cnt[k]-=2;pai[cnt[k]]++;
                find(step+1);
                pai[cnt[k]]--;cnt[k]+=2;pai[cnt[k]]++;
            }
            pai[cnt[j]]--;cnt[j]+=2;pai[cnt[j]]++;
        }
        pai[4]++;cnt[i]+=4;
    }
    if(pai[3])for(i=2;i<=14;i++)if(cnt[i]>=3){
        pai[cnt[i]]--;cnt[i]-=3;pai[cnt[i]]++;
        find(step+1);
        for(j=1;j<=14;j++)if(cnt[j]){
            pai[cnt[j]]--;cnt[j]--;pai[cnt[j]]++;
            find(step+1);
            pai[cnt[j]]--;cnt[j]++;pai[cnt[j]]++;
        }
        if(pai[2]||pai[3]||pai[4])for(j=2;j<=14;j++)if(cnt[j]>1){
            pai[cnt[j]]--;cnt[j]-=2;pai[cnt[j]]++;
            find(step+1);
            pai[cnt[j]]--;cnt[j]+=2;pai[cnt[j]]++;
        }
        pai[cnt[i]]--;cnt[i]+=3;pai[cnt[i]]++;
    }
    if(pai[3]+pai[4]>=2)for(i=3;i<14;i++)if(cnt[i]>=3&&cnt[i+1]>=3){
        pai[cnt[i]]--;cnt[i]-=3;pai[cnt[i]]++;w=i;
        for(j=i+1;cnt[j]>=3&&j<=14;j++){
            pai[cnt[j]]--;cnt[j]-=3;pai[cnt[j]]++;
            find(step+1);w=j;
        }
        for(j=i;j<=w;j++){
            pai[cnt[j]]--;cnt[j]+=3;pai[cnt[j]]++;
        }
    }
    if(pai[2]+pai[3]+pai[4]>=3)for(i=3;i<13;i++)if(cnt[i]>=2&&cnt[i+1]>=2&&cnt[i+2]>=2){
        pai[cnt[i]]--;cnt[i]-=2;pai[cnt[i]]++;
        pai[cnt[i+1]]--;cnt[i+1]-=2;pai[cnt[i+1]]++;w=i+1;
        for(j=i+2;cnt[j]>=2&&j<=14;j++){
            pai[cnt[j]]--;cnt[j]-=2;pai[cnt[j]]++;
            find(step+1);w=j;
        }
        for(j=i;j<=w;j++){
            pai[cnt[j]]--;cnt[j]+=2;pai[cnt[j]]++;
        }
    }
    if(pai[1]+pai[2]+pai[3]+pai[4]>=5)for(i=3;i<11;i++)if(cnt[i]&&cnt[i+1]&&cnt[i+2]&&cnt[i+3]&&cnt[i+4]){
        pai[cnt[i]]--;cnt[i]--;pai[cnt[i]]++;
        pai[cnt[i+1]]--;cnt[i+1]--;pai[cnt[i+1]]++;
        pai[cnt[i+2]]--;cnt[i+2]--;pai[cnt[i+2]]++;
        pai[cnt[i+3]]--;cnt[i+3]--;pai[cnt[i+3]]++;w=i+3;
        for(j=i+4;cnt[j]&&j<=14;j++){
            pai[cnt[j]]--;cnt[j]--;pai[cnt[j]]++;
            find(step+1);w=j;
        }
        for(j=i;j<=w;j++){
            pai[cnt[j]]--;cnt[j]++;pai[cnt[j]]++;
        }
    }
}
int main(){
    for(scanf("%d%d",&T,&n);T--;){
        ans=12;
        memset(cnt,0,sizeof(cnt));
        memset(pai,0,sizeof(pai));
        for(i=1;i<=n;i++){
            scanf("%d%d",&x,&y);
            if(x==1)x=14;
            if(x==0)x=1;
            cnt[x]++;
        }
        for(i=1;i<=14;i++)pai[cnt[i]]++;
        find(0);
        printf("%d\n",ans);
    }
}

```