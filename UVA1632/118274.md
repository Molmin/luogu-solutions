
[ $\color {#6495ED} \mathcal{MyBlog}$](https://xjx885.coding-pages.com/)

---

### 前言：

本题题解比较少诶...

我交一发好了...

---

### 题目大意：

给定一条线段，其上有n个珠宝，每个珠宝到线段最左端距离为定值$d_i$，珠宝在$t_i$时刻会消失，可以从任意地点开始收集珠宝，每单位时间可以移动一个单位的距离，问收集所有珠宝的最少时间是多少？

---

### 题目分析:

这题难点主要在于状态表示...

当然，首先你得看出来这题是道DP...

观察数据规模，$n<=10000$

这意味着，我们的DP数组顶多开n^2....

首先，我们思考最暴力的方法：状压DP...

令$f[k][i]$表示现在在k点的位置，已经走过了二进制状压后为i的点...

显然不行，复杂度高达$2^{10000}$

我们考虑优化i这一维：

思考可知，假如我们通过了点i，我们自然会顺手拿起其上的珠宝...

而我们从起始点开始，经过的路径一定是连续的线段...

这意味着，我们所拿走的点一定是连续的...

换句话说，我们可以把状态改为$f[k][i][j]$表示我们在k点，经过了$i-j$中所有点，所花费的最少时间...

然而复杂度任然高达$O(n^3)$...

继续考虑优化...

i,j两维似乎没办法优化了，我们似乎可以优化k...

我们已经理解：走过的点一定是一个连续区间...

那么我们最后会落在哪呢？

我们不可能落到区间中的任意一点...只有可能落在区间两极...

为什么？

很明显...从第一步开始，我们每到达一个未经过的点，本质就是对 经过的点 这个区间的左右拓展...

比如说我经过了$i$~$j$这个区间的所有点，下一步我无非就是要么走到$i-1$点，拓展区间左端，要么走到$r+1$点，拓展区间右端...

如果说走到$i-2$的点呢？ 其实就是先走到$i-1$ ,再走到$i-1 -1$的点...

因此，我们可以把原状态优化为f[i][j][0/1]，表示走过了$i$~$j$的区间，正处在区间左/右端点...

转移便是分别向左向右走一步...

至于初态，因为我们的初始节点是随意的，所以说$f[i][i][0/1]=0$

剩下的细节见代码就好0.0...

本题与[洛谷P1220 关路灯](https://www.luogu.org/problem/P1220)很是相像，推荐过去做一做...

---

### 代码：

```cpp
#include <bits/stdc++.h>

using namespace std;

const int N = 10010;

int n;
int dis[N], die[N];

int f[N][N][2];
//经过了l,r的区间，站在l/r点时的最小时间

int main()
{
	while(scanf("%d", &n) != EOF)
	{
		for(int k = 1; k <= n; k++)
			scanf("%d %d", &dis[k], &die[k]);

		//初始化
		memset(f, 0x3f, sizeof(f));
		for(int k = 1; k <= n; k++)
			f[k][k][0] = f[k][k][1] = 0;
		
		for(int len = 2; len <= n; len++)
			for(int l = 1; l + len - 1 <= n; l++)
			{
				int r = l + len - 1;

				f[l][r][0] = min(f[l + 1][r][0] + dis[l + 1] - dis[l] , f[l + 1][r][1] + dis[r] - dis[l]);
				if(f[l][r][0] >= die[l]) f[l][r][0] = 0x3f3f3f3f;

				f[l][r][1] = min(f[l][r - 1][1] + dis[r] - dis[r - 1] , f[l][r - 1][0] + dis[r] - dis[l]);
				if(f[l][r][1] >= die[r]) f[l][r][1] = 0x3f3f3f3f;
			}

		int answ = min(f[1][n][0], f[1][n][1]);

		if(answ == 0x3f3f3f3f)
			printf("No solution\n");
		else
			printf("%d\n", answ);
	}

	return 0;
}
```


---

### 结语：


如果本题解有BUG...

那么...那么...那么...

（随意了）还请私信作者....


---

## END