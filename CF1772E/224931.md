## 描述

一个两人参与的游戏，分先后手。

初始时给出一个 $n$ 的排列 $q$，保证初始时一定不是递增或递减的。同时初始时，$n$ 个下标都是红色的。两人轮流进行如下操作：

1. （可选）保证所有红色的下标对应数位置不变。任意交换蓝色下标对应的数。
2. （必选）把一个下标染成蓝色。

先手的目标是让排列升序排列，后手的目标是让排列降序排列。若游戏进行 $1919810^{114514}$ 轮后都没结束，视作平局。

双方使用最优策略，问游戏最终是谁赢，或判定平局。

## 解答

对于两位玩家，达成彼此最终状态必须先对初始状态与最终状态与差异的下标染色。

例如，对于先手，需要染色的数量为 $\sum_{i=1}^n[p_i\ne i]$。

当然这里面可能存在重合。记先手单独必须染色数量、后手单独必须染色数量、两人共同必须染色数量分别为 $x,y,z$。

这里还应该指出的是，在各自必须染色的数量没有完成时，我们是不可能使用操作 1 的。因为可以先将对方的交换恢复，然后再进行自己需要的交换。

对于先手，必须可以在后手染完 $y$ 之前染完 $x,z$。否则在先手染完 $z$ 后，后手便可以坐享其成，直接胜利。而这是不可能出现的，所以先手会耗成平局。这种情况下，先手胜利，当且仅当 $x+z\le y$。

类似地，对于后手，胜利当且仅当 $y+z<x$。这里不能取等，因为他是后手。

不满足以上两点，即为平局。

## 代码

_[186051525](https://codeforces.com/contest/1772/submission/186051525)_