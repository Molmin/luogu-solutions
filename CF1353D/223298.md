直接用优先队列模拟即可。

把区间封装成一个结构体，然后放到优先队列里面，重载运算符按**区间大小,左端点前后**排序，每次取出队头的元素，填上数之后把这个区间分裂成两个小区间，注意当这个区间长度为 $1$ 时不能再分裂，长度为 $2$ 时只能分离出一个。

[$\mathcal{Code}$](https://codeforces.com/contest/1353/submission/80151969)