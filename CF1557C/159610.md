### C. Moamen and XOR

**题目大意：**

> 给定数组 $a$ 的长度 $n$ 与 $k$，请输出有多少种构造方式使得 $a$ 数组中的每个数都小于 $2^k$，且 $a_1\&a_2\&\cdots\&a_n\ge a_1\oplus a_2\oplus\cdots\oplus a_n$，并对 ${10}^9+7$ 取模。

**解题思路：**

考虑计算不符合要求的情况，即 $a_1\&a_2\&\cdots\&a_n < a_1\oplus a_2\oplus\cdots\oplus a_n$。

于是我们将 $a_i$ 用 $2$ 进制表示，然后从高位到低位处理。

在 $2$ 进制下，每个数都有 $k$ 位（不足补前导 $0$），并且共有 $n$ 个数。可以先分为几种情况：

1. 有奇数个 $1$ 但不全是 $1$，此时 $\&=0$，$\oplus=1$。
2. 有奇数个 $1$ 并且全部是 $1$，此时 $\&=1$，$\oplus=1$。
3. 有偶数个 $1$ 但不全是 $1$，此时 $\&=0$，$\oplus=0$。
4. 有偶数个 $1$ 并且全部是 $1$，此时 $\&=1$，$\oplus=0$。

那么当 $\&=\oplus$ 的情况即为：$C_n^0+C_n^2+\cdots+C_n^{num1}$，$num1$ 表示小于 $n$ 的最大偶数。特别地，如果 $n$ 是奇数，需再加上 $C_n^n$。（为了表示方便，将上述式子记为 $pre$）

当 $\&<\oplus$ 的情况即为：$C_n^1+C_n^3+\cdots+C_n^{num2}$，$num_2$ 表示小于 $n$ 的最大奇数。（为了表示方便，将上述式子记为 $tot$）

假设我们当前枚举到了第 $i$ 位，那么其实方案数就是：前 $(i-1)$ 位 $\&=\oplus$，第 $i$ 位 $\&<\oplus$，后 $(n-i)$ 为随便选情况相乘，即为：

$$pre^{i-1}\times tot\times 2^{n*(k-i)}$$

最后的答案用总答案数 $2^{n*k}$ 减去求得不符合要求情况即可。


**代码实现：[$\text{Code}$](https://codeforces.com/contest/1557/submission/125437385)**