# 图论

### 前言

这题评紫虚高，还是挺板子的。

不过调吐了，本来口胡了一遍自信满满，结果直接GG。

细节太多了。

题目链接：[$\text{Link}$](https://www.luogu.com.cn/problem/UVA10917)。

### 题意简述

给定 $n$ 个点 $m$ 条边的带权无向图，能从 $A$ 走到 $B$ 当且仅当：

- $A$ 与 $B$ 之间有一条边。

- $A$ 到 $2$ 号点的距离大于 $B$ 到 $2$ 号点的距离。

问从 $1$ 号点到 $2$ 号点有多少种走法。

### 题目分析

不难想到通过所有点到 $2$ 号点的关系建一张新图 $G=(V',E')$。

这张新图满足：

- 对于任意 $u,v\in V'$ 都有 $u,v\in V$。

- 对于任意 $e=(u,v)\in E'$ 都有 $e\in E$。

- 对于任意 $u,v\in V'\land e=(u,v)\in E'$ 都有 $d_u>d_v$。

其中 $d_x$ 表示 $x$ 到 $2$ 号点的距离。

然后就可以在这个新图上跑 $dfs$，并且这个新图一定是个 $DAG$（有向无环图）。

为什么呢？假设有一条环，定点为 $v_1,v_2,\cdots v_k$。

它必定满足 $d_{v_1}<d_{v_2}<\cdots d_{v_k}$ 或者 $d_{v_1}>d_{v_2}>\cdots d_{v_k}$

既然是一条环，那么 $v_1$ 和 $v_k$ 有一条直接相连的边，但它们如果连边就不属于新图的第三条的关系，故不会有环。

最后注意：

- 多组数据要清空。

- 拓扑排序见祖宗。

[$code$](https://paste.ubuntu.com/p/rpJZhsXrk4/)

$$\texttt{The End.by UF}$$