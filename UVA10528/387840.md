### 1 题意

输入几行包含空格的字符串（设它为 $s$），以 `END` 结尾。

对于每个 $s$，它表示一串音符。如果其中一个音符在某个大调上没有出现，就说明 $s$ 不可能产生于这个大调。输出可能 $s$ 可能产生于哪个（些）大调。

如果 $s$ 不可能出现于任何大调，就输出一个空行。两个测试字符串之间不需要有空行，但不能在同一行。

### 2 音乐知识

本章不是无意义内容。它是读懂题目的必要前提。

我一个学钢琴的，勉强搞懂了这道题，现在先科普一下音乐知识。

##### 琴键

本题中，钢琴有 $12$ 个琴键，从低音到高音分别是：

```
C C# D D# E F F# G G# A A# B
```

在本题和代码中，我们会将它们从 $1$ 到 $12$ 编号。

其中，不带 `#`（`#` 是升号）的就是白键上的，比如，题目图片上，最左边的白键是 `C`；带 `#` 的就是黑键上的，比如，最左边的黑键是 `C#`。一个白键后加个 `#`，表示这个白键右边的那个黑键。

但是，`E` 和 `B` 右边是没有黑键的，看图。

实际上，大钢琴有 $88$ 个琴键，其中 $56$ 个白键，$32$ 个黑键。不过，任何的琴键都是上述 $12$ 个琴键的一种。

实际上，这种黑键命名只是为了方便写代码的。在生活中，有些黑键的常用名不是这个（当然，写这个也没问题）：

```
题目称呼 常用名
C#      Db（在这里，C#也很常用）
D#      Eb
G#      Ab
A#      Bb
（用b代替降号，另外，升降号一般是写在字母前面的）
```

##### 半音与音高

相邻的 $2$ 个琴键的距离是一个半音。比如，`C` 和 `C#` 距离是 $1$ 个半音，而 `C` 和 `D` 距离是 $2$ 个半音（也就是 $1$ 个全音）。

相邻 $1$ 个半音的 $2$ 个琴键，高的是低的的频率的 $\sqrt[12]{2}$ 倍，大概是 $1.0593$。

##### 核心知识点——大调

一个大调由 $7$ 个音符组成。除了第 $3$ 和第 $4$ 个音符之间与第 $7$ 和下一个八度的第 $1$ 个音符之间间隔 $1$ 个半音以外，其它相邻音符间隔 $2$ 个半音。

以下是 $13$ 个大调的组成：

```
（最开头的字母是大调名称，其它是音符）
 C  C  D  E  F  G  A  B
C#  C# D# F  F# G# A# C
 D  D  E  F# G  A  B  C#
D#  D# F  G  G# A# C  D
 E  E  F# G# A  B  C# D#
 F  F  G  A  A# C  D  E
F#  F# G# A# B  C# D# F
 G  G  A  B  C  D  E  F#
G#  G# A# C  C# D# F  G
 A  A  B  C# D  E  F# G#
A#  A# C  D  D# F  G  A
 B  B  C# D# E  F# G# A#
```

### 3 思路

输入字符串 $s$。

将里面的音符一个个放进队列 $a$ 里面。

枚举每个音符，如果一个大调里面不该出现这个音符，就排除这个大调。

没被排除的大调就输出。

### 4 代码与记录

```cpp
#include<iostream>
#include<cstring>
#include<queue>
using namespace std;
int n;
string ty;
queue<int> a;//音符编号
int fro;//队首
const char p[13][3]={{"0"},{"C"},{"C#"},{"D"},{"D#"},{"E"},{"F"},{"F#"},{"G"},{"G#"},{"A"},{"A#"},{"B"}};
bool ok[13];//这个大调的可行性
const bool check[13][13]={
	{0,0,0,0,0,0,0,0,0,0,0,0,0},//占位用的
	{0,1,0,1,0,1,1,0,1,0,1,0,1},//C大调
	{0,1,1,0,1,0,1,1,0,1,0,1,0},//升C大调
	{0,0,1,1,0,1,0,1,1,0,1,0,1},//D大调
	{0,1,0,1,1,0,1,0,1,1,0,1,0},//升D大调
	{0,0,1,0,1,1,0,1,0,1,1,0,1},//E大调
	{0,1,0,1,0,1,1,0,1,0,1,1,0},//F大调
	{0,0,1,0,1,0,1,1,0,1,0,1,1},//升F大调
	{0,1,0,1,0,1,0,1,1,0,1,0,1},//G大调
	{0,1,1,0,1,0,1,0,1,1,0,1,0},//升G大调
	{0,0,1,1,0,1,0,1,0,1,1,0,1},//A大调
	{0,1,0,1,1,0,1,0,1,0,1,1,0},//升A大调
	{0,0,1,0,1,1,0,1,0,1,0,1,1}//B大调
};//check[i][j]代表，i号大调可不可以有j音
bool print_white;//是否打印空格
int main(){
	//输入状态设置
	#ifndef ONLINE_JUDGE
	freopen("UVA10528_1.in","r",stdin);
	freopen("UVA10528_1.out","w",stdout);
	#endif
	ios::sync_with_stdio(false);
	//循环输入
	while(true){
		//输入与初始化
		getline(cin,ty);
		n=ty.size();
		ty+='\n';
		if(ty[0]=='E'&&ty[1]=='N'){
			break;
		}
		while(!a.empty()){//多测不清空，爆零两行泪
			a.pop();
		}
		for(int i=1;i<=12;++i){
			ok[i]=true;
		}
		print_white=false;
		//设置编号
		for(int i=0;i<n;++i){
			if(ty[i]=='#'||ty[i]==' '){
				continue;
			}
			if(ty[i]=='C'){
				if(ty[i+1]=='#'){//升C/降D
					a.push(2);
				}
				else{//原C
					a.push(1);
				}
				continue;
			}
			if(ty[i]=='D'){
				if(ty[i+1]=='#'){//升D/降E
					a.push(4);
				}
				else{//原D
					a.push(3);
				}
				continue;
			}
			if(ty[i]=='E'){//原E
				a.push(5);
				continue;
			}
			if(ty[i]=='F'){
				if(ty[i+1]=='#'){//升F/降G
					a.push(7);
				}
				else{//原F
					a.push(6);
				}
				continue;
			}
			if(ty[i]=='G'){
				if(ty[i+1]=='#'){//升G/降A
					a.push(9);
				}
				else{//原G
					a.push(8);
				}
				continue;
			}
			if(ty[i]=='A'){
				if(ty[i+1]=='#'){//升A/降B
					a.push(11);
				}
				else{//原A
					a.push(10);
				}
				continue;
			}
			if(ty[i]=='B'){//原B
				a.push(12);
				continue;
			}
		}
		//枚举每个音符
		while(!a.empty()){
			fro=a.front();
			a.pop();
			for(int j=1;j<=12;++j){
				if(!check[j][fro]){
					ok[j]=false;
				}
			}
		}
		//输出
		for(int i=1;i<=12;++i){
			if(ok[i]){
				if(print_white){
					cout<<" ";
				}
				else{
					print_white=true;
				}
				cout<<p[i];
			}
		}
		cout<<endl;//记得输出换行
	}
	return 0;
}
```

[记录传送门](https://www.luogu.com.cn/record/52005732)

By **dengziyue**