提供一种极其简洁的做法。

## 思路

首先对于一个 $2 \times 4$ 的矩阵，可以构造出这样的一个方案：

$\text{0 1 0 1}$

$\text{2 3 2 3}$

$\text{0 1 0 1}$

$\text{2 3 2 3}$

此时每行异或之后都为 $0$。

但是每个数只让用一次，所以我们可以对每个 $2 \times 2$ 的矩阵加上 $4$。这样，它们其他的位置是相同的，异或之后也为 $0$，对结果没有影响。即：

```
0  1  4  5
2  3  6  7
8  9  12 13
10 11 14 15
```

然后我们发现这是容易证明的：前两个数和后两个数的异或值相同，异或之后就为 $0$。因此每行每列异或都为 $0$。

这个代码也异常好写 qwq

## 代码

```cpp
#include <bits/stdc++.h>
using namespace std;
int a[1005][1005];
int main()
{
	int n,cnt=-1; cin>>n;
	for(int i=1;i<=n/2;i++)
		for(int j=1;j<=n/2;j++)
		{
			a[i*2-1][j*2-1]=++cnt;
			a[i*2-1][j*2]=++cnt;
			a[i*2][j*2-1]=++cnt;
			a[i*2][j*2]=++cnt;
		}
	for(int i=1;i<=n;i++,putchar('\n'))
		for(int j=1;j<=n;j++)
			printf("%d ",a[i][j]);
	return 0;
}
```