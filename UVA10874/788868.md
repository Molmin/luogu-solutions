这题就是一个简单的 $\operatorname{dp}$ 题。

用 $f_{i,0}$ 表示走到第 $i$ 行的线段的左端点的最少步数，用 $f_{i,1}$ 表示走到第 ii 行的线段的右端点的最少步数。

那么可以得到 $f_{1,1}=dis(1,r_1),f_{1,0}=dis(1,r_1)+dis(r_1,l_1)$

（$dis$ 表示距离）。

显然 $f_{i,0}$ 只能从 $f_{i-1,0}$ 和 $f_{i-1,1}$ 转移过来，如果是从 $f_{i-1,0}$ 转移过来，显然需要从第 $i-1$ 行的线段的左端点先往下移一格，再移到第 $i$ 行的线段的右端点，再移到左端点；如果是从 $f_{i-1,0}$ 转移过来，显然需要从第 $i−1$ 行的线段的右端点先往下移一格，再移到第 $i$ 行的线段的右端点，再移到左端点。

那么就可以得到：

$f_{i,0}=\min(f_{i-1,0}+dis(l_{i-1},r_i)+dis(r_i,l_i),f_{i-1,1}+dis(r_{i-1},r_i)+dis(r_i,l_i))+1$

同理，对于 $f_{i,1}$ 也是一样：

$f_{i,1}=\min(f_{i-1,0}+dis(l_{i-1},l_i)+dis(l_i,r_i),f_{i-1,1}+dis(r_{i-1},l_i)+dis(l_i,r_i))+1$

得解。
