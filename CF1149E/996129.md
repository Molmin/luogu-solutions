神仙博弈！

对结点分组，定义结点 $u$ 的 **组别** $\text{Id}_u$ 为 $u$ 的后继结点 $\text{Id}$ 的 $\operatorname{mex}$。

定义组别为 $x$ 的点的集合为 $S_x$，组别 $x$ 的 **权值** 为 $S_x$ 中所有结点值的异或和。

一些显而易见的性质：

- 对于一条边 $u\to v$，$\text{Id}_u\ne \text{Id}_v$。
- 对于 $u$，满足存在 $u\to v$，$\text{Id}_v$ 构成的集合包含所有小于 $\text{Id}_u$ 的数。

一些挖掘可得的性质：

- 对于组别 $x$，若权值为零，操纵 $S_x$ 中的点一定会导致权值非零。
- 对于组别 $x$，若权值非零，操纵 $S_x$ 中的点一定**可以**导致 $y\le x$，$y$ 的权值为 $0$。

因此：

- 若当前状态中，所有组别的权值均为零，先手必败；否则必胜，此时操纵权值不为 $0$ 的最大编号的组中，该组的权值最高位 包含的点即可做到，类似 Nim。



