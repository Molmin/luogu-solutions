正常的做法都是给 $3n+4$ 个点，在其他题解里面呈现得很清楚。下面给出一个点数要求更小的做法。

我们想构造一坨点使得大部分点都能造成贡献。先丢掉合法这个条件，我们可以画出类似于这样的图形（红格子表示能造成贡献，蓝格子表示不合法）：

![](https://cdn.luogu.com.cn/upload/image_hosting/v4135lqf.png)

为了使其合法，我们需要在蓝格子左右两边放上一个另一个蓝格子。也就是说像这样的图形，我们可以首尾相接拼成一个大图形，现在就只剩下最左和最右有两个蓝格子了。我们再引出一条路径就可以去掉蓝格子的贡献。

当然这个只能处理偶数，对于奇数的情况加上一个简单的小判断就好了。下面给出 $n=11$ 的构造实例。

![](https://cdn.luogu.com.cn/upload/image_hosting/92e2j8od.png)

理论上只需要 $n+O(\sqrt n)$ 个格子，但是这个常数有点大，在 $n$ 更大的时候才会体现出差距。

代码只处理了几种上面的图形（分别可以供给 $2,8,18,32$ 个红格子的四种图形），因为是暴力展开插入的比较丑所以只贴[评测链接](https://codeforces.com/problemset/submission/1368/179028794)。