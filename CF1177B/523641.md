
[可能更好的食用体验](/blog/523641/CF1177B) $|$ 
[题目传送门](/problem/CF1177B) $|$ 
[我的其他题解](/blog/523641/#type=题解)

本题为 [CF1177A](/problem/CF1177A) 的强化版，疑似谷内最水紫题（现已掉绿 QwQ）。

------------

${\large\color{#00CD00}\text{主要思路}}$

首先我们把这个数串按位数分段，可以得到：

$1$ 位：$(1,2,3,...,9)$ 共 $9-1+1=9$ 个数，占 $1\times9=9$ 个数字。

$2$ 位：$(10,11,12,...,99)$ 共 $99-10+1=90$ 个数，占 $2\times90=180$ 个数字。

$3$ 位：$(100,101,102,...,999)$ 共 $999-100+1=900$ 个数，占 $3\times900=270$ 个数字。

$\dots\dots$

规律已经很明显了，$len$ 位数就会占 $9\times10^{len-1}\times len$ 个数字。于是，我们就能计算出第 $k$ 个数字所在的数的位数：

```cpp
len=1,t=9;　
while(k>t*len)k-=t*len,t*=10,len++;　
```
以 $k=21$ 为例，计算完后 $len=2,k=12$。再用剩下的 $12$ 位数字除以 $2$，就能计算出这是第 $6$ 个 $2$ 位数，也就是 $10^{2-1}+6-1=15$。由于 $12\mod2=0$，所以应该是 $15$ 的第 $2$ 个数字，即 $5$。

这样做看起来已经没有什么问题了，但其实还是有一些瑕疵。例如，当 $k=20$ 时，计算完位数后 $len=2,k=11$。这时用 $11\div2$，会计算出这是第 $5$ 个 $2$ 位数，明显不符合我们的预期。所以，在计算这是第几个 $len$ 位数时，应该要**向上取整**。这样，才算解决了。

总结：
1. 计算出第 $k$ 位数所在的数的位数 $len$。
2. $k\div len$，求出是第几个 $len$ 位数，要向上取整。
3. $k\mod len$，找到是这个数的第几位，得数为 $0$ 时为最后一位。

最后提供几组数据，大家可以拿来测一测：

1. **输入：**`10`$\qquad$**输出：**`1`
2. **输入：**`189`$\qquad$**输出：**`9`
3. **输入：**`114514`$\qquad$**输出：**`4`
4. **输入：**`1000000000000`$\qquad$**输出：**`1`

------------

${\large\color{#00CD00}\text{完整代码}}$

代码貌似也是所有题解里最简短的了。

```cpp
#pragma G++ optimize(2)
#include<bits/stdc++.h>
using namespace std;
long long k,len=1,t=9,s;
int main()
{　
	ios::sync_with_stdio(false);
	cin>>k;　
	while(k>t*len)k-=t*len,t*=10,len++;//计算出第k位数所在的数的位数 
	s=pow(10,len-1)+ceil(k*1.0/len)-1,k%=len;//ceil(x)的作用是将x向上取整 
	if(k==0)k=len;　
	cout<<to_string(s)[k-1];　
	//to_string()的作用是将一个整数转化为字符串。后面能直接用下标运算符访问也属实是惊到我了 
	return 0;　
}　
```
对了，`to_string()`函数是 C++11 的新函数，~~和我一样~~还在用 C++98 的读者可以使用[洛谷IDE](/ide)编辑程序。

**[${\color{Black}\textbf{xt\_\_}}$](/user/523641) 温馨提示：**


${\large\color{White}\text\colorbox{#AD8800}{题解千万条，理解第一条。直接粘题解，棕名两行泪。}} $