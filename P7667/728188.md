[题面](https://www.luogu.com.cn/problem/P7667)

### 题意

美术馆中有 $n$ 个物品，每个物品有自己的大小和价值，
我们要在其中选取若干个物品，使他们的价值总和减去其中大小最大值与大小最小值的差最大。

### 思路

一开始看到价值以为是背包，仔细审了审题发现很明显是道贪心，因为很明显这个最大值和最小值是可以分开处理的，开个结构体，以大小更大的放后面，用前缀和记录前面所有的价值（这个比较关键，因为大小已经排序，所以前面的大小都是不可能比后面的大小大的，所以可以放心大胆用前缀和，最小值也一样）。

然后可以开始处理最大最小值，逆序循环遍历 $n$，最大值就是以当前情况为最大值所得的值和上一个的最大值中最大的，这样我们就可以处理出在 $i$ 时的最大值的最优情况。

最小值也相同，顺序循环遍历 $n$，判断以当前这个为最小值和上一个的最小值中的最大的（因为题目中所要求的是加上最小值，所以我们取更优情况）再加上我们以求的最大值最优情况，就能得到一个以 $i$ 时的最优情况，用一个变量记录这些最优的最大的输出变量，结束！

不懂得可以借助代码理解：

下面为本题代码：
``` cpp
#include <bits/stdc++.h>
using namespace std;
#define int long long
struct node {
    int x, y;
} a[1000005];
bool cmp(node b, node c) {
    if (b.x != c.x) return b.x < c.x;
    return b.y < c.y;
}
int b[1000005];
int sum[10000005];
signed main() {
    int n;
    cin >> n;
    for (int i=1; i<=n; i++) {
        cin >> a[i].x >> a[i].y;
    }
    sort(a+1, a+n+1, cmp);
    for (int i=1; i<=n; i++) {
        sum[i] = sum[i-1] + a[i].y; // 排序之后前缀和
    }
    b[n+1] = -1000000000000000000;
    int max1 = -10000000000000000; // 你觉得我会告诉你因为我max1开太大了wa了五六次吗QAQ
    for (int j=n; j>=1; j--) {
        b[j] = max(b[j+1], sum[j]-a[j].x);//求最大值的最优情况。
    }
    for (int j=1; j<=n; j++) {
        max1 = max(max1, a[j].x-sum[j-1]+b[j]);//求最小值的最优情况，加上之前求的最大值最优情况就变成了本题要求的。
        // cout << max1 << " ";
    }
    cout << max1 << endl;
    return 0;
}

```