本题我采用边分治的做法，可以说是和QTREE4基本相同了，因此可以参见QTREE4的题解：[题解 SP2666 【QTREE4 - Query on a tree IV】 - KSkun's Blog - 洛谷博客](https://kskun.blog.luogu.org/solution-sp2666)

下面的内容是从那篇题解复制过来的。

# 题解

我们在中心边位置维护两个堆，一个表示左边子树的各个白点距离，一个表示右边子树的。单独维护每个分治结构的答案，我们可以在一个统计最大值的时候顺带把子分治结构的最大值也计算进来，这样询问的时候只需要询问根分支结构的答案即可。在加点的的过程中，记录下这个点会影响到的堆的数据。变白要把这个点放进堆里，变黑只需要打标记。而每一次更新答案的时候，从堆顶把黑点全扔掉就好。如果用数组/vector来存的话，这个更新要根据倒序，因此倒序才是分治结构从底向根的顺序。

# 代码
可以直接抄QTREE4的代码。