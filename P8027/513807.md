###### **~~这是灰题中比较少见的简单题……~~**

依然是经典的“解题三步骤”：

> 1. 读题
>
> 2. 思路（重点）
>
> 3. 代码

## 1.读题：

我们可以把题目转化成：给你一个数组 $a$，里面有 $n$ 个数，选出其中的一大段，平均分成 $k$ 小段，使每个小段都相同（考虑每个小段中的数的顺序）。若这个数组里面有符合这个条件的一段，那么输出每个小段的长度，并且在下一段输出这个小段长什么样；否则，输出 $-1$ 。

看了这道题的数据范围之后，我们就可以~~抛开时间复杂度~~暴力解题了。

## 2.思路：

我们可以先遍历出每一个大段，然后遍历出大段中的每一个小段，再检验每一个小段是否都相同，最后输出结果。

#### 遍历出每一个大段：

首先，若我们选出来的大段中有 $m$ 个数，那么 $m$ 必须可以被 $k$ 整除，否则无法平均分。而 $m$ 必须小于或等于 $n$ ，所以说我们可以建立起第一个框架：

```cpp
while(k*b<=n){//b：每一小段的长度，k×b=m
	b++;
}
```

我们可以算出，一共有 $n-m+1$ 个大段，而且第 $i$ 个大段的第一个数是这个数组中的第 $i$ 个数，所以说我们就可以遍历每一大段了：

```cpp
while(k*b<=n){
	for(int i=1;i<=n-k*b+1;i++){
	}
	b++;
}
```

#### 遍历出大段中的每一个小段：

我们发现，每一个小段的第一个数与下一个小段的第一个数都相距 $b$ 个数，所以说我们可以通过这个关系来遍历每一个小段：

```cpp
while(k*b<=n){
	for(int i=1;i<=n-k*b+1;i++){
		for(int j=1;j<=k*b;j+=b){
		}
	}
	b++;
}
```

#### 检验每一个小段是否都相同：

我们可以通过检测每一个小段中对应的位置上的数是否都相等来检测每一个小段是否都相同。我们可以以第一个小段中的数为标准，与后面的每一个小段都进行对比，一旦出现不相等，立刻跳出小段的循环，进入到下一个大段中的小段的遍历。

```cpp
while(k*b<=n){
	for(int i=1;i<=n-k*b+1;i++){
		for(int j=1;j<=k*b;j+=b){
			for(int l=1;l<=b;l++){
				c[l]=a[i+l-1];//c数组用来储存每个大段中的第一个小段中的数
				if(c[l]!=a[i+l+j-2]){//这里的i+l+j-2其实是i+l-1+j-1，是第k小段中的第l个数的位置
					goto next;//更加简洁地跳出循环
				}
			}
		}
		next:
			cout << "";//这里要放代码，不然会报错
	}
	b++;
}
```

#### 输出结果：

一旦有一个段符合了条件（即没有被“传送”到 $\texttt{next}$ 的位置），就可以输出结果了。若没有符合条件的，则在 $\texttt{while}$ 循环之后直接输出 $-1$。

```cpp
while(k*b<=n){
	for(int i=1;i<=n-k*b+1;i++){
		for(int j=1;j<=k*b;j+=b){
			for(int l=1;l<=b;l++){
				c[l]=a[i+l-1];
				if(c[l]!=a[i+l+j-2]){
					goto next;
				}
			}
		}
		goto exit;
		next:
			cout << "";
	}
	b++;
}
cout << -1;
return 0;//否则还会进行exit中的代码
exit:
	cout << b << endl;
	for(int i=1;i<=b;i++){
		cout << c[i] << " ";
	}
```

## 3.代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	int n,k,a[1000]={},c[1000]={},b=1,o=0,cnt=0;
	cin >> n >> k;
	for(int i=1;i<=n;i++){
		cin >> a[i];
	}
	while(k*b<=n){
		for(int i=1;i<=n-k*b+1;i++){
			for(int j=1;j<=k*b;j+=b){
				for(int l=1;l<=b;l++){
				    c[l]=a[i+l-1];
					if(c[l]!=a[i+l+j-2]){
						goto next;
					} 
				}
			}
			goto exit;
			next:
				cout<<"";
		}
		b++;
	}
	cout << -1;
	return 0;
	exit:
		cout << b << endl;
		for(int i=1;i<=b;i++){
			cout << c[i] << " ";
		}
	return 0;
} 
```