看到前面题解只给了标程却没有给出易错的地方，我决定写篇题解来补充一下，顺便给几组自创数据来帮大家检验程序。

此题不需要优化，直接暴搜。

我的思路是从剩下的数中不断枚举2个数，一一尝试加减乘除四则运算。题目要求从较大数开始输出，我就要求运算时前一个量大于等于（一定要加“等于”！否则60分！）后一个量。然后将结果存在较大量中，并设较小量为已访问。跳过已访问的数，不断从第一个数搜到第四个数搞运算，顺便将运算符号和运算的两个量存起来。当只剩最后一个未访问数时，若其为24，输出即可。

思路很简单，但很多小细节，值得注意。

易错点：

1、当4个数中出现两个及以上相同数时，注意两数相同也可以进行运算，**但必须保证运算的两个量下标不同**。（get60分）

输入：2 2 2 4   输出：2+2=4  4+2=6  6\*4=24

2、运算中必须保证只有整除（无余数）。

3、得出的24可以在4个数中的任意一个（要把四个数全搜一遍）

4、运算中不能出现0和负数（特判解决）。

5、可能会出现两个数反复运算（即最后结果被设为已访问），此时特判最后结果未访问即可（get70分）。

6、必须保证24是最后一步算出来的（在运算出结果时判断，若为24则return，get100分）。

输入：1 2 4 6  输出:2-1=1  4\*1=4  6\*1=24

```cpp
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cmath>
#include<iostream>
#include<algorithm>
using namespace std;
int a[4]={},vis[4]={},fh[4]={},a1[4]={},a2[4]={},f=0;//a用来存4个数，vis用来存该数是否访问过（参与运算过），fh存运算过程中的符号，a1存运算过程中的较大量，a2存较小量（运算结果可以不存）
void check()//判断+输出过程
{
  for(int i=0;i<4;i++)
    if(a[i]==24) {f=1;break;}
  if(f==1)
  {
    for(int i=0;i<3;i++)
    {
      cout<<a1[i];
      if(fh[i]==1) cout<<"+"<<a2[i]<<"="<<a1[i]+a2[i]<<endl;
      if(fh[i]==2) cout<<"-"<<a2[i]<<"="<<a1[i]-a2[i]<<endl;
      if(fh[i]==3) cout<<"*"<<a2[i]<<"="<<a1[i]*a2[i]<<endl;
      if(fh[i]==4) cout<<"/"<<a2[i]<<"="<<a1[i]/a2[i]<<endl;
    }
    exit(0);
  }
}
void dfs(int t)//t指现在还剩几个数
{
  if(t==1) {check();return;}
  if(t>1)
    for(int i=0;i<4;i++)
      if(a[i]==24) return;
  for(int i=0;i<4;i++)
    for(int j=0;j<4;j++)
      if(vis[j]==0&&a[i]>=a[j]&&i!=j)//两数相同必须保证两数下标不同
      {
        a1[4-t]=a[i];
        a2[4-t]=a[j];//储存运算过程（下下行也是）
    a[i]=a[i]+a[j];
        vis[j]=1;
        fh[4-t]=1;
        if(a[i]>0&&vis[i]==0) dfs(t-1);
        vis[j]=0;
        a[i]-=a[j];//回溯（加）
        a1[4-t]=a[i];
        a2[4-t]=a[j];
        a[i]=a[i]-a[j];
        vis[j]=1;
        fh[4-t]=2;
        if(a[i]>0&&vis[i]==0) dfs(t-1);
        vis[j]=0;
        a[i]+=a[j];//减
        a1[4-t]=a[i];
        a2[4-t]=a[j];
        a[i]=a[i]*a[j];
        vis[j]=1;
        fh[4-t]=3;
        if(a[i]>0&&vis[i]==0) dfs(t-1);
        vis[j]=0;
        a[i]/=a[j];//乘
        if(a[i]%a[j]==0)
        {
          a1[4-t]=a[i];
          a2[4-t]=a[j];
          a[i]=a[i]/a[j];
          vis[j]=1;
          fh[4-t]=4;
          if(a[i]>0&&vis[i]==0) dfs(t-1);
          vis[j]=0;
          a[i]*=a[j];//除
        }
      }
}
int main()
{
  int i,j,k;
  for(i=0;i<4;i++)
    cin>>a[i];
  dfs(4);
  if(f==0) cout<<"No answer!"<<endl;
  return 0;
}
ps：打完题解时我突然发现我的AC程序输入1 1 1 24时会输No answer！，但题目限定了4个数是在9以内的自然数，于是我就没管了。
```