#### 前言

之前看已有的三篇题解有一个地方没有读懂，请教机房大佬之后弄懂了，算是给前面的大佬做注吧。

---

#### 正文

我们直接来到这个地方：

- 已经按照 $\rm p_i=i$ 将原序列换为一个 $\rm 01$ 序列；
- 已经按照由连续 $\rm 00$ 或连续 $\rm 11$ 部分分成若干份，使得每份由 $\rm 010101\dots$ 串构成。
- 这个子串需要满足 $\rm p_i∈[l,r]$ 和 最长下降子序列长度不超过 $\rm 2$。

而这个判定条件 **最长下降子序列长度不超过 $\rm 2$**，这里来仔细说说是为什么。

```cpp
我们令这里 A=5，B=3，C=1。这样好理解些。（假装我们现在只知道 5 > 3 > 1） 
假如原来的序列长这样： 5  ... 4 ... 3 ... 2 ... 1 ...
我们以 4 为肩膀，
把 5 换到 3 的右边：   3  ... 4 ... 5 ... 2 ... 1 ...
                       B  ......... A ......... C ...
（此时我们知道了 5 > 4 > 3 > 1） 
我们以 2 为肩膀，
把 5 换到 1 的右边：   3  ... 4 ... 1 ... 2 ... 5 ...
                       B  ......... C ......... A ...
假设 A 已经回到自己的位置上了。(放宽条件,但仍然可以证否)
我们现在的目标就是把 1 (C) 换到 3 (B) 的左边，就大功告成了。
此时我们发现中间的那个 4，大于 3。（前文说了 5 > 4 > 3 > 1） 
-------------------------------------------------------------------------------
                       3  ...*4 ...*1 ... 2 ... 5 ...
                       B  ......... C ......... A ...
只要我们有 4 > 3，1 (C) 就一定换不到 3 (B) 的左边。为什么？
因为：首先 1 (C) 就越不过 4，因为 1 想到 3 (B) 的左边必须先越过 4。（参见上面的位置关系） 
------------------------------------------------------------------------------- 
                       3  ...*4 ...*1 ... 2 ... 5 ...
                       B  ......... C ......... A ...
                       
                       3     4 <--- 1
                       
                       3     1 <--- 4？
为什么  1 (C) 就越不过 4 ？
因为：1 (C) 要是想越过 4，必须出现一个比 4 更大的 X，才能把 1 换过来。
                       3     X      4      1
                                    ^
                             1      4      X
                                    ^
-------------------------------------------------------------------------------
但是我们刚才 “以 4 为肩膀，把 5 换到 3 的右边”的操作使得 3 紧邻着 4 在 4 的左边，
4 的左边没有其他数。
                       3     X      4      1
                             ^
                            并不存在！
-------------------------------------------------------------------------------
而紧邻在 4 左边的这个 3，又恰好不能成为这个 X（必须满足比 4 更大），这个 X 要想出现，
只有一种办法，把 3 换到更左边的地方，让某个 X 过来。（? 满足的条件：X > ? > 3） 
            	X	    ?       3      4      1
                ^               ^
            	3	    ?       X      4      1
                ^               ^
-------------------------------------------------------------------------------
            	3	    ?       X      4      1
                                ^             ^
            	3	    ?       1      4      X
                                ^             ^
但是 1 和某个 X 换位置之后，1 还是在 3 的右边（3 刚才被移到左边去了）， 
好，我们现在要解决：以一个大于 3 的中间点 ?，把 1 移到 3 的左边。
参见刚才的问题：
“我们现在的目标就是把 1 (C) 换到 3 (B) 的左边，就大功告成了。”
“只要我们有 4 > 3，1 (C) 就一定换不到 3 (B) 的左边。为什么？”
如果能在上文中找到这两句话，相信你就明白了。
我们等于是把问题做回去了，由此，每次要让 1 越过 4，3 都要向左移，
然后产生新的 4，所以我们的 1 永远追不上 3，所以不可行。
证毕。
```

附注：如果字符有错位，可以将整段注解复制到 $\rm Dev-C++$ 中，亲测有效。

---

#### 后记

希望这篇题解能帮到和我一样遇到困惑的同学。