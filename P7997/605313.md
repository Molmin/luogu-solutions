### 简化题意

你有一个长为 $n$ 的数组 $a$，你有一个整数 $x$。每次你可以选择一个数 $a_i$，若数 $x\ge a_i$，则 $x$ 会变成 $x-a_i$，否则变成 $x+a_i$。

求在选恰好 $m$ 个数的情况下最终 $x$ 值的最大值。

### Solution

多组询问，询问之间互相独立，每次询问 $x$ 初值为 $0$。
记 $\max{a_i}=mx$

对于每次查询，若 $m\ge n$，则经验值最大应该是 $2mx-1$，所以实际上 $\bm {m\le 4\times 10^3}$

一个值 $x$ 通过增或减 $a_i$ 转化成 $y$，与 $y$ 和 $a_i$ 的大小关系有关。对于每一个点和 $x$ 和每一个值 $a_i$，所有的经验值作为点。通过设定值作为边来转化。建边方式如下：

若 $x\ge a_i$，建边 $x-a_i$

否则，建边 $a_i+x$

以节点 $0$，作为起点（这个人的初始值是 $0$），对 $0$ 与所有的经验值（即 $a_i$）连边 $a_i$。

因为对于所有的 $n$ 都有 $n\rightarrow n+2$，所以要分为奇数和偶数，对此从 $0$ 开始跑奇偶图最短路即可。