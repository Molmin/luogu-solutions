首先，我的想法是用 $n-2$ 推出 $n$：

1. 把最后三个数做一次操作，即使得 $a_n=a_{n-1}$。

2. 把前面 $n-2$ 个数变成全 $0$。

3. 把最后三个数再做一次操作。

代码可以在[这里](https://www.luogu.com.cn/paste/ukm5fvrl)查看。

你会发现，当 $\sum\limits_{i=1}^{n}a_i$ 为奇数时一定无解，在我的代码里显然也会被判断为无解。

当 $n$ 为奇数时这样做会使得奇偶性不变，循环到 $n=3$ 时一定也是正确的，所以这需要考虑 $n$ 为偶数的情况。

你会发现，我这个代码会被 `1 0 0 1 0 0` 这样的数据 hack 掉，所以我们最好先打表。

你会发现，当 $a_1=0$ 或 $a_n=0$ 时可以转化为 $n$ 为奇数的情况，一定正确。

当 $a_1=a_n=1$ 时，如果 $a_{2k}=a_{2k+1}(\forall k)$ 的话，一定不行，因为会在这里一直转圈。

否则，一定可以，可以一个一个破，可以看看我的[代码](https://www.luogu.com.cn/paste/5yvq71lh)。