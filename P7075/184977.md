写了个很丑的代码。因为是个大模拟（没写二分）讲一下具体实现思路。因为是考场代码所以丑的 1p，函数也没装思路也没写，所以代码用精神领略即可。

这个东西有点长。考虑一下怎么把它搞得好看一点。

- 公元前的闰年与公元不太一样，拆开。注意没有公元 $0$ 年；   
- $1582.10.5 \sim 1582.10.14$ 不存在，左右拆开；   
- 观看数据范围，年份可能很大，需要一个优秀的算法去算年份。这里拆成 $400$ 剩下的可以暴力。比较好处理的是将 $1582.10.15 \sim 1600.12.31$ 拆开，剩下的处理。

通过计算器可以得出：

- $0 \leq r \leq 1721423$，此时是公元前；   
- $1721424 \leq r \leq 2299160$，此时是公元，但是是在 $1582.10.4$ 之前；   
- $2299161 \leq r \leq 2299238$，此时在 $1582.10.15 \sim 1600.12.31$ 范围内；   
- 剩下的暴力算出 $400$ 年为 $146097$ 天。随便算算就能算出来。

注意一下运算符优先级，推荐将日期的多少天后写成一个函数，比较好看。不至于每个情况都要写一遍，虽然也不难打。

几个坑点：

- 待会儿附个数据看你的边界；    
- 负数取模答案是负数，所以 `(-1%4==1)==false`；   
- 闰年判断注意二路运算符优先级；   
- 修改月和日的时候不要混淆了；   
- 注意开 `long long`。

贴个[代码](https://paste.ubuntu.com/p/mDBckGfYhq/)。因为暴力跑了四百年没有打表优化，所以会很慢，时间复杂度是 $O(Qc)$，其中 $c$ 是一个常数，最坏等于 $400+12+31=443$。

数据点：[julian4.in](https://paste.ubuntu.com/p/8RWQY9rRv6/) & [julian4.ans](https://paste.ubuntu.com/p/FsbbynfTj5/)。这个数据点涵盖了以下坑点：

- 公元前闰年；   
- 不存在的公元 $0$ 年；   
- 适用儒略历的公元闰年（$4,100,400$）；   
- 不存在的 $1582.10.5 \sim 1582.10.14$；   
- $1600,1601$ 与 $1583$ 的边界（这份代码的需要的调试点）；   
- 使用格里高利历的公元闰年（$4,100,400$）；   
- 答案比较大的点。

希望能有所帮助。

哇我的数据还没随机数据强，权当玩玩就好了。