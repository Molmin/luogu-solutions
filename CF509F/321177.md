这是一个和树有点关系的的区间 dp。

读题可知 $b$ 数组中存储的是这棵树的 dfs 序，只不过在遍历时**父亲相同的子树优先遍历编号小的**。

试想一个区间 $[l,r]$ 中怎样排布对整体是没有影响的，内部序不变外部自然也不变，于是可以化成小区间的子问题。

考虑设置 $dp(l,r)$ 表示这个区间的方案数，不难发现，我们只需要找到在 $b$ 中的“断点”，即从哪个点开始另成一颗子树（钦定 $l$ 一定为大区间根），再根据上面加粗的限制，转移方程：
$$dp(l,r)=\sum_{k=l+1}^r dp(l+1,k)\times dp(k,r)\ [b(l+1)<b(k+1)]$$

当然，$dp(l,l)=1$。

除此之外，可能需要理解一下的便是这个 $k$ 的定义了，其实是第一棵子树的最后一个节点编号，而且我们要区分两个定义——“区间”和“子树”。

将**子树** $[l,r]$ 划分成除根节点以外的 $[l+1,k]$ 与 $[k+1,r]$ 两个**区间**。如果两区间都是**森林**，那么只能保证各自区间内根结点标号满足上面加粗的条件，而整体上是未必满足的。因此，左区间直接作为**子树**，方案数是 $dp(l+1,k)$，而右区间是**森林**，有一个虚拟的根 $k$，方案数是 $dp(k,r)$，这样一来不会有重复，也能保证优先遍历标号小的根。