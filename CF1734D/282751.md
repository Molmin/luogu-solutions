首先可以枚举最后从哪个方向出来，那么我们这个方向是一定每一步都要走的。

容易想到一个贪心策略，我们每往目标方向走一步，就走到另一个方向能到达的位置中，能使得自己增量最大位置。

注意我们一定要让增量为正，所以把另一个方向上和大于 $0$ 的缩成一段，记录要走完这一段至少需要多少健康值，然后类似双指针，做两遍即可。

代码见 CF 提交。