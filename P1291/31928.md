# 知识点:数学期望

这是一道非常基础的数学期望的题目,我们考虑用最简单的方式去理解

定义状态$f[i]$表示总共有$n$名球星,买到$i$名的期望次数

考虑$f[i]$到$f[i+1]$的转移

(下面我们利用图来理解)

![Ksctaj.png](https://s2.ax1x.com/2019/10/27/Ksctaj.png)

$f[i],f[i+1]$定义同上,$x$表示从状态$f[i]$转移到$f[i+1]$的期望次数

即$f[i+1]=f[i]+x$

然后我们将$f[i]$的转移具体到操作上

![Ksg5hn.png](https://s2.ax1x.com/2019/10/27/Ksg5hn.png)

从$f[i]$状态进行一次转移,也就是新买一瓶饮料,可能产生两种情况

1. 获得了已经有的球星 (从$f[i]$转移到$f[i]$,红色路径)

2. 获得了没有的球星 (从$f[i]$转移到$f[i+1]$,黑色路径)

(至于最上方为什么有一条红色路径,我们接下来会讲,现在请忽略)

两种情况的概率也分别写在上面

接下来我们要计算$x$

第一种方法,按照期望的定义 $x= 1* \frac{n-i}{n} + 1* \frac{i}{n} * \frac{n-i}{n} + ... + 1 * \frac{i}{n}^\infty*\frac{n-i}{n}$

即$x=\frac{n-i}{n} *\sum_{k=0}^\infty  \frac{i}{n}^k$

这个大家随便求一下等比数列即可

第二种方法,把$x$同时当做未知数和已知数

我们不再考虑$f[i]$具体是如何转移到$f[i+1]$的,我们只考虑两种情况下,$f[i]$怎么转移到$f[i+1]$

1. 获得了已有的球星,转移次数为$1+x$,概率$P_1=\frac{i}{n}$

2. 获得了没有的球星,转移次数为$1$,概率$P_2=\frac{n-i}{n}$

$x=P_1*(1+x)+P_2 * 1=\frac{i}{n} * (1+x) + \frac{n-i}{n} $

$x= \frac{n}{n-i} $

解释一下情况$1$,它表示先$f[i]$通过$1$次转移到$f[i]$,再通过$x$次转移到$f[i+1]$

这样我们同样解决了问题 

通项公式$f[i+1] = f[i] + \frac{n}{n-i} $

输出自己注意即可

