# [[更好的食用体验]](https://www.luogu.com.cn/blog/LiuHao2019/p7083-ti-xie)

简略版（写代码的思路）：

```
if(新建造的能量收集器占用空间为1)｛
	if(没有空间了){
		if(占用空间为2的能量收集器数量 > 0) 拆占用空间2，装占用空间为1;
		else 不建了;
	}
  	else 直接建;
｝
else {
	if(没有空间) 不建了;
  	else 直接建;
}
```

**这题有两个坑点：**

坑点①:不告诉你有多少回合，所以**字符数组要开大一点**

坑点②:答案大小，一定要开**long long**![](https://cdn.luogu.com.cn/upload/image_hosting/juk5l39v.png)

---

算法:**贪心+模拟**，就这么简单

---

首先，如果当前还有足够的空间可以建造本回合的能量收集器，一定得建。但是这是为什么呢？~~这不是显而易见的吗？~~ 如果我们建造，在未来也许(因为空间可能一直足够)会有空间不足的情况。但是我们可以拆了多余的啊！~~真·过河拆桥~~ 因为此时它在为你生成能量，而在未来会被拆，没有影响。但如果你不装它，你就损失了很多能量 ~~由此可见:时间就是金钱~~

---

如果空间不够，怎么办呢？

**拆**啊

如果你要新建占用空间为1的能量收集器，那么只要有占用空间为2的能量收集器，就放心地拆。因为你可以获得同样的能量收益，却腾出了1个空间。

但是如果你要新建占用空间为2的能量收集器，就算了吧。因为如果你拆占用空间为2的能量收集器，是没有用的~~当然如果你愿意就可以拆~~；如果你要拆占用空间为1的能量收集器，更没有用了:你获得了同样的能量，却少了1个剩余空间。

---

[[AC记录]](https://www.luogu.com.cn/record/49350147)

---

$$[AC代码]$$


```
#include<stdio.h>
#include<string.h>
using namespace std;
long long ans;   //答案answer
int now1,now2;   //now1表示建造了多少个占用空间为1的能量收集器，now2表示建造了多少个占用空间为2的能量收集器
char tmp[100000000];//输入，要开大一点
int n;//空间
int main(){
	scanf("%d%s",&n,tmp);//输入
	for(int i = 0;i < strlen(tmp);i ++){
		if(tmp[i] == '1'){//如果占用空间为1
			if(now1+now2*2+1 <= n) now1 ++;//如果有空间，就建造，等同if(n-now1-now2*2 >= 1) now1 ++;
			else if(now2 > 0) now2 --,now1 ++;//如果空间不够并且有占用空间为2的，就拆
		}
		if(tmp[i] == '2' && now1+now2*2+2 <= n) now2 ++;//如果有空间，就建造，等同if(tmp[i] == '2' && n-now1-now2*2 >= 2){now1 ++;now2 --;}
		ans += now1+now2;//能量结算
	}
	printf("%lld\n",ans);//输出
}
```

>kkksc03提醒您，算法千万条，诚信第一条，直接抄题解，棕名两行泪