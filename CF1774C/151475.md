对于一个长度为 $n-1$ 的 $01$ 串 $s$，令 $l$ 表示 $s$ 在末尾处的极长同色连续段长度，可以说明有 $l$ 个人是无法获胜的，另外 $n-l$ 个人可以获胜。

接下来证明一下。首先 $l=n-1$ 是平凡的。考虑 $l\neq n-1$ 的情况。不妨设 $s_{n-1}=1$，那么 $s_{n-1-l}=0$。考虑：

1. 玩家 $1$ 到 $l$ 都无法获胜。由于最后 $l$ 轮的环境都是 $1$，在进入到最后 $l$ 轮时一定有一个人的编号大于 $l$，最后 $l$ 轮胜者就是编号最大的人，因此不可能是前 $l$ 个人。

2. 玩家 $l+1$ 到 $n$ 都可以获胜。考虑构造。假设要让玩家 $i$ 获胜，考虑在前 $n-l-2$ 轮中让 $[l+1,n]$ 中除了 $i$ 以外的玩家相互残杀，最后肯定只剩一个人，设他是 $x$。第 $n-l-1$ 轮就让 $1$ 去打 $x$，肯定 $1$ 赢，接下来只剩 $[1,l]$ 和 $i$ 了，那么随便怎么都是 $i$ 赢了。

把结论代进去，维护一下第 $i$ 个点结尾的最长同色连续段，这题就做完了。代码想必很好写。

------------

闲话

1. 我给这道题的时候难度给的是 C，结果有一天被 anton 改到 D 去了。最后验题的时候有的验题人过了 D 过不了 C，于是又把 C,D swap 回来了。

2. 比赛前一天我去打 Edu，一看 [D](https://codeforces.com/contest/1767/problem/D)：我去，怎么和明天的 C 这么像啊。结果是我做这个 D 还做了 17min，做法不大一样，松了一口气。赛时很多人的提问都是把这道题理解成了那个 Edu D，然后看不懂样例解释。