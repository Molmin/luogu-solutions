# 题目

[传送门](https://www.luogu.com.cn/problem/CF632F)

# 题解

首先，这道题的洛谷题目翻译有点问题，题目意思是这样的：

>满足下列条件的矩阵称为魔法矩阵：
>
>1. $a[i][j]=a[j][i]$；
>2. $a[i][i]=0$；
>3. $a[i][j]\le \min\{\max(a[i][k],a[k][j])\}$
>
>现给你一个 $n\times n$ 的矩阵，试判断它是不是魔法矩阵，若是，输出 `MAGIC`，否则输出 `NOT MAGIC`

对于要求 $1,2$，我们可以先用 $n^2$ 直接判断，唯一的难点在于条件三的判断，如果直接做，我们需要 $\mathcal O(n^3)$ 的复杂度，但是只比时限超了一点点，我们能否考虑用一些卡常技巧卡过去？

考虑将一个值 $k$ 作为分界点，小于其的看做 $1$，大于的看做 $0$，对于某一个 $(x,y)$ 如果其位置上的值为 $k$，那么，将其所在排、列的二进制串并起来，如果最后得到 $0$，那么合法，否则不合法

为什么这样做是合法的？首先，条件三最里面的 $\max(a[i][k],a[k][j])$ 是一对一对来的，而按位并也是按位来的，而如果这一位为 $0$ 则说明对应的俩数中大的一个比 $k$ 大，而我们要求所有位置中都要比 $k$ 大，所以最后的结果也必须为 $0$

二进制则可以使用 `bitset` 进行优化，加一个 $\frac{1}{32}$ 的常数，然后就可以水过去了

# 代码

```cpp
https://www.cnblogs.com/Arextre/p/13343215.html
```

