博弈论动态规划题。

容易想到令 $f[i][j]$ 为 $x = i$，$y = j$ 时的最优方案。

但是 $N\le 3\times 10^4$，会超时超空。

但是注意操作 $2$ 和操作 $3$，容易发现，$x$ 只可能转移到 $2\times x$ 和 $3\times x$。

那么记录一个状态 $f[i][j][k]$，代表 $x = 2^i\times 3^j$，$y = k$ 的时的最优方案。

经过计算，$k\le 3\times 10^4$，$i\le 16$，$j\le 10$ 的状态即可。时间复杂度为 $O(i\times j\times k)\approx 5\times 10^6$，可以通过这个题。

注意是交互题。