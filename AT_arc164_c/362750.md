有趣题。

考虑 Bob 所选的牌在初始牌中的位置。假设他在原来红色数字中选了 $p$ 个，在蓝色数字中选了 $q$ 个。当 Alice 翻转一次后，$p$ 会变成 $p-1$ 或 $p+1$。要让方案成立，变化过后的 $p$ 应该 $>0$。而取走一个之后 $p$ 相较 Alice 操作前 要么不变要么 $-2$，这引导我们往奇偶性思考。

当 Bob 初始选了偶数张牌，则 Alice 翻转后为奇数，一定存在一张牌能选。而选走这张牌后能选的又变成了偶数，回到初始情况。

当 Bob 初始选了奇数张牌，Alice 可以操作使得其方案不成立。

所以答案即为在 $A$ 中选偶数个，剩余的选 $B$ 的最大值。

dp。设 $f_{i,0/1}$ 表示 $1\sim i$ 在 $A$ 中选了偶数/奇数个的最大值。有

$$
\begin{aligned}
&f_{i,0}=\max(f_{i-1,0}+B_i,f_{i-1,1}+A_i) \\
&f_{i,1}=\max(f_{i-1,0}+A_i,f_{i-1,1}+B_i)
\end{aligned}
$$

时间复杂度 $\Theta(n)$。

[Code](https://www.luogu.com.cn/paste/2sxsywlo)。