\*3100 的原因是套了个计算几何的皮？

先忽略半圆。

考虑两个卫星交公共部分，其必定也是一个卫星的形式。

考虑一个卫星没有独享的区域，当且仅当其被另一个卫星“包含”。不可能存在两个卫星各消耗其一部分独享区域的情况。

容易想到，卫星和两个圆顶点连线的角度恰好构成一个区间。题目即要求支持动态插删区间，以及判定某个点是否被至少一个区间包含。

咋一看三维数点，感觉是 $O(n\log^2 n)$ 的。实际上，题目要求的并不是计数而是判断存在性，所以可以优化掉一维。具体地，先离散化，对于所有左端点维护一颗线段树，保存最大的可行右端点。查询直接前缀询问即可。$O(n\log n)$。

最后判断一下交点是否在圆内，可以直接向量点积。可能会被卡精度，所以并不建议用 `atan2`。