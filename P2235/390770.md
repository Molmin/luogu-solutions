结论：$f(n)$ 为 $n$ 的二进制翻转。

证明：

发现题面给出的后两个式子都有 $f(2n+1)-f(n)$ 这个部分，那么我们不妨设这个为 $g(n)$。考虑算一下 $g(n)$ 的值。

若 $n$ 为非 $1$ 奇数，不妨设 $n=2k+1$，有：

$$
\begin{aligned}
g(n)&=f(2n+1)-f(n)\\&=f(4k+3)-f(2k+1)\\&=3f(2k+1)-2f(k)-f(2k+1)\\&=2[f(2k+1)-f(k)]\\&=2g(k)
\end{aligned}
$$

若 $n$ 为偶数，不妨设 $n=2k$，有：

$$
\begin{aligned}
g(n)&=f(2n+1)-f(n)\\&=f(4k+1)-f(2k)\\&=2f(2k+1)-f(k)-f(k)\\&=2[f(2k+1)-f(k)]\\&=2g(k)
\end{aligned}
$$

又易得 $g(1)=2$。

综上可得，若 $n$ 的二进制表示有 $p$ 位，则 $g(n)=2^p$。

再考虑 $f(4n),f(4n+1),f(4n+2),f(4n+3)$ 的值。

$$
f(4n)=f(n)
$$

$$
f(4n+1)=f(n)+2g(n)
$$

$$
f(4n+2)=f(2n+1)=f(n)+g(n)
$$

$$
f(4n+3)=f(n)+3g(n)
$$

可以发现，$f(n)$ 转移到 $f(4n+k),k\in\{0,1,2,3\}$，就相当于把 $k$ 的二进制表示翻转，然后把 $f(n)$ 的二进制表示接到后面。

又 $f(1),f(2),f(3)$ 均满足结论，所以该结论成立。

------------

然后就比较简单了，高精度预处理然后数位 dp 一下即可。