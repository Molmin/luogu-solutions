**题意** 给定正整数 $n$。现在总共有 $n$ 种颜色的卡片，颜色用 $1\sim n$ 的正整数标号，每种颜色的卡片各有 $n$ 张。将这些卡片分给 $n$ 个人，每个人各拿了 $n$ 张卡片。接下来你需要执行若干次操作，每次操作都形如：

- 选择两个人，并交换他们手中的一张卡片。

在这个过程中，你需要保证：每张卡片至多被交换一次。而你的目标则是：每个人手中都有全部颜色的卡片。

给定初始时所有人手中的卡片持有情况，你需要构造一种符合上述要求的交换方法，或者指出这是不可能做到的。

保证 $n\leq 200$。

（剧透警告）

（剧透警告）

（剧透警告）

（剧透警告）

（剧透警告）

（剧透警告）

----------------

我们把 $n$ 个人持有的 $n$ 张卡排成一个 $n\times n$ 的方阵，第 $i$ 个人的所有卡片都在第 $i$ 行。考虑下面的操作：

- 对所有 $1\leq i < j\leq n$，交换位于 $(i,j)$ 和 $(j,i)$ 的卡片。

这样，最后第 $i$ 个人拿到的卡片就是原来第 $i$ 列的所有卡片。

考虑合理地安排所有卡片，使得每一列的卡片都是 $1\sim n$ 的排列。我们来一列一列安排卡片。每次相当于：

- 从每行剩下的卡片中各抽一张出来，构成 $1\sim n$ 的排列。

我们来证明这总是做得到的。假设现在每行还剩 $k$ 张卡片，总共还剩 $kn$ 张卡片，可知现在 $1,...,n$ 剩下的卡片数量都为 $k$。我们需要在行和颜色之间做一个二分图完备匹配。由 Hall 定理：

**定理** 两部点数相等的二分图有完备匹配，当且仅当对左部的任意 $x$ 个点，右部中与这些点中至少一点有连边的点的数量 $\geq x$。

对于 $c$ 种颜色，总共还剩下 $ck$ 张这些颜色的卡片，则由抽屉原理知有至少 $c$ 行有至少一张这些卡片。这就完成了证明。

-------

求解二分图最大匹配可以采用匈牙利或最大流算法。由于总共需要求解 $n$ 次，时间复杂度为 $O(n^4)$ 或 $O(n^{3.5})$。