**题意**：

给定一棵大小为 $n$ 的树，每次操作会删去所有的叶子结点，问 $k$ 次操作后剩下的树的大小。

$\sum n\leq 4\cdot 10^5$。

**做法**:

考虑转化，记录所有点的度数，那么操作就变成：将全局所有权值为 $1$ 的点删去，并把和这些点有边相连的点权值 $-1$。

我们使用线段树维护区间最小值，如果区间最小值为 $1$ 我们就递归进入该节点，递归到叶子的话就把该点权值设为无穷大，然后暴力把和这个点在原树上有连边的点权值 $-1$ 即可，也就是单点修改。

线段树上所有叶子结点只会被访问一次，那么总的时间复杂度为 $O(n\log n)$。

注意特判只剩下一个点的情况。

- [代码](https://www.luogu.com.cn/paste/seo9aztn)。

