# P6857 题解
## 题意
一个 $n$ 个节点的完全图，选取最多的节点使得这些节点之间可以互相连通且不能再到达其他的节点，求节点数。

## 解题
首先，看一下数据范围 $n \leq 10^9,T \leq 10^5$ ，这一看就只能是 $\Theta(1)$ 。

于是我们可以打表一下看看规律：

| $n=2$ | $n=3$ | $n=4$ | $n=5$ | $n=6$ | $n=7$ |
| :--: | :--: | :--: | :--: | :--: | :--: |
| $1$ | $3$ | $5$ | $10$ | $13$ | $21$ |

然后我们就可以发现：  
- 当 $n$ 为奇数时，答案为 $\frac{n(n-1)}{2}$
- 当 $n$ 为偶数时，答案为 $\frac{(n-1)(n-2)}{2}+\frac{n-1}{2}+1$

写完代码交上去，发现 $\texttt{\colorbox{#52C41A}{\color{white}AC}}$ 了，那么怎么证明呢？

首先，我们先画一下 $n=5$ 和 $n=6$ 时的完全图：
1. $n=5$ 时，完全图是  
![](https://cdn.luogu.com.cn/upload/image_hosting/ctvv8vsk.png)  
我们试着走一下： $1-2-5-3-4-2-3-1-5-4$ ，正好把 $10$ 条边走完。

2. $n=6$ 时，完全图是  
![](https://cdn.luogu.com.cn/upload/image_hosting/6m5347ko.png)  
继续试着走一下： $1-2-5-3-4-6-1-3-6-2-4-5-1-4$ ，没有其他的了，一共 $13$ 条边，并没有走满。

那么，为什么 $n$ 为奇数的时候就可以走满， $n$ 为偶数就不行呢？

实际上是因为 $n$ 为奇数的时候，每个点的出度都是偶数，一定可以一笔画，所以直接输出边数即可；但是 $n$ 为偶数的时候，每个点的出度都是奇数了，不能一笔画，顶多再撑个一圈，所以要在之前的结果上加上 $\frac{n-1}{2}+1$ ，这也是我们打表发现的式子的出处。

以上就是证明过程。

## Code
```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
ll T, n;
int main() {
	cin >> T;
	while (T --) {
		cin >> n;
		if (n & 1) cout << n * (n - 1) / 2;
		else cout << (n - 1) * (n - 2) / 2 + ((n - 1) / 2 + 1);
	}
	return 0;
}
```

## 后记
考察思维的题，~~就是我不会的题~~。

最后，祝洛谷月赛
## 越办越好
完结撒花~顺便求赞![](https://cdn.jsdelivr.net/gh/xaoxuu/volantis@1.0/img/qq/%E5%8F%AF%E6%80%9C.gif)