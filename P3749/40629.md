### 题意

>给定每个寿司类型$a_i$,选$[l,r]$号的收益(每个子区间$[x,y]|x\geqslant l\vee r\leqslant r$会因为父区间被选取而会且仅会得到一次收益),设吃了$c_x$个种类的$x$类型寿司，则会付出$\displaystyle \sum_{x}mx^2+c_xx(m\in\{0,1\})$代价

### Solution

首先会想到转最大收益为最小割，

但是不要因为区间类收益/次数唯一就当成关键点集收益而使用集合划分模型，因为那样边会炸(而且那样第二问转不了)

一次收益就只对区间建一个虚点与$T$连，取完子区间可以当成一种迭代关系选$[l,r]$就必须选$[l+1,r]$和$[l,r-1]$

因此使用最大权闭合子图

最后代价可以对每一个类型建虚点与$T$连费用为$mx^2$(只要没割就至少存在一个),$cx$直接分配到每个数自己选取上,就用$[i,i]$向独立的表示$i$的虚点连$a_i$即可.因此我们发现实际上就算费用形如$ax^2+bx$也不一定要用流量分配模型转一次函数的线性和