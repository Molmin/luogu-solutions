做法比较麻烦，口述一下。

你对任何一个 `BABA..BAB` 串都可以根据 KMP 得到 `BA`，`BABA..BAB` 模 `BA` 余下的是 `B`，从而 `A`。（`A`, `B`都可以为空串）

首先判一下得到的 `A`、`B` 最基本的合不合法。接下来考虑：

设 $P=$`BABAB..AB` 的长度为 $num$（注意不是 $i$），这个是 $|A|,|B|$ 都最短的时候，那么考虑，能否变成满足 $k$ 的形式，那就是 $(2u+1)k+(2v+1)(k+1)=num$（$2u+1,2v+1$ 是 $A',B'$ 包含 $P$ 中的几个字符，显然必须都是奇数），解这个不定方程即可。

易错点：当 $A,B$ 中有一为空时，假如当前方案方程无解，还是可以有 alternative 的，就是交换 $A,B$ 然后 $num\gets num-2$ 这样。

[submission](https://codeforces.ml/contest/526/submission/152552204)