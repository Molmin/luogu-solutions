显然的，边权是必然需要知道的，每次做形如 `0000...0100...000` 的询问可以在 $m$ 次询问内得到所有的边权。

模拟最小生成树的加边过程，从小到大加边，记第 $i$ 次询问的结果为 $a_i$,边权从小到大排序的集合为 $w_i$,则如果 $a_i-a_{i-1}=w_i$,那么 $w_i$ 就会是最后最小生成森林的其中一条边。

考虑证明，如果 $a_i-a_{i-1}=w_i$,就说明 $w_i$ 连接的两个顶点中不存在比 $w_i$ 还小的边，所以 $w_i$ 会在最小生成树中。