只要有信念，就一定能成功！

在考试结束前 5 分钟发现的性质，虽然可惜，但不正说明我的思维能力和代码能力有待提升吗？

### [题意](https://atcoder.jp/contests/arc150/tasks/arc150_d)
给定一棵 $n$ 个节点的有根树，一开始所有的点都是白的，每次会等概率选择一个除了“包含根的最大连通黑点”以外的点（可以是黑点）涂黑，求到达无法操作地步的期望步数，$n\le 10^5$。

### 赛时思路
对于链上的情况写一份暴力，[代码](https://www.luogu.com.cn/paste/pruxyy3f)。

容易发现前几个数分别是 $1,5/2,13/3,77/12,87/10,223/20$。

对数字稍微有点敏感的话就可以发现链上的答案就是调和数的前缀和：
$$\sum_{i=1}^n\sum_{j=1}^i\frac1j=(n+1)(H_{n+1}-1)$$

然后如果你再敏感一点容易发现：
$$5/2+13/3-1=35/6$$
 而这恰好是样例 $1$ 的答案！所以我们就有了一个线性的乱搞，但是它能够通过此题，[代码](https://www.luogu.com.cn/paste/ub3btd3q)。
 
### 分析
由于期望具有线性性，我们考虑每个节点 $u$ 期望被选了多少次，这样就可以完全忽略不在链上的贡献。

那么现在问题变成了链上的情况，最后一个点期望被选了多少次。

然后我们发现这个时候我们可以看作在涂满之前随便选择，而不必考虑链上的最长涂黑前缀是多少（因为在涂满之前，最后一个点总是坏的）。
- 选择一个非链上的最长涂黑前缀部分涂黑。
- 考虑你手动执行这个操作 。
- 但是操作不够精确，导致你每次有可能涂黑一个链上的最长涂黑前缀。
- 于是你必须每次手动撤回它，当然这不会影响期望次数。
- 然后你发现，你涂黑一个链上的最长涂黑前缀，撤回不撤回没什么两样，也不会对期望次数产生影响，于是你干脆不撤回，但是也不会影响期望次数。

那么在涂满之前随便选择的期望涂满步数是多少呢？这是[经典问题](https://www.luogu.com.cn/problem/SP1026)，答案是：
$$n\sum_{i=1}^n1/i=nH_n$$

但是在这个模型，每个点是等效的，所以我们最终得到了这个点被涂黑的期望次数：$H_n$。