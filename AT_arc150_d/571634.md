### [arc150D](https://atcoder.jp/contests/arc150/tasks/arc150_d)

设 $E(X_i)$ 为 $i$ 点期望被选中的次数，那么 $ans=\sum_{i=1}^nE(X_i)$。

设 $i$ 点的深度为 $d_i$。

如果一次操作选中了除 $1$ 到 $i$ 路径以外的的点，那么对 $i$ 没有影响，所以只需要考虑选 $1$ 到 $i$ 路径上的点的情况。

允许选中好点，但不算选中好点的贡献，这和原问题是等价的。

所以问题可以转化为，$d_i$ 个点，每次等概率抽取一个点，抽到第 $d_i$ 个点时贡献加 $1$，一直抽直到所有点都被抽到过。

假设已经被抽到过的点有 $k$ 个，那么再抽一次抽到未被抽到的点的概率为 $\frac{d_i-k}{d_i}$，期望 $\frac{d_i}{d_i-k}$ 抽到下一个未被抽到的点（做某件事情成功的概率为 $p$，期望做 $\frac{1}{p}$ 次成功）。

所以把所有点都抽到的期望次数为 $\sum_{k=0}^{d_i-1}\frac{d_i}{d_i-k}=d_i\sum_{k=1}^{d_i}\frac{1}{k}$，每次抽到第 $d_i$ 个点的概率都是 $\frac{1}{d_i}$，所以第 $d_i$ 个点期望被抽到 $\sum_{k=1}^{d_i}\frac{1}{k}$。

所以 $ans=\sum_{i=1}^n\sum_{j=1}^{d_i}\frac{1}{j}$。