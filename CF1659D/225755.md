由于题目保证有解，我们可以先算出 $sum=\sum_{i=1}^nc_i$，因为我们做了 $n$ 次操作，原序列中的每个 $1$ 都贡献了 $n$ 次，于是 $1$ 的个数就是 $\frac{sum}{n}$。

然后我们从右往左构造，假设现在构造到第 $i$ 个位置，如果 $c_i=i$ 说明这个位置肯定放了一个 $1$，否则一定只能放 $0$。

考虑怎么把这个做法扩展到第 $i-1$ 的位置。因为到 $i$ 的最后一次操作肯定是前面所有的 $1$ 都在最后了（设 $1$ 有 $k$ 个），那我们直接把下标在 $[i-k+1,i]$ 的 $c_i$ 都减去 $1$，这个可以用树状数组做，于是问题就成功转化为 $i-1$ 的子问题了。

时间复杂度为 $O(n\log n)$。[代码](https://www.luogu.com.cn/paste/f1uvpc48)