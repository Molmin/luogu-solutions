# 题目分析
这道题要求的 $n$ 是 $10^6$， 但是只有 $2023$ 次询问，所以随机取最大值是不可取的。  
这时需要探讨别的性质。    
题目中是一个环，而环是首尾相连的，所以如果分别旋转了 $a$ 和 $b$ 次 $(a<b)$，那么 $n \mid b - a$。   
所以说首先需要找到两个相同的数。   
那么此题询问次数为 $2023$，可以通过以下方法找到两个相同的数。    
首先记录连续 $1000$ 个数字，然后每次指针跳动 $1000$ 格，随后绕环一圈就能找到两个相同的数字。    
这样最坏情况下 $2000$ 次就能找到两个相同的数字。   
在 $n \ge 1000$ 时，是绕环一圈，$n$ 直接为 $b - a$。
在 $n < 1000$ 时，说明绕了不止一圈，不能直接确定答案，所以在前面记录连续 $1000$ 个数字时判断是否有重复的数即可，然后取所有数的最大值。
# 代码
```cpp
void solve() {
    int N = 1000, V = 1000005;
    vector<int> a(N), b(V);
    cin >> a[0];
    b[a[0]] = 1;
    int mx = 0;
    FOR(i, 1, N - 1) {
        cout << "+ 1" << endl << flush;
        cin >> a[i];
        chmax(mx, a[i]);
        if(b[a[i]]) { // n小于1000
            cout << "! " << mx << endl << flush;
            return;
        }
        b[a[i]] = i + 1;
    }
    int cnt = 1, pos;
    FOR(i, 1, N) { // 绕环
        cout << "+ 1000" << endl << flush;
        int x;
        cin >> x;
        pos = x;
        if(b[x]) break;
        cnt++;
    }
    cout << "! " << cnt * 1000 + N - b[pos] << endl << flush;
}
```