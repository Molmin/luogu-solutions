将问题抽象成从网格图，每次向右或向上，从 $(0,0) \to (n,m)$ 的路径上选出一些点构成点集，问所有本质不同的点集大小和。

假设我们枚举了点集，但是可以形成这个点集的路径太多，我们得通过一种方法让它在所有的路径中只有一种合法供我们计算。在这里我们强制两个点间采用先向上再向右的方式，这样两个点间的方案唯一，进而一个点集只对应一条路径。

那么会形成很多个拐点，我们枚举先右后上的拐点个数（拐点可以是先上后右，也可以是先右后上，这个不重要），记其为 $i$。那么拐点个数为 $i$ 的方案数为 $\dbinom{n}{i}\dbinom{m}{i}$。

注意到我们忽视了路径上的除了拐点和起点终点的所有点，这些点加入仍然对应同一条路径，因此我们需要计算。那么现在有 $s=n+m-i-1$ 个点可以任取，总方案为 $\displaystyle \sum_{i=0}^s \dbinom{s}{i} = 2^s$ 个，拐点上的贡献为 $\displaystyle \sum_{i=0}^s \dbinom{s}{i}i$。这个贡献的处理方式是，你发现 $\displaystyle \sum_{i=0}^s \dbinom{s}{i}i = \displaystyle \sum_{i=0}^s \dbinom{s}{s-i}i$，两者相加就是 $\displaystyle s\sum_{i=0}^s \dbinom{s}{i} = s2^s$，那么答案就是 $s2^{s-1}$。

注意终点和起点以及枚举的拐点个数（即 $i+2$）需要被计算 $2^s$ 次。

[赛时评测记录](https://codeforces.com/contest/1747/submission/179253920)。