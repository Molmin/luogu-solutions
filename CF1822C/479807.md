# 第一部分：分析推导

### 题目大意

肉桂卷是一种美味的食物。在此题中，每个肉桂卷是方形的，由被巧克力分隔的两个螺旋形的面团组成。大小为 $4$、$5$、$6$ 的肉桂卷长这样：

![大小为 4、5、6 的肉桂卷（依次从左到右）](https://cdn.luogu.com.cn/upload/image_hosting/496zj1rs.png)

现在给定肉桂卷的大小，求该大小的肉桂卷中巧克力层的长度。

### 题意分析

从样例图中我们能很明显地看到，巧克力层可以分为两个部分：

![肉桂卷中的巧克力可以分为两个部分](https://cdn.luogu.com.cn/upload/image_hosting/4f6jrlvg.png)

红色部分是包裹在肉桂卷周围的巧克力，黄色部分则是在内部，分隔两块面团的巧克力。只要我们把这两部分的长度用肉桂卷的大小 $n$ 表示出来，再加在一起，就能够在 $O(1)$ 的时间内算出答案。

### 公式推导

我们先来看红色部分。

很显然，红色部分组成了一个边长为 $n$ 的正方形，根据正方形的周长公式，我们可以很轻松地得到：

$C_{n,red}\:=\:4\:\times\:n$。
 
---

然后我们来看黄色部分。

不知道你们有没有发现，大小为 $n$ 的肉桂卷的黄色部分实际上包含了大小为 $n-1$ 的肉桂卷的黄色部分。

![黄色部分再分解](https://cdn.luogu.com.cn/upload/image_hosting/4j34v4se.png)

现在看出来了吗？

大小为 $n$ 的肉桂卷的黄色部分中，紫色部分就是大小为 $n-1$ 的黄色部分，另外还有长度为 $n-2$ 的蓝色部分和长度为 $n-1$ 的绿色部分。

也就是说：

$C_{n,yellow}\:=\:C_{n-1,yellow}\:+\:(2n\:-\:3)$。

显而易见，这玩意儿是二次的，所以我们令 $C_{n,yellow}\:=\:an^2\:+\:bn\:+\:c$。

代回上式中就有

$an^2\:+\:bn\:+\:c\:=\:an^2\:+\:(-2a\:+\:b\:+\:2)n\:+\:(a\:-\:b\:+\:c\:-\:3)$，

解得 $a\:=\:1,\;b\:=-2$。

现在还需要求 $c$，随便举个例，比方说 $n\:=\:4$ 时，$1\:\times\:4^2\:+\:(-2)\:\times\:4\:+\:c\:=\:10$，很容易地解得 $c\:=\:2$。

因此，$C_{n,yellow}\:=\:n^2\:-\:2n\:+\:2$。

---

将上面红色部分的公式和黄色部分的公式组合起来，我们就得到了：

$C_n\:=\:C_{n,red}\:+\:C_{n,yellow}\:=\:4n\:+\:(n^2\:-\:2n\:+\:2)\:=\:n^2\:+\:2n\:+\:2$。

于是，我们这题就做完啦！

# 第二部分：代码

推完了公式，代码写起来简直轻而易举。不过要注意题中所给的数据范围，$4\le n\le10^9$，注意开 `long long`。

上代码：

```cpp
#include<iostream>
using namespace std;
int main(){
	int t;
	cin>>t;
	while(t--){
		long long n;
		cin>>n;
		cout<<n*n+2*n+2<<endl;
	}
	return 0;
}
```

完结撒花！

---
---

制作不易，点个赞吧！