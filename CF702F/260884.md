- 此题为开摆计划 T9。
- 感谢[奆佬](https://www.luogu.com.cn/user/52881)，[奆佬](https://www.luogu.com.cn/user/52170)的指导。
- 写法想必码量会小一些。

**[题意](https://www.luogu.com.cn/problem/CF702F)**
- 有一些 T 恤，各自有其价格与品质。
- 静态多次查询，如果有人带了一些钱，并且贪心地买能买到的品质最好的，问他能买多少件。

**分析**
- 如果钱不多，可以建出转移的内向树然后倍增。
- 现在钱很多，我们考虑转换维度思考，把所有人离线下来，每一次操作相当于把不小于 $x$ 的数减 $x$。
- 而这应该如何做呢？考虑倍增分块的方法，维护 $\log w$ 棵线段树，第 $i$ 棵线段树维护 $[2^{i-1},2^i-1]$ 内的数，对于每次操作，如果减数大于区间最大值则无影响，不能使区间最小值降层就先打个标记，否则递归下去搞，把降层的领出来降即可做到 $O(n\log n\log w )$ 的复杂度，因为每次递归下去必然导致区间内至少一个数降层（如果减数大于区间最小值，那么一定会有降层，体现了二进制分解的作用），[代码](https://www.luogu.com.cn/paste/syfzgq7h)。
- 作者几乎是偶然发现~~其实是直接二进制分组被卡常~~，按照更大的进制分组会更优一点，我直接选了 $32$ 进制，然后跑得还行。