upd on 5.24：修改一处笔误。

感觉挺高妙的……

为了方便，不妨把横纵坐标都整体减 $1$。

如果单独考虑上下移动，方案数是 $\binom{2n}{n}$。发现两个人上下总共移动 $n$ 次后一定会在同一行，设这行编号为 $x$，那么最后带个 $\binom{n}{x}^2$ 的系数，并且**除掉上下移动后方案本质相同**。考虑**只计算在第 $n$ 行相遇的情况**，最后乘上系数 $\binom{2n}{n}$。

设 $f_i$ 表示两个人在 $(n, i)$ **第一次**相遇的方案数。那么：

$$ans = \binom{2n}{n} \sum\limits_{i=0}^m f_i f_{m-i}$$

限制第一次不好算，考虑容斥。设 $g_i$ 表示两个人在 $(n, i)$ 相遇的方案数（不一定是第一次）。那么 $g_i$ 是容易求的，$g_i = \binom{2i + n}{i, i, n}$。设 $h_i$ 为卡特兰数第 $i$ 项，那么：

$$f_i = g_i - \sum\limits_{j=0}^{i-1} 2 g_j h_{i-j-1}$$

表示枚举 $(n, j)$ 是**最后一次**相遇的坐标，之后选一个人往前走一步，然后两个人往前走，**后走的那个人不能和先走的那个人重合**。这个相当于合法括号序列计数，方案数就是卡特兰数的第 $i - j - 1$ 项。

直接计算是 $O(n + m^2)$ 的。观察 $f_i$ 转移式，发现是卷积形式，直接做一遍加法卷积，复杂度降至 $O(n + m \log m)$。

[code](https://atcoder.jp/contests/arc124/submissions/41497303)