看到题解区里好多人都是 `STL` 解决的，其实这题我们可以自己写一个矩阵分析。

```plain
1  2  3  4  5  6
12 11 10 9  8  7
13 14 15 16 17 18
24 23 22 21 20 19
```

我们分析情况，发现奇数行和偶数行的情况分别相同。

为了方便，我们把 `1 2 3 4 5 6` 这一行称作第 $0$ 行，具体原因见代码。

我们可以看出，当行号为 $0,2,4,6 \cdots$ 的时候，列数（同样为了方便，从 $0$ 开始）就是楼号对宽度 $w$ 取余。

相对的，当行号为奇数时，所在列数就是宽度 $w$ 减去楼号对宽度 $w$ 取余的结果加 $1$。

这样写非常简洁：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	int w,n,m,q1,q2,p1,p2;
	cin>>w>>n>>m;
	q1=(n-1)/w,q2=(m-1)/w;//计算所在的行，由于楼号从1开始，要减去1
        //这里需要注意，小于w的楼号除以w的结果从0开始，所以上文我们也这样
	if(q1%2==0)p1=n%w;
	else p1=w-n%w+1;
	if(q2%2==0)p2=m%w;
	else p2=w-m%w+1;//计算所在列
	cout<<abs(p1-p2)+abs(q1-q2);//输出答案，为了避免两个楼号大小变换，求绝对值
}
```

[AC记录](https://www.luogu.com.cn/record/108545204)