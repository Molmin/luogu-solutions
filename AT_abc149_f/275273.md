不错的题。

考虑题目等价于，每个点等概率选或不选，求导出子图大小减选出点数的期望。

考虑一个点在导出子图的充要条件，发现不好计算。正难则反，考虑不在导出子图的充要条件，其实就是，所有点都在 $u$ 的**一棵子树内**，或者 $u$ 子树内没有选点。那么我们得到点 $u$ 在导出子图的概率是：

$$1 - \frac{2^{n - sz_u}}{2^n} - \sum\limits_{v \in son_u} \frac{2^{sz_v} - 1}{2^n}$$

导出子图大小的期望就是每个点在导出子图中的概率之和，选出点数的期望显然是 $\frac{n}{2}$，减一下就是最终答案。

[code](https://atcoder.jp/contests/abc149/submissions/42041104)