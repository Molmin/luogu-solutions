我的做法好像很奇怪，也很劣，但能过。

发现暴力过不去，考虑折半搜索。

下面仅讨论 $C=18$ 时的情况，其他类似。对于每个询问，枚举前 $9$ 位，然后对于固定的前 $9$ 位，预处理出对于某一个后 $9$ 位的最大汉明距离，类似这样：

```cpp
for (ll i=0;i<=(1<<hf)-1;i++){
	for (ll j=0;j<=(1<<hf2)-1;j++){
		vv[i][j]=-1e18;
		for (ll k:vct[i]){
			vv[i][j]=max(vv[i][j],(ll)__builtin_popcount(k^j));
		}
	}
}
```

因为第一层循环和第三层循环最多执行 $n$ 次，所以这一部分复杂度是 $O(n2^{\frac{C}{2}})$ 的。

对于每个询问，复杂度是 $O(2^{\frac{C}{2}})$ 的。

总体复杂度就是 $O(n2^{\frac{C}{2}})$ 的。