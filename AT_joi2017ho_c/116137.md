提供一个 $O(n^2 \log n)$ 的解法。

首先划分的方式在其他题解里已经提到了，就是类似于下面的形式：

![](https://cdn.luogu.com.cn/upload/image_hosting/blqrr4pd.png)

由于所有区块都必须被划分，因此那个最大的区块也一定会被划分到某个省去；所以**必定有一个省的最大值为全局最大值**。

根据这一点，我们可以钦定包含左上角 $(1, 1)$ 的 IOI 省为这个包含全局最大值的省，然后从大到小枚举 IOI 省的最小值，不断拓展 IOI 省的边界；相对地，JOI 省的面积也会越来越小。我们可以用优先队列在 $O(n^2 \log n)$ 时间内维护这个过程。

当然，包含全局最大值的省也可能在左下角或是别的位置，因此我们需要把矩阵旋转或翻转多次统计答案。

时间复杂度：$O(n^2 \log n)$。

---

当然，在 OI 通常时限内，这一做法和 $O(n^2 \log a_i)$ 的二分做法只有常数倍的常数差异，是难以卡过后面那个算法的。比起这个复杂度来说，还是**必定有一个省的最大值为全局最大值**这个想法比较有趣一些。