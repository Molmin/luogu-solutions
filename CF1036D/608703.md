## 尺取法题解    

------------

经过本蒟蒻的观察，题解区大部分大佬用的是二分或贪心，所以本蒟蒻来写一篇尺取法的题解。

### 尺取法：
尺取法是什么呢？~~很简单~~我们先来看一道题：

提供一个数组 $a$，选出一个子序列，且子序列之和 $\ge k$。问子序列有几种选法？
($1 \leq a(i) \leq 10^5$, $1 \leq n \leq 10^5$, $1 \leq k \leq 10^{10}$)

首先，这题肯定不能写暴力，普通前缀和也不行，因为 $O(n^2)$ 也会TLE。
```cpp
for(int l = 1; l <= n; l++) //普通前缀和
  for(int r = l; r <= n; r++)
    if(s[r] - s[l-1] >= k)
      ans++;
```
但我们可以优化（因为 $a(i)$ 不为负数，所以若 $[l, r]$ 合法则 $[l, r+1]$ 也合法）: 
```cpp
for(int l = 1; l <= n; l++)
  for(int r = l; r <= n; r++)
    if(s[r] - s[l - 1] >= k)
    {
        ans += n - r + 1;    //优化
        break;
    }
```
还是会超时。  

------------

我们再来观察一下：      
设 **k=10, a = 5 1 3 4 2**，如图（合法用粗体表示）：

| |l=1|l=2|l=3|l=4|l=5|
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
|r=1|   5  |  X   | X | X | X |
|r=2|   6  |  1   | X | X | X |
|r=3|   9  |  4   | 3 | X | X |
|r=4|**13**|  8   | 7 | 4 | X |
|r=5|**15**|**10**| 9 | 6 | 2 |
我们发现 **若区间 $[l, r]$ 合法，则 $[l+1, r-1]$ 一定不合法**。 

则我们继续可优化代码
```cpp
int r = 0;
for(int l = 1; l <= n; l++)
    while(r <= n)
    {
        if(s[r] - s[l - 1] >= k)	
        {
            ans += n - r + 1;
            break;
        }
        r++;
    }
```
## 这就是尺取法(又名双指针)
 注：尺取法的时候也要做前缀和

那尺取法和这道题有什么关系呢？~~没有关系你讲啥呀~~
#### 很显然，$i$ 和 $j$ 都不可减少，所以时间复杂度就从 $O(n^2)$ 变成了 $O(n)$。
------------
# 代码与实现：
首先，输入时写个前缀和：
```cpp
cin >> n;
for(int i = 1; i <= n; i++) 
{
    scanf("%d", &a[i]);	//用scanf更快
    a[i] += a[i - 1];	//我把前缀和写在原数组里了
}
cin >> m;
for(int j = 1; j <= m; j++) 
{
    scanf("%d", b[i]);
    b[j] += b[j - 1];
}
```
------------
再加个简简单单的判断：
```cpp
if(a[n] != b[m]) return printf("-1"), 0;	//码风丑请忽视
```
------------
### 接下来就是本题精髓（尺取法）：
```cpp
long long ans = 0, i = 1, j = 1;//其实用int也行，只不过long long更保险
while(i <= n && j <= m)
{
    if(a[i] == b[j])	//如果当前两段相等
        ans++, i++, j++;
    else if(a[i] > b[j]) j++;
    else if(a[i] < b[j]) i++;
}
```
------------
快乐的输出：
```cpp
return printf("%d", ans), 0;	//码风丑请忽视
```
------------
这时有人就会问了：你每截一段为什么不清零呢？   
因为（~~没法清零~~）两个数加上一样的差不变（同增同减差不变）

------------
### 结语：
好了，这就是[Vasya ans Arrays](https://www.luogu.com.cn/problem/CF1036D)这道题了，至于[完整代码](https://www.luogu.com.cn/paste/9g16g0h4)嘛，我是不会放的。[doge]  

感谢管理员大大指出问题。
###### ps：这是蒟蒻的第1篇题解