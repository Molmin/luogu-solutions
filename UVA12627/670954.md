
#### 简单分析  
如下为气球膨胀 4 小时之后的图形，1 表示红色气球，0 表示蓝色气球。
~~~
1 1 1 1 1 1 1 1 | 1 1 1 1 1 1 1 1
1 0 1 0 1 0 1 0 | 1 0 1 0 1 0 1 0
1 1 0 0 1 1 0 0 | 1 1 0 0 1 1 0 0
1 0 0 0 1 0 0 0 | 1 0 0 0 1 0 0 0
1 1 1 1 0 0 0 0 | 1 1 1 1 0 0 0 0
1 0 1 0 0 0 0 0 | 1 0 1 0 0 0 0 0
1 1 0 0 0 0 0 0 | 1 1 0 0 0 0 0 0
1 0 0 0 0 0 0 0 | 1 0 0 0 0 0 0 0
----------------+----------------
1 1 1 1 1 1 1 1 | 0 0 0 0 0 0 0 0
1 0 1 0 1 0 1 0 | 0 0 0 0 0 0 0 0
1 1 0 0 1 1 0 0 | 0 0 0 0 0 0 0 0
1 0 0 0 1 0 0 0 | 0 0 0 0 0 0 0 0
1 1 1 1 0 0 0 0 | 0 0 0 0 0 0 0 0
1 0 1 0 0 0 0 0 | 0 0 0 0 0 0 0 0
1 1 0 0 0 0 0 0 | 0 0 0 0 0 0 0 0
1 0 0 0 0 0 0 0 | 0 0 0 0 0 0 0 0
~~~
将它分成四块，发现左上、右上、左下三个小块都是一样的，而右下的小块都是 0。  
分出来的四块（其实就是 3 小时后的状态）再分，也是如此，这些图形有类似分形的性质，大的可以分出小的，而且形式相似。  
因此，我们可以考虑递归计算。

#### 实现 
设计函数 $\operatorname{dfs}(k,x)$ 表示在 $k$ 小时后，前 $x$ 行的红气球总数。

就会出现以下几种可能：  

1. $x=2^k$  
其实就是k小时后的红气球总数，每小时红气球数量翻三倍，所以结果是 $3^k$。  
2. $x≤2^{k-1}$  
需要计算的部分都在上面两块中，而上两块是相同的，所以计算一块，在最后乘即可。结果是 $\operatorname{dfs}(k-1,x)\times 2$。  
3. 其他    
考虑分成两部分计算。  
第一部分：左上和右上，这两块的数量是固定的，均为 $3k-1$。  
第二部分：只考虑左下块，于是又转换为第二种情况，答案为 $\operatorname{dfs}(k-1,x-2^{k-1})$。
最终我们把这两部分加起来就可以得出结果。

递归最多进行 $k$ 次，每次最多算一个快速幂，总复杂度为 $O(k^2)$。

结束。


###### 小细节：输出时不要忘记加 “Case X:”。
