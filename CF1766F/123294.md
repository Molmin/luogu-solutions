一个自然的想法是，对于所有容量为奇数的边，它的流量至少为 $1$。我们钦定它流 $1$ 单位流量。也就是说，将原图每条边的容量变成 $\lfloor \frac c 2\rfloor$，跑最小费用可行流，则每条边的流量为其新图流量的两倍，加上它的奇偶性。问题在于没有考虑到原来每条奇边的 $1$ 流量的影响。

简单，对于每个不为 $1$ 或 $n$ 的点，设它在仅考虑奇边的 $1$ 单位流量时，流入流量减去流出流量为 $in_i$。若 $in_i$ 为奇数，显然无解。否则，若 $in_i > 0$，说明所有奇边对 $i$ 的影响是让它多出 $in_i$ 滴流量。因此，在新图上从 $s\to i$ 连容量 **上下界** $\frac {in_i} 2$ 的边。费用任意，反正钦定流满了。

这样，我们将问题转化为 **有负权边的上下界最小费用可行流**。尽管原图保证无负环，但是为求可行流而连出的 $t\to s$ 可能导致新图产生负环，如样例 1。因此，还需使用负环费用流的技巧，钦定负权边流满，在反边上退流。

时间复杂度是一次费用流，注意构造方案的细节。[代码](https://codeforces.com/contest/1766/submission/185025112)。