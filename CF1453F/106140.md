从后往前考虑，如果一个位置 $i$，满足有至少两个能到 $n$ 的位置在 $[i+1,i+a_i]$ 中，这个位置一定要改成 $0$（不然原本确定的那一条路径就可能借道这个位置以找到更多路径），如果没有一个能到 $n$ 的位置，则这个位置保留不会让答案更劣。

于是一个显然的 DP，设 $f(i,j)$ 表示第 $i$ 个数能到达 $n$，最近的能到 $n$ 的位置是 $j$ 时的最多不改成 $0$ 的个数。

转移：
$$
f(i,j)\leftarrow f(j,p)+1+w(i,j)\quad(p>i+a_i)
$$
转移取 $\max$，其中 $w(i,j)$ 表示 $i,j$ 之间无法走到 $j$ 的位置个数，做 DP 的时候直接计算即可。然后后缀 $\min$ 优化一下就行了。

[code](https://codeforces.com/contest/1453/submission/174050227)