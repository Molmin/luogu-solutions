给定数组 $a$，$a_i$ 表示从 $i$ 能走到 $[i+1, i+a_i]$，问至少需要把几个 $a_i$ 改成 $0$，才能使得 $1$ 到 $n$ 有且仅有一条路径。

$n \leq 3000$。

这道题设计到了合适的 dp 状态就能比较简单地转移，而 dp 状态的选取一般可以从比较初步的想法逐步优化得到。题目的关键信息是“有且仅有一条路径”，那么就有两种直观的方式刻画：把路径数放在状态里，或是把路径数为一在转移中始终满足。前者无非设计状态 $f_{i,j}$ 表示从 $1$ 到 $i$ 有 $j$ 条路径最少删掉的点数，而转移就很难计算 $j$ 一维新的值；后者则设计状态 $f_i$ 表示 $1$ 到 $i$ 仅有一条路径最少删掉的点数，发现这样难以设计转移：$f_i$ 转移到某个 $f_j$ 时，需要强制让 $1$ 号点能到达的“其它”点不能到达 $j$，其它指的是唯一路径上除去 $i$ 以外的点。这导出了一个需要额外记录的信息：$1$ 号点能到哪些点。

仅关注唯一的 $1$ 到 $i$ 的路径 $p_1,p_2,\cdots p_k$，$p_1=1,p_k=i,p_i+a_{p_i}\ge p_{i+1}$，考虑 $p_{1\cdots k-1}$ 能到达的点： $i<k,[p_i+1,p_i+a_{p_i}]$ 的并集再添上 $1$。由于 $p_i+a_{p_i}\ge p_{i+1}$，它们能到达 $j\ge i$ 的一个前缀 $[1,j]$，也就是说只需要一个值 $j$ 就能描述“$1$ 号点能到哪些点”这个信息，则用二元组 $(i,j)$ 表示 $1$ 到 $i$ 只有一条路径，且路径上的点 $i$ 以外的点最远恰好能到达 $j$ 的状态。那么枚举 $i$ 下一步到达的点 $k\in(j,i+a_i]$，需要删掉的是 $(i,k)$ 中能通过一步到达 $k$ 的所有点，因为它们可以由 $i$ 一步走到之后再到达 $k$，创造了超过一条路径，新的最远点是 $i+a_i$。至此已经得到了一个多项式复杂度的做法，接下来可以加入一些套路地优化。

每个状态都枚举后继是不优的，这会导致复杂度始终至少是 $O(n^3)$，考虑枚举前驱转移，即枚举状态 $(i,k+a_k)$ 的前一步 $(k,x)$，满足 $k+a_k\ge i$，$x<i$，现在需要枚举的是 $i,k,x$，不妨通过优化状态设计来避免 $x$ 的枚举：由于 $j$ 影响的只有 $k$ 的范围，把最远恰好能到达 $j$ 改为最远到达不超过 $j$，则 $x$ 可以固定到 $i-1$。现在的贡献可以记为 $c(L,R)$ 表示 $[L,R]$ 内能一步到达 $R+1$ 的个数，查询的就是 $c(k+1,i-1)$，$c$ 可以预处理，也可以在倒序枚举 $k$ 时统计。

复杂度 $O(n^2)$。