> 有一张有 $n+1$ 个点和 $2n-1$ 条有向边的图，边有以下两种：
>
> 1. 对于所有 $1 \leq i < n$，有 $n-1$ 条从 $i$ 到 $i+1$ 的边
> 2. 对于所有 $1 \leq i \leq n$，有 $n$ 条 $i$ 与 $n+1$ 的单向边，若 $a_i = 0$，为从 $i$ 到 $n+1$ 的边，反之则为从 $n+1$ 到 $i$ 的边。
>
> 现在请你求出这张图的一个哈密顿回路，若不存在输出 $-1$
>
> $T\leq 20,n \leq 10^4$ 

思维题。

首先我们考虑怎样经过 $n+1$​ 这个点，因为其他点都可以直接走到。我们考虑如果有 $a_i = 0,a_{i+1} = 1$​ 即一个走到 $n+1$ 一个走回来，那我们必然可以从 $i$ 走到 $n+1$​​ 然后再走到 $i+1$，这样就能遍历完整张图了。

最开始我单纯考虑了这种情况，然后贡献了三发罚时。

我们发现，若 $a_1 = 1$，实际上我们可以从 $n+1$ 出发遍历整张图，若 $a_n = 0$ 我们可以直接从 $n$ 到 $n+1$。

关于无解，实际上通过上面的方法我们可以证明出这张图必定存在一条哈密顿回路。所以本题直接按照上面的方法构造就行了。

时间复杂度 $O(n)$

## 代码

```cpp
void solve() {
    read(n);
    for (int i = 1;i <= n;++i) read(a[i]);
    int pos = 0,pos1 = 0;
    if (!a[n]) {
        for (int i = 1;i <= n+1;++i) printf("%d ",i);
        puts("");
        return ;
    }
    bool flag = 0;
    for (int i = 1;i <= n;++i) {
        if (a[i] == 0) {
            pos = i;flag = 1;
        }
    }
    if (!flag) {
        printf("%d ",n+1);
        for (int i = 1;i <= n;++i) printf("%d ",i);
        puts("");
        return ;
    }
    for (int i = 1;i <= pos;++i) printf("%d ",i);
    printf("%d ",n+1);
    for (int i = pos+1;i <= n;++i) printf("%d ",i); 
    puts("");
}
```