## 论如何使用打表，得出数列的规律。

1. 先输出斐波那契的前 $1000$ 项，找到规律。

打表程序（五十个数换一行）：

```cpp
#include<bits/stdc++.h>
using namespace std;
int f[1025];
main()
{
	freopen("text0.txt","w",stdout);
	f[1]=f[2]=1;
	printf("1 1 ");
	for(int i=3;i<=1000;i++)
	{
		f[i]=f[i-1]+f[i-2];
		f[i]%=100;
		printf("%d ",f[i]);
		if(i%50==0)printf("\n");
	}
	return 0;
}
```

打出的表：

```
1 1 2 3 5 8 13 21 34 55 89 44 33 77 10 87 97 84 81 65 46 11 57 68 25 93 18 11 29 40 69 9 78 87 65 52 17 69 86 55 41 96 37 33 70 3 73 76 49 25 
74 99 73 72 45 17 62 79 41 20 61 81 42 23 65 88 53 41 94 35 29 64 93 57 50 7 57 64 21 85 6 91 97 88 85 73 58 31 89 20 9 29 38 67 5 72 77 49 26 75 
1 76 77 53 30 83 13 96 9 5 14 19 33 52 85 37 22 59 81 40 21 61 82 43 25 68 93 61 54 15 69 84 53 37 90 27 17 44 61 5 66 71 37 8 45 53 98 51 49 0 
49 49 98 47 45 92 37 29 66 95 61 56 17 73 90 63 53 16 69 85 54 39 93 32 25 57 82 39 21 60 81 41 22 63 85 48 33 81 14 95 9 4 13 17 30 47 77 24 1 25 
26 51 77 28 5 33 38 71 9 80 89 69 58 27 85 12 97 9 6 15 21 36 57 93 50 43 93 36 29 65 94 59 53 12 65 77 42 19 61 80 41 21 62 83 45 28 73 1 74 75 
49 24 73 97 70 67 37 4 41 45 86 31 17 48 65 13 78 91 69 60 29 89 18 7 25 32 57 89 46 35 81 16 97 13 10 23 33 56 89 45 34 79 13 92 5 97 2 99 1 0 
1 1 2 3 5 8 13 21 34 55 89 44 33 77 10 87 97 84 81 65 46 11 57 68 25 93 18 11 29 40 69 9 78 87 65 52 17 69 86 55 41 96 37 33 70 3 73 76 49 25 
74 99 73 72 45 17 62 79 41 20 61 81 42 23 65 88 53 41 94 35 29 64 93 57 50 7 57 64 21 85 6 91 97 88 85 73 58 31 89 20 9 29 38 67 5 72 77 49 26 75 
1 76 77 53 30 83 13 96 9 5 14 19 33 52 85 37 22 59 81 40 21 61 82 43 25 68 93 61 54 15 69 84 53 37 90 27 17 44 61 5 66 71 37 8 45 53 98 51 49 0 
49 49 98 47 45 92 37 29 66 95 61 56 17 73 90 63 53 16 69 85 54 39 93 32 25 57 82 39 21 60 81 41 22 63 85 48 33 81 14 95 9 4 13 17 30 47 77 24 1 25 
26 51 77 28 5 33 38 71 9 80 89 69 58 27 85 12 97 9 6 15 21 36 57 93 50 43 93 36 29 65 94 59 53 12 65 77 42 19 61 80 41 21 62 83 45 28 73 1 74 75 
49 24 73 97 70 67 37 4 41 45 86 31 17 48 65 13 78 91 69 60 29 89 18 7 25 32 57 89 46 35 81 16 97 13 10 23 33 56 89 45 34 79 13 92 5 97 2 99 1 0 
1 1 2 3 5 8 13 21 34 55 89 44 33 77 10 87 97 84 81 65 46 11 57 68 25 93 18 11 29 40 69 9 78 87 65 52 17 69 86 55 41 96 37 33 70 3 73 76 49 25 
74 99 73 72 45 17 62 79 41 20 61 81 42 23 65 88 53 41 94 35 29 64 93 57 50 7 57 64 21 85 6 91 97 88 85 73 58 31 89 20 9 29 38 67 5 72 77 49 26 75 
1 76 77 53 30 83 13 96 9 5 14 19 33 52 85 37 22 59 81 40 21 61 82 43 25 68 93 61 54 15 69 84 53 37 90 27 17 44 61 5 66 71 37 8 45 53 98 51 49 0 
49 49 98 47 45 92 37 29 66 95 61 56 17 73 90 63 53 16 69 85 54 39 93 32 25 57 82 39 21 60 81 41 22 63 85 48 33 81 14 95 9 4 13 17 30 47 77 24 1 25 
26 51 77 28 5 33 38 71 9 80 89 69 58 27 85 12 97 9 6 15 21 36 57 93 50 43 93 36 29 65 94 59 53 12 65 77 42 19 61 80 41 21 62 83 45 28 73 1 74 75 
49 24 73 97 70 67 37 4 41 45 86 31 17 48 65 13 78 91 69 60 29 89 18 7 25 32 57 89 46 35 81 16 97 13 10 23 33 56 89 45 34 79 13 92 5 97 2 99 1 0 
1 1 2 3 5 8 13 21 34 55 89 44 33 77 10 87 97 84 81 65 46 11 57 68 25 93 18 11 29 40 69 9 78 87 65 52 17 69 86 55 41 96 37 33 70 3 73 76 49 25 
74 99 73 72 45 17 62 79 41 20 61 81 42 23 65 88 53 41 94 35 29 64 93 57 50 7 57 64 21 85 6 91 97 88 85 73 58 31 89 20 9 29 38 67 5 72 77 49 26 75 
```

然后，我们就会发现每 $6$ 行是一个循环节，也就是 $300$ 个数字一循环。循环节的 $300$ 个数字如下：

```
1 1 2 3 5 8 13 21 34 55 89 44 33 77 10 87 97 84 81 65 46 11 57 68 25 93 18 11 29 40 69 9 78 87 65 52 17 69 86 55 41 96 37 33 70 3 73 76 49 25 
74 99 73 72 45 17 62 79 41 20 61 81 42 23 65 88 53 41 94 35 29 64 93 57 50 7 57 64 21 85 6 91 97 88 85 73 58 31 89 20 9 29 38 67 5 72 77 49 26 75 
1 76 77 53 30 83 13 96 9 5 14 19 33 52 85 37 22 59 81 40 21 61 82 43 25 68 93 61 54 15 69 84 53 37 90 27 17 44 61 5 66 71 37 8 45 53 98 51 49 0 
49 49 98 47 45 92 37 29 66 95 61 56 17 73 90 63 53 16 69 85 54 39 93 32 25 57 82 39 21 60 81 41 22 63 85 48 33 81 14 95 9 4 13 17 30 47 77 24 1 25 
26 51 77 28 5 33 38 71 9 80 89 69 58 27 85 12 97 9 6 15 21 36 57 93 50 43 93 36 29 65 94 59 53 12 65 77 42 19 61 80 41 21 62 83 45 28 73 1 74 75 
49 24 73 97 70 67 37 4 41 45 86 31 17 48 65 13 78 91 69 60 29 89 18 7 25 32 57 89 46 35 81 16 97 13 10 23 33 56 89 45 34 79 13 92 5 97 2 99 1 0 
```

2. 把我们的循环节放入一个数组（又写了一个代码来输出这个数组）

代码如下：

```cpp
#include<bits/stdc++.h>
using namespace std;
int f[1025];
main()
{
	freopen("text0.txt","w",stdout);
	f[1]=f[2]=1;
	printf("{1,1");
	for(int i=3;i<=300;i++)
	{
		f[i]=f[i-1]+f[i-2];
		f[i]%=100;
		printf(",%d",f[i]);
		if(i==300)printf("}");
	}
	return 0;
}
```

效果如下：

```
{1,1,2,3,5,8,13,21,34,55,89,44,33,77,10,87,97,84,81,65,46,11,57,68,25,93,18,11,29,40,69,9,78,87,65,52,17,69,86,55,41,96,37,33,70,3,73,76,49,25,74,99,73,72,45,17,62,79,41,20,61,81,42,23,65,88,53,41,94,35,29,64,93,57,50,7,57,64,21,85,6,91,97,88,85,73,58,31,89,20,9,29,38,67,5,72,77,49,26,75,1,76,77,53,30,83,13,96,9,5,14,19,33,52,85,37,22,59,81,40,21,61,82,43,25,68,93,61,54,15,69,84,53,37,90,27,17,44,61,5,66,71,37,8,45,53,98,51,49,0,49,49,98,47,45,92,37,29,66,95,61,56,17,73,90,63,53,16,69,85,54,39,93,32,25,57,82,39,21,60,81,41,22,63,85,48,33,81,14,95,9,4,13,17,30,47,77,24,1,25,26,51,77,28,5,33,38,71,9,80,89,69,58,27,85,12,97,9,6,15,21,36,57,93,50,43,93,36,29,65,94,59,53,12,65,77,42,19,61,80,41,21,62,83,45,28,73,1,74,75,49,24,73,97,70,67,37,4,41,45,86,31,17,48,65,13,78,91,69,60,29,89,18,7,25,32,57,89,46,35,81,16,97,13,10,23,33,56,89,45,34,79,13,92,5,97,2,99,1,0}
```

3. 进行区间求和

我们要求出 $f(l)$ 加到 $f(r)$ 的结果，那么我们可以先处理出来 $f(1)$ 加到 $f(r)$ 的值，再减去 $f(1)$ 加到 $f(l-1)$ 的值。

那么由于 $f(x)$ 对 $100$ 取模的结果是有循环节的，所以我们从 $f(1)$ 加到 $f(x)$ 的结果，就是若干个循环节的和，剩下的数值用前缀和处理即可。

AC 代码：

```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int T,l,r,f[]={0,1,1,2,3,5,8,13,21,34,55,89,44,33,77,10,87,97,84,81,65,46,11,57,68,25,93,18,11,29,40,69,9,78,87,65,52,17,69,86,55,41,96,37,33,70,3,73,76,49,25,74,99,73,72,45,17,62,79,41,20,61,81,42,23,65,88,53,41,94,35,29,64,93,57,50,7,57,64,21,85,6,91,97,88,85,73,58,31,89,20,9,29,38,67,5,72,77,49,26,75,1,76,77,53,30,83,13,96,9,5,14,19,33,52,85,37,22,59,81,40,21,61,82,43,25,68,93,61,54,15,69,84,53,37,90,27,17,44,61,5,66,71,37,8,45,53,98,51,49,0,49,49,98,47,45,92,37,29,66,95,61,56,17,73,90,63,53,16,69,85,54,39,93,32,25,57,82,39,21,60,81,41,22,63,85,48,33,81,14,95,9,4,13,17,30,47,77,24,1,25,26,51,77,28,5,33,38,71,9,80,89,69,58,27,85,12,97,9,6,15,21,36,57,93,50,43,93,36,29,65,94,59,53,12,65,77,42,19,61,80,41,21,62,83,45,28,73,1,74,75,49,24,73,97,70,67,37,4,41,45,86,31,17,48,65,13,78,91,69,60,29,89,18,7,25,32,57,89,46,35,81,16,97,13,10,23,33,56,89,45,34,79,13,92,5,97,2,99,1,0};
int sum[305],ans;
main()
{
	scanf("%lld",&T);
	for(int i=1;i<=300;i++)sum[i]=sum[i-1]+f[i];
	while(T--)
	{
		ans=0;
		scanf("%lld%lld",&l,&r);
		int sum1=(l-1)/300*sum[300]+sum[(l-1)%300];
		int sum2=r/300*sum[300]+sum[r%300];
		printf("%lld\n",sum2-sum1);
	}
	return 0;
}
```