zx2003 在平面最近点对加强版里说了一个做法，大概就是维护前缀答案，如果新的点更新了答案就重构，期望复杂度 $O(\sum i\cdot\frac{1}{i})=O(n)$，但是如果能做到所有重构都在比较后面的位置就寄了。

考虑直接用这个做法套分块，暴力跑出每块到序列末尾和每块到序列开头的所有答案，最后散块同样用这个方法跑即可。

数据随机时时间复杂度为 $O((n+q)\sqrt n)$，很卡常。

如果 lxl 把我卡掉了我就把卡常技巧公开。