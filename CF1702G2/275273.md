## 思路

显然如果确定了路径的两个端点 $x,y$，就可以树剖将树上 $x$ 到 $y$ 的路径上的点权值 $+1$，再判断询问点是否在路径上。

于是钦定深度最大的点为其中一个端点 $x$，另一个端点 $y$ 为询问点中不为 $x$ 的祖先且深度最大的点。如果 $y$ 不存在说明路径为一条从祖先直接到儿子的链，否则按上面的方法判断即可。

注意特判 $m = 1$ 的情况。

## 代码

[code](https://codeforces.com/contest/1702/submission/164028924)