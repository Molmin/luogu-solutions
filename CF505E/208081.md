首先不难想到二分出最大值是多少。

当然，如果没有$0$这个下界，那么这道题就是一道入门题。

现在加上$0$这个下界，发现如果正向维护并不方便，于是考虑反着维护。

首先我们将所有初始高度都设为二分出的$val$，这样就变成了有$m$轮操作，每一次可以选择$k$个物品，将他们的高度$+p$，每轮后所有物品的高度$-a_i$，这样我们只要保证没有一个物品的高度小于$0$即可。

这样我们对于每一个物品用一个堆维护一下还有多少天它的高度会$<0$，当然如果到最后高度仍$\ge h_i$那么就不用加入堆中了，这样每次贪心的修改快要$<0$的即可，如果修改仍然会$<0$就不合法。

对于一个$val$，如果不存在一个物品不合法且最后的堆为空则满足条件。