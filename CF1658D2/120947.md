# Solution

专门在 CF 里面找到 Data Structure 的题写，怎么这个不是 DS 题啊。。。

考虑从高到低逐位确定 $x$ 的值。假设我们到了最高位。如果初始区间和终止区间最高位 $0$ 的个数不一样，那么 $x$ 这一位肯定为 $1$。

如果最高位 $0$ 的个数一样，且初始状态 $0$ 和 $1$ 的个数不一样，那么这一位肯定为 $0$。

如果最高位 $0$ 的个数一样，初始状态 $0$ 和 $1$ 的个数也是一样的，那么实际上初状态 $[l,r]$ 可以改为 $[l,2^k-1]$ 和 $[2^k,r]$ 两个对称的区间。所以这一位是 $0$ 是 $1$ 其实无所谓。你可以默认是 $0$。

我们结束这个过程之后，按照最高位是 $0$ 和 $1$ 分开，分治地解决子问题，求解更低以为的状态。

注意对于某一位我们可能有多个区间共同行动。由于答案存在，所以即使某一个区间算出来 $0$ 和 $1$ 皆可，也需要参考其他区间的限制。

> 其实这里有一个问题，就是对于第三种状态到底怎么分，因为这一位零一皆可。如果我们目前初始状态并不是从 $0$ 开始到 $2^{k+1}-1$ 结束，那么不可能有平行宇宙存在的。这一位选零还是选一都是无所谓的，反正是是对称的，大不了后面所有数同时取个反。如果目前初始状态为 $0$ 到 $2^{k+1}-1$，那么其实无论 $x$ 怎么定都是合法的的。因此甚至不需要继续往后找了。

不需要用 Trie 树。

code：[link](https://codeforces.com/problemset/submission/1658/212115963)