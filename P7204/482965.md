[原题链接](https://www.luogu.com.cn/problem/P7204)

## 前言
考场上一眼就有思路，但是我很手残，前面结构体定义的变量，我后面赋值时顺序反了，直接爆零并且浪费我两个小时时间。

## 分析
显然如果删除一些字母后区间中没有重复字符，那么删除更多的字母也行，因此答案具有单调性，可以二分。

再想到每一次删除字母是在上一次删除的基础上，显然是主席树的感觉，直接记录 $n$ 个版本的树。小写字母只有 $26$ 个，可以用位运算来记录当前区间的字母是否出现，再用一个标记记录是否有字母重复出现。更新的时候，直接判断左右子区间是否有重复字母或者合并之后是否有重复。

对于每个区间，我们找到让字母不重复的最小删除数，答案就是这些的最大值。时间复杂度 $O(q \log^2 n)$，$10^5$ 的数据是可以过的。

## Code
由于本蒟蒻的[代码](https://www.luogu.com.cn/paste/e50biscn)比较长，这里就不贴出来了。