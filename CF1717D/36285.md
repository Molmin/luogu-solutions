# CF1717D - Madoka and The Corruption Scheme - 组合计数,思维转化

## 题意
给出一棵完全二叉树的层数 $n(1\leq n\leq 10^5)$，这棵二叉树有 $2^n$ 个叶子结点，代表初始时有 $2^n$ 个选手进行 $n$ 次比赛，胜出者进入下一轮，最终有 $1$ 个选手（根结点）获得最终胜利。

你可以随意确定二叉树的每个叶子节点的顺序，也可以随意确定每轮比赛谁赢谁输。

在你确定了这些以后，另一个人可以改变每轮比赛的输赢情况，最多改变 $k(1\leq k\leq \min(2^n,10^9))$ 轮比赛的输赢情况。

问：你能确保获得最终胜利的人的编号的最小值，答案对 $10^9+7$ 取模。

## 思路

不妨假设，**每次比赛均选择靠左侧的选手赢**，然后我们根据有机会的选手

假设 $n=5$
若改变最多 $0$ 场比赛的输赢情况，那么有 $1$ 个结点有机会走到最后

若改变最多 $1$ 场比赛的输赢情况，那么有 $1+5$ 个结点有机会走到最后

若改变最多 $2$ 场比赛的输赢情况，那么有 $1+5+1+2+3+4+5$ 个结点有机会走到最后。

可以发现：
- 只要更改的那场比赛直通根结点，那么就能让一个新的叶子结点成为有机会胜利的结点。
- 我们从上到下依次修改，能发现可以修改的比赛是唯一的。
- 有多少种不同的、合法的修改方案（不修改也算一种方案），那么就有多少个不同的叶子结点有机会胜利。

我们得出：从上到下修改比赛结果，恰好修改 $k$ 次，那么有 $\complement_n^k$ 种方案，每一种方案都会造成一个结点有机会成为胜利的结点，因此有恰好 $\complement_n^k$ 个叶子结点有机会胜利。

答案就是 $\sum_{i=0}^{\min(n,k)}\complement_n^i$。