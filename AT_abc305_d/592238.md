[传送门](https://www.luogu.com.cn/problem/AT_abc305_d)    
又是一道代码又臭又长的 ABC D 题。     
## 题意
给你 $n$ 个整数，记为 $a_1$ 到 $a_n$。       
其中，$a_{i}$ 和 $a_{i+1}$ 是一段睡觉的时间（$i$ 为偶数），其他时间都是醒的。     
$q$ 次询问，每次给定 $l$ 和 $r$，求这段时间中的睡觉时间有多长。     
## 解法
对于第 $i$ 次询问，我们设 $lp$ 为整个时间表里比 $l$ 严格大于的第一个位置，设 $rp$ 为整个时间表里小于等于 $r$ 的第一个位置。           
那么，我们先考虑一般情况：     
如果 $lp$ 为奇数，那么说明 $l$ 时刻在睡觉，这里产生了 $a_{lp}-l$ 的答案贡献，否则为 $0$。     
如果 $rp$ 为偶数，那么说明 $r$ 时刻在睡觉，这里就产生了 $r-a_{rp}$ 的贡献，否则为 $0$。     
特殊情况即 $lp>rp$。    
这种情况我们先对其进行交换。    
交换后，这种情况与一般情况正好相反：    
- 如果 $lp$ 是奇数且 $rp$ 是偶数，那么这种情况没有睡觉时间。   
- 否则，睡觉时间是 $r-l$。      

这里解释一下第一个。        
我们的 $lp$ 和 $rp$ 是经过了交换的，所以与一般情况正好相反。这种情况实际上是在一个区间内，所以其余情况没有特殊的答案贡献。             
[CODE](https://www.luogu.com.cn/paste/x73j52eb)