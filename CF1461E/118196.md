考虑分三种情况讨论。

- 最简单的，$x = y$：显然只要 $k - x$ 或 $k + y$ 有一个在范围内就有解；
- 其次，考虑 $x > y$：因为无论如何用掉的总比添加的多，所以“能加水就加水”维持的时间才是最长的。因为 $x > y$，所以最多只有第一天不能加水，判断一下，做个除法就能得到最大天数；
- 最后是 $x < y$：这种情况下，你更需要注意往饮水机里倒水的时候尽量不超出上限，因此每次先尽可能让饮水机用光，再向桶内加水是个最优的方案。考虑首先让水消耗到不得不加，接下来定义一步操作为：向饮水机内加一次水，并让饮水机消耗到极限。判断是否能加水，计算一步操作后饮水机接下来的水位和一步操作持续的天数都是容易 $O(1)$ 完成的，要是一直没能走到不能加水的位置，至多 $x$ 步操作之后就会回到起点，这样的话就说明这个过程是可以循环的，可以无限进行下去。

[代码链接，感觉没有 *2200。](https://codeforces.com/contest/1461/submission/155011653)