由于 $n+x\leq m$， $x$ 是可被枚举的，所以考虑先枚举 $x$，再判断是否合法。

我们预处理出 $a$ 序列的 $\text{Hash}$ 值 $h_a$，则序列 $a+x$（$a$ 按位加上 $x$ 后所得的序列）的 $\text{Hash}$ 值为 $h_a+x\sum\limits_{i=0}^{n-1} B^i$，其中 $B$ 为 $\text{Hash}$ 的基数。现在考虑快速比对这个值和 $b$ 序列的一个子序列的值，$b$ 序列的这个子序列值域已经被确定为 $[1+x,n+x]$，所以考虑 $\text{two-pointer}$ 依次加入，维护其 $\text{Hash}$ 值，与 $a+x$ 的 $\text{Hash}$ 值比对即可。可以使用线段树或平衡树实现，时间复杂度为 $O(m \log m)$。


