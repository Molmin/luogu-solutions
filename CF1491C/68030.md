这里是官方题解。

考虑维护一个 $t_i$ 表示 $i$ 已经被前面的操作经过多少次。

可以发现，对于一个位置 $x$ ，它必然会让后面的 $x+S_x,x+S_x-1,...x+2$ 被经过若干次；

如果它被经过的次数超过了 $S_x-1$，它还会让 $x+1$ 被经过 $t_x-S_x+1$ 次。

最后将每个位置的 $\max(S_i-t_i-1,0)$ 相加即可。

- 这个东西可以数据结构维护，但是作为 `C` 位置的题目，我们删掉了数据结构的部分，允许了 $O(n^2)$ 的程序通过。

所以某些草标算的题解能不能尊重一下我们？