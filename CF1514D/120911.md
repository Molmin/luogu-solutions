简单数据结构题，看起来比 $C$ 要简单。

考虑这么一个问题，如果我们要把区间分成若干个块的话肯定要抵完，也就是说如果花费 $x$ 个非众数，那么抵掉 $x+1$ 个众数是最优的。

但是，我们发现它如果不固定 $x$ 就不一定抵得完。

我们考虑一种一定抵得完的方案：

假设原来分成了 $(x,x+1)$ 和 $(y,y+1)$ ，显然可以合并成 $(x+y,x+y+1),(0,1)$  的形式，也就是说，合并两个组是并不影响组数的大小的！

那么我们可以考虑只分一组把所有非众数分完，多出来的众数每个都自成一组即可。

至于求区间众数的出现次数，我用的是主席树，考虑这道题只要求绝对众数的出现次数那么我们设 $k=r-l+1$ 反正如果 $s[left]<k$ 的话显然只有走右儿子才有可能得到绝对众数，否则只有走左儿子才可能得到绝对众数。