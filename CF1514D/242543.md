#### 题目描述

对于一个序列，你有两种操作：

- 将一个序列的一个子段 $[l,\,r]$ 截下来，成为另一个序列。
- 将两个序列合并成一个序列，保留两个原序列的数字顺序。

同时，要求一个 $n$ 个数的序列中不能有任意一个值出现次数超过 $\lceil \dfrac{n}{2} \rceil$。

有 $q$ 次询问，每次询问一个区间 $[l,\,r]$，问最少将这个序列拆成几个序列才能使所有序列满足条件。

#### 题目解法

首先明确，题目不需要我们做到操作次数最小，所以我们可以把区间拆成 $n$ 个长度为 $1$ 的子序列，然后再拼起来，以达到目的。

对于一个区间 $[l,\,r]$，先求出它的区间众数。$n,\,q \leq 3 \times 10^5$，分块可过。不会的可以移步 [P5048](https://www.luogu.com.cn/problem/P5048)，或者写主席树静态区间第 $k$ 小。

设区间长度 $s=r-l+1$，如果这个众数在区间中出现次数 $\leq \lceil \dfrac{s}{2} \rceil$，则不需要拆分，输出 $1$。

否则，对于一个拆出来的序列，如果它包含 $x$ 个原序列中的区间非众数，则这个序列最多能包含 $x+1$ 个原序列中的区间众数。这也是最优的拆分方法。所以最终答案是 区间众数个数$-$区间非众数个数。