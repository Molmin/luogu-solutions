# abc 233 d

## 题意

请你求出在长度为 $N$ 的序列中有多少个字段的和为 $K$。

## 思路

首先，我们可以用前缀和来表示一个子段的和，也就是 $s_r - s_{l - 1}$。

所以题目的要求就是：

求出有多少对 $(l, r)$ ，使得 $s_r - s_{l - 1} = k$，也就是 $s_r = s_{l - 1} + k$。

所以就有这么一种方法：

枚举所有的区间，判断是否满足条件。

但是，这样很明显时间复杂度为 $O(n ^ 2)$，那么，应该如何优化呢？

对于 $i$ 来说，$s_{i - 1} + k$ 是一个定值，也就是说，只要提前算出在 $i$ 之后的 $s_{i - 1} + k$ 的数量即可。