事实上自己方向一直是错的……

绝对值不好弄，我一开始的想法是直接去绝对值，但是不可避免地要 $O(n^3)$。

考虑我们直接**钦定黑点重心为根**，设这个根为 $r$，设 $sz_i$ 为 $i$ 子树内黑点数，由重心的性质，可以直接去绝对值，也就是说答案为 $\sum\limits_{i \ne r} k - 2 sz_i$。

考虑拆贡献，一个黑点 $u$ 会对它的所有除了根的祖先都造成 $-2$ 的贡献，也就是说贡献是 $-2 \times \text{dis}(u, r)$。于是我们贪心地选择与 $r$ 的距离最小的染黑即可。

因为如果 $r$ 不是重心，会产生负贡献，所以最优解一定是合法的。

时间复杂度 $O(n^2)$。

[code](https://codeforces.com/contest/1842/submission/211001718)