[洛谷题面](https://www.luogu.com.cn/problem/CF690A2)

[原题链接](https://codeforces.com/problemset/problem/690/A2)

这题相对于 A3 来说，也是十分有趣的题目。

如果读者还没做过这题的 A1 [简单版本](https://www.luogu.com.cn/problem/CF690A1)，建议可以先花一点时间把这题切了。

将本题与其简单版本相比较，我们一下就能发现问题的关键。

## 题目分析
本题相较于 A1 来说，区别在于每个人可以为了活命而**不要金币**，

A1 的答案只是简单的 $\lceil \dfrac{n}{2}\rceil$，而本题的答案并没有表面上看起来那么简单。

先考虑一下前面所说的那个区别对于答案产生了什么影响，

我们意识到，与 A1 相比，由于我们不用保证一定要得到金币，所以在同等总人数（记为 $n$）的情况下，我们所需要的最少金币数（记为 $m_0$）可能会**更少**，也就是最优解更优，

再比如，A1 当中绝对不会存在 $m_0=0$ 的合法解，而本题却可以存在，

所以本题相较于 A1 还可能**增加**了合法解的**种类**。

如果从**博弈论**的角度出发，我们可以很清楚的看到不同的解之间的关系。

我们把**总人数**与**金币数**的**二元组** $(n,m)$ 当做一种**局面**，把**第一个人**能存活的局面叫做**必胜局面**，反之为**必败局面**。

首先我们知道，不论如何，当 $m=\lceil \dfrac{n}{2}\rceil$ 时都是必胜局面，但是在本题的条件之下，最优解肯定会**更小**。

这样思考启发了我们：是否存在当 $m$ **极小时**，比如 $m=0$ 时的**必胜局面**的存在**规律**呢？

如果我们能找到这样一个规律，我们就可以把这样的局面当做其他相邻局面的**后继局面**，那么我们就可以通过反向**扩展**得到将所有局面改为必胜局面的**通解**。

## 局面研究
那么我们先来尝试研究当 $m=0$ 时必胜局面的规律。

首先，局面 $(1,0),(2,0)$ 显然为必胜局面，从 $(2,0)$ 之中我们似乎可以看到一些端倪：

仔细想一想，究竟为什么在 $(2,0)$ 时，不需要任何金币 $1$ 号就可以活下来呢？

我们知道，当根本分不到金币时，个体会依据下一个**优先级**（也就是杀更多的人）来行动，

但是哪怕 $2$ 号会不同意 $1$ 号的方案，至少 $1$ 号会同意自己的方案，那么因为同意的人数与不同意的人数是**相等**的，$1$ 号就得以存活。

我们由此得到启发，可以借这个思路去拓展**下一个**必败和必胜局面：

当以 $(2,0)$ 为后继局面时，设当前局面为 $(n_0,0)$，局面中的**后两个人**一定会不同意 $1$ 号，因为当不断从前往后淘汰人，最终使得人数减为 $2$ 时，此时的局面是必胜局面，也就是说明这两人本就可以存活。

那么根据我们上面说的，如果使得同意与不同意的人数相等，我们就创造出了必胜局面，因此 $(4,0)$ 就是必胜局面，

相应的，如果同意的人数小于不同意的人数，就是必败局面，比如 $(3,0)$。

那么我们以此类推，再以 $(4,0)$ 为后继局面不断拓展，我们会发现得到其他的必胜局面比如 $(8,0)$,$(16,0)$ 等等。

由于在扩展时每次人数翻倍，显然我们有 $(2^k,0)$ 是必胜局面，其中 $k\in \mathbb{N}$。

其余的 $m=0$ 的局面都是必败局面。

## 答案求解
在博弈图上，可以上述内容可以理解为每个局面向最近的必胜局面也就是数值最近的 $m$ 为 $2$ 的**整数幂**的局面连边。

那么对于一般的局面 $(n,m)$，当且仅当 $n=2^k,k\in \mathbb{N}$ 时 $m$ 可以取极小值，那么为了使得其他的情况成为必胜局面，需要排除其后继局面，也就是最近的 $2$ 的整数幂的人数的影响，

即需要至少 $m_0=\dfrac{n-2^k}{2}$，其中 $k$ 为不大于 $n$ 的最大 $2$ 的整数幂的**指数**。

这样做的意义在于：打破当前局面的后继局面的**平衡性**，使得其原先的后继局面不再是一个必胜局面，因此 $2^k$ 个人就不可能是清一色的反对。

这样的策略的正确性很容易证明：

$n-2^k$ 是原先 $m=0$ 时同意与不同意的人数的差值，显然我们只需得到其**一半**的赞成票就可以形成必胜局面。

需要注意的是，由于 $m\in \mathbb{N}$，所以当 $n$ 为**奇数**时，只能取 $k=0$。

## 附上代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int n;
    cin>>n;
    if(n%2)cout<<(n-1)/2;
    else cout<<((n-(1<<__lg(n)))/2);
	return 0;
}
```




































