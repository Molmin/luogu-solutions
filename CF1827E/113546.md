随便定一个根 $r$。

考虑一个叶子 $l$，令 $anc(l)$ 表示 $l$ 通过一条链能到达的最浅祖先。如果存在两个 $anc(l_1),anc(l_2)$ 不是祖先后代关系，那么 $l_1,l_2$ 就不能通过两条链连通，答案是 `NO`。

否则，我们只需要保留一个最深的 $anc(l)$，设为 $v$。如果存在一个点 $u$，一步到不了 $v$，那么答案就是 `NO`，否则答案就是 `YES`，有一个偷懒的办法就是直接以 $v$ 为根再求一次 $anc$，所有点的 $anc$ 都是 $v$ 的话就是 `YES`。

这导出一个简洁的 $O(n\log n)$ 做法。我们没有用到**点分治、树剖、虚树**等数据结构技巧，我们需要的最高级的技术是**求两个点的 LCA**。