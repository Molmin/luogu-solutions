还是再代码里说吧，见下：

```cpp

/*

 
	首先声明本蒟蒻不会高级的算法，dalao们将就一下吧 
	分析： 
	零：存图； 
	一：求连通块；
	二：判断连通块的数字；
	三：保存数字；
	四：输出； 
---------------------------------------------	
华丽的分割线 
	
	
	1：用dfs求联通块；
	2：用联通块的特殊性判断数字； 
	方法如下：
	3.输出呗 
-------------------------------------------------
不华丽的分割线	


数字的组成方式：
#   # # #   # # #   # . #   # # #   # # #   # # #   # # #   # # #   # # # 
#   . . #   . . #   # . #   # . .   # . .   . . #   # . #   # . #   # . # 
#   # # #   # # #   # # #   # # #   # # #   . . #   # # #   # # #   # . # 
#   # . .   . . #   . . #   . . #   # . #   . . #   # . #   . . #   # . # 
#   # # #   # # #   . . #   # # #   # # #   . . #   # # #   # # #   # # # 

所代表的数字：
1     2       3       4       5       6       7       8       9       0


可以看出“1”是5个“*”组成的； 
“2，3，5”是11个“*”组成的； 
“4”是9个“*”组成的； 
“6，9，0”是12个“*”组成的； 
“8”是13个“*” 组成的；
“7”是7个“*”组成的；

通过*的个数可以判断一部分连通块的种类； 

thus 现在只需对2，3，5和6，8，0 判断；
 2，3，5；中只有2的（2，1）和（4，3）是‘.’；3的（2，1）和（4，1）是‘.’；
 6，9，0：中只有6的（2，3）是‘.’；9的（4，1）是‘.’；0的（3，2）是‘.’ 
所以对联通块的判断也结束了

上代码吧
	
*/
#include<bits/stdc++.h>

using namespace std;

int n,m,ss;
int ans=0;//数字的个数 
char tu[110][100990];
bool pd[110][100990];// 判断 
char su[110][100990];
int bao[109900];// 数字保存 
int dx[4]={0,0,1,-1};//四个方向 
int dy[4]={1,-1,0,0};
void dfs(int x,int y)
{
	if(x<0||y<0||x>=n||y>=m||!pd[x][y]) return;//越界判断 
	pd[x][y]=false;
	ss++;//联通块的个数 
	for(int i=0;i<4;i++)
	{
		dfs(x+dx[i],y+dy[i]);			
	}
}
int main()
{
	memset(pd,true,sizeof(pd));
	cin>>n>>m;
	for(int i=0;i<n;i++)
	{
		for(int j=0;j<m;j++)
		{//存图 
			cin>>tu[i][j];
			su[i][j]=tu[i][j];
			if(tu[i][j]=='.') pd[i][j]=false;
		}
	}
	for(int j=0;j<m;j++)
	{
		for(int i=0;i<n;i++)
		{
			ss=0;
			dfs(i,j);//神奇的判定，还算好理解 ，先通过联通快的个数筛一次，再枚举每个数字的特殊点 
			if(ss==5) bao[ans++]=1;
			if(ss==11)
			{
			if(su[i+1][j]=='.'&&su[i+3][j]=='#') 
			bao[ans++]=2;
			else if(su[i+1][j]=='.'&&su[i+3][j]=='.')
			bao[ans++]=3;
			else bao[ans++]=5;
			}
			if(ss==12) 
			{
			if(su[i+1][j+2]=='.') bao[ans++]=6;
			else if(su[i+3][j]=='.') bao[ans++]=9;
			else {bao[ans++]=0;}
			}
			if(ss==13) bao[ans++]=8;
			if(ss==9) bao[ans++]=4;
			if(ss==7) bao[ans++]=7;
		}
	}
	for(int i=0;i<ans;i++)//输出 
	cout<<bao[i];
	return 0;
}

```
