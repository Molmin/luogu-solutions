先做个简单转化：

$a_i\geq i-l+1$ 转化为 $l\geq i+1-a_i$。

考虑更改一次后会对答案有什么影响……

如果变小了，可能导致有些子区间原本到了这就停住了，但更改完就可以过去；当然，反之也有可能。

设更改的位置为 $p$，更改的数为 $x$。

先处理第一种情况，现在更改完可以越过去了，于是我们需要在预处理时先处理出跳过这个点（就先不管它合不合法）可以到达的最远位置，设其为 $c$。为了计算出从哪些点可以越过去，我们还要计算原本可以越过去的子区间中 $l$ 最小是多少，设这些 $l$ 所组成的数组为 $from$。先考虑这个点是不是关键点（这个点为关键点即为这个点是某一个左端点所能到达的最右边的端点），如果不是，明显不用考虑，直接输出原始答案；如果是，则可以在预处理中处理出该点是哪个左端点的关键点，留下最靠左的，设其组成的数组为 $impl$ 故会受到影响的的区间为： $(from_i-1)$ 至 $impl_i$。

然后用前缀和处理出 $c$ 数组即可，设其为 $csum$，则这段区间答案变为：$csum_{from_p}-csum_{max(p-x,impl_p-1)}$。

再考虑第二种情况，则从 $p-x$ 至 $from_p$ 都不行了（运用一开始的转化），发现这个是一段连续的区间，于是可以使用前缀和快速计算，然后这一段区间所有的左端点所能达到的最右端点即为 $p-1$，算一下即可。