 ![](https://cdn.luogu.com.cn/upload/pic/5779.png) 

其实Flip Flappers这个番

讲的就是糖果屋的故事，这点从ED上就可以看出来

现实生活和幻想世界相邻，cocona可以到达幻想世界

 ![](https://cdn.luogu.com.cn/upload/pic/5780.png) 

 ![](https://cdn.luogu.com.cn/upload/pic/5781.png) 

然而cocona可以到达幻想世界是因为她妈是唯一一个可以联通幻想世界和现实世界的人

从最开始就可以发现cocona在奇怪的世界里面，比如她的兔子啊，她住的地方啊。。。

 ![](https://cdn.luogu.com.cn/upload/pic/5782.png) 

 ![](https://cdn.luogu.com.cn/upload/pic/5783.png) 

因为她妈一直潜伏在她身体里面的那个碎片上。。。

cocona和papika一对百合经过艰苦战斗，终于打败了大母神

这个大母神就是mimi，cocona的母亲

然后papika其实是个20岁的人了。。。之前经过了玄学返老还童了。。。

所以说这个番讲的是两个人杀了其中一个人的母亲。。。

有毒。。。

然后。。。

这之后她的世界变正常了。。。

变的。。。正常了。。。

 ![](https://cdn.luogu.com.cn/upload/pic/5784.png) 

 ![](https://cdn.luogu.com.cn/upload/pic/5785.png) 

都以为现实世界和幻想世界的联系切断了

但是最后cocona重新见到了papika。。。

然后。。。又回到了pure illusion？

欢迎大家来研究轻拍学


太。。。厉害了


哦对了忘了说题解了

两个做法

第一个是线段树维护区间min区间max区间和区间平方和

然后通过min和max算出如果这个是连续段，其和和平方和应该是多少

这样就可以了

大概是hash的思想

还有一个是线段树维护区间min区间max，区间每个数值前驱位置的max

不过要麻烦一点
