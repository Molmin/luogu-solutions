~~事实上这道题没什么难的~~

因为不太好维护，所以考虑使用一些正确率高的假做法。

这是 lxl 给出的官方题解：

>第一个是线段树维护区间min区间max区间和区间平方和

>然后通过min和max算出如果这个是连续段，其和和平方和应该是多少

然后我试了一下，用 `unsigned long long` 自然溢出，会发现只拿了 $73 \ \text{pts}$。

应该是要用一个优秀一些的模数。

但是取模好慢啊！

所以维护 $3$ 次方和就行了。。。

讲明白一点，通过求区间的 $\max,\min$ 求出这个区间的左右端点，然后用公式验证这个区间的和是否符合连续区间的性质。

二次方的公式：$\sum_{i=1}^n i^2=\dfrac n 6 \times (n+1) \times (2\times n+1)$。

三次方的公式：$\sum_{i=1}^n i^3=(\sum_{i=1}^n i)^2$。

然后这个括号里的就是一个等差数列求和。。。

代码就不给辣