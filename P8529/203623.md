值得学习！！

这题 spj 有问题，还没有通过，不过解法应该是正确的，本机能过随机数据。

随机取 $B$ 个关键点，每次找到半平面上方第一个关键点。对每个关键点对应的半平面按斜率排序即可。

这里对每个点跑旋转扫描线会贡献 $O(n)$ 次操作，总共就是 $O(nB)$。

然后每个关键点到这个半平面本身期望有 $O(\dfrac n B)$ 个点。

调一下 $B$ 应该就行。

对于半平面莫队的转移（本题解法中并未体现，放在 spj 里面了），需要使用半平面数点的数据结构，具体的 $B$ 应该视使用的数据结构而定。