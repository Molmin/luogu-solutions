## 题意

给定 $n$ 个数的序列 $a_1, a_2, \cdots, a_n$。$m$ 次询问，每次询问给定两个数 $l, r$，需要输出 $\begin{cases}
    \sum \limits_{i=l}^{r-1} \max\{0,a_{i}-a_{i+1}\} && l \leq r \\ \sum \limits_{i=r}^{l-1} \max\{0,a_{i+1}-a_i\} && r < l
\end{cases}$。

## 解法

先考虑暴力，显然就是区间求和，但是由于 $2 \leq n \leq 10^5$，$1 \leq m \leq 10^5$。这个复杂度是 $O(nm)$ 的，显然超时。但是赛时好像有人暴力卡常过了 pretest，不过被 hack 了。

显然区间求和是可以优化的，因为这题没有修改操作，可以预处理出两个前缀和数组，$O(n)$ 预处理，$O(1)$ 单次查询。

当然区间和也可以用线段树或树状数组等数据结构，复杂度 $O(m \log n)$。我赛时就用的是树状数组。