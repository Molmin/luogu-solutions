这题为什么这么多人用倍增啊

倍增求LCA很容易被链卡掉

然而我们有一种~~无敌~~更好的方法求LCA

那就是…

#**树链剖分**

（其他题解里竟然有人说树剖慢...他一定写了假树剖）

（反正树剖比倍增快极了）

树链剖分就是把树剖分成若干条不相交的链

显然的，在链上求LCA是很简单的（倍增算法尴尬极了）

我们只要找到链上两点深度较小的点就行了

所以在链上比在其他连接链的边上快

因此实际应用中我们一般会使用“轻重边树链剖分”

“轻重边树链剖分”指的是将树边分成两类：“重边”和“轻边”

分类方法如下

我们定义Size(x)为以x为根结点的子树的结点个数

对于每个结点u，在它的所有子结点中寻找一个结点v

使得对于u的其他子节点w，都有Size(v)≥Size(w)

此时u有一条重边连向v，有若干条轻边连向u的其他子结点

这样一来，树上的不在重链上的边的数量便大大减少，效率就提高了

把树上的重链划分完以后，就可以开始求LCA了

伪代码如下

```cpp
对于任意两个结点x和y
while(x和y不在同一条重链上) {
    x与y中深度较大的结点移至它所在的重链的顶端的父结点
}
LCA即为x与y中深度较小的节点
```