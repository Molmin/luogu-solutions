## 题意

给定一个字符串 $s$，求出一个字典序最小的字符串 $t$ 满足以下条件：

- $t$ 是一个回文串且长度为偶数
- $t$ 的前半段为 $s$ 的前缀
- $t$ 的字典序小于 $s$

## 题解

结论：若 $s$ 的前两位相同则 $t$ 为 $s$ 的前两位。否则 $t$ 的前半段截止为第一次出现 $s_i<s_{i+1}$ 的 $i$ 处，即 $t$ 的构成为 $s_1s_2s_3\cdots s_is_i \cdots s_3s_2s_1$。

证明：

对于一个 $s_{i+1}\leq s_i$ 的 $i$ 处，选择截止至 $i+1$ 一定比 $i$ 更优，截止至 $i$ 处和 $i+1$ 处的字符串如下：

$s_1s_2s_3\cdots s_{i-1}s_is_is_{i-1} \cdots s_3s_2s_1$

$s_1s_2s_3\cdots s_{i-1}s_is_{i+1}s_{i+1}s_i \cdots s_3s_2s_1$

可以发现在第 $i+1$ 位上两个字符串第一次出现不同，因为 $s_{i+1}\leq s_i$，故下面个字符串更小。