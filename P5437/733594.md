套路

由 cayley 定理知生成树个数为 $n^{n-2}$。又由于边与边之间完全对称，因此一条边的贡献次数显然为 $\frac{n^{n-2}(n-1)}{\binom n 2}=2n^{n-3}$。于是只需求出 

$$
\sum_{i=1}^n\sum_{j=1}^n(i+j)^k
$$

令 $t=i+j$，则上式即为

$$
\sum_{t=3}^{2n-1}t^k\sum_{i+j=t,1\le i<j\le n}1
$$

不妨把后面的合式记为 $f(t)$，就是

$$
f(t)=\sum_{i+j=t,1\le i<j\le n}1
$$

容易发现 $f(t)=f(2n+2-t)$，因此把式子拆成两部分算：

$$
\left(\sum_{t=3}^{n+1}f(t)t^k\right)+\left(\sum_{t=n+2}^{2n-1}f(t)t^k\right)
$$

注意到 $f(t)$ 在 $t\le n+1$ 时其实就是 $\lceil\frac{t}{2}\rceil-1$，然后需要注意到 $k$ 是不大的，再看一看我们的式子，自然数幂乘上某一个线性的系数再求和，就是一个关于 $n$ 的 $k+2$ 次多项式（自然数幂之和就是 $k+1$ 次，而这个东西相当于自然数幂和的某个奇怪后缀和，当然就是 $k+2$ 次啦 qwq），然后乱插一下值就行。

说到这，有必要推广一下线性插值了。通常来说，插值分为两部分：先计算出前一部分的点值，再然后套公式插一下。当点值的 $x$ 坐标是连续的时候，容易做到 $O(k\log k)$。怎么严格线性呢？对于这道题，你可以先通过 $g(x)=x^k$ 是完全积性函数这一性质线性筛出来所有的 $g$。具体地，考虑只在质数处计算点值，其余的用筛，那复杂度就是 $O(\frac{k}{\ln k}\log k)=O(k)$。然后再做一遍奇怪后缀和就能得到所有点值。插值过程的话，很经典的使用线性求逆元即可。总复杂度 $O(k)$。

可能有一些 corner case 没有考虑到啦，但是这篇题解也只是旨在给大家介绍一些套路而已 qwq。