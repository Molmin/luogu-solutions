首先将两条坐标轴顺时针旋转 $45^\circ$，再将坐标轴缩短至原长度的 $1 \over \sqrt{2}$，则终点坐标变为 $(x-y,x+y)$，原本的向右变为 $(d,d)$，向上变为 $(-d,d)$，向左变为 $(-d,-d)$，向下变为 $(d,-d)$。

那么此时，我们可以发现，操作已经变成了可以对横纵坐标任意地 $\pm d$，这就意味着横纵坐标在这种操作下是独立的。此时问题就变成了一个简单的 01 背包问题：你每次可以给一个最初是 $0$ 的数加上或减去 $d_i$，问最后能否凑成一个数。本来直接 bitset 优化即可，但出题人神必地卡了一手空间，让你不能开 $n$ 个大小为 $2000 \times 1800 \times 2=7200000$，但开成大小是 $2000\times 1800=3600000$ 是可以的。我们接着又可以发现，设所有的 $d_i$ 和为 $s$，其实原问题还等价于每次选择加不加 $d_i$，最后能不能凑出 ${x+s}\over 2$，原因是设你如果能凑出，设你选出的要加的 $d_i$ 的和为 $s1$，则 $s1={x+s}\over 2$，则 $x=2s1-s$，而你实际选出（按有加有减算）的和为 $s1-(s-s1)=2s1-s$，实际上仍是等于 $x$ 的，这样就将空间缩小至原本的 $1 \over 2$ 了，可以通过本题。

[Code](https://atcoder.jp/contests/abc221/submissions/43023909)