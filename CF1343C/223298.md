我们可以把这个序列根据正负性看做 $k$ 个正负不同的连续子序列，则我们想要选出序列长度最长，则这 $k$ 个序列一定都要选一个。如果我们想要选出和最大，只需要选择每一个序列的最大值就行了。

个人的实现方法比较麻烦，代码仅供参考。

###  [$\mathcal{Code}$](https://codeforces.ml/contest/1343/submission/77525487)