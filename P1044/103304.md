看了一下，这道题还没有python的题解，以及对于卡特兰数的证明，没有折线法，我来一个.

从题目以及众多题解，我们可以知道这道题是一道卡特兰数，而卡特兰数的最终算数表达式子为：$\frac{(2n)!}{(n+1)!(n)!}$.

**证明过程：**

我们已经知道，栈有两种操作，入栈和出栈.对此，我们可以建立一个坐标系.

像这样:

![](https://cdn.luogu.com.cn/upload/image_hosting/n6qtja5n.png)

我们可以把

**黄色的线作为入栈操作，由$(x,y)$变成$(x+1,y+1)$**

**绿色的线作为出栈操作,由$(x,y)$变成$(x+1,y-1)$**

这样，我们就可以把问题抽象为从(0,0)到(2n,0),有多少种合法方案数

我们先来考虑这样一个问题，因为我每一次操作都可以让x+1,那么我总共要进行2n次操作，考虑到最后的栈要为空，所以**入栈次数等于出栈次数=n**,所以方案数则为$C_{2n}^n$.

**但是！！！**
我们这样，会出现非法的情况，也就是线越过x轴的情况（栈已经空了，但是还在弹出元素），也就是这种情况:

![](https://cdn.luogu.com.cn/upload/image_hosting/zgt6vmfu.png)

对于这种情况，我们可以设k为第一次与y=-1那条图线的交点，然后把交点以后的点都关于y=-1对称（即，交换操作1和操作2）

![](https://cdn.luogu.com.cn/upload/image_hosting/z5r69x8g.png)

由于我们现在的终点变成了$(2n,-2)$,所以我们的入栈次数肯定等于出栈次数-2,入栈次数加出栈次数等于2n,所以入栈为n-1次，出栈n+1次，则有不合法的总方案数为$C_{2n}^{n-1}$,所以最终结果为$C_{2n}^{n}$-$C_{2n}^{n-1}$.

根据组合数的定义，

![](https://cdn.luogu.com.cn/upload/image_hosting/xtfqh80e.png)


化简可以得到最终答案为$\frac{(2n)!}{(n+1)!(n)!}$,完结

**code:**

```python
n=int(input())
m=2*n
a=1
for i in range(1,m+1):#计算(2n)!
    a=a*i
b=1
for i in range(1,n+2):#计算(n+1)!
    b=b*i
c=1
for i in range(1,n+1):#计算n！
    c=c*i
ans=int(a/(b*c))
print(ans)
```
