- $Kruskal$重构树
- 倍增
- 主席树

做一遍$Kruskal$重构树

那么点权从深度大的到小的单调不降

从$v$倍增到最后一个小于等于$x$的点

此时这个点的子树就是$v$能到达的满足要求的点的集合

主席树维护子树第$k$大即可.

这样一个码题居然是蓝色的……