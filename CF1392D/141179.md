一道比较好的dp题，小蒟蒻实现的时候犯了很多sb错误。

观察一下，发现答案只能由若干个 $\text{RL,RRL,RLL,RRL}$ 这样的串组成，即连续的 $L$ 和 $R$ 的数目不大于 $2$，并且以 $R$ 开头，$L$ 结尾。

下文中令 $L$ 为 $1$，$R$ 为 $0$。

那么先考虑当是一个队列（即首尾不连接）而不是一个环的时候怎么做：设$dp_{i,0/1,1/2}$表示到第$i$个数，这个数为$0/1$，已经连续了$1/2$次。

那么状态转移方程就很快能够推出来：

$dp_{i,0,1} = \min (dp_{i-1,1,1} , dp_{i-1,1,2}) + (a_i == 1)$

$dp_{i,0,2} = dp_{i-1,0,1} + ( a_i == 1 )$

$dp_{i,1,1} = \min(dp_{i-1,0,1},dp_{i-1,0,2}) + ( a_i == 0 )$

$dp_{i,1,2} = dp_{i-1,1,1} + a_i == 0$

其中， $(a_{i}==0)$ 表示当 $a_i=0$ 是返回 $1$ ，否则返回 $0$ 。反之亦然。

初始化也很容易得到：

$dp_{1,0,1}=(a_1==1),dp_{1,1,1} = dp_{1,0,2} = dp_{1,1,2} = \inf$ 

那么最后的结果就是 $\min(dp_{n,1,1},dp_{n,1,2})$ 。

那么，如果是一个环呢？

我们发现一个环中的答案，必然是由一种队列的答案推出来的，因为组成这个答案的串的长度最多是 $4$，那么我们对队列左移$/$右移$0 - 3$格，一定就有一个就是答案。

[code](https://www.luogu.com.cn/paste/1z7enh93)