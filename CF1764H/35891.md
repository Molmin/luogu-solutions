题意：

有一个长度为 $n$ 的序列 $a$，第 $i$ 个位置的初始值为 $i$。对一个区间 $[l,r]$ 对应的操作是把序列中对应区间的每个元素都变为 $a_l$。

对一个区间序列 $L_1,L_2,\cdots,L_k$，称其贡献为：依次进行这些区间对应操作后，序列 $a$ 的不同元素数量。

给定 $m$ 个区间 $L_i=[l_i,r_i]$ 和常数 $k$，对每个 $j$ 求区间序列 $L_j,L_{j+1},\cdots,L_{j+k-1}$ （模 $m$ 意义下）的贡献。

$n,m,k \le 2\times 10^5$

---

考虑每个颜色，对哪些 $j$ 产生了贡献。

如果一个 $j$ 对应的区间都不包括位置 $k$，那么颜色 $k$ 一定产生贡献。扫描线计算这部分贡献。

否则，只有某些区间的左端点才有可能出现。

我们考察对一个区间，进行操作后要到哪个区间才会使它的影响消失。

记 $f_i$ 表示区间 $i$ 什么时候被全部覆盖，$g_i$ 表示区间 $i$ 的影响什么时候消失，$t_i$ 表示 $i$ 的左端点上次被覆盖的区间。那么就有 $g_i=\max(f_i,g_{x}[t_x=i])$。

于是一个颜色 $x$ 产生贡献的条件就是：选择的区间序列的区间 $[L,R]$ 必须满足 $t_x<L$ 且 $g_x>R$。那么就易于统计这部分的答案了。

总复杂度 $O(n\log n)$，可以通过此题。
