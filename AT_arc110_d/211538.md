对于计数题，我们可以选择组合意义。

我们可以发现，每一项的 $\tbinom{b_i}{a_i}$ 转化为 $\tbinom{a_i+d_i}{a_i}$，也就是向 $a_i$ 个球中插入 $d_i$ 个球的方案数。

因此我们构造一个序列：

挡板，$a_1$ 个黑球，挡板，$a_2$ 个黑球，挡板.....，$a_n$ 个黑球

我们可以发现，现在在这个序列中插入 $m-\sum a_i$ 个球的方案数，等价于原问题所求！

因为最终在第 $i$ 个挡板后的球总数恰好对应一个原先合法的序列 $b_i$，权值正好等于放到这种状态的方案数 $\prod_{i=1}^n \tbinom{b_i}{a_i}$。

所以答案即为$\tbinom{m+n}{\sum a+n}$，暴力求即可，复杂度为 $O({\sum a+n})$。

 _[代码](https://www.luogu.com.cn/paste/rk0y8y3b)_ 
