这题实际上还有O(1)的做法。

初看这题，第一反应应该是有2种情况：允许借烟或者不允许借烟。比如说，如果n=2，k=3，如果允许借烟的话，可以借一根烟，抽完3根烟之后用3个烟蒂去还一根烟，这样答案为3，如果不允许借烟则为2。好在第二个样例告诉我们是不允许借烟的，否则答案应为15。

不难发现，即使是一道数学题，不借助计算机，在n，k都不大的情况下也能算出答案。我们可以设最终能抽x根烟，则x-n为额外抽的烟数，(x-1)/k为用烟蒂能换到的烟数（因为不允许借，否则是x/k），易知x-n<=(x-1)/k，化简后可得到x<=(kn-1)/(k-1)，则[(kn-1)/(k-1)]则为答案。

以下是代码：

```cpp
#include<cstdio>
int main(){
    int n,k;
    scanf("%d%d",&n,&k);
    printf("%d\n",((long long)n*k-1)/(k-1)); //n,k<=10^8，所以用long long 
    return 0;
}

```