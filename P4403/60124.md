[题目传送门](https://www.luogu.org/problemnew/show/P4403)

二分答案，个人感觉其实并不只适用于有明显的“最大值最小/最小值最大”条件的题目，其实也可以称它为一种“优化的暴力”。这题就是最好的例子。

我们肯定可以先想出朴素的算法：把每个点的答案都算出，但是平方级别的复杂度，铁定超时。

我们考虑用二分优化。这道题的二分其实挺难看出的：因为题目约束奇数人数的点要有也只有一个，也就是说其他有人的点上人数一定为偶数。显然偶数+偶数=偶数，如果没有奇数出现，那么统计的人数和都是偶数。

我们可以从这个性质出发。二分位置$i$，但是二分的不是最终的结果而是一个约束的范围。再具体地说，如果$[1,mid]$中的人数是奇数那么答案肯定在这个区间中，使$r=mid$，否则在右边的区间，即使$l=mid+1$。

因此我们只要统计人数就行了==。

本人代码写的十分糟糕，大家可以看@钟梓俊 dalao的优秀代码233.