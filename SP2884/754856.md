有一个非常有趣的性质，我们矿物之间的贡献是连着的。这样一来，我们就可以事先通过前缀和，预处理出每一行，每一列矿物的价值。然后考虑动态规划。我们令 $f_{i,j}$ 表示第 $i$ 行，第 $j$ 列的最大花费，因为刚刚发现的性质，发现 $f_{i,j}$ 只和 $f_{i-1,j}$ 和 $f_{i,j-1}$ 有关。我们用 $h_{i,j}$ 和 $l_{i,j}$ 表示行和列的前缀和，不难发现转移就是 $f_{i-1,j}+h_{i,j}$ 和 $f_{i,j-1}+l_{i,j}$ 中的较大者。