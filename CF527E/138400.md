提供一个不用欧拉回路的做法。（其实是自己降智了

首先，「每个点入度和出度都是偶数」等价于「每个点入度是偶数且在无向图上的度数是偶数」。这样，把无向图上每个点度数补齐到偶数是必要的：由于总度数 $2m$ 是偶数，那么度数是奇数的点肯定有偶数个，可以两两配对连边，使加边数达到了下界。

接下来还要满足每个点入度都是偶数。一个必要条件是每个点入度之和（显然也就是 $m$）是偶数。于是如果 $m$ 是奇数，需要再随便加一条边。

此时已经可以给出构造方案了，加边数显然达到下界。不同于其他题解的是，我不是用欧拉回路构造方案的。

先给每条边随意定向，算出每个点的入度。类似于本篇题解第二段地，整出所有入度是奇数的点，由于入度之和是偶数，这样的点一定有偶数个，可以两两匹配。

不能再加边了，那么匹配的每一对怎么调整呢？由于图是连通的，容易发现，找到两点间的任意一条路径（找路径时视为无向图），将上面的边全部反向即可。因为令某个点 $x$ 的一条邻边反向，能使 $x$ 的入度奇偶性翻转；而一条路径上只有两端被翻转了奇数次（一次），中间点都被翻转了偶数次（两次）。

暴力找路径，最坏会达到 $\mathrm O(n^2)$，怎么办呢？dfs 树是个好东西。建出 dfs 树，翻转两点间的树上唯一简单路径，树上差分即可。