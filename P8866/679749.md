考场上挂成 30 分了，很气。

考虑部分分情况即 $k=2n-2$，此时我们预留出一个空栈，剩下的栈每一个栈分配两种颜色，如果所有非栈的栈都满了，那么根据鸽巢原理栈里的所有元素都不重不漏，如果是压在底下的就进空栈然后 2 操作消除，否则就压到它所在的栈上面。

容易发现，这样操作的话栈最大大小不超过 2。

考虑把做法扩展到 $k=2n-1$，还是一样预留空栈，但是颜色多了一个，也就是说可能会出现这种情况：除了空栈其他栈都是满的，此时还有一种颜色没有选中过，我们应该怎么办呢？

我们把栈划分成两种，第一种是下面的先被消掉，第二种是上面的先被消掉。

如果有栈属第一种，那么我们就把这个颜色叠上去，因为先消下面的，下面的消掉后这个栈又会变成大小为 2 的栈。

如果所有栈都属第二种，那么我们就把当前元素丢进空栈里，然后找到所有栈中栈底最先被消掉的栈，钦点他为空栈。

为什么？

比较显然，接下来在空栈出现之前都不会用到空栈，如果用到了空栈就会归到到第一种去。

然后就做完了，CCF 怎么天天出这种答辩模拟题啊。