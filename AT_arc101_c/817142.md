只要有信念，就一定能成功！

### [题意](https://www.luogu.com.cn/problem/AT4352)
给定一棵 $n$ 个节点的树，你要给节点两两配对，满足配对之后的路径覆盖整树，$n\le 5000$。

### 分析
利用组合数学可以算出总方案是 $\prod_{i=1}^{n/2}(2i-1)$ 的非常巨大，考虑用容斥原理转化一下，钦定哪个集合的边不存在来容斥，可以得到 $O(2^nn)$ 复杂度的方法，[代码](https://www.luogu.com.cn/paste/zslk83za)。

为了方便，我们设定函数 $\gamma(n)$ 满足:
$$\gamma(n)=-\prod_{i=0}^{\lfloor n/2\rfloor}(n-2i-1)$$

那么形式化表述，就是对于任何一种断边方案 $S$，形成的极大连通块大小 $c_{1},c_2,\cdots ,c_m$，都对答案有贡献（显然最后答案需要取负）：
$$\prod_{i=1}^m\gamma(c_i)$$
我们知道著名的乘法分配律满足：
$$(\sum_{i}a_i)(\sum_{j}b_j)=\sum_{i,j}a_ib_j$$

设 $f(u,i)$ 表示考虑子树 $u$ 的，不考虑包含 $u$ 的某个大小为 $i$ 的连通块，其它部分的贡献之和，那么容易发现，在子树贡献时：
$$f(v,i)f(u,j)\to f(u,i+j)$$
而在子树贡献完成时，还有：
$$f(u,0)=\sum_{i=1}f(u,i)\gamma(i)$$
而直接暴力这样做，根据经典的树上背包的结论，复杂度即为 $O(n^2)$，[代码](https://www.luogu.com.cn/paste/gn7xfwjm)。