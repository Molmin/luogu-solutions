做法 $1$：$\text{SPFA}$ 最短路

很显然，如果建图的话只会考虑梯子对应的节点和 $(1,1)$ 还有 $(m,n)$。

如果对于互相可达的梯子，都连边的话边数最多是 $O(k^2)$ 的。

但因为同一层的关键点之间是一条链的关系，所以只用连相邻的节点即可。

建图的时候把每层楼的梯子的位置排个序，相邻的点连边，梯子对应的点也连边。最后再把起点和重点加进图里。

建图 $O(k \log k)$，最短路 $O(k^2)$，因为建出来的图就是网格图所以会被卡。

做法 $2$：分层处理

延续上面的建图抽象问题的方法，逐层求解。

因为梯子是单向的，所以把同一行的所有关键点拿出来变成一条数轴，每个点有位置和最短路。

假设当前考虑到的第 $u$ 层的关键点的分别是 $p_1,p_2,\cdots,p_t$，距离分别是 $d_1,d_2,\cdots,d_t$。

那么 $d_x=\min\limits_{1\le i\le t}d_i+x_u|p_i-p_x|$，讨论正负拆绝对值即可。

处理完第 $u$ 层之后顺着梯子更新一下可达的节点的距离。

复杂度瓶颈在排序的 $O(k\log k)$。