### 题目大意

给定 $n$（$5 \le n \le 2500$）个点 $m$（$1 \le m \le 10^4$）条边的无向简单图，结点依次编号为 $1\sim n$ 的整数．编号为 $i$ 的结点有 $a_i$（$1 \le a_i \le 10^{18}$）的整数点权．定义一个五元组 $(c_1,c_2,c_3,c_4,c_5)$ 是「符合条件的」的，当且仅当：

- $c_1 = 1$．
- $c_1,c_2,c_3,c_4,c_5$ 互不相等．
- $\forall$ 整数 $i \in [1,5]$，均有 $\operatorname{dis}(c_i,c_{i \bmod 5 +1}) \le K$．其中 $\operatorname{dis}(i,j)$ 表示连接结点 $i$ 与 $j$ 的路径中包含边数最少的路径所包含的边数，$K$ 为一给定常量．

定义一个五元组的权值为五个点的点权之和，求出权值最大且符合条件的五元组的权值，保证存在至少一组符合条件的五元组．

### 简要做法

首先以每个点为开始跑 BFS，求出任意两个点之间的最短路．

考虑在固定 $c_3,c_4$ 两个点的条件下找出权值最大的 $c_2$ 和 $c_5$．发现 $c_2$ 与 $1$、$c_3$ 的距离，$c_4$ 与 $1$、$c_5$ 的距离不能超过 $K$．考虑对于每个结点，预处理出一个集合代表该点作为 $c_3$（或 $c_4$）时，有哪些点可以作为 $c_2$（或 $c_5$）．然后枚举预处理出的集合，依次检查选出的 $c_2$ 和 $c_5$ 是否与已有的点重复，并更新答案．

上述做法时间复杂度为 $O(nm + n^4)$．无法通过本题．需要进一步优化．

我们发现处理 $c_2$ 与 $c_5$ 的时候，没有必要依次检查集合中的所有元素．根据鸽巢原理，不妨设当前处理的是 $c_2$，则该点只可能会和 $c_3,c_4,c_5$ 重复．因此我们可以只保留集合中权值最大的四个不同的结点，则一定存在一个结点不与这三个结点重复．处理 $c_5$ 时的情况同理．由于对于每对 $c_3,c_4$ 只需枚举常数对 $c_2,c_5$，时间复杂度为 $O(nm + n^2)$．可以通过本题．