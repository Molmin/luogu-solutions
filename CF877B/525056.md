#### 这种最值字符串的题首选考虑 DP 啦~~

# 题意分析

对于这道题，看起来三个部分很高深的样子，实际上就是给你一个字符串，问你如何修改删除可以得到分别是 $a$ $b$ $a$ 的形式，也就是一个最优解问题

# 状态定义

那么首先我们需要解决的是基本的状态，这里我们可以考虑二维转移：有 $dp_{i, j}$ 那么第一维我们控制前 $i$ 个字符，第二维我们控制切割到了前 $j$ 个部分，举个例子 $dp_{5, 2}$ 它的实际意义就是说对于给出的这个字符串，前 $5$ 个字符，切割到第 $2$ 个部分我们的最长的长度

# 状态转移

有了上面状态定义的基础，转移就好写多了，那么这里的转移我们需要考虑两种情况，假设我们讨论第二个部分，那么第 $i$ 个字符，它可以是第二个部分的第一个字符，也可以是第二个部分的第若干个字符，再对于这两个部分取最大进行转移，第三个部分同理

# AC CODE

```cpp
#include <bits/stdc++.h>
#define maxn 5005
using namespace std;
char s[maxn];
int dp[maxn][4], len;
int main() {
	cin >> (s + 1);
	len = strlen(s + 1);
	for (int i = 1; i <= len; i++) {
		dp[i][1] = dp[i - 1][1] + (s[i] == 'a');
		dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + (s[i] == 'b'); //分别讨论两个部分
		dp[i][3] = max(dp[i - 1][2], dp[i - 1][3]) + (s[i] == 'a');//同上
	}
	cout << max(dp[len][1], max(dp[len][2], dp[len][3])) << endl; //因为可以为空串，所以三个部分取最大
	return 0;
}
```


