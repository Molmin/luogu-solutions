本人觉得可能是最短而完整易解的代码了，31行（没有压行）QWQ

首先，在输入的时候借鉴了一下楼下的写法，使用while来输入，因为这样可以十分方便地省略空格，免去不必要的困扰。

然后就很简单了，搜索中间的"?"在第几个位置上，同时将另外两个数搜索出来，然后就枚举6种情况：

* 中间有"+"号，且空位在第一个位置上，答案是第三个数-第二个数

* 中间有"+"号，且空位在第二个位置上，答案是第三个数-第一个数

* 中间有"+"号，且空位在第三个位置上，答案是第一个数+第二个数

* 中间有"-"号，且空位在第一个位置上，答案是第三个数+第二个数

* 中间有"-"号，且空位在第二个位置上，答案是第一个数-第二个数

* 中间有"-"号，且空位在第三个位置上，答案是第一个数-第三个数

owo，下面是蒟蒻的代码：

```
#include<bits/stdc++.h>//万能头
using namespace std;
int i,x,a[10],b[10];//循环量，一个普通的变量qwq，一个记录数字的数组，一个记录"?"号的数组
string t,s;
int main(){
    while(cin>>t)//循环输入，运用cin的特点去除空格
        s+=t;//连接
    for(i=0;i<s.size();i++){//搜索"?"与另外两个数
        if(s[i]=='?')//搜索到"?"号
            b[++x]=1;//标记
        if(s[i]<'0'||s[i]>'9')//不属于数字
            continue;
        for(x++;s[i]>='0'&&s[i]<='9';i++)//读取数字，并存储数字
            a[x]=a[x]*10+s[i]-48;
    }
    if(s.find('+')<s.size())//有"+"号
        x=1;//标记
    else x=0;
    if(x&&b[1])//第一种情况
        printf("%d\n",a[3]-a[2]);
    else if(x&&b[2])//第二种情况
        printf("%d\n",a[3]-a[1]);
    else if(x&&b[3])//第三种情况
        printf("%d\n",a[1]+a[2]);
    else if(!x&&b[1])//第四种情况
        printf("%d\n",a[2]+a[3]);
    else if(!x&&b[2])//第五种情况
        printf("%d\n",a[1]-a[3]);
    else printf("%d\n",a[1]-a[2]);//第六种情况
    return 0;
}
```