总之就是线段树维护树链剖分+dfs序；


详细题解和代码见链接咯：

http://blog.csdn.net/ww140142/article/details/46957597
