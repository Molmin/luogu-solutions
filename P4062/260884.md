- 此题为开摆计划 T1。
- 某些给我点踩的~~好自为之~~。

**[题意](https://www.luogu.com.cn/problem/P4062)**
- 给出一个数列，找出所有存在布尔什维克数（大于 $n/2$）的区间。

**做法 1**
- $O(n^2)$ 做法过于逊，不讲。
- 下面的其它做法都以枚举颜色而非枚举区间，这告诉我们多角度思考的重要性。

**做法 2**
- 首先，布尔什维克数它是一个数！所以我们尝试枚举它。
- 出现次数大于 $\sqrt n$ 的我们称为布数，否则称为孟数。
- 对于布数，$O(n)$ 求前缀和，那么我们的判定就是：
$$2(S(r)-S(l))> r-l$$
$$2S(r)-r> 2S(l)-l$$
- 看似是二维偏序不可以快速计算，但是你发现，我们每次查询的位置变换幅度很小：加一或减一，我们可以在这里动态维护前缀和更新，这里的复杂度是 $O(n)$ 的。
- 接下来是对于孟数，我们可以平方枚举以任意两个点为重心向外拓展的方案数，这个时候我们需要用到一开始的式子。
$$2(S(r)-S(l))> r-l$$
- 我们可以得到区间的最大长度，然后接下来变成一个经典的问题（可以 $O(1)$ 计算）：
$$\sum_{i=1}^n\sum_{j=1}^m[i+j\le k]$$
- 综上，总的复杂度为 $O(n\sqrt n)$，[代码](https://www.luogu.com.cn/paste/inixjoyw)。
- 有更优的解法吗？显然有。

**做法 3**
- 真的就不可以有关于颜色数的更好的做法了吗？
- 让我们看看一开始那个做法，当没有颜色的时候，数列一定是一个递降序列，所以咱们相当于区间加，查询区间前缀查询的和。
- 这玩意当然可以魔改，由可差分性直接魔改成单点加，$3$ 阶前缀和查询，运用[这里](https://www.luogu.com.cn/blog/luo1gu1zui1bang1/ci-fen-yu-qian-zhui-hu-di-jian-dan-ji-lu)的简单知识，我们可以得到 $O(n\log n)$ 的算法，[代码](https://www.luogu.com.cn/paste/sw772uwv)。