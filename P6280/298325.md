作为Gold组的T3还是可以的。这题是一道DP题。

还是[双倍经验](https://www.luogu.com.cn/problem/P4161)。

我们看一下题目给的例子：

0 步：$(1,2,3,4,5)$

1 步：$(3,1,2,5,4)$

2 步：$(2,3,1,4,5)$

3 步：$(1,2,3,5,4)$

4 步：$(3,1,2,4,5)$

5 步：$(2,3,1,5,4)$

6 步：$(1,2,3,4,5)$

从这个里面可以发现操作$6$次之后回到了原来的样子，所以这个是有循环规律的，形成了一个环。而且可以得出，操作多少次能变回来就相当于所有环长度的lcm。

枚举一些素数，一个数组表示这些素数的幂次方，一个数组记最后的答案。

所以可以发现问题就变成了$dp_{i,j}$为前$i$个数的和为$j$是操作的次数。

每次一个新的质数$p$，我们让答案乘以枚举的$p$的$k$次幂（$p^k$），并且这是一个背包问题，所以可以把这个问题压成一维，省掉“前$i$个数的和”那块。

判断素数函数：

```
bool IsPrime(long long n) { //Prime number calculator
    for (long long i = 2; i * i <= n; i++) {//起到了枚举到sqrt(n)的作用，更快
        if (n % i == 0) return false;
    }
    return true;
}
```
