## 做法

较为简单的贪心。

先考虑不存在特殊权力，即每次都是大牌获胜。假设这次对方出的是 $a_i$。分情况讨论：

- 若 $a_i$ 是还没有打出的牌中的最大值，显然我方无论如何都无法得到这局的分，因此打出最小的牌。

- 若 $a_i$ 不是最大值，则一定可以出一张牌赢得这一局，显然最优方案是出大于 $a_i$ 的最小值，也就是 `upper_bound`。

而使用特殊权力，即每次都是小牌获胜，把情况反转即可。

可以考虑枚举中点，即使用权力的点 $i$，然后对于每一种情况计算答案，使用 `set` 的复杂度是 $O(n^2 \log n)$。显然超时。

设两个序列 $c1, c2$，$c1_i$ 表示前 $i$ 张牌不使用权力，即大牌获胜时最多赢的轮数，$c2_i$ 表示从第 $i$ 张牌到第 $n$ 张牌使用权力，即小牌获胜最多赢的轮数。特殊地，$c1_0 = 0$，$c2_{n+1} = 0$。

可得答案为 $\max_{i=0}^n c1_i + c2_{i+1}$，时间复杂度 $O(n \log n)$，足以通过。