## 题意

$n$ 行 $m$ 列的网格中有 $k$ 个点，你每次可以从一个点花费 $0$ 块钱到达另一个与它四连通的点。除此之外，你还可以花费 $1$ 块钱从 $(x_1,y_1)$ 到达 $(x_2,y_2)$（需满足 $|x_1-x_2| \le 1$ **或** $|y_1-y_2| \le 1$）。求 $(1,1)$ 到 $(n,m)$ 的最小花费。

## 思路

对于网格中的 $n$ 个行，$m$ 个列和 $k$ 个点在新图上建立一些一一对应的虚点。

那么不难想到建图方式：第 $i$ 个点向第 $r$ 行（$|x_i-r| \le 1$）和第 $c$ 列（$|y_i-c| \le 1$）分别连一条边权为 $1$ 的边，反过来第 $r$ 行和第 $c$ 列向第 $i$ 个点连一条边权为 $0$ 的边（因为点切换到行/列的需要花费 $1$，而从行/列切换到具体的点不需要花费），然后每个点再向与自己四连通的另外的点分别连一条边权为 $0$ 的边。跑最短路即可。

由于图上的边权全都为 $0/1$，因此可以用 01bfs 求最短路。

## 代码

[code](https://pastebin.ubuntu.com/p/PchkF6yBBv/)