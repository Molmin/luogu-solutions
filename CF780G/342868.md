# 题解

- 开始以为是个模拟，结果 $1\leq h\leq 10^9,1\leq w,n\leq 10^5$。那么我们只能考虑 $O(n)$ 或 $O(n\log n)$ 的做法。

- 由于我们初始有 $w$ 个小球，穿过屏障时最有会多一个小球，而每一高度最多只有一个屏障，所以小球的个数在 $n+w$ 之内。

- 所以，我们可以每一列维护一个栈，记录该列还存在的小球。屏障的话，我们需要知道哪一些球会落在上面。可以用线段树维护区间中最低的球，判断其会不会落在屏障上，是则将球记录在栈中，并退栈；否则，处理完当前屏障。

- 最后的答案即为每个栈中的球的个数和。

- 由于我们需要对每个球用线段树进行处理，所以最终的时间复杂度为 $O((n+w)\log w)$。

- 代码懒得写了。