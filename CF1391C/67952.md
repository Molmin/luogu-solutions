## 题目分析
这题面很长……大概就是每个点朝两侧第一个大于它的位置连边，问有环的方案数。  

大概思考一下，可以发现对于某个点，若左右两边都有大于它的数，那么必定存在环。那么我们要计算这样的方案数，容易想到使用总方案数减去没有这样的一组数存在的方案数。  

而什么情况不存在这样的一组数呢？答案是这个排列是类似于“合唱队形”的，也就是先递增再递减。而中间的峰值明显应该为 $n$。那么对于除了 $n$ 外的 $n-1$ 个数，每个数都有两种放法：在 $n$ 左侧或在 $n$ 右侧，且若所有数关于 $n$ 的相对位置确定后，整个排列实际上已经确定了——因为要遵循序列的单调性。那么显然，不存在这样一组数的方案数总共为 $2^{n-1}$。而 $n$ 个数的排列总数为 $n!$，故答案即为 $n!-2^{n-1}$。  

## 代码
记得 `long long`。
```cpp
#include<cstdio>
using namespace std;
const int mod=1e9+7;
int n,ans=1,t=1;
int main()
{
	scanf("%d",&n);
	for(int i=2;i<=n;++i)
	{
		ans=(long long)ans*i%mod;
		t=((long long)t<<1)%mod;
	}	
	printf("%d",(ans-t+mod)%mod);
	return 0;
}
```