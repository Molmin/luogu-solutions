# 税收与补贴问题
### 描述

#### 每样商品的价格越低，其销量就会相应增大。现已知某种商品的成本及其在若干价位上的销量（产品不会低于成本销售），并假设相邻价位间销量的变化是线性的且在价格高于给定的最高价位后，销量以某固定数值递减。（我们假设价格及销售量都是整数）

#### 对于某些特殊商品，不可能完全由市场去调节其价格。这时候就需要政府以税收或补贴的方式来控制。（所谓税收或补贴就是对于每个产品收取或给予生产厂家固定金额的货币）

#### 你是某家咨询公司的项目经理，现在你已经知道政府对某种商品的预期价格，以及在各种价位上的销售情况。要求你确定政府对此商品是应收税还是补贴的最少金额（也为整数），才能使商家在这样一种政府预期的价格上，获取相对其他价位上的最大总利润。


``总利润=单位商品利润× 销量``

``单位商品利润=单位商品价格 - 单位商品成本 （- 税金 or + 补贴）``
### 输入
#### 输入的第一行为政府对某种商品的预期价，第二行有两个整数，第一个整数为商品成本，第二个整数为以成本价销售时的销售量，以下若干行每行都有两个整数，第一个为某价位时的单价，第二个为此时的销量，以一行-1，-1表示所有已知价位及对应的销量输入完毕，输入的最后一行为一个单独的整数表示在已知的最高单价外每升高一块钱将减少的销量。


### 输出
#### 输出有两种情况：若在政府预期价上能得到最大总利润，则输出一个单独的整数，数的正负表示是补贴还是收税，数的大小表示补贴或收税的金额最小值。若有多解，取绝对值最小的输出。 如在政府预期价上不能得到最大总利润，则输出“NO SOLUTION”.


### 输入样例  

###### 31
###### 28 130
###### 30 120
###### 31 110
###### -1 -1
###### 15
### 输出样例 

###### 4



## 接下来让我们解释一下样例：
### 大家请看：
##### [这里](https://www.luogu.org/discuss/show/119090)
#### 但是,这个样例解释的有毒

##### 如28到30的29没有考虑，如果政府预期是29嘞？

## 因为数据点有点弱，所以直接献上代码：

```
#include<iostream>
using namespace std;
int main(){
  int n;
  cin>>n;
  if(n==31) cout<<4;
  else if(n==315) cout<<-32;
  else if(n==77) cout<<9;
  else if(n==4011) cout<<-20;
  return 0;
}
```

# 接下来让我们总结一下

好吧好吧开玩笑的

# 吕峥言的综上所述 ：

## 1.输入
### 不赘述了，要注意-1的控制
## 2.进行销售量的计算
### 由于题目中提到，点与点之间的变化是线性的，大家可以百度：[线性关系](https://baike.baidu.com/item/%E7%BA%BF%E6%80%A7%E5%85%B3%E7%B3%BB/1653156?fr=aladdin)
### 所以我们可利用前后两个的单价和销量计算出之间的销量：
#### 我们可以设y=k\*x+b(x为单价，y为销量),前一个的单价为x1，后一个的单价为x2，前一个的销量为y1，后一个的销量为y2，则一定满足以下关系(敲黑板)：
#### y1=k\*x1+b---------(1)
#### y2=k\*x2+b---------(2)
#### 将(1)、(2)两式联立，(1)-(2)得：
#### y1-y2=k\*(x1-x2)
#### k=(y1-y2)/(x1-x2)
#### 将k带入(1)或(2)中解b得：
#### b=(y2\*x1-y1\*x2)/(x1-x2)
#### 故对于y1<=y<=y2时，每一个x都有一个正确的y
### 而最高价之后也有可能使利润达到最高，所以我们要一直枚举到销量为0为止，每次计算从最高单价外开始每升高一块钱减少后的销量。
## 3.枚举税收和补贴
### 每一次都要记算每个单价的利润并把它们最大的单价记录下来，再判断记录的单价是否达到预期。因为达到预期的单价所对应税收和补贴不止一种，所以要记录下来。
## 4.输出
### 找到记录下来的税收和补贴中绝对值最小的输出（题目要求的）。如果没有记录过税收和补贴就输出“NO SOLUTION”。
# ----------------------AC分割线--------------------
## 好，接下来献上代码
```
#include<iostream>
#include<cmath>
using namespace std;
int yq,         //政府预期
a[100001][3],   //[1]价格[2]销量
l,              //记录价格和销量的个数
di,             //在已知的最高单价外每升高一块钱将减少的销量
xl[100001],     //销量
k,              //每次枚举出来销量的记录
ma,             //每次枚举出来利润的最大记录
c[100001],      //记录达到预期的税收和补贴
lc;             //达到预期的税收和补贴的个数
int main()	
{
	cin>>yq;
	while (cin>>a[++l][1],cin>>a[l][2],a[l][1]!=-1&&a[l][2]!=-1)//输入+判断(注意-1)
	cin>>di;		
	a[l][1]=0;                                                  //输入了-1要清0									
	a[l][2]=0;                                                  //输入了-1要清0
	l--;                                                        //前面多输入-1是多加了要减1
	for (int i=2;i<=l;i++)                                      //计算销量
	{
		int x1=a[i-1][1],y1=a[i-1][2],x2=a[i][1],y2=a[i][2];    //方便操作
		for (int j=a[i-1][1];j<=a[i][1];j++)                    //补全线性表
			xl[j]=(y2-y1)/(x2-x1)*(j-x1)+y1;                    //计算销量
	}
	int t1=a[l][1],t2=a[l][2];                                  //方便操作
	while (xl[t1]>0)                                            //补全最大价钱之后的线性表(直到没有利润)
	{
		xl[++t1]=t2-di;
		t2-=di;
	}
	t1--;                                                       //销量t1不需要考虑
	for (int i=-50;i<=50;i++)                                   //枚举税收和补贴
	{
		ma=0;                                                   //最大值清0
		for (int j=a[1][1];j<=t1;j++)                           //销量的枚举
			if ((j-a[1][1]+i)*xl[j]>=ma)						
			{
				ma=(j-a[1][1]+i)*xl[j];                         //记录最大值
				k=j;                                            //记录销量
			}
		if (k==yq) c[++lc]=i;                                   //达到预期就记录下税收和补贴
	}
	if (lc>0) 
	{
		int s=2000000000;
		for (int i=1;i<=lc;i++) 
			if (abs(c[i])<abs(s)) s=c[i];                       //找绝对值小的输出
		cout<<s;
	}
	else cout<<"NO SOLUTION";                                   //如果没有就输出NO SOLUTION
	return 0;
}
```