### 很显然这是一道数学题
 然而看到下面大佬都没有太通俗易懂的讲法，于是乎本蒟蒻就来水一篇题解。
 
### 首先考虑直观的解法
# 也就是说最后的答案是$\Sigma_{i=1}^{n}(i-1)C^{i}_{n}$
#### 即每次从$n$中选出$i$个数，对于这$i$个数，符合要求的个数显然是$i-1$个。

但是~~蒟蒻不会算这个式子的求和~~比较难算，也比较难推出递推式。

于是就开始直接找递推规律。

## 令$f[i]$表示$n=i$时的答案，则有$f[i]=2f[i-1]+2^{i-1}-1$

我们考虑如何直观地得出上面这个式子。假设我们已经求出了$f[1...i-1]$的值，接下来要求$f[i]$。(假设序列单调递增，容易知道这对结果并不影响)

那么首先考虑 $i$ 一个人被分成一队，则共有$2^{i-1}-1$种情况(只要前面不为空，那么就一定合法)。

再考虑 $ i $ 被分入其他队的情况，则共有$f[i-1]$种情况( $i$ 只能被分入$B$组)

最后考虑 $ i $ 不被用的情况，显然有$f[i-1]$种.

综上，$f[i]=2f[i-1]+2^{i-1}-1$

## 然后就有两种写法了

首先既然有项数不算多的递推式，那么就可以用矩阵快速幂了。

~~然而这只是道蓝题。(矩乘平均紫题)~~

但是我们还可以直接推通项公式——

$\qquad\qquad\qquad f[i]=2f[i-1]+2^{i-1}-1$

$\qquad\qquad\qquad 2f[i-1]=4f[i-2]+2^{i-1}-2$

$\qquad\qquad\qquad 4f[i-2]=8f[i-3]+2^{i-1}-4$

$\qquad\qquad\qquad ……$

$\qquad\qquad\qquad 2^{i-2}f[2]=2^{i-1}f[1]+2^{i-1}-2^{i-2}$

将这几条式子累加可以得到

### $f[i]=(i-2)* 2^{i-1}+1(i>=2)$  

### $f[1]=0$

### $=>f[i]=(i-2)* 2^{i-1}+1(i>=1)$

然后用快速幂就可以AC了。~~代码太简单就不放了。~~