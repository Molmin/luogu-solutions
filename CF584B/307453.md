本题考查排列组合。不难。
***
很明显，一个三角形的合法方案数＝**所有方案数－不合法的方案数（废话）。**

对于每个三角形，每个点上都有$3$种可能，总方案数就是$3\times3\times3=27$（种）。

而不合法的方案（也就是和为$6$的方案）有两种情况：$1+2+3=6$或$2+2+2=6$。

$1+2+3=6$的方案总数为$A_3^3=6$种，$2+2+2=6$的方案总数为$1$种，所以说，不合法的方案总数为$6+1=7$种。

所以合法方案共有$27-7=20$ 种。

有多个三角形时也很简单啦，依然是**所有方案数－不合法的方案数。**

例如有两个三角形时，总方案数为：$27\times27=729$（种）

不合法的方案数为：$7\times7=49$（种）

所用到的知识仍旧是小学学过的[乘法原理](https://baike.baidu.com/item/乘法原理)。

由于对于第一个三角形，有$27$种情况；对于第二个三角形，也有$27$种情况，所以总共有$27\times27=729$种情况。同理，不合法的方案总数是$7\times7=49$种情况。

所以合法的方案总数为$729-49=680$（种）

这里有一个易错点就是有些人可能算成了$20\times20=400$种情况。那这样为什么不对呢？

**因为，当我们这么算的时候，计算出来的实际上是两个三角形都合法的情况！**

仔细想一想，我们现在要求的是至少有一个三角形合法的情况，那怎么能把每个三角形的合法情况相乘呢？而且题目中还有一句话：

>在n个三角形中只要有一个等边三角形满足条件，当前情况就是合法的。

当然，这么算也是可以的，只不过需要考虑许多其他条件。比如在有两个三角形时需要考虑只有一个三角形合法的情况，在有三个三角形的时候需要考虑只有两个三角形合法的情况、只有一个三角形合法的情况......总之十分繁琐。

（顺便提一句，这就是小学数学中十分重要的“**正难则反**”思想）

综上所述，对于$n$个三角形的情况，一共有$27^n-7^n$种可能。

至于快速幂取余，写一个[快速幂||取余](https://www.luogu.com.cn/problem/P1226)就好啦。题解里面的大佬解释的非常清楚。
***
最后，附上代码：

```cpp
#include<bits/stdc++.h>
#define mod 1000000007
using namespace std;
long long quickpower_and_remainder(long long x,long long y){//快速幂取余
	long long ans=1,cnt=x;
	while(y){
		if(y&1){
			ans*=cnt;
			ans%=mod;
		}
		cnt*=cnt;
		cnt%=mod;
		y>>=1;
	}
	return ans%mod;
}
int main(){
	long long n;//记得开long long
	cin>>n;//输入
	cout<<(quickpower_and_remainder(27,n)%mod-quickpower_and_remainder(7,n)%mod+mod)%mod;//输出
	return 0;//完结撒花
}
```

$\text{The end.}$