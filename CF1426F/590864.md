[题目传送门](https://www.luogu.com.cn/problem/CF1426F)

今天模拟考第二水的题，应该也算签到了。

## 题目分析

首先这题在读题时就容易出错，请一定注意**子序列**与**字串**的区别，子序列是可以**不连续**的！

接着考虑解题思路，考试时我第一眼觉得是贪心，但是仔细想一想明显不行，所以解题思路考虑**动态规划**。

首先我们定义 $dp_{maxn,3}$ ，其中 $dp_{i,j}$ 表示前 $i$ 位有多少个 $\verb!a!$ 或 $\verb!ab!$ 或 $\verb!abc!$。

再定义一个 $tot$ ，用于存到第 $i$ 位为止**问号的个数**。

## 状态转移方程

**当 $s_i$ 不为 $?$ 时，有：**

$$dp_{i,0} = dp_{i-1,0} + 3^{tot-1}$$

$$dp_{i,1} = dp_{i-1,1} + dp_{i-1,1}$$

$$dp_{i,2} = dp_{i-1,2} + dp_{i-1,1}$$

**当 $s_i$ 为 $?$ 时，有：**

$$dp_{i,0} = 3 \times dp_{i-1,0} + 3^{tot-1}$$

$$dp_{i,1} = 3 \times dp_{i-1,1} + dp_{i-1,1}$$

$$dp_{i,2} = 3 \times dp_{i-1,2} + dp_{i-1,1}$$

其实看到转移方程就很容易了，反正与本蒟蒻同机房的神犇知道思路就可以轻松推出方程。无论对于哪种情况，我们都先求出 $dp_{i,0}$ ，然后后面两种情况直接承接前一种即可。

**本题唯一难度在思维，代码就不放了。**