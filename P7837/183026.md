在 Wd 群问了个题被蓝推荐来做这题。

考虑到数据随机生成，期望的紫色出现频率是每 $\frac{n}{m}$ 个数一个，以此分块，分 $m$ 块，记第 $i$ 块的左右端点为 $\left[l_i,r_i\right]$，$s_i=\sum\limits_{j=l_i}^{r_i} a_j,c_i=\sum\limits_{j=l_i}^{r_i} \left[i \in p\right]$,其中 $p$ 表示紫色数字集合。

我们考虑分情况处理。

1. $c_i=0$：显然可以通过询问一次 $\left[l_i,r_i\right]$ 得到是否有 $c_i=0$.

2. $c_i = 1$：我们发现对于 $\forall i,l_i\geq \frac{r_i}{2}$，因此总有 $s_i-a_{l_i}-a_{l_i + 1} > s_i-{a_r}$，前者的含义是区间内有两个紫色的最小询问结果，后者是有一个紫色的最大询问结果，因此可以快速判断区间内紫色个数是否为 $1$，进而我们可以通过这个方式求得具体的紫色位置。

3. $c_i>1$ 暴力递归处理区间。

细节：对于第一块特判，可能需要线段树上二分，代码晚点补评论区。