注：出题人纯 nt，通过这道题需要用更快的费用流算法（原始对偶算法）解决，但并不是重点，这里省略。

题目几乎把费用流写脸上了，所有的限制都看起来很费用流。

有一种建图想法是把每个人当作一个点，向每天连边，但这样并不能限制每个人的代价（会出现分数），这告诉我们不能把人当点，而要当作对于天数的某些操作。

正难则反，考虑不选一些人会怎么样，那么一个显然的想法就是把每天拆点，中间流过的流量就是这一天卖出去的面包数量，对于这部分的贡献我们建两条 $(i,i',D,x_i)$ 和 $(i,i',0,+\infty)$ 的边即可。

去掉一个人就是将这个区间的流量都拿一个出来，那么我们先选上所有人，随后连 $(l,r',c,1)$ 的边，意义是 $[l,r]$ 种的流量少 $1$ 来换取不选这个人，减少了 $c$ 的花费。

由于我们最开始把所有人都选上了，要给 $l$ 流入 $1$、$r'$ 流出 $1$。

稍微优化，最终的连边方案如下：

- $(i-1,i,D,x_i)$，$(i-1,i,0,+\infty)$
- $(s,l-1,0,1)$，$(l-1,r,c,1)$，$(r,t,0,1)$

求 $s$ 到 $t$ 的最大费用最大流即可。