记 $f(x)$ 表示以 $x$ 结尾的 $\text{LIS}$ 最大长度。

考虑如果原序列的 $\text{LIS}=2k$，那么只要按照是否有 $f(x)\leqslant k$ 分成两类即可。

否则令 $\text{LIS}=2k+1$，此时我们尝试能否把原序列分成两份，每份的 $\text{LIS}$ 长度是 $k+1$。

容易发现，只要原序列中存在一个元素，它不在被选出的某个最长 $\text{LIS}$ 中，且存在一个长度为 $k+1$ 的上升子序列包括它，那么就能构造。

记一个满足如上条件的元素为 $a_x$，包含 $a_x$ 的一个上升子序列为 $a_{p_1},\cdots,a_{p_{k+1}}$。我们按如下的方式分配：

首先我们把个长度为 $k+1$ 的上升子序列全选入第一个序列。

对于某个其他的元素 $y$，如果满足 $f(y)\not=f(a_{p_i})$，我们就把它选入第二个序列。否则如果 $f(y)=f(a_x)$，我们也把它放进第二个序列。其他的情况我们就把它放进第一个序列。

考虑第一个序列，显然存在长度为 $k+1$ 的上升子序列，然而只存在 $k+1$ 种不同的 $f$，因此其 $\text{LIS}$ 为 $k+1$。

同理可以知道第二个序列的 $\text{LIS}$ 也为 $k+1$。

如果不存在这样的 $a_x$，则显然无解。