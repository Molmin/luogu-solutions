题解区咋全是树状数组，完全可以不用的说。

通过读题可以发现，处理直线 $ \text{x=i}$ 与处理直线 $\text{y=i}$ 的方法是一样的，所以以下题解以 $\text{y=i}$ 为例子讨论。

首先不难发现一个性质，直线 $\text{y=i}$ 合法当且仅当 $\min\{y_1,y_2,y_3\} \le i \le \max \{y_1,y_2,y_3\}$ 。

那不难想出一个复杂度为 $O(n\times m)$ 的暴力。

考虑优化一下这个暴力，我们可以一开始预处理出在 $\min\{y_1,y_2,y_3\} \le i \le \max \{y_1,y_2,y_3\}$ 内的所有值，用桶存储一下，然后 $O(1)$ 查询即可。

时间复杂度 $O(n^2)$ 。

现在还是够不去，那怎么办呢？我们考虑优化预处理部分。

显然，我们可以考虑差分，利用差分数组的前缀和就是原数组这个性质可以很好地还原出原数组。

一开始的时候把 $\min\{y_1,y_2,y_3\}+1$ 和 $\max \{y_1,y_2,y_3\}$ 丢进桶里，等到循环结束后再跑一遍前缀和即可。

由于 $y_i$ 的值可以达到 $10^6$ ，所以跑前缀和的时候要从 $1$ 跑到 $10^6$ 。

最后 $O(1)$ 查询。

总时间复杂度在 $10^6$ 左右，可过。