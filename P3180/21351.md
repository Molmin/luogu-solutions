对仙人掌进行了一遍dfs，得到dfs树


对于每个环，dfs序最小的叫做环的环根


在1到x的简单路径都不能走的限制下，从点x出发，能走到的点记为x的子树


如果x在环上 且 x不是环根，那么x的子树为 dfs序大于x的dfs序 且 不和x在同一个环上的点


如果x在环上 且 x是环根，那么所有dfs序大于x的dfs序的 点 都是x的子树


也就是说，环上点的子树只能累积到环根那里


定义 x的子树大小为son[x]，x的dfs序为id[x]


那么对于每一个询问，就是查询 区间[id[x]，id[x]+son[x]-1] 内有多少个点的油腻度<=y


用莫队


cnt[k] 表示 油腻度为k的点的个数


对油腻度 也分块 统计



用莫队


cnt[k] 表示 油腻度为k的点的个数


对油腻度 也分块 统计


代码请见 http://www.cnblogs.com/TheRoadToTheGold/p/7388886.html
