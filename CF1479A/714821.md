因为题目给的操作次数太多了，我得到了一个乱搞的解法。

首先判断两端是极值的情况以及 $ n \leq 100 $，这个可以直接暴力。

不难发现如果两端不是答案，而数组是排列，则中间一定存在一个 $ 1 $，因为两端是 $ 1 $ 则答案一定在两端，前面判断过了。

因为 $ 1 $ 是极小值，于是问题转化为在单谷函数里找最小值，这个可以直接三分解决，询问次数最大情况下大约 $ 30 $ 次不到，优于二分解法。可以通过。

[提交记录](https://codeforces.cc/contest/1479/submission/193124579)