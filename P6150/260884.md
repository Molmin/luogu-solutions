- 这应该是一道让我记忆犹新的题目，作者从看到这道题，到写这篇博客，到写出它的正解，花了将近半年的时间。
- 作者的智商由很大的进步空间。

**题意**
- [链接](https://www.luogu.com.cn/problem/P6150)。
- 给出一棵 $n$ 个节点的树，每个节点上有一个 $1$ 到 $12$ 的时刻（小时）。
- 奶牛可以从树上的某个节点开始走到另一个节点，每次**通过走廊到达**一个房间都会将该房间的时钟向后拨 $1$ 小时。
- 如果让奶牛从某些起点出发，则她有可能将树上所有节点上的时刻都变为 $12$ 小时，输出有多少可能的起点。
- $n\le 2500$。

**分析**
- 想起路径问题就让我想起了某道题，是个结论题。
- 当然，这道题它的形式就很奇怪，我们先研究合法的路径满足怎样的特征，然后对 $12$（是个偶数）取模也是个性质。
- 考虑一种合法的情况，显然可以等价为节点 $u$ 的儿子形成的奇数（代表在这里终止）或者偶数条路径，容易发现，显然 $u$ 需要处理这些节点。
- 如果 $u$ 的所有儿子只是上传给 $u$ 都是偶数条路径，$u$ 可以选择~~自尽~~在该节点结束，在这之前，可以截留偶数条路径作为自己的一次贡献。
- 否则 $u$ 无法自尽，但是还是可以截留偶数条路径作为自己的一次贡献。
- 但是，根没有上司，它无法截留，还有叶子的情况也需要注意。
- 综上，我们可以打出一个很暴力的 $\text{DP}$，由于算法描述的不确定性，它是难以实现的（或许可以打下）。
- 我们可以来一点构造的思想，思考一些构造方案的替代。
- 构造元件：反复，技能用途，如果你经过了某条边一次，你可以将这起点加上 $x-1$，终点加上 $x$。
![](https://cdn.luogu.com.cn/upload/image_hosting/5b34ieww.png)
- 构造元件：回来，如果你从某地出发并且回到了源点，你可以在某条路径上的两个点加上任意的数值 $x$，其实就是由反复横跳得到的。
- 构造元件：回路，如果你从某地出发并回到源点，你可以在任意的边的两个端点加上一个任意的值 $x$。
- 你会发现：“回路”操作已经替代了我们所有从根开始回到根的操作了，我们可以把除了根以外的所有颜色都进行染色，然后我们发现只有根是 $1$ 或 $12$ 是有解的。
- 如果还需要发现性质的话就是如果对数进行二分图染色，黑点和白点的差是固定的，所以有相当简洁的线性算法，[代码](https://www.luogu.com.cn/paste/y8dae423)。