[题目传送门](https://www.luogu.com.cn/problem/AT_abc167_d)

倍增例题，但是怎么没人写倍增题解啊？

设 $f_{i,j}$ 表示从 第 $i$ 个城镇传送 $2^j$ 次所到达的城镇，于是可以得出转移：$f[i][j]=f[f[i][j-1]][j-1]$。这个转移什么意思呢，就是说从第 $i$ 个城镇传送 $2^j$ 次到达的城镇为从第 $i$ 个城镇传送 $2^{j-1}$ 次所到达的城镇再传送 $2^{j-1}$ 次所到达的城镇，好好理解一下。

转移代码：
```cpp
for(int j=1;j<=65;j++)//j必须放在外层循环
	for(int i=1;i<=n;i++)
		f[i][j]=f[f[i][j-1]][j-1];
```

然后再来看一下对 $k$ 次传送的处理。

考虑对 $k$ 进行二进制拆分。比如传送 $7$ 次，$7$ 的二进制数为 $111$，所以 $7$ 的二进制拆分为：$7=2^2+2^1+2^0$。结合刚才对 $f$ 数组的倍增处理，我们只需要将从第 $1$ 个城镇依次传送 $2^2$ 次、$2^1$ 次、$2^0$ 即可。总的来说，就是对 $k$ 进行二进制拆分，然后用处理好的 $f$ 数组依次跳即可。

代码:
```cpp
while(k)//k不为0
{
	if(k%2)	now=f[now][t];//k在二进制下的这一位上是1，所以要进行传送
	k/=2;
	t++;//位数加1
}
```
最后输出 $now$ 就行了。

[完整代码](https://atcoder.jp/contests/abc167/submissions/44142455)