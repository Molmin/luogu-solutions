大家好，本蒟蒻又来写题解啦~

[这里是题目](https://www.luogu.com.cn/problem/AT2271)

这道题思路很简单，但是有一些细节需要注意。

不难想到，对于给出答案相同的人，只能有两个。一个站在左边，一个站在右边，是两个对称的位置。

为什么呢？因为左边的人数加上右边的人数一定是 $N-1$，而两个数知道它们的和，也知道差的绝对值，那两个数也就只有两种可能了。有可能左边的人比右边的人多，也有可能左边的人比右边的人少。

但是有个例外，就是给出的答案是 $0$。这说明左边人数和右边人数相等。那么这种情况下，人就一定站在中间位置，只有一种可能。

讲到这里，有些细心的同学会问了，如果 $N$ 是偶数，不就没有中间位置了吗？没错，$0$ 是不可能出现了。还有没有其他答案也不可能出现了呢？我们来列一个式子。假设左边人数为 $l$，右边人数为 $r$。

我们知道 $l+r=N-1$。说明 $l+r$ 与 $N$ 的奇偶性不同。则我们可以推出 $\operatorname{abs}(l-r)$ 与 $N$ 的奇偶性也不同，**则给出的答案 $A_i$ 与 $N$ 的奇偶性不同。**

因为题目里没保证这一点，所以这一点我们是需要判断的。

剩下的部分就可以找出当前这个人能站的位置方案有多少种，直接用加乘原理，把方案数一个个乘出来就可以了。以下是 AC 代码：

```cpp
#include<iostream>
#include<algorithm>
using namespace std;
const int mod=1e9+7;
int b[100010];//类似桶的思想。记录这个数出现了多少次。
int main()
{
    int n,mul=1;
    cin>>n;
    for(int i=1;i<=n;i++)
    {
        int a;
        cin>>a;
        if(a%2==n%2)//特判奇偶性相同。
        {
            cout<<0<<endl;
            return 0;
        }
        b[a]++;
        if(a>0)mul=mul*(max(0,2-b[a]+1))%mod;
        else mul=mul*(max(0,1-b[a]+1))%mod;//特判 0。记得取模。
    }
    cout<<mul<<endl;
    return 0;
}
```

好了，本期题解就到这里，求 dalao 们点个赞吧~

~~本蒟蒻被特判和取模坑了很多次。。。~~