传送门：[P5789](https://www.luogu.com.cn/problem/P5789)

## 前置知识：

**邻接矩阵**中 $A^k$ 的意义：

$A ^ k$　记录了图上任意两点 u 到 v 恰好经过了 k 条边的路径数。

### 证明：

考虑矩阵乘法的定义：

$$
C = A \times B
$$

$$
C _ {i, j} = \sum _ {k = 1} ^ n A _ {i, k} \times B _ {k, j}
$$

那么：

$$
A ^ 2 _ {i, j} = \sum _ {k = 1} ^ n A _ {i, k} \times A _ {k, j}
$$

邻接矩阵 $A$ 中的元素都是用 $0$ , $1$ 来表示是否联通的，或者说，代表有没有方法从 $i$ 走到 $j$ 。那么， $A _ {i, k} \times A _ {k, j}$ 就是表示从 $i$ 走到 $k$ 再走到 $j$ 是否可行。可以发现， $A ^2$ 就是取了一个 $\sum$ ，其实就是统计用 $2$ 步从 $i$ 走到 $j$ 的方法总数。

## 进入正题：

- 题目大意：给出一个无向图，有一个机器人，初始在 $1$ 号城市，每秒有三种操作：停在原地、去下一个城市、自爆，求经过 $t$ 秒后机器人行为的方案数。

- 题意分析：所以我们要想办法对停在原点和自爆建边。

	1. 停在原点：就是每个点都有一条自环，这样机器人从自己走到自己相当于停在原地。
	2. 自爆：就是以后再也不走了，那么我们让它走到一个原图以外的点，不再出来，继续再里面绕圈，呆够 $t$ 秒，可以添加一个 $0$ 号点，每个点都向 $0$ 号点建一条**单向边**，注意 $0$ 号点也要建自环边。

- 现在问题就变成了机器人每一秒**必须**走过一条边，求 $t$ 秒后的行为方案数，于是我们只需要求：

$$
\sum _ {i = 0} ^ n A ^ t _ {1, i}
$$

**注意： 0 号城市的自环是必须的**，因为 $A ^ k$ 记录的是**恰好**经过 $k$ 条边，如果不加自环就不会计算机器人自爆后的路程。

代码我就不给了，希望大家自己写。（~~如果实在写不出可以参考其他神犇的题解~~）。