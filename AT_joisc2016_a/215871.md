提供一个不需要任何数据结构的做法。

对于题目中“套娃”这样的二维偏序关系，通常考虑将一维排序，另一维特殊处理。

考虑单个询问，若套娃已经按照直径 $R_i$ 升序排序，则每一个递增子序列对应的都是一组从左到右套在一起的套娃，故没有被套的套娃就是递增子序列的数量。

由 Dilworth 定理知，最小链覆盖即为最长反链，所以对于每个询问，我们需要求出最长单调不升子序列。

注意到原序列的最长单调不升子序列等价于翻转序列的最长单调不降子序列，故我们将套娃按照直径 $R_i$ 降序排序，二分求 LIS，即可得到一个 $\mathcal{O}(QN \log N)$ 的在线做法。

若我们离线后按照直径 $A_i$ 降序排序询问，可以得到一个显然的扫描线模型，但在这题并不需要使用数据结构。

回想二分求 LIS 的过程，$dp_i$ 的意义是长度为 $i$ 的递增子序列结尾的最小值，而按照直径排序后的询问实际上是在询问使用高度不超过 $B_i$ 的套娃能够组成的 LIS，与 $dp$ 数组的含义极其类似。

注意到求 LIS 的过程中一定有 $dp_i \geq dp_{i - 1}$，故询问高度不超过 $B_i$ 的套娃能够组成的 LIS 等价于求出最后一个使得 $dp_j \leq B_i$ 的 $j$，也就是一段前缀，二分即可。

[代码。](https://atcoder.jp/contests/joisc2016/submissions/42839795)

由于不使用数据结构，随手交了几发都是你谷最优解（。