# abc 237 f

## 题意

请你求出满足以下要求的序列数量，答案对 $998244353$ 取模：

- 序列长度为 $N$。

- 序列中的每个整数都是 $[1, M]$ 内的一个数。

- 序列的最长上升子序列的长度恰好为 $3$。

$1 \le N \le 1000$

$3 \le M \le 10$

## 思路

首先，我们考虑暴力：搜出所有有可能的序列，判断最长上升子序列的长度是否为 $3$，总时间复杂度为 $O(N ^ {M + 2})$，很显然，是会超时的。

所以，应该怎么优化呢？

其实可以发现，在这道题目中，组成这个长度为 $3$ 的最长上升子序列的那 $3$ 个数是很重要的。

所以，我们可以考虑从这三个数入手。

$dp_{i, a, b, c}$ 表示前 $i$ 个数中的最长上升子序列的 $3$ 个数分别为 $a, b, c$ 的方案数。

那么就有转移（扩散型）：

$$ dp_{i, a, b, c} \rightarrow \left \{
\begin{aligned}
dp_{i + 1, x, b, c} (x \le a) \\
dp_{i + 1, a, x, c} (a < x \le b) \\
dp_{i + 1, a, b, x} (b < x \le c)
\end{aligned}
\right.
$$