> 有一棵 $n$ 个点的树，每次等概率缩一条边，等概率保留其中的一个编号，求出最终每个点剩下的概率，输出实数。$n \leq 50$

设当前要求点 $rt$ 的答案，把它当作根。

一个麻烦的事情是，因为缩边的过程会改变树的结构，我们无法边缩边边计算概率。

所以先确定缩边的顺序，再确定相应的概率系数。后者是 $0.5$ 的（缩边时与根相连的边数）次方。

给定排列后，一条边缩的时候与根相连当且仅当它比到根路径上所有其他的边都要靠后。

考虑到跟概率有关的问题对连续变量比较友好，我们把排列转成 $(n-1)$ 个 $[0,1]$ 内均匀随机的变量。

令 $f_u(x)$ 表示 $u$ 到根边权最大值是 $x$ 时，子树内的系数贡献期望。

那么 

$$f_u(x)=\prod_v[xf_v(x)+{1\over 2}\int_x^1f_v(t)\mathrm{d}t]$$

维护多项式，总复杂度 $O(n^3)$。