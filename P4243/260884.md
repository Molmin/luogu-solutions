- 很久以前的老题目了，不知道怎么回事的。
- 当年我利欲熏心，想要把这题当成自己第一道黑题，然而造化弄人，第一道其实是[这道](https://www.luogu.com.cn/problem/P3704)，我当时连树状数组都不会打。
- 权当随机的训练了。

**[题意](https://www.luogu.com.cn/problem/P4243)**
- 区间加等差数列，查询一个区间最少可以被划分成几个连续的等差数列。

**分析**
- 首先直接差分，然后修改操作变成简单的区间加。
- 然后问题在于，你得到了一个区间的差分数组，你现在应该干什么？
- 你需要处理的是这样的问题：删掉不相邻（且最少）的几个数，使得剩下的数如果相邻必定相等。
- 设该区间每个长度大于 $1$ 的极大连续相等段中，相隔的长度为 $1$ 的连续相等段的个数（包括头尾，个数可以为 $0$），为数列 $p_1,p_2,\cdots p_m$。
- 那么需要删的数的个数就是：
$$\lceil p_1/2\rceil+\sum_{i=2}^{m-1}\lfloor p_i/2+1\rfloor+\lceil p_m/2\rceil$$
- 它显然是可以进行信息合并的对吧，于是我们快乐地写出我们的小代码。

**实现**
- 得到了 $40$ 分，信心满满！然后发现输出区间长度整除 $2$ 有 $40$ 分！~~不愧是 JSOI~~。
- 进行了乱搞，得到了 $\text{hack}$。
```cpp
11
0 0 0 0 1 2 3 4 3 2 1
1
B 1 11
```
- 发现自己的结构体调用写错了，但是还是 $40$ 分。
- 发现自己没改完，然后过了，[代码](https://www.luogu.com.cn/paste/11i2xbuq)。