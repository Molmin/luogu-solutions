- 这道题目还是比较简单的，最普通的dfs，但可能对角线会让人不知所措

- 看了各位dalao的做法是位运算找规律什么的，这些哪有打表实在呢？

- 打一个对角线表。然后判重就好了。

打表的代码

```cpp
#include<cstdio>
using namespace std;

int a[20][20];

int main() {
    freopen("ovo.cpp","w",stdout);
    printf("#include<cstdio>\n");
    printf("using namespace std;\n\n");
    printf("const int d1[14][14]={\n");
    for(int i=1;i<=13;i++) {
        for(int j=i,k=1;j<=13;j++,k++)
            a[i][j]=k;
        for(int j=1,k=i+12;j<i;j++,k--)
            a[i][j]=k;

    }
    for(int i=0;i<=13;i++) {
        printf("{");
        for(int j=0;j<=13;j++) {
            if(a[i][j]<=9) printf(" ");
            printf("%d",a[i][j]);
            if(j!=13) printf(",");
        }
        printf("}");
        if(i!=13) printf(",");
        printf("\n");
    }
    printf("};\n\n");
    printf("const int d2[14][14]={\n{");
    for(int i=0;i<=13;i++) {
        printf(" %d",a[0][i]);
        if(i!=13) printf(",");
    }
    printf("},\n");
    for(int i=13;i>=1;i--) {
        printf("{");
        for(int j=0;j<=13;j++) {
            if(a[i][j]<=9) printf(" ");
            printf("%d",a[i][j]);
            if(j!=13) printf(",");
        }
        printf("}");
        if(i!=1) printf(",");
        printf("\n");
    }
    printf("};\n\n");
    printf("int main() {\n\n    return 0;\n}");
    return 0;
}
```

AC代码

```cpp
#include<cstdio>
using namespace std;

const int d1[14][14]={
{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13},
{ 0,14, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12},
{ 0,15,14, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11},
{ 0,16,15,14, 1, 2, 3, 4, 5, 6, 7, 8, 9,10},
{ 0,17,16,15,14, 1, 2, 3, 4, 5, 6, 7, 8, 9},
{ 0,18,17,16,15,14, 1, 2, 3, 4, 5, 6, 7, 8},
{ 0,19,18,17,16,15,14, 1, 2, 3, 4, 5, 6, 7},
{ 0,20,19,18,17,16,15,14, 1, 2, 3, 4, 5, 6},
{ 0,21,20,19,18,17,16,15,14, 1, 2, 3, 4, 5},
{ 0,22,21,20,19,18,17,16,15,14, 1, 2, 3, 4},
{ 0,23,22,21,20,19,18,17,16,15,14, 1, 2, 3},
{ 0,24,23,22,21,20,19,18,17,16,15,14, 1, 2},
{ 0,25,24,23,22,21,20,19,18,17,16,15,14, 1}
};

const int d2[14][14]={
{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,25,24,23,22,21,20,19,18,17,16,15,14, 1},
{ 0,24,23,22,21,20,19,18,17,16,15,14, 1, 2},
{ 0,23,22,21,20,19,18,17,16,15,14, 1, 2, 3},
{ 0,22,21,20,19,18,17,16,15,14, 1, 2, 3, 4},
{ 0,21,20,19,18,17,16,15,14, 1, 2, 3, 4, 5},
{ 0,20,19,18,17,16,15,14, 1, 2, 3, 4, 5, 6},
{ 0,19,18,17,16,15,14, 1, 2, 3, 4, 5, 6, 7},
{ 0,18,17,16,15,14, 1, 2, 3, 4, 5, 6, 7, 8},
{ 0,17,16,15,14, 1, 2, 3, 4, 5, 6, 7, 8, 9},
{ 0,16,15,14, 1, 2, 3, 4, 5, 6, 7, 8, 9,10},
{ 0,15,14, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11},
{ 0,14, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12},
{ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13}
};

bool column[15];
bool diag1[30],diag2[30];

int pos[15],n,tot;

void Print() {
    tot++;
    if(tot<=3) {
        for(int i=1;i<=n;i++)
            printf("%d ",pos[i]);
        printf("\n");
    }
    return;
}

void dfs(int k) {
    if(k==n+1) {
        Print();
        return;
    }
    for(int i=1;i<=n;i++) {
        if(!column[i]&&!diag1[d1[k][i]]&&!diag2[d2[13-n+k][i]]) {
            pos[k]=i;
            column[i]=true;
            diag1[d1[k][i]]=true;
            diag2[d2[13-n+k][i]]=true;
            dfs(k+1);
            column[i]=false;
            diag1[d1[k][i]]=false;
            diag2[d2[13-n+k][i]]=false;
            pos[k]=0;
        }
    }
    return;
}

int main() {
    scanf("%d",&n);
    dfs(1);
    printf("%d\n",tot);
    return 0;
}
```