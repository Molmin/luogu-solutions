写题解标记一下好题，顺便给个人类比较容易看懂的题解。。

不妨考虑数 $\{0,1\}$ 的时候怎么做。对于初始的序列，每一列都有 $k$ 个 $\{0,1\}$ 中的数。

那么这 $n$ 列中实际上只有 $2^k$ 个本质不同的列。只需要用 bitset 维护这些列即可。

那么如何把一般的问题转为 $\{0,1\}$ 的问题？对每一列分别离散化，使得值域在 $[1,k]$。然后将这一列中的每个数 $x$ 都拆成 $k$ 个 $\{0,1\}$ 的数，$[1,x]$ 为 $1$，$[x+1,k]$ 为 $0$。

这样取 $\max$ 相当于按位或，取 $\min$ 相当于按位与。

比如

```
1
4
9
```

离散化为

```
1
2
3
```

得到的序列是

```
100
110
111
```

代码虽然短，但是实现有困难。[CF 评测记录](https://codeforces.com/contest/878/submission/173880885)。