## 题目描述
[题目传送门](https://www.luogu.com.cn/problem/P8221)
## 思路简述
+ 容易发现这样一个规律：无论是行翻转还是列翻转，$(x,y)$，$(x,m-x+1)$，$(n-x+1,y)$，$(n-x+1,y-n+1)$ 这四个位置上的值总是固定的 $4$ 个数。
+ 所以可以想到对于每一个这样的 $4$ 个位置进行分类讨论，最好能使得它进行平均最多不多于 $4$ 次操作能够调换成符合题目要求的形态并且不影响其他位置。
+ 而不影响其他位置，暂时简单理解行或列翻转偶数次。
+ 不妨设目标状态为 $\begin{matrix}a\ b\\a\ b \end{matrix}$，而翻转第 $n-x+1$ 行的操作定义为 D, 翻转第 $x$ 行的操作定义为 U, 翻转第 $y$ 列的操作定义为 L, 翻转第 $m-y+1$ 的操作定义为 R。
+ 一共有以下 $6$ 种情况。
1. 当前状态为 $\begin{matrix}a\ b\\a\ b \end{matrix}$， 无需操作
1. 当前状态为 $\begin{matrix}a\ b\\b\ a \end{matrix}$， 操作为 RDRD。
1. 当前状态为 $\begin{matrix}b\ a\\a\ b \end{matrix}$， 操作为 LULU。
1. 当前状态为 $\begin{matrix}a\ a\\b\ b \end{matrix}$， 操作为 DRDR。
1. 当前状态为 $\begin{matrix}b\ a\\b\ a \end{matrix}$， 操作为 DLRDLR。
1. 当前状态为 $\begin{matrix}b\ b\\a\ a \end{matrix}$， 操作为 DLDL。
+ 然而我们发现情况 $5$ 的操作数多达 $6$ 个，容易导致步数过多。
+ 我们又发现，我们对行或列没有影响的要求，事实上是为了保证原先已经达成目标状态的 $4$ 个位置不要因为当前的操作而发生改变。那么可以这么认为，列的翻转不会对它们产生影响。
+ 那么情况 $5$ 的操作就可以变成 DLR，但是同时要模拟列翻转的过程（事实上应该每种情况都可以这样节省步数，不过常数会更大），时间复杂度为 $O(n^3)$，但实际上应该远远达不到。

## 丑陋の代码
[click here](https://www.luogu.com.cn/paste/nvot40sl)