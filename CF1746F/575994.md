神仙题。

看到这个题我的第一反应是写带修莫队，但看数据范围便觉得不对劲了。

对于 $n,q\le 3\times 10^5$，带修莫队基本上是过不去的。

我们考虑一个区间 $[l,r]$ 每个数都出现 $k$ 的倍数次有啥特征？ 显然 $k\mid\left(\sum\limits_{i=l}^r a_i\right)$。

当然，仅仅满足这个并不一定就满足原条件，但不满足这个条件一定不满足原条件。

**但是我们其实并不关心 $a_i$ 的大小，无论是 $1$ 还是 $10^9$，这个条件满足就是满足**。原来相等的 $a_i$ 全改成另一个数 $a_i^\prime$，也不会使得满足变得不满足。

那么，如果我们进行足够次的 $a_{i}\gets a_i\prime$，并进行检查，是不是就可以保证正确性？

答案是正确的。显然，对于 $k=2$，有错误率 $P=\dfrac 1 2$；对于 $k>2$，$P\le \dfrac 1 2$。如果我们随 $Q=30$ 左右，错误率甚至会 $<\dfrac 1 {2^{40}}$，这个量级和 $q$ 的 $3\times 10^5$，几乎不会出错~~出错就是脸黑~~。

总复杂度 $O(Qq\log n)$。