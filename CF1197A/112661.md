## 由于是要选出$k+2$个数字，然后又跟第二大的数字有关系，所以先对$a$数组进行一次排序。  
接下来分类讨论：
- 如果第二大的数字比剩下的数字个数还要大（即这个数$>n-2$）  
那么应该输出$n-2$；
- 如果第二大的数字比剩下的数字个数要小（即这个数$<n-2$）
那么应该输出第二大的数字$-1$；
- 如果$n$为$2$，那么最终的答案与第二大的数字无关，直接输出$0$。  

之所以要提到第二大的数字与$n-2$的大小关系，可以这样证明：
- 首先不难证明，选择大的数字作为会使得$k$的范围变大。
- 然后，也容易证明$k$的范围与第一大的数字无关，与第二大的有关。
- 那么因为要$k$最大，那么就尽量将剩下的数字都选上，可是因为$k <$第二大的数字，所以需要让$k$与第二大的数字进行比较。

知道了这些，这道题目的方法也就很容易知道了。  
附上代码：
```cpp
    #include<iostream>
    #include<cstdio>
    #include<algorithm>
    #include<cmath>
    using namespace std;
    int g,n,a[100000+5]; 
    int main()
    {
    	ios::sync_with_stdio(false);//加快cin,cout速度
    	cin>>g;//t组数据（我习惯用g表示）
    	while(g--)//等价于for(int i=1;i<=g;i++)
    	{
    		cin>>n;//输入
    		for(int i=1;i<=n;i++)cin>>a[i];
    		sort(a+1,a+1+n);//排序
    		if(a[n-1]-1<=n-2)cout<<a[n-1]-1<<endl;//分类讨论，注意要换行
    		else if(a[n-1]-1>n-2)cout<<n-2<<endl;
    		else cout<<0<<endl;
    	}
    	return 0;
    }
```
