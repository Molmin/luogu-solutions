```cpp

#include <stdio.h>
int a[200001]={0};
int max(int x,int y)  //两数比大小
{
  if (x>y) return x;  //x比y大就返回x
  else return y;  //否则返回y
}
int main()
{
  int n=0,xb=0,x=0,i=0,m=0;
  scanf("%d",&n);  //读入操作总数
  for (i=1;i<=n;i++)  
  {
     scanf("%d",&x);  //读入操作类型
     if (x==0)  //进栈操作
     {
         scanf("%d",&m);  //读入进栈的物品重量
         xb=xb+1;  //栈元素加1
         a[xb]=max(a[xb-1],m);  //使得最后栈的最后一个元素是当前元素中最大的，使得只要后面一个元素不比前面一个大，后面一个元素就等于前一个元素，也就是说在查询时查到的是这当前栈元素中的最大值（因为后一项绝对>=前一项），在退栈时却退出的是一个元素（只起到退出元素的作用，在不真正退出最后一种相同数字序列的第一个,我们权且称它为最大数字的“真身”时，不会改变当前栈的最大值）
     }
     if (x==1)  //退栈
     {
         if (xb!=0)  //退出最后一个元素
         xb=xb-1;
     }
     if (x==2)  //查询操作
    {
        printf("%d\n",a[xb]);  //输出栈的最后一个元素，也就是当前栈的最大值
    }
  }
  return 0;
}

```