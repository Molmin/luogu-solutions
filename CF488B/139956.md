**推导**

原式有些恶心，我们给他变形一下（过程略），得到：
$$
\left\{
\begin{aligned}
a_4&=3a_1\\
a_1+a_4&=a_2+a_3=4a_1\\
a_1\le a_2&\le a_3\le a_4\\
\end{aligned}
\right.
$$

~~好看多了~~

发现对于不同的 $n$，可能有不同的处理方式。

考虑分类讨论

---
**分类讨论**

- $\large n=0$

不给任何数？嘿嘿嘿，我随便造一组即可。例如：`1 2 2 3`

- $\large n=1$

先暂定给出了数 $x$。

注意到 $x$ 不一定是 $a_1$,考虑再分类讨论 $x$ 的位置吗?

其实并不用。只要你构造出了一组通解，$x$ 不论在哪里都没问题了。给出构造：
|  | $a_1$ | $a_2$ | $a_3$ | $a_4$ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| 值 | $x$ | $x+1$ | $3x-1$ | $3x$ |

那么，如何证明 $a_1\le a_2\le a_3\le a_4$ 呢？

$$
\begin{aligned}
a_2&\ge a_1\\
a_4&\ge a_3\\
a_3-a_2&=2x-2\\
\because x&\ge1\\
\therefore 2x-2&\ge1>0
\therefore a_3>a_2
\end{aligned}
$$

证毕。

---
- $\large n=2$

记给定的是 $x,y(x\le y)$

> 其实， $a_2$ 与 $a_3$ 没有必然的大小关系。只要 $a_1\le \min(a_2,a_3),a_4\ge \max(a_2,a_3)$ 即可。

直接给构造吧。
|  | $a_1$ | $a_2$ | $a_3$ | $a_4$ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| 值 | $x$ | $y$ | $4x-y$ | $3x$ |

根据之前的推导，
$$
\left\{
\begin{aligned}
x&\le 4x-y\\
3x&\ge y\\
3x&\ge 4x-y
\end{aligned}
\right.
$$

分析：
$$
\begin{aligned}
\because x&\le 4x-y\\
\therefore y&\le 3x\\
\because 3x&\ge 4x-y\\
\therefore y&\ge x
\end{aligned}
$$

搞了半天，综合起来就一句话：$y\le 3x$

所以，只要 $y\le 3x$，就可以构造出上面表格的解。否则即为 `NO`。

---
- $\large n=3$

重头戏。令给定的是 $x,y,z(x\le y\le z)$。

- 当未给出 $a_1$ 时。

显而易见，
|  | $a_1$ | $a_2$ | $a_3$ | $a_4$ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| 值 | $\dfrac z3$ | $x$ | $y$ | $z$ |

显然，需要有
$$
\left\{
\begin{aligned}
z&\equiv0\pmod3\\
x+y&=\dfrac43z\\
\dfrac z3&\le x
\end{aligned}
\right.
$$

- 当未给出 $a_2$ 或 $a_3$ 时。

显而易见，
|  | $a_1$ | $a_2$ | $a_3$ | $a_4$ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| 值 | $x$ | $x+z-y=4x-y$ | $y$ | $z$ |

显然，需要有
$$
z=3x
$$

- 当未给出 $a_4$ 时。

显而易见，
|  | $a_1$ | $a_2$ | $a_3$ | $a_4$ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| 值 | $x$ | $y$ | $z$ | $3x$ |

显然，只要
$$
\left\{
\begin{aligned}
4x&=y+z\\
z&\le 3x
\end{aligned}
\right.
$$
即可。

- 除此之外，直接 `NO`

---
- $\large n=4$

呵呵呵，直接判断可不可行即可。

---
放一下 $n=3$ 的代码。
```cpp
if(n==3){
	if((a<<2)==b+c&&c<=a*3){
		puts("YES");
		write(a*3);puts("");
		return 0;
	}
	if(c==a*3){
		puts("YES");
		write((a<<2)-b);puts("");
		return 0;
	} 
	if(c%3==0&&a>=c/3&&a+b==c+c/3){
		puts("YES\n");
		write(c/3);puts("");
		return 0;
	}
	puts("NO");return 0;
}
```

---
**广告**

[来逛逛？](https://moon-snow.blog.luogu.org/)