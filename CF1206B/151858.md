# _**CF1206B Make Product Equal One 题解**_ 

![](https://api.gushi.ci/all.svg)

> 十年OI一场空，不开long long见祖宗

~~我就见了祖宗~~

不过做这道题的时候我是真的瞎，没看清数据范围，第一次交没开long long，扣了我的小分分。

**思路&解法：**

对于题目中的“乘积为1”的要求，因为我们知道满足“乘积为1”这一要求仅当所有数都为“1”或“-1”时才有可能满足。题目中求最小操作数，我们不妨贪心求解，分类讨论。

对于所有x：

一般的，

**若x >= 1**，则让它变为“1”，**操作数 += x - 1**；

**若x <= -1**，则让它变成“-1”，**操作数 += -1 - x**；

特殊的，

**若-1 < x < 1，即 x == 0**，它既可以变成“1”，又可以变成“-1”，且都有 **操作数 += 1**。

在按照上述操作执行时，我们同时**统计“0”和变成“-1”的数字个数**。

**首先判断是否有“0”出现**：因为“0”是“万能数”，它既可以变成“1”也可以变成“-1”，当乘积为“-1”是可以变成“-1”使乘积为“1”，所以说只要有“0”出现，就可以直接输出操作数。

**若上述判断为“否”，则继续判断“-1”的个数是否为偶数**：若为偶数，则乘积已经为“1”，符合题意，直接输出。若非偶数，则说明现在所有数的乘积为“-1”，不符合题意，我们这时可以把其中的一个“1”变成“-1”，或是把其中的一个“-1”变成“1”，都有 **操作数 += 2**。

**样例讲解：**

**样例#4：**
```cpp
//样例输入#4：
5
-5 -3 -4 3 0
```

按照上述所有操作，我们执行完第一步后应为：

```
//第一步：
-1 -1 -1 1 0(1/-1)
//统计个数
ans = 4+2+3+2+1 = 12;	//操作数（答案）
sum_1 = 3;		//-1的个数
sum0 = 1;		//0的个数
```
我们发现存在“0”，故输出12(ans)

**样例#5：**

```cpp
//样例输入#5：
5
-5 -3 -4 3 4
```

按照上述所有操作，我们执行完第一步后应为：

```
//第一步：
-1 -1 -1 1 1
//统计个数
ans = 4+2+3+2+3 = 14;	//操作数（答案）
sum_1 = 3;		//-1的个数
sum0 = 0;		//0的个数
```
我们发现没有“0”的存在且“-1”的个数为奇数，现在的乘积为“-1”，我们需要把其中的一个“1”变成“-1”或是把其中的一个“-1”变成“1”。

```
//第一步：
1 -1 -1 1 1
//统计个数
ans = 14+2 = 16;	//操作数（答案）
sum_1 = 4;		//-1的个数
```

输出16(ans)。

**比赛代码：**

```cpp
#include<cstdio>
int main()
{
	long long n;
	scanf("%lld",&n);
	long long t1=0,t_1=0,t0=0;
	long long ans=0;
	for(long long i=1;i<=n;i++){
		long long a;
		scanf("%lld",&a);
		if(a>1){
			ans+=a-1;
			t1++;
		}else if(a<-1){
			ans+=-1-a;
			t_1++;
		}else if(a==1){
			t1++;
		}else if(a==-1){
			t_1++;
		}else if(a==0){
			ans+=1;
			t0++;
		}
	}
	if(t_1%2==1){
		if(t0==0){
			ans+=2;
		}
	}
	printf("%lld",ans);
	return 0;
}
```

**优化代码：**

```cpp
#include<cstdio>
int main()
{
	int n;
	scanf("%d",&n);
	long long sum_1=0,sum0=0,ans=0;
	for(int i=1;i<=n;i++){
		long long x;
		scanf("%lld",&x);
		if(x>=1){
			ans+=x-1;
		}else if(x<=-1){
			ans+=-1-x;
			sum_1++;
		}else if(x==0){
			ans+=1;
			sum0++;
		}
	}
	if(sum0==0&&sum_1%2==1){
		ans+=2;
	}
	printf("%lld",ans);
	return 0;
}
```


 _**Name:** [Codeforces Round #580 (Div. 2)](https://codeforces.com/contest/1206)_ 

 _**Start:** Aug/18/2019 21:45UTC+8_ 

 _**Length** 02:10_ 

##  _**By Mubuky**_ 