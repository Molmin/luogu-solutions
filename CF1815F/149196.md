![](https://cdn.luogu.com.cn/upload/image_hosting/5c4viht1.png)

该做法可以解决选择的整数 $x$ 小于等于 $3$ 的情况。

首先这个图由三元环构成过于奇异了，一个很天才的思路是我们直接把这个忽略掉。考虑如下问题：

> 给定一张无向图，每个点都有点权 $w_i$。你需要为每条边定向，记 $d_i$ 为点 $i$ 在所有边被定向后的入度，你需要使得对于每条边 $(u,v)$ 都有 $w_u+d_u\neq w_v+d_v$。

上述问题（记作问题 $A$）的一个简单做法是初始设所有 $d_i=0$，然后每次找 $w_i+d_i$ 最小的点 $i$，将于 $i$ 相连的所有未定向边 $(i,x)$ 改为 $i\to x$。

然后我们发现原问题可以转化为问题 $A$。具体来说，单独考察每个三元环将边定向后对每个点的贡献。我们可以试着用一个三元组 $(x,y,z)$ 来描述对该三元环的边进行完操作后，顺时针依次编号的环上点 $1,2,3$ 的点权增加了 $x,y,z$。

然后我们发现问题 $A$ 中若我们考虑一个三元环的贡献，只会有两种本质不同情况：$(0,1,2)$ 和 $(1,1,1)$。又发现利用题目中所述的操作，可以达到这两种情况（读者自行手玩）：$(3,4,5)$ 和 $(4,4,4)$。于是我们先对于每个三元环，将环上点的点权均增加 $3$，然后跑问题 $A$ 的做法即可。