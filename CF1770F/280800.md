写一个一个一个题解。

题目要求所有可行序列的**序列异或和**的异或和，可以对一个下标 $i$ 单独考虑。计算其在所有可行序列中的异或和，最后把每个下标处贡献异或起来。

发现对于两个下标 $p, q$，它们的限制完全一样，也就是说 $p$ 的所有**可行解**和 $q$ 的所有**可行解**是可以双射的。

那么当 $n$ 为偶数时，相邻两个抵消，答案为 $0$；$n$ 为奇数时，只需要考虑 $a_1$ 在所有可行序列中的异或和。

既然是一道位运算题，不妨拆位考虑，考虑计算 $2^i$ 在 $a_1$ 的所有可行解中出现次数是奇数还是偶数。

这时候 $\operatorname{OR}=y$ 的限制比较难处理，考虑容斥。记 $f_p(y)$ 为 $\forall i\in[1, n]$，$a_i\subseteq y$ 时 $2^p$ 在 $a_1$ 中出现的次数（$p$ 为先前枚举的），则有：

$$
\mathrm{Ans}=\sum\limits_{y'\subseteq y} f(y')(-1)^{\vert y\vert-\vert y'\vert}
$$

考虑到我们计数的时候只出现次数是奇数还是偶数，所以需要 $\bmod 2$。注意到 $-1\equiv1\pmod{2}$，所以后面那个容斥系数等于没有。

现在考虑怎么计算 $f_p(y)$：

$$
f_p(y)=\sum_{\sum a_i=x}\prod[a_i\subseteq y][2^p\subseteq a_1]
$$

$\sum$ 和 $\prod$ 的下标均为 $1\le i\le n$，这步应该不难理解。

钦定 $2^p\subseteq a_1$，我们把 $2^p$ 从 $a_1$ 中提取出去则有：

$$
f_p(y)=\sum_{\sum a_i=x-2^p}[a_1\subseteq y-2^p]\prod_{i\neq1}[a_i\subseteq y]
$$

如果 $2^p\nsubseteq y$，我们就直接将其答案记为 $0$（原因显然）。

时刻注意我们的算式是模 $2$ 意义下的，所以**子集**这个条件可以直接写成组合数：

$$
f_p(y)=\sum_{\sum a_i=x-2^p}\binom{y-2^p}{a_1}\prod_{i\neq1} \binom{y}{a_i}
$$

这不就是范德蒙德卷积吗……上下的和都是定值。

$$
f_{p}(y)=\binom{ny-2^p}{x-2^p}
$$

于是可以 $O(1)$ 判断 $x-2^p$ 是否为 $ny-2^p$ 的子集，$O(1)$ 得到该算式的值。

加上一个 $O(y)$ 的枚举 $y'$ 进行容斥。

再加上一个最外层的 $O(\log y)$ 枚举 $2^p$。

于是在 $O(y\log y)$ 的时间复杂度内解决了这个问题。