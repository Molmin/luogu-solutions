求所有长 $n$ ， 或值为 $O$ ， 和为 $S$ 的序列的异或和 。

$O <2^{20} , n < 2^{40},S\leq 2^{60}$  


---

考察了对组合数奇偶性公式很深的理解。

前置知识：组合数奇偶性公式

$\binom n m \bmod 2=1$ 当且仅当 $m$ 的二进制表示是 $n$ 的子集。

证明：

因为 $2$ 是质数，使用卢卡斯定理分解至每个二进制为上 , $\binom x y = 1\ (x,y\leq 1)$   当且仅当 $x\leq y$ 。


---

首先根据序列的强对称性不妨将它看作集合，每个位置出现每个数的方案数是相同的，也就是说序列长度为偶数时答案为 $0$ ， 为奇数时每个数 $x$ 的贡献为 “满足条件的含 $x$ 的**集合**的个数”，由于时异或运算，只需要考虑奇偶即可。 

于是我们现在枚举某个元素的某一位为 $1$ 并计算贡献，令枚举的这位是 $x=2^i$，贡献为：和为 $S$ ，或和 $O$ 且第一项的 $2^i$ 位是 $1$  的 $n$ 项的序列的数量。 或为某个数时难以计算的，所以考虑容斥，那么要限制每个元素都是要求集合的子集。$x$的贡献为为

$$\sum_{P|O=O} (-1)^{conut(O)-conut(P)} \sum_{\sum a=S}[(a_1-x)|(P-x)=P-x][a_2|P=P]\dots[a_n|P=P] \bmod 2$$ 

其中 $|$ 为二进制或， $count(x)$ 表示 $x$ 在二进制下 $1$ 的个数。

式子的意义是限制 $a_1$ 的剩余部分和其它项是对应的子集的所有序列。
 
以为是在模 $2$ 意义下的，所以 $-1$ 不用考虑，后面那坨 $n$ 项的式子的看上去没办法求，但是如果我们逆用组合数奇偶公式就可以转化成 

$$\sum_{P|O=O} \sum_{\sum a=S}\binom {P-x}{a_1-x}\binom P {a_2} \dots\binom P {a_n}   \bmod 2$$

和为 $S$ 的所有序列这个神奇的限制可以让我们把后面的式子用范德蒙德卷积（组合意义），化为 

$$\binom{nP-x}{S-x}$$

再使用组合数奇偶性可以计算。

时间复杂度 $O(O\log O)$ 。

代码：
```cpp
    read(n,x,y);
    int ans = 0 ; 
    if(n % 2==0)puts("0"),exit(0);
    for(int b = 0 ; b < 20 ; ++ b) {
        if(y >> b & 1) { 
        for(int subset = 0 ; subset <= y ; ++ subset) {
            if((subset | y) == y) { 
                if(subset >> b & 1) {
                    int down = x - (1 << b);
                    int up = n * subset - (1 << b) ;
                    if( !(~up & down) ) ans ^= 1 << b ;  
                }
            }
        }
        }
    } 
    wrt(ans,'\n') ;
    return 0;
```

收录于[《超级无敌神仙炫酷无敌原神大王好题》](https://dreamerkk.blog.luogu.org/good-probs) 。